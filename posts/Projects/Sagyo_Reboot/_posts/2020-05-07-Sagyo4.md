---
layout: post
title: Sagyo MSA ê°œí¸ 1 - common, contact ì„œë¹„ìŠ¤
---

{% assign imgurl=site.imgbase|append: page.categories[-1] %}


- ë³¸ê²©ì ìœ¼ë¡œ Monolithicêµ¬ì¡°ì˜ Sagyoë¥¼ MSAë¡œ ê°œí¸í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ìš°ì„  ê³µí†µì½”ë“œ(common), ê³ ê°ì„¼í„°(contact) ì„œë¹„ìŠ¤ ë¶€í„° ê°œë°œì— ë“¤ì–´ê°”ìŠµë‹ˆë‹¤.
- ê³µí†µì½”ë“œëŠ” ì´ë¯¸ ì…ë ¥ëœ ì½”ë“œë“¤ë§Œ ì¶œë ¥í•´ì£¼ë©´ ë˜ê³ , ê³ ê°ì„¼í„°ëŠ” êµ¬ìƒ‰ë§ì¶”ê¸°ìš©ìœ¼ë¡œ ë„£ì–´ë†“ì•˜ê¸° ë•Œë¬¸ì— ê¸°ëŠ¥ì´ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.



## 0. í›„ê¸°

---

-  ë°°ìš´ê±¸ í† ëŒ€ë¡œ commonì„œë¹„ìŠ¤, contact ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•œ ê²°ê³¼ ëŠë‚€ì ì„ ì ìë©´... í”„ë ˆì„ì›Œí¬ì˜ ê¸°ëŠ¥ì´ ì •ë§ ë„ˆë¬´ ê°•ë ¥í•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.  <u>í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•´ì£¼ëŠ” ê¸°ë³¸ ê¸°ëŠ¥ë§Œ ì‚¬ìš©í•œë‹¤ë©´</u> ì½”ë“œëŠ” ì •ë§ ëª‡ ì¤„ì´ë©´ ëë‚©ë‹ˆë‹¤.

    ```java
    // ì£¼ì†Œ - ì‹œ ë„ë©”ì¸
    @Entity
    @Table(name="ADDR_SI") // í…Œì´ë¸”ì´ë¦„ê³¼ í´ë˜ìŠ¤ ì´ë¦„ì´ ë‹¤ë¥¼ ê²½ìš° ì„¤ì •
public class AddrSi {
        @Id
        @Column(name="ADDRSIID")
        private String addrSiId;
        @Column(name="ADDRSINAME")
        private String addrSiName;

        @OneToMany
        @JoinColumn(name="ADDRSIID") // ì‹¤ì œ DBì—ì„œ keyë¡œ ë“¤ì–´ê°ˆ ê²ƒ
        Set<AddrGu> gu; // ë„ë©”ì¸ pathë¡œ ë“¤ì–´ê°ˆ ì´ë¦„

        // getter/setter
    }
    ```
    
    ```java
// ì£¼ì†Œ - ì‹œ Repository
    @RestResource(path="si", rel="si")
    public interface AddrSiRepository extends CrudRepository<AddrSi, String> {
    }
```
    
- ì €ëŠ” ì§€ê¸ˆ REST ë°©ì‹ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•´ ë²„ë²…ì´ê³  ìˆì§€ë§Œ, REST ë°©ì‹ì— ì •í†µí•œ ì‚¬ëŒì´ ì²˜ìŒë¶€í„° ë¦¬ì†ŒìŠ¤ë¥¼ êµ¬ì„±í•œë‹¤ë©´ ê°œë°œì€ ì •ë§ ìˆœì‹ê°„ì— ëë‚  ê²ƒ ê°™ìŠµë‹ˆë‹¤. 

- CRUDì¤‘ CUDë„ í”„ë ˆì„ì›Œí¬ê°€ ì•Œì•„ì„œ êµ¬í˜„í•´ì¤˜ì„œ í•´ë‹¹ ìš”ì²­ì„ ë§‰ë˜ê°€ ê¶Œí•œ ê²€ì‚¬ë¥¼ í•˜ë˜ê°€ í•´ì•¼ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. (DELETEê°€ ë°”ë¡œ ë˜ëŠ”ê±¸ ë³´ê³  ì„¬ì§“í–ˆìŠµë‹ˆë‹¤.)

- í”„ë ˆì„ì›Œí¬ë“¤ì´ ê°œë°œì ëŒ€ì‹  ë„ˆë¬´ ë§ì€ ì¼ì„ í•´ì¤˜ì„œ í¸í•˜ê³  ì¢‹ê¸°ë„ í•˜ì§€ë§Œ í•œí¸ìœ¼ë¡  ì œê°€ ì´ í”„ë ˆì„ì›Œí¬ë“¤ì„ ëª¨ë‘ ë”°ë¼ê°ˆ ìˆ˜ ìˆì„ì§€ ê±±ì •ì´ ë˜ê¸°ë„ í•©ë‹ˆë‹¤.

 

## 1. Dependency

---

- common ì„œë¹„ìŠ¤ì™€ contact ì„œë¹„ìŠ¤ëŠ” ì•„ë˜ì˜ Dependencyë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

  ```xml
  <dependencies>
    <!-- Spring Boot Starter Web -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
  
    <!-- Spring Data - REST -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-rest</artifactId>
    </dependency>	
  
    <!-- Spring Data JPA -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
  
    <!-- ì»¤ë„¥ì…˜í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬(ë³´í†µ dbcpë¥¼ ë§ì´ì”€) -->
    <dependency>
      <groupId>com.zaxxer</groupId>
      <artifactId>HikariCP</artifactId>
    </dependency>
  
    <!-- ojdbc ë“œë¼ì´ë²„ -->
    <dependency>
      <groupId>com.oracle</groupId>
      <artifactId>ojdbc6</artifactId>
      <version>11.2.0.3</version>
    </dependency>
  
    <!-- Spring Boot í…ŒìŠ¤íŠ¸ -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-test</artifactId>
      <scope>test</scope>
      <exclusions>
        <exclusion>
          <groupId>org.junit.vintage</groupId>
          <artifactId>junit-vintage-engine</artifactId>
        </exclusion>
      </exclusions>
      </dependency>
  </dependencies>
  ```

  



## 2. common ì„œë¹„ìŠ¤

---

### 2.1. í˜¸ì¶œ API

- ê³µí†µ ì½”ë“œë¥¼ ê´€ë¦¬í•˜ëŠ” common ì„œë¹„ìŠ¤ì—ì„  ì¡°íšŒë§Œ í•˜ë©´ ëê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ìš”ì²­ë§Œ ë§ˆë ¨í•´ë’€ìŠµë‹ˆë‹¤.(POST, PUT, DELETEë„ í”„ë ˆì„ì›Œí¬ ìì²´ì—ì„œ êµ¬í˜„í•´ì¤¬ì§€ë§Œ, ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ”ê±´ ì•„ë˜ì˜ ìš”ì²­ë§Œ ì‚¬ìš©í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.)

  - GET /common/si ğŸ‘‰ ì „ì²´ ì‹œ ë¦¬ìŠ¤íŠ¸

    ```json
    {
      "_embedded" : {
        "si" : [ {
          "addrSiId" : "SI00001",
          "addrSiName" : "ì„œìš¸",
          "_links" : {
            "self" : {
              "href" : "http://localhost:8090/common/si/SI00001"
            },
            "addrSi" : {
              "href" : "http://localhost:8090/common/si/SI00001"
            },
            "gu" : {
              "href" : "http://localhost:8090/common/si/SI00001/gu"
            }
          }
        }
        :
        :
        , {
          "addrSiId" : "SI00005",
          "addrSiName" : "ê´‘ì£¼",
          "_links" : {
            "self" : {
              "href" : "http://localhost:8090/common/si/SI00005"
            },
            "addrSi" : {
              "href" : "http://localhost:8090/common/si/SI00005"
            },
            "gu" : {
              "href" : "http://localhost:8090/common/si/SI00005/gu"
            }
          }
        } ]
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:8090/common/si"
        },
        "profile" : {
          "href" : "http://localhost:8090/common/profile/si"
        }
      }
    }
    ```

  - GET /common/si/{si} ğŸ‘‰ ì‹œ 1ê°œ ìƒì„¸ì‚¬í•­ (ì•„ë˜ëŠ” {si}=="SI00001")

    ```json
    {
      "addrSiId" : "SI00001",
      "addrSiName" : "ì„œìš¸",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8090/common/si/SI00001"
        },
        "addrSi" : {
          "href" : "http://localhost:8090/common/si/SI00001"
        },
        "gu" : {
          "href" : "http://localhost:8090/common/si/SI00001/gu"
        }
      }
    }
    ```

  - GET /common/si/{si}/gu  ğŸ‘‰ ì‹œ 1ê°œì˜ êµ¬ ì „ì²´ ë¦¬ìŠ¤íŠ¸ (ì•„ë˜ëŠ” {si}=="SI00001")

    ```json
    {
      "_embedded" : {
        "gu" : [ {
          "addrGuId" : "GU00023",
          "addrGuName" : "ì¢…ë¡œêµ¬",
          "_links" : {
            "self" : {
              "href" : "http://localhost:8090/common/gu/GU00023"
            },
            "addrGu" : {
              "href" : "http://localhost:8090/common/gu/GU00023"
            }
          }
        }
        :
        :
        , {
          "addrGuId" : "GU00009",
          "addrGuName" : "ë…¸ì›êµ¬",
          "_links" : {
            "self" : {
              "href" : "http://localhost:8090/common/gu/GU00009"
            },
            "addrGu" : {
              "href" : "http://localhost:8090/common/gu/GU00009"
            }
          }
        } ]
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:8090/common/si/SI00001/gu"
        }
      }
    }
    ```

  - GET /common/si/{si}/gu/{gu} ğŸ‘‰ í•´ë‹¹ ì‹œ, êµ¬ì— ëŒ€í•œ ìƒì„¸ì‚¬í•­

    ```json
    {
      "addrGuId" : "GU00003",
      "addrGuName" : "ê°•ì„œêµ¬",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8090/common/gu/GU00003"
        },
        "addrGu" : {
          "href" : "http://localhost:8090/common/gu/GU00003"
        }
      }
    }
    ```

  - ë‹¤ìŒ 4ê°œì˜ ê³µí†µì½”ë“œëŠ” ìœ„ ì‹œ/êµ¬ì™€ ë‹¤ë¥¼ê²Œ ì—†ì–´ì„œ ê²°ê³¼ëŠ” ìƒëµí•©ë‹ˆë‹¤.

  - GET /common/interest-main 

  - GET /common/interest-main/{interest-main}

  - GET /common/interest-main/{interest-main}/interest-sub

  - GET /common/interest-main/{interest-main}/interest-sub/{interest-sub}



### 2.2. ê¸°ë¡ ì‚¬í•­

- Spring Boot, Spring Dataì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì‚¬í•­ ì™¸ì—, ë‹¤ìŒì— ê°œë°œí•  ë•Œ ì‚¬ìš©í• ë§Œí•œ ê²ƒë“¤ì„ ê¸°ë¡í•´ë‘ê² ìŠµë‹ˆë‹¤.

- í…Œì´ë¸” ì¡°ì¸ ì‹œí‚¤ê¸° `@OneToMany`, `@JoinColumn`

  ```java
  @Entity
  @Table(name="ADDR_SI") // í…Œì´ë¸”ì´ë¦„ê³¼ í´ë˜ìŠ¤ ì´ë¦„ì´ ë‹¤ë¥¼ ê²½ìš° ì„¤ì •
  public class AddrSi {
  	
  	@Id
  	@Column(name="ADDRSIID")
  	private String addrSiId;
  	@Column(name="ADDRSINAME")
  	private String addrSiName;
  	
  	@OneToMany
  	@JoinColumn(name="ADDRSIID") // ì‹¤ì œ DBì—ì„œ keyë¡œ ë“¤ì–´ê°ˆ ê²ƒ
  	Set<AddrGu> gu; // ë„ë©”ì¸ pathë¡œ ë“¤ì–´ê°ˆ ì´ë¦„
  	
  	/**
  	getter/setter
  	**/
  }
  ```

- Spring Data ì¡°íšŒ ê²°ê³¼ì— id ì»¬ëŸ¼ë„ ì¶”ê°€ì‹œí‚¤ê¸°(ê¸°ë³¸ì ìœ¼ë¡  `@Id` ì»¬ëŸ¼ì€ ë‚˜ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.)

  ```java
  @Configuration
  public class CommonConfiguration extends RepositoryRestConfigurerAdapter {
  
      @Autowired
      private EntityManager entityManager;
  
      @Override
      public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {
          config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(e -> e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0]));
      }
  }
  // ì¶œì²˜ : https://stackoverflow.com/questions/30912826/expose-all-ids-when-using-spring-data-rest
  ```

- Spring Data JPA + Hibernate ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ì¿¼ë¦¬ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ ì‚¬ìš©í•˜ê¸° (ì•„ë˜ ë‘ ë©”ì„œë“œëŠ” ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œëŠ” ì•„ë‹™ë‹ˆë‹¤.)

  ```java
  @RestResource(path="gu", rel="gu")
  public interface AddrGuRepository extends CrudRepository<AddrGu, String>{
  	
  	@Query(value = "SELECT ADDRGUID, ADDRGUNAME FROM ADDR_GU WHERE ADDRSIID=:si", nativeQuery = true)
  	List<AddrGu> findBySiId(String si);
  	
  	@Query(value = "SELECT ADDRGUID, ADDRGUNAME FROM ADDR_GU WHERE ADDRSIID=:si AND ADDRGUID=:gu", nativeQuery = true)
  	Optional<AddrGu> findOneGu(String si, String gu);
  }
  ```



## 3. contact ì„œë¹„ìŠ¤

---

- ê³ ê°ì„¼í„°(contact) ì„œë¹„ìŠ¤ëŠ” ì‚¬ì‹¤ Sagyo í”„ë¡œì íŠ¸ì—ì„  ì›¹ ì„œë¹„ìŠ¤ì˜ êµ¬ìƒ‰ ë§ì¶”ê¸°ìš©ìœ¼ë¡œ ë„£ì–´ ë†“ì€ ì„œë¹„ìŠ¤ë¼ ê¸°ëŠ¥ì€ ê°„ë‹¨í•©ë‹ˆë‹¤.
  - ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ READ
  - ê³µì§€ì‚¬í•­ READ
  - 1:1 ì§ˆë¬¸ CREATE

### 3.1. í˜ì´ì§•, ì •ë ¬ ì¡°íšŒ

- ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ê³µì§€ì‚¬í•­ ì¡°íšŒëŠ” ê²Œì‹œì¼ ì—­ìˆœ, 10ê°œì”© í˜ì´ì§• ì²˜ë¦¬ë¥¼ í–ˆìŠµë‹ˆë‹¤. 

- RepositoryëŠ” `CrudRepository`, `Repository`ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•œ `PagingAndSortingRepository` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

  ```java
  @RestResource(path="notice", rel="notice")
  public interface NoticeRepository extends PagingAndSortingRepository<Notice, String> {
  	// í™•ì¥ë§Œ í•˜ë©´ ê¸°ë³¸ ê¸°ëŠ¥ì€ êµ¬í˜„ë˜ë‹ˆ ì½”ë“œ ì˜¬ë¦¬ê¸°ë„ ë¯¼ë§í•©ë‹ˆë‹¤.
  }
  ```

- `@RepositoryRestController` ë¥¼ ì´ìš©í•´ ê¸°ì¡´ Spring Data RESTì˜ ìš”ì²­ ê²½ë¡œë¥¼ ë®ì–´ì¼ê³ , ìš”ì²­ ë°›ëŠ” ë©”ì„œë“œë¥¼ ë”°ë¡œ ë§Œë“¤ê³  í•´ë‹¹ ë©”ì„œë“œ ì•ˆì—ì„œ Pageable ê°ì²´ë¥¼ êµ¬ì„±í•œ ë’¤ `PagingAndSortingRepository`ì˜ `findAll(Pageable)`ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

  ```java
  @RepositoryRestController
  public class NoticeController 
  {
  	@Autowired
  	NoticeRepository noticeRepository;
  	
  	@RequestMapping(value="/notice", method = RequestMethod.GET)
  	public @ResponseBody Iterable<Notice> findAllBySortAndPaging(@RequestParam(name = "page", defaultValue = "0") String pageNum) 
      {
          Pageable page = PageRequest.of(Integer.parseInt(pageNum), 10, Sort.by(Sort.Direction.DESC, "noticeDate"));
  		return noticeRepository.findAll(page);
  	}
  }
  ```

- GET /contact/notice?page={pageNum} ğŸ‘‰ ê³µì§€ì‚¬í•­ ì¡°íšŒ(ê¸°ë³¸ 0ë²ˆ í˜ì´ì§€, 10ê°œ)

  ```json
  {
    "content" : [ {
      "id" : "6",
      "title" : "ì œëª©",
      "contents" : "ë‚´ìš©",
      "noticeDate" : "2020-04-18 00:00:00"
    }, {
      "id" : "30",
      "title" : "ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë° ìœ„ì¹˜ê¸°ë°˜ ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë³€ê²½ ì•ˆë‚´",
      "contents" : "ì•ˆë…•í•˜ì„¸ìš”, íšŒì›ë‹˜....ë™ì˜í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.",
      "noticeDate" : "2019-06-11 00:00:00"
    }
     :
     :
    , {
      "id" : "23",
      "title" : "3ì›” 20ì¼ (ìˆ˜) ì‚¬êµ ì›¹ì‚¬ì´íŠ¸ ì—…ë°ì´íŠ¸ ì•ˆë‚´",
      "contents" : "ì•ˆë…•í•˜ì„¸ìš” íšŒì›ë‹˜...ì—…ë°ì´íŠ¸ ë  ì˜ˆì •ì…ë‹ˆë‹¤!",
      "noticeDate" : "2019-03-20 00:00:00"
    } ],
    "pageable" : {
      "sort" : {
        "sorted" : true,
        "unsorted" : false,
        "empty" : false
      },
      "offset" : 0,
      "pageNumber" : 0,
      "pageSize" : 10,
      "paged" : true,
      "unpaged" : false
    },
    "totalElements" : 28,
    "last" : false,
    "totalPages" : 3,
    "size" : 10,
    "number" : 0,
    "sort" : {
      "sorted" : true,
      "unsorted" : false,
      "empty" : false
    },
    "first" : true,
    "numberOfElements" : 10,
    "empty" : false
  }
  ```

- ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ì¡°íšŒëŠ” ê³µì§€ì‚¬í•­ ì¡°íšŒì™€ ë™ì¼í•˜ë¯€ë¡œ ìƒëµí•©ë‹ˆë‹¤.



### 3.2. 1:1 ì§ˆë¬¸ ì…ë ¥

- Spring Data JPAì—ì„œ CREATEëŠ” `Repository` ì¸í„°í˜ì´ìŠ¤ì˜ Save ë©”ì„œë“œë¥¼ ì´ìš©í•©ë‹ˆë‹¤.

- ê¸°ì¡´ 1:1 ì§ˆë¬¸ ì…ë ¥ì—ì„  idëŠ” ì‹œí€€ìŠ¤ë¥¼, ì§ˆë¬¸ ì¼ìëŠ” SYSDATEë¥¼ ì´ìš©í–ˆìŠµë‹ˆë‹¤. ì‹œí€€ìŠ¤ì™€ SYSDATEëŠ” ë„ë©”ì¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì–´ë…¸í…Œì´ì…˜ë“¤ì„ ì„¤ì •í•´ì£¼ë©´ ì‰½ê²Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.(í•˜ì§€ë§Œ ì‰¬ìš´ ë°©ë²•ì„ ì°¾ëŠ”ë° ê½¤ ë§ì€ ì‹œê°„ì„ ì¼ìŠµë‹ˆë‹¤.. ğŸ˜¥)

  - ì—”í„°í‹° í´ë˜ìŠ¤ì— `@SequenceGenerator`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. `@SequenceGenerator`ì—ì„œ sequenceNameì€ ì˜¤ë¼í´ DBì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹œí€€ìŠ¤ ì´ë¦„ì…ë‹ˆë‹¤. 
  - ë‹¤ìŒ id í•„ë“œì— `@GeneratedValue`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. `@GeneratedValue`ì—ì„œ generatorëŠ” ìœ„ì—ì„œ ì¶”ê°€í•œ `@SequenceGenerator`ì˜ nameì…ë‹ˆë‹¤. 
  - ì¤‘ìš”í•œê±´ strategyì¸ë°, ì‹ë³„ìë¥¼ ì–´ë–»ê²Œ ìƒì„±í• ì§€ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.   AUTO, TABLE, SEQUENCE, IDENTITY ê°€ ìˆìŠµë‹ˆë‹¤. 
    - AUTOë¥¼ ê³ ë¥´ë©´ ì˜¤ë¼í´, MySQLë“± ì‚¬ìš©ì¤‘ì¸ DBì— ë”°ë¼ SEQUENCE, IDENTITYë¥¼ ì •í•©ë‹ˆë‹¤. 
    - TABLEì€ ì‹ë³„í‚¤ë¥¼ ìœ„í•œ í…Œì´ë¸”ì—ì„œ í‚¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 
    - SEQUENCEëŠ” ì˜¤ë¼í´ ë“±ì˜ ì‹œí€€ìŠ¤
    - IDENTITYëŠ” Mysql ì²˜ëŸ¼ Auto-Increment ì»¬ëŸ¼ì´ ê°€ëŠ¥í•œ ê³³ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
  - ë‚ ì§œì— SYSDATEë¥¼ ë„£ëŠ”ê±´ í…Œì´ë¸” ì»¬ëŸ¼ì— DEFAULT SYSDATEê°€ ê±¸ë ¤ìˆê¸° ë•Œë¬¸ì— directQuestionDate ì†ì„±ì— insertable=falseë§Œ ê±¸ì–´ì„œ INSERT ì¿¼ë¦¬ì—ì„œ ë¹ ì§€ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.

  ```java
  @SequenceGenerator(name="DIRECT_QUESTION_SEQ_GENERATOR"
  				 , sequenceName = "DIRECT_QUESTION_SEQ"
  				 , allocationSize = 1)
  @Entity
  @Table(name="DIRECT_QUESTION")
  public class DirectQuestion {
  	@Id
  	@GeneratedValue(strategy = GenerationType.SEQUENCE
  				  , generator = "DIRECT_QUESTION_SEQ_GENERATOR")
  	@Column(name="ID")
  	private int id;
  	@Column(name="TITLE")
  	private String title;
  	@Column(name="USERID")
  	private String userId;
  	@Column(name="CONTENTS")
  	private String contents;
  	@Column(name="DIRECTQUESTIONDATE"
  		  , insertable = false)
  	private String directQuestionDate; 
  	
  	// getter/setter
  	
  }
  ```

- ìœ„ì˜ ì„¤ì •ì„ í–ˆë‹¤ë©´ POST ë©”ì„œë“œë¡œ Bodyì— JSON ë°ì´í„°ë¥¼ ë‹´ì•„ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. HibernateëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ì‹œí€€ìŠ¤ê°€ ì„¤ì • ëê³ ,  directQuestionDateëŠ” INSERTë¬¸ì—ì„œ ë¹ ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```
  Hibernate: select direct_question_seq.nextval from dual
  Hibernate: insert into direct_question (contents, title, userid, id) values (?, ?, ?, ?)
  ```

- POST /direct-question ğŸ‘‰ 1:1 ì§ˆë¬¸ ì…ë ¥(ì•„ë˜ëŠ” JSONë°ì´í„°ë¥¼ ë‹´ì€ Body)

  ```json
  {
  	"title" : "title",
  	"userId" : "b001",
  	"contents" : "contents~~"
  }
  ```

- ë¦¬í„´ ê°’

  ```json
  {
    "id": 21,
    "title": "title",
    "userId": "b001",
    "contents": "contents~~",
    "directQuestionDate": null,
    "_links": {
      "self": {
        "href": "http://localhost:8010/contact/direct-question/21"
      },
      "directQuestion": {
        "href": "http://localhost:8010/contact/direct-question/21"
      }
    }
  }
  ```

  - directQuestionDateëŠ” Hibernateì—ì„œ ì…ë ¥í•œê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì— nullì´ ë‚˜ì˜¤ëŠ”ë° DBì—ëŠ” SYSDATEë¡œ ì˜ ë“¤ì–´ê°€ìˆìŠµë‹ˆë‹¤. DBìì²´ì—ì„œ ì…ë ¥í•œ ê²°ê³¼ë¥¼ ë¦¬í„´ê°’ì— í¬í•¨ ì‹œí‚¤ëŠ” ë°©ë²•ì„ ë³¸ ê²ƒ ê°™ì€ë°... ë§í¬ê°€ ì–´ë”¨ë”ë¼.. 

