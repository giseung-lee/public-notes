---

layout : post
title : μ•κ³ λ¦¬μ¦ - μ„μƒμ •λ ¬(Topological Sort)

---

{% assign imgurl=site.imgbase|append: page.categories[-1] %}

## μ„μƒμ •λ ¬ - μμ„ μλ” λ…Έλ“ λ°©λ¬Έ

---

&nbsp;μ„μƒΒ μ •λ ¬ λ¬Έμ λ” μ„μƒ μ •λ ¬μ„ μ•κ³  μλ‹¤λ©΄ λΉ„κµμ  μμ›”ν•κ² μ§„ν–‰ ν•  μ μμ§€λ§(λ¬Έμ μ—μ„ μ„μƒ μ •λ ¬μ„ μΊμΉν•κΈ° μ‰¬μ°λ―€λ΅), μ„μƒ μ •λ ¬μ„ λ¨λ¥΄κ³  μλ‹¤λ©΄ κ½¤λ‚ μ• λ¥Ό λ¨Ήμ„ μ μλ” λ¬Έμ μ…λ‹λ‹¤.

&nbsp;μ„μƒΒ μ •λ ¬μ€ μ‰½κ² λ§ν•΄ **λ°©ν–¥ κ·Έλν”„μ—μ„μ μμ„ μλ” λ…Έλ“ λ°©λ¬Έ**μ…λ‹λ‹¤. RPGκ²μ„μ—μ„ ν”ν λ³Ό μ μλ” μ¤ν‚¬ νΈλ¦¬λ‚ λ€ν•™μ—μ„μ μ„ μ κ³Όλ©κ³Ό κ°™μ΄ λ…Έλ“λ“¤ κ°„μ— μμ„κ°€ μλ” κ·Έλν”„μ—μ„ μ‚¬μ©λ©λ‹λ‹¤. 

![Topological_Sort1.png]({{ imgurl }}/Topological_Sort1.png)

&nbsp;μ„μ™€Β κ°™μ€ ν•™μµ λ΅λ“λ§µμ΄ μλ‹¤κ³  κ°€μ •ν•©μ‹λ‹¤. κ³Όλ©κ°„μ μ°μ„ μμ„λ¥Ό μ§€ν‚¤λ©΄μ„ μ„μ λ¨λ“  μμ—…μ„ λ“¤μ„ μ μλ” κ²½μ°μ μλ” μ•„λμ™€ κ°™μ΄ λ‹¤μ„― κ°€μ§€μ…λ‹λ‹¤. (μ•„λμ™€ κ°™μ΄ μ„μƒμ •λ ¬λ΅ λ°©λ¬Έν• λ…Έλ“μ μμ„λ¥Ό μ„μƒ μμ„(Topology Order)λΌκ³  ν•©λ‹λ‹¤.)

- Java - Spring - Oracle - JPA - Spring JPA
- Java - Oracle - JPA - Spring - Spring JPA
- Java - Oracle - Spring - JPA - Spring JPA
- Oracle - Java - Spring - JPA - Spring JPA
- Oracle - Java - JPA - Spring - Spring JPA

&nbsp;μ΄λ ‡κ² λ‹¨μν• μ„μƒμ •λ ¬μ€ λ§μ€ κ°€μ§“μκ°€ λ‚μ¬ μ μμµλ‹λ‹¤. μ‰½κ² λ¬Έμ λ¥Ό λ‚Έλ‹¤λ©΄  [https://www.acmicpc.net/problem/2252](https://www.acmicpc.net/problem/2252) λ¬Έμ μ²λΌ μ•„λ¬΄ μ„μƒ μμ„ μ¤‘ ν•λ‚λ¥Ό κµ¬ν•λΌκ³  ν•  μλ„ μμ§€λ§, λ€λ¶€λ¶„μ λ¬Έμ λ” μ¶”κ°€ μ΅°κ±΄μ„ λ¶™μ—¬ μ—¬λ¬ μ„μƒ μμ„ μ¤‘ ν• κ°€μ§€μ μ„μƒ μμ„λ§μ„ μ”κµ¬ν•©λ‹λ‹¤. 

&nbsp;[https://www.acmicpc.net/problem/1766](https://www.acmicpc.net/problem/1766) μ΄ λ¬Έμ λ” μ„μƒ μμ„λ“¤ μ¤‘ λ…Έλ“ λ²νΈκ°€ μ‚¬μ „μμΌλ΅ μ•μ„λ” μ„μƒ μμ„λ¥Ό μ”κµ¬ν•©λ‹λ‹¤. [https://www.acmicpc.net/problem/2056](https://www.acmicpc.net/problem/2056) μ΄ λ¬Έμ λ” λ…Έλ“λ¥Ό ν•λ‚μ μ‘μ—…μΌλ΅ λ³΄κ³ , μ‘μ—…μ— κ±Έλ¦¬λ” μ‹κ°„μ„ λ°°μ •ν–μµλ‹λ‹¤. κ³µμ •μ κ³µκΈ°λ¥Ό κ³„μ‚°ν•λ“―μ΄ μ„ ν–‰ κ΄€κ³„κ°€ μ—†λ” μ‘μ—…λ“¤μ€ λ™μ‹μ— μ§„ν–‰ν•  μ μμ„ λ•, μµλ‹¨ μ‹κ°„μ΄ κ±Έλ¦¬λ” μ„μƒ μμ„λ¥Ό κµ¬ν•λ” λ¬Έμ μ…λ‹λ‹¤.(κµ¬ν„μ΄ μ μ  κΉλ‹¤λ΅μ›μ§‘λ‹λ‹¤.. π¥π¥)



## μ‘λ™ λ°©μ‹

---

&nbsp;μ„μƒΒ μ •λ ¬ λ¬Έμ λ” λ¬Έμ μ μ„Έλ¶€ μ΅°κ±΄μ— λ”°λΌ κµ¬ν„ λ΅μ§μ΄ κ½¤ ν¬κ² λ‹¬λΌμ§‘λ‹λ‹¤. ν•μ§€λ§ λ¨λ“  μ„μƒ μ •λ ¬μ μ„Έλ¶€ λ΅μ§μ€ μ•„λμ™€ κ°™μ€ ν° λ΅μ§ μ•μ—μ„ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.

- κ° λ…Έλ“ λ³„λ΅ μ§„μ… μ°¨μ(μ„ ν–‰ ν•΄μ•Ό ν•λ” λ…Έλ“ μ)λ¥Ό κµ¬ν•©λ‹λ‹¤.
- λ¨λ“  λ…Έλ“λ¥Ό λ°©λ¬Έν•  λ• κΉμ§€ λ°λ³µν•©λ‹λ‹¤.
  - μ§„μ… μ°¨μκ°€ 0μΈ λ…Έλ“(μ„ ν–‰ ν•  κ²ƒμ΄ μ—†λ” λ…Έλ“)λ¥Ό λ°©λ¬Έν•©λ‹λ‹¤.
  - λ°©λ¬Έν• λ…Έλ“λ¥Ό μ„ ν–‰ λ…Έλ“λ΅ κ°€μ§€κ³  μλ” λ…Έλ“λ“¤μ μ§„μ… μ°¨μλ¥Ό 1 κΉμµλ‹λ‹¤.

&nbsp;μ„μΒ μμ‹λ¥Ό λ³΄λ©° μ„¤λ…λ“λ¦¬κ² μµλ‹λ‹¤.

![Topological_Sort2.png]({{ imgurl }}/Topological_Sort2.png)

&nbsp;κ°Β λ…Έλ“μ μ΄κΈ° μ§„μ… μ°¨μλ¥Ό κΈ°λ΅ν•κ³  μ§„μ…μ°¨μκ°€ 0μΈ Javaλ¶€ν„° μ‹μ‘ν•©λ‹λ‹¤.

![Topological_Sort3.png]({{ imgurl }}/Topological_Sort3.png)

&nbsp;Javaλ¥Ό μ„ ν–‰ κ³Όλ©μΌλ΅ κ°€μ§€κ³  μλ JPAμ™€ Springμ μ§„μ… μ°¨μλ¥Ό κ°μ† μ‹ν‚¤κ³  λ‹¤μ μ§„μ…μ°¨μκ°€ 0μΈ Oracleμ„ λ°©λ¬Έν•©λ‹λ‹¤.(λ¬Όλ΅ , Spring λ¶€ν„° λ°©λ¬Έν•  μλ„ μμµλ‹λ‹¤.)

![Topological_Sort4.png]({{ imgurl }}/Topological_Sort4.png)

&nbsp;Oracleμ„ μ„ ν–‰ κ³Όλ©μΌλ΅ κ°€μ§€κ³  μλ JPAμ™€ Spring JPAμ μ§„μ…μ°¨μλ¥Ό κ°μ†μ‹ν‚µλ‹λ‹¤. λ‹¤μμΌλ΅  JPAλ¥Ό λ°©λ¬Έν•©λ‹λ‹¤.

![Topological_Sort5.png]({{ imgurl }}/Topological_Sort5.png)

&nbsp;Spring JPAμ μ§„μ…μ°¨μλ¥Ό κ°μ†μ‹ν‚¤κ³  Springμ— λ°©λ¬Έν•©λ‹λ‹¤.

![Topological_Sort6.png]({{ imgurl }}/Topological_Sort6.png)

&nbsp;λ§μ§€λ§‰μΌλ΅Β Spring JPAμ— λ°©λ¬Έν•©λ‹λ‹¤.

![Topological_Sort7.png]({{ imgurl }}/Topological_Sort7.png)

&nbsp;μ°μ„ Β μμ„λ¥Ό μ§€ν‚¤λ©° λ¨λ“ Β λ…Έλ“μ— λ°©λ¬Έν–μµλ‹λ‹¤.



## μμ 1 - DFSλ¥Ό μ΄μ©ν• κµ¬ν„

---

&nbsp;μ„μƒΒ μ •λ ¬μ κ²½μ° μ•μ„ λ§ν–λ‹¤μ‹¶μ΄ λ¬Έμ μ μ„Έλ¶€ μ΅°κ±΄μ— λ”°λΌ λ‹¤μ–‘ν•κ² κµ¬ν„μ΄ κ°€λ¥ν•©λ‹λ‹¤. 

&nbsp;κ°€μ¥ κ°„λ‹¨ν• λ°©λ²•μΌλ΅  DFSλ¥Ό μ΄μ©ν•λ” κ²ƒμ…λ‹λ‹¤. μ•μ„ λ§ν• κΈ°λ³Έ λ™μ‘κ³Όμ •κ³Όλ” μ΅°κΈ λ‹¤λ¥Έ κ²ƒ κ°™μ§€λ§ λ³Έμ§μ μΌλ΅  λ™μΌν•©λ‹λ‹¤. [https://www.cs.usfca.edu/~galles/visualization/TopoSortDFS.html](https://www.cs.usfca.edu/~galles/visualization/TopoSortDFS.html) λ¥Ό λ³΄μ‹λ©΄ DFSλ¥Ό μ΄μ©ν• λ™μ‘ κ³Όμ •μ„ μ• λ‹λ©”μ΄μ…μΌλ΅ λ³Ό μ μμµλ‹λ‹¤.  κ°€μ¥ κ°„λ‹¨ν• λ°©λ²•μΈ DFSλ” μ§„μ… μ°¨μλ¥Ό ν¬κ² ν™μ©ν•μ§€λ„ μ•μµλ‹λ‹¤.(μ•„μ μ—†μ΄ μν–‰ν•  μλ„ μμµλ‹λ‹¤.)

&nbsp;μ§„μ… μ°¨μκ°€ 0μΈ λ…Έλ“λ¶€ν„° DFSλ¥Ό μν–‰ ν•λ, ν•΄λ‹Ή λ…Έλ“μ— μ—°κ²°λ ν›„ν–‰ λ…Έλ“λ¶€ν„° λ°©λ¬Έν•κ³  ν›„ν–‰ λ…Έλ“λ“¤μ„ λ¨λ‘ λ°©λ¬Έν• λ’¤μ— ν•΄λ‹Ή λ…Έλ“λ¥Ό λ°©λ¬Έν•©λ‹λ‹¤. μ„μ μμ‹λ¥Ό λ³΄μ‹κ² μµλ‹λ‹¤. 

```
5 6
Java Oracle Spring JPA SpringJPA
Oracle SpringJPA
Java JPA
Spring SpringJPA
Oracle JPA
Java Spring
JPA SpringJPA
```

&nbsp;μ„μ™€Β κ°™μ€ μ…λ ¥μ„ μ¤λ‹λ‹¤. μ²« μ¤„μ n, mμ€ λ…Έλ“ μ, κ°„μ„  μμ…λ‹λ‹¤. λ‹¤μ μ¤„μ€ λ…Έλ“ nκ°μ μ΄λ¦„μ…λ‹λ‹¤. λ‹¤μλ¶€ν„° mκ°μ μ¤„μ€ {μ„ ν–‰, ν›„ν–‰} λ…Έλ“μ…λ‹λ‹¤.

```python
# λ…Έλ“ κ°―μ, κ°„μ„  κ°―μ μ…λ ¥
n, m = map(int, input().split())
# λ…Έλ“ μ…λ ¥
subjects = list(map(str, input().split()))

# μ§„μ… μ°¨μ κΈ°λ΅ dictionary
indegree = {};
# κ°„μ„  κΈ°λ΅ dictionary
edges = {};
# μ§„μ… μ°¨μ λ° κ°„μ„  μ΄κΈ°ν™”
for subject in subjects:
    indegree[subject] = 0
    edges[subject] = []

# κ°„μ„  μ…λ ¥
for _ in range(m):
    before, after = map(str, input().split())
    indegree[after] += 1;
    edges[before].append(after)
```

&nbsp;λ°μ΄ν„°λ¥ΌΒ μ…λ ¥λ°›κ³  μ§„μ…μ°¨μμ™€ κ°„μ„ μ„ μ΄κΈ°ν™”ν•κ³ , κ°„μ„ μ„ μ…λ ¥ λ°›μµλ‹λ‹¤.

```python
# dfs
def dfs(edges, visited, result, key):
    if not visited[key]:
        # μ—°κ²°λ ν›„ν–‰ λ…Έλ“λ¶€ν„° λ°©λ¬Έ
        for next_ in edges[key]:
            if not visited[next_]:
                dfs(edges, visited, result, next_)
        # ν›„ν–‰ λ…Έλ“λ¥Ό λ¨λ“ λ°©λ¬Έ ν›„ ν„μ¬ λ…Έλ“ κΈ°λ΅
        visited[key] = True;
        result.append(key)
```

&nbsp;DFSλ” μ„μ™€ κ°™μ€ μ¬κ·€ν•¨μλ¥Ό μ΄μ©ν•΄ μν–‰ν•©λ‹λ‹¤. ν›„ν–‰ λ…Έλ“λ“¤λ΅ λ¨Όμ € DFS μ¬κ·€ ν•¨μλ¥Ό νΈμ¶ν•κ³ , λ¨λ“  ν›„ν–‰ λ…Έλ“λ“¤μ DFSκ°€ λλ‚λ©΄ ν„μ¬ λ…Έλ“λ¥Ό μ„μƒ μμ„λ¥Ό λ‹΄μ„ result λ°°μ—΄μ— μ¶”κ°€ν•©λ‹λ‹¤.

```python
# λ°©λ¬Έ λ…Έλ“ κΈ°λ΅ν•  λ”•μ…”λ„λ¦¬(λ³΄ν†µμ€ λ°°μ—΄μ„ μ‚¬μ©ν•λ‚ λ…Έλ“λ¥Ό indexκ°€ μ•„λ‹λΌ StringμΌλ΅ λ°›λ” λ°”λμ—..)
visited = {}
for subject in subjects:
    visited[subject] = False
    
# κ²°κ³Όλ¥Ό λ‹΄μ„ λ°°μ—΄
result = []

# μ§„μ… μ°¨μκ°€ 0μΈ λ…Έλ“λ¥Ό λ„£μ–΄ DFS μν–‰
for key, value in indegree.items():
    if value == 0:
        dfs(edges, visited, result, key)
```

&nbsp;λ°©λ¬ΈΒ λ…Έλ“λ¥Ό κΈ°λ΅ν•  λ”•μ…”λ„λ¦¬λ¥Ό λ§λ“­λ‹λ‹¤.(λ³΄ν†µ νƒμƒ‰μ—μ„  λ°°μ—΄μ„ μ“°λ”λ° μμ‹μ—μ„ λ…Έλ“λ¥Ό indexλ²νΈκ°€ μ•„λ‹λΌ StringμΌλ΅ μ¨λ²„λ ¤μ„...) κ²°κ³Όλ¥Ό λ‹΄μ„ result λ°°μ—΄μ„ μ„ μ–Έν•΄μ£Όκ³  μ§„μ… μ°¨μκ°€ 0μΈ λ…Έλ“λ“¤μ„ λ„£μ–΄ DFSλ¥Ό μν–‰ν•΄μ¤λ‹λ‹¤.

```python
# κ²°κ³Ό μ¶λ ¥
result.reverse()
print(result)

# >> ['Oracle', 'Java', 'Spring', 'JPA', 'SpringJPA']
```

&nbsp;result λ°°μ—΄μ—” κ°€μ¥ κΉμ€ depthλ¶€ν„° λ“¤μ–΄κ°€ μμµλ‹λ‹¤. λ’¤μ§‘μ–΄μ£Όλ©΄ μ„μƒ μμ„λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.



## μμ 2 - μ§„μ…μ°¨μ λ°°μ—΄ μ΄μ©

---

&nbsp;μ΄λ²μ—”Β μ²μ μ‚΄ν΄λ³Έ λ™μ‘ κ³Όμ •κ³Ό λ” λ‹®μ•„ μλ” κµ¬ν„μ…λ‹λ‹¤. μ§„μ…μ°¨μ λ°°μ—΄κ³Ό λ‹¤μμ— λ°©λ¬Έν•  λ…Έλ“λ¥Ό κ΄€λ¦¬ν•  νλ¥Ό μ‚¬μ©ν•λ” λ°©λ²•μ…λ‹λ‹¤. 

```python
# λ…Έλ“ κ°―μ, κ°„μ„  κ°―μ μ…λ ¥
n, m = map(int, input().split())
# λ…Έλ“ μ…λ ¥
subjects = list(map(str, input().split()))

# μ§„μ… μ°¨μ κΈ°λ΅ dictionary
indegree = {};
# κ°„μ„  κΈ°λ΅ dictionary
edges = {};
# μ§„μ… μ°¨μ λ° κ°„μ„  μ΄κΈ°ν™”
for subject in subjects:
    indegree[subject] = 0
    edges[subject] = []
```

&nbsp;λ‘κ°™μ΄Β μ…λ ¥μ„ λ°›μµλ‹λ‹¤.

```python
# μ§„μ… μ°¨μ 0μΈ λ…Έλ“λ¥Ό κ΄€λ¦¬ν•  ν
from queue import deque
indegree_zero_queue = deque()
# νμ— μ΄κΈ° μ§„μ…μ°¨μ 0μ§λ¦¬ μ…λ ¥
for key, value in indegree.items():
    if value == 0:
        indegree_zero_queue.append(key)
```

&nbsp;λ°©λ¬Έν• Β λ…Έλ“λ¥Ό κ΄€λ¦¬ν•  νλ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤. ν•΄λ‹Ή νμ—” μ§„μ…μ°¨μκ°€ 0μΈ λ…Έλ“λ§ λ“¤μ–΄κ° κ²ƒμ…λ‹λ‹¤.

```python
# μ§„μ…μ°¨μμ™€ νλ¥Ό μ΄μ©ν• μ„μƒμ •λ ¬ μν–‰
result = []
while indegree_zero_queue:
    # ν„μ¬ λ…Έλ“λ¥Ό μ„μƒ μμ„μ— μ¶”κ°€
    now = indegree_zero_queue.popleft()
    result.append(now)
    # ν„μ¬ λ…Έλ“μ ν›„ν–‰ λ…Έλ“λ¥Ό νƒμƒ‰
    for next_ in edges[now]:
        # μ§„μ… μ°¨μλ¥Ό 1 κ°μ† μ‹ν‚¤κ³ , κ°μ†λ μ§„μ… μ°¨μκ°€ 0μ΄λ©΄ νμ— μ‚½μ…
        indegree[next_] -= 1
        if indegree[next_] == 0:
            indegree_zero_queue.append(next_)
```

&nbsp;νμ— λ‚¨μ€ λ…Έλ“κ°€ μ—†μ„ λ•κΉμ§€(λ” μ΄μƒ λ°©λ¬Έν•΄μ•Όν•  λ…Έλ“κ°€ μ—†μ„ λ•κΉμ§€) whileλ¬Έμ„ μν–‰ν•©λ‹λ‹¤. λ…Έλ“ ν•λ‚λ¥Ό κΊΌλ‚΄ ν•΄λ‹Ή λ…Έλ“λ¥Ό μ„μƒ μμ„μ— μ¶”κ°€ν•©λ‹λ‹¤. κ·Έ ν›„, ν•΄λ‹Ή λ…Έλ“μ ν›„ν–‰ λ…Έλ“λ“¤μ μ§„μ… μ°¨μλ¥Ό κΉκ³ , κΉμΈ κ²°κ³Ό μ§„μ…μ°¨μκ°€ 0μ΄ λμ—μΌλ©΄ λ°©λ¬Έμμ • νμ— μ¶”κ°€ν•©λ‹λ‹¤.

```python
print(result)
# >> ['Java', 'Oracle', 'Spring', 'JPA', 'SpringJPA']
```

&nbsp;κ²°κ³Όλ¥ΌΒ μ¶λ ¥ν•©λ‹λ‹¤. μμ 1κ³Όλ” λ‹¤λ¥Έ μμ„κ°€ λ‚μ™”μ§€λ§, κ·Έλλ„ μ„μƒ μμ„ μ¤‘ ν•λ‚μ…λ‹λ‹¤.

&nbsp;DFSλ¥Ό μ΄μ©ν• λ°©λ²•μ€ μ¬κ·€μ μΌλ΅ DFSλ¥Ό κµ¬ν„ν•κΈ°λ§ ν•λ©΄ λκΈ° λ•λ¬Έμ— κµ¬ν„μ΄ μ‰½μµλ‹λ‹¤. ν•μ§€λ§ λ‹¤μ–‘ν• λ¬Έμ μ μ΅°κ±΄μ— λ”°λΌ λ³€ν•ν•κΈ°μ—” νλ“­λ‹λ‹¤. μ§„μ… μ°¨μ λ°°μ—΄μ„ μ΄μ©ν•λ” λ°©λ²•μ΄ λ¬Έμ μ λ‹¤μ–‘ν• μ΅°κ±΄μ— λ€μ‘ν•κΈ° μ‰¬μ΄ κ²ƒ κ°™μµλ‹λ‹¤.