---
layout: post
title: 윈도우에서 수정한 우분투 파일 권한 수정
---

{% assign imgurl=site.imgbase|append: page.categories[-1] %}

### 0. 코린이들에게 바칩니다...

---

- 윈도우와 우분투를 섞어쓰다 Permission denied 난 저 같은 코린이들에게 바칩니다.

- 해결하는 과정에서 리눅스의 명령어 및 권한에 좀 친해진것 같은 느낌이 들어 포스팅 합니다.



### 1. 깃헙 페이지 만들기

---

- 처음 깃헙 페이지를 만들때 [이 포스팅](https://devinlife.com/howto/)을 보고 따라했습니다.

- 위 포스팅은 리눅스 환경에서 실행되고 있었습니다. 
- 제가 사용하는건 윈도우였기 때문에 이 [포스팅](https://m.blog.naver.com/6116949/221244246623)을 따라 우분투를 설치해 리눅스 환경을 구성했습니다.



### 2. 설치 완료 및 작업환경 셋팅

---

- jekyll 설치하고, Github page 만들고, 깔끔한 테마([Laynon](https://github.com/poole/lanyon))도 받아 설치했습니다.
- 새 글을 쓰고 Git에 연결해 Push까지 했습니다.
- 이후 제가 기존에 써오던 작업 환경을 셋팅하기 시작했습니다.
  - git을 CLI로 다루는게 어색해 sourcetree를 설치했습니다.
  - 편집을 위해 [Typora](https://typora.io/)라는 markdown 편집기도 설치했습니다.
- 작업 환경을 구성한 뒤, 윈도우 디렉토리로 새 폴더를 만들고 md 파일들도 복사하고, 윈도우 Typora를 실행해 md 파일을 수정했습니다.



### 3. 에러 발견

---

- 그리고 이제 jekyll 서버를 켜서 확인해 보려는데...

 ![에러발생]({{ imgurl }}/permissionError.png)

- 에러가 났습니다.  ```--trace```옵션을 줘보니

 ![에러발생2]({{ imgurl }}/permissionError2.png)

- ```Errno::EACCES, Permission denied ``` 에러가 났습니다.

  

### 4. (임시)해결

---

- Permission denied 를 보는 순간 윈도우와 우분투를 섞어 사용해 발생한 것 같다는 느낌을 받았습니다.

- 여자저차 구글링해 권한에 대해 찾아보고, 권한을 확인하는법, 변경하는 법을 찾았습니다.

#### 4.1. 권한확인 

- 권한확인은 ``` ls -l ``` 명령어(**l**ist **s**egment -**l**ong format)를 통해 할 수 있습니다. 

![viewPermission1.png]({{ imgurl }}/viewPermission1.png)

- 위 사진을 보시면  ```-rw-rw-rw-rw-```로 되어 있는 파일들이 있고 ```----------```로 되어있는 파일들이 있습니다. 

  - ```-rw-rw-rw-``` 파일들은 리눅스에서 ```git clone```명령어로 가져온 파일들이고
  -  ```---------- ```파일은 윈도우에서 리눅수 디렉토리로 직접 저장한 파일들입니다.

- ```ls -l```로 조회한 파일권한은 다음과 같습니다. 이중 권한 부분에 대해 알보았습니다.

  ```html
  drwxrwxrwx 1 ki ki   4096 Mar 17 21:42  study_book
  -rw-rw-rw- 1 ki ki  65410 Mar 17 21:42 'relative url parsing.png'
  ---------- 1 ki ki  29027 Mar 17 21:59  viewPermission1.png
  ---------- - -- --  ----- ------------ ----------------------------
  권한 링크수 소유자 그룹 파일크기 수정시간              파일이름
  ```

#### 4.2. 권한

- 권한은 크게 4부분으로 이루어져 있습니다. 

  ```html
  -  rw-  rw-  rw-
  1   2    3    4 
  ```

  - 1 : 해당 항목이 파일(-)인지, 디렉토리(d)인지 구분
  - 2 : 사용자(소유자)의 권한 정보
  - 3 : 그룹 권한 정보
  - 4 : 다른 사용자 권한 정보

- 권한 정보는 각각 **r**ead, **w**rite, e**x**ecute 값을 갖을 수 있습니다. 

 ![viewPermission1.png]({{ imgurl }}/viewPermission1.png)

- 다시 에러가 났던 파일을 보겠습니다. 

  - 다른 항목들은 파일이며(-) 사용자, 그룹, 다른 사용자에 대해 모두 읽기(r), 쓰기(w) 권한을 가지고 있습니다. ```-rw-rw-rw-```

  - 에러가 났던 파일은 사용자, 그룹, 다른 사용자 모두에게 아무 권한이 없습니다. ```----------```

#### 4.3. 임시 방편

- Permission denied 에러를 해결하기 위해선 윈도우에서 만든 파일들의 권한을 우분투의 사용자가 사용할 수 있게 권한 변경을 해줘야 합니다.

- 권한 변경을 하기위해선 ``` chmod {permission} {filename} ``` 명령어를 사용합니다. 
- 이때 {permission} 부분은 3자리 숫자로 표현됩니다.
  - **r**ead = 4, **w**rite = 2, e**x**ecute = 1
  - 각 권한은 위와 값을 갖습니다. 
  - 사용자/권한/다른사용자 순서대로 허용된 권한들의 값의 합을 기입해주면 됩니다.
  - rwx = 7, rw- = 6, r-x = 5, --- = 0 
- 윈도우에서 만든 파일을 다른 파일들과 같은 ```-rx-rx-rx-```로 만들겠습니다.

  ![viewPermission2.png](/nonuse/static/image/jekyll/viewPermission2.png)

- 파일 1개의 권한이 ```----------``` 에서 ```-rw-rw-rw-``` 로 변경되었습니다. 

- 이 작업을 디렉토리 아래 모든 파일에 대해 하고 싶다면 아래와 같은 명령어를 사용하면 됩니다.

  ```
  find -type f -exec chmod 666 {} \;
  ```
  - 현재 디렉토리 아래에서 ```find -type f``` 타입이 파일(f)인 것을 찾고(현 디렉토리의 하위 디렉토리아래 있는 파일들도 탐색합니다)
  - 찾은 각 파일에 ```-exec```뒤에 명령어를 실행합니다. 
  - 뒤의 ```chmod 666 {} \;```는 권한 변경입니다. 
    - 파일명 부분에 ```{} \;```가 들어가는데 ```find -type f```에서 찾은 파일들을 그대로 입력한다고 생각하면 됩니다.(자세한 부분은 나중에 추가하겠습니다 :sweat_smile:)

- 권한을 바꾼뒤 다시 서버를 켜보면...

![viewPermission3.png]({{ imgurl }}/viewPermission3.png)

![permissionErrorClear.png]({{ imgurl }}/permissionErrorClear.png)

- 해결이 됐습니다! :happy:

### 5. 제대로 해결하려면...

- 물론 이건 리눅스의 명령어와 권한과 친해지기 위해 해본 임시 해결책입니다. 근본적인 해결책은 

	1. 작업환경을 리눅스로 통일 하던가(사실 시도하다가 Typora 설치에서 에러가...)		
	2. ruby와 jekyll을 윈도우 환경에서 다시 셋팅 하던가
	3. 윈도우와 리눅스가 권한을 공유할 수 있게 자동 설정 하는 것입니다.
- 이것들 중에 하나가 될 것 같습니다. 
- 작업 속도를 위해선 2번이 나을것 같긴 한데... 앞으로 개발자 하면서 어차피 친해져야할 리눅스이니 빨리 1번을 할까 싶기도 하고... 3번도 간단해 보이고...

