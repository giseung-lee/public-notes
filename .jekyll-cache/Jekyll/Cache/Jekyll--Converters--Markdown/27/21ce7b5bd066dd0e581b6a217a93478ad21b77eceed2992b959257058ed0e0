I"ÓZ
<ul>
  <li>ë³¸ í¬ìŠ¤íŒ…ì€ Ken Krueger ì„ ìƒë‹˜ì˜ <a href="https://www.udemy.com/course/microservices-with-spring-cloud/">Microservices with Spring Cloud</a> ê°•ì˜ë¥¼ ì •ë¦¬í•˜ë©° ì‚¬ê²¬ì„ ë¶™ì¸ ê²ƒì…ë‹ˆë‹¤.</li>
  <li>í¬ìŠ¤íŒ… ë‚´ ëª©ì°¨ëŠ” ê°œë³„ ë™ì˜ìƒ ê°•ì˜ ê¸°ì¤€ì…ë‹ˆë‹¤.</li>
</ul>

<h2 id="21-spring-cloud-hystrix---circuit-breaker">21. Spring Cloud Hystrix - Circuit Breaker</h2>

<hr />

<ul>
  <li>Hystrix ì—­ì‹œ í´ë¼ì´ì–¸íŠ¸ë‹¨ ê¸°ìˆ ì…ë‹ˆë‹¤.</li>
</ul>

<h3 id="211-í•™ìŠµëª©í‘œ">21.1. í•™ìŠµëª©í‘œ</h3>

<ul>
  <li>ì–´ë–»ê²Œ ì„œí‚· ë¸Œë ˆì´ì»¤ê°€ cascade failureë¡œ ë¶€í„° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë³´í˜¸í•˜ëŠ”ì§€ ì´í•´í•©ë‹ˆë‹¤.</li>
  <li>Spring Cloud Netflix Hystrixë¥¼ ì‚¬ìš©í•´ ì„œí‚· ë¸Œë ˆì´ì»¤ë¥¼ êµ¬í˜„í•´ë´…ì‹œë‹¤.</li>
  <li>Hytrix Dashboardì™€ Turbineì„ ì´ìš©í•´ ì„œí‚· ë¸Œë ˆì´ì»¤ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.</li>
</ul>

<h3 id="212-cascading-failure-and-the-circuit-breaker-solution">21.2. Cascading Failure and the Circuit Breaker Solution</h3>

<ul>
  <li>Cascading failureë€ ë³µì¡í•˜ê²Œ ì–½í˜€ìˆëŠ” ë„¤íŠ¸ì›Œí¬, ì‹œìŠ¤í…œì—ì„œ í•œ ë¶€ë¶„ì˜ ê³ ì¥ì´ ì—°ê´€ëœ ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì„ ê³ ì¥ì„ ì—°ì‡„í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. MSAëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì´ ì„œë¡œ ì–½í˜€ í†µì‹ í•˜ê¸° ë•Œë¬¸ì— ëŒ€ë¹„ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ cascading failureì— ë§¤ìš° ì·¨ì•½í•©ë‹ˆë‹¤.</li>
  <li>ì´ëŸ° failureì˜ ì—°ì‡„ë¥¼ ëŠê¸° ìœ„í•´ ë„ì…ëœ ê²ƒì´ Circuit Breaker Pattern ì…ë‹ˆë‹¤.</li>
  <li>ëˆ„ì „ ì°¨ë‹¨ê¸°ë¥¼ ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.(ì›ë˜ circuit breakerê°€ ë¬¼ë¦¬ì ì¸ íšŒë¡œ ì°¨ë‹¨ê¸°ì…ë‹ˆë‹¤.)
    <ul>
      <li>ëˆ„ì „ ì°¨ë‹¨ê¸°ëŠ” ì „ê¸° íšŒë¡œë¥¼ ê°ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.</li>
      <li>íšŒë¡œì— ë„ˆë¬´ ë§ì€ ì „ê¸°ê°€ íë¥´ë©´(í”„ë¡œê·¸ë˜ë°ì—ì„  ì˜¤ë¥˜ê°€ ë‚˜ë©´) ëˆ„ì „ ì°¨ë‹¨ê¸°ê°€ ìŠ¤ìŠ¤ë¡œ íšŒë¡œë¥¼ ì—´ì–´ì„œ ì „ê¸°ë¥¼ ì°¨ë‹¨í•©ë‹ˆë‹¤.</li>
      <li>ë¬¸ì œë¥¼ í•´ê²°í•œ ë’¤ì— ì‚¬ëŒì´ ë‹¤ì‹œ íšŒë¡œë¥¼ ë‹«ìœ¼ë©´ ì „ê¸°ê°€ íë¥´ë©° ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="213-using-spring-cloud-netflix-hystrix">21.3. Using Spring Cloud Netflix Hystrix</h3>

<ul>
  <li>
    <p>HystrixëŠ” Netflix OSSì˜ í•˜ë‚˜ì˜€ê³  í˜„ì¬ëŠ” Spring Cloudì—ì„œ wrapper apië¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p>HysytrixëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”ì²­ì´ failure ë˜ëŠ”ê±¸ ê°ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¼ì • ê¸°ì¤€ì„ ì •í•´ë‘ê³  ê·¸ ì´ìƒ failureê°€ ê°ì§€ë˜ë©´ â€œopenâ€ í•˜ì—¬ ë” ì´ìƒì˜ ìš”ì²­ì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.</p>

    <ul>
      <li>ê¸°ë³¸ ê°’ì€ 5ì´ˆì•ˆì— 20 failureë¡œ ì…‹íŒ…ë˜ì–´ ìˆê³  ê°œë°œìê°€ ë”°ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>open í–ˆì„ ë•Œ ì–´ë–»ê²Œ í–‰ë™í•´ì•¼ í• ì§€ fallbackì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    <ul>
      <li>ìºì‹œëœ ì´ì „ ìš”ì²­ì„ ì“°ê±°ë‚˜, ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê±°ë‚˜ ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>openëœ í›„ ì¼ì • ì‹œê°„ ì´í›„ closeë¥¼ ì‹œë„í•©ë‹ˆë‹¤. (ìš´ì˜ìê°€ ì§ì ‘ ë‹«ì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤!)</p>

    <ul>
      <li>ê¸°ë³¸ ê°’ì€ 5ì´ˆì…ë‹ˆë‹¤. ì—­ì‹œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>ì‚¬ìš©ë°©ë²•ì€ ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ë‹¤ë¥¸ ê¸°ìˆ ë“¤ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.</p>

    <ul>
      <li>
        <p>ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ê³ </p>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-netflix-hystrix<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>applicationì— <code class="highlighter-rouge">@EnalbeHystrix</code>ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableHystrix</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ê° ìš”ì²­ë“¤ì— <code class="highlighter-rouge">@HystrixCommand</code>ë¥¼ ì„¤ì •í•´ ì„œí‚· ë¸Œë ˆì´ì»¤ ë°œìƒì‹œ í–‰ë™ ë° ê¸°íƒ€ ì˜µì…˜ì„ ì •í•´ì¤ë‹ˆë‹¤.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordServiceImpl</span> <span class="kd">implements</span> <span class="nc">WordService</span> <span class="o">{</span>
    <span class="c1">// getNounì—ì„œ ì„œí‚· ë¸Œë ˆì´ì»¤ ë°œìƒì‹œ getFallbackNoun ë©”ì„œë“œë¡œ ê°€ê² ë‹¤. </span>
	<span class="nd">@HystrixCommand</span><span class="o">(</span><span class="n">fallbackMethod</span><span class="o">=</span><span class="s">"getFallbackNoun"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">Word</span> <span class="nf">getNoun</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">nounClient</span><span class="o">.</span><span class="na">getWord</span><span class="o">();</span>
	<span class="o">}</span>	
	<span class="kd">public</span> <span class="nc">Word</span> <span class="nf">getFallbackNoun</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">Word</span><span class="o">(</span><span class="s">"something"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><code class="highlighter-rouge">@HystrixCommand</code> ì‘ì„±ì‹œ ì•„ë˜ì™€ ê°™ì€ <code class="highlighter-rouge">commandProperties = {@HystrixPropery...}</code>ë¥¼ ì„¤ì •í•˜ë©´ ì˜µì…˜ì„ ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. propertiesì— ëŒ€í•œ ìƒì„¸ì‚¬í•­ì€ <a href="https://github.com/Netflix/Hystrix/wiki/Configuration#CommandCircuitBreaker">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HystrixCommand</span><span class="o">(</span>
	<span class="n">fallbackMethod</span><span class="o">=</span><span class="s">"getFallbackNoun"</span><span class="o">,</span>
	<span class="n">commandProperties</span> <span class="o">=</span> <span class="o">{</span>
		<span class="nd">@HystrixPropery</span><span class="o">(</span>
			<span class="n">name</span><span class="o">=</span><span class="s">"circuitBreaker.errorThresholdPercentage"</span><span class="o">,</span>
			<span class="n">value</span><span class="o">=</span><span class="s">"20"</span>
			<span class="o">),</span>
		<span class="nd">@HystrixPropery</span><span class="o">(</span>
			<span class="n">name</span><span class="o">=</span><span class="s">"circuitBreaker.sleepWindowInMilliseconds"</span><span class="o">,</span>
			<span class="n">value</span><span class="o">=</span><span class="s">"1000"</span>
		<span class="o">)</span>
	<span class="o">}</span>	
<span class="o">)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>HystrixCommandëŠ” ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

    <ul>
      <li>
        <p>Synchronously - ê¸°ë³¸ì ìœ¼ë¡  ë™ê¸°ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. callì„ í•˜ê³  ì“°ë ˆë“œëŠ” ëŒ€ê¸°í•©ë‹ˆë‹¤.</p>
      </li>
      <li>
        <p>Asynchronously - ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì‘ë™í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. callì„ ë¶€ë¥´ê³  ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì“°ë ˆë“œë¥¼ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬í„´ íƒ€ì…ì„ ë°”ê¾¸ê¸°ë§Œ í•˜ë©´ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HystrixCommand</span><span class="o">(...)</span>
<span class="kd">public</span> <span class="nc">Future</span><span class="o">&lt;</span><span class="nc">Store</span><span class="o">&gt;</span> <span class="nf">getStore</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">){</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nc">AsyncResult</span><span class="o">&lt;</span><span class="nc">Store</span><span class="o">&gt;(){</span>
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="nc">Store</span> <span class="nf">invoke</span><span class="o">(){</span>
			<span class="c1">// do something..</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Reactively - listenerë¥¼ í†µí•´ ë”°ë¡œ ì¶”ê°€ëª…ë ¹ì´ ì—†ì–´ë„ callì—ì„œ ì‘ë‹µì´ì˜¤ë©´ ì²˜ë¦¬ ê°€ëŠ¥í•©ë‹ˆë‹¤.(??) Reactive í•˜ê²Œ ë§Œë“œëŠ” ê²ƒ ì—­ì‹œ ë¦¬í„´ íƒ€ì…ë§Œ ë°”ê¿”ì£¼ë©´ ë©ë‹ˆë‹¤.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HystrixCommand</span><span class="o">(...)</span>
<span class="kd">public</span> <span class="nc">Observable</span><span class="o">&lt;</span><span class="nc">Store</span><span class="o">&gt;</span> <span class="nf">getStore</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">){</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nc">ObservableResult</span><span class="o">&lt;</span><span class="nc">Store</span><span class="o">&gt;(){</span>
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="nc">Store</span> <span class="nf">invoke</span><span class="o">(){</span>
			<span class="c1">// do something..</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="214-hystrix-dashboard-and-turbine">21.4. Hystrix Dashboard and Turbine</h3>

<ul>
  <li>Hystrix DashboardëŠ” ì„œí‚· ë¸Œë ˆì´ì»¤ë“¤ì˜ ìƒíƒœë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.</li>
</ul>

<p class="p_img"><img src="/public/image/MSA_Ken_Krueger/hystrix_dashboard.png" alt="hystrix_dashboard.png" /><small>ì¶œì²˜ :Â https://cloud.spring.io/spring-cloud-netflix/multi/multi__circuit_breaker_hystrix_dashboard.html</small></p>

<ul>
  <li>
    <p>ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ê³ , applicationì— <code class="highlighter-rouge">asd</code>ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableHystrix</span>
<span class="nd">@EnableHystrixDashboard</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì„¤ì •ì´ ëë‹¤ë©´ http://{host}:{port}/hystrix ì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </li>
  <li>
    <p>ì„œë¹„ìŠ¤ê°€ ì»¤ì ¸ì„œ Dashboardë§Œìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° í˜ë“¤ì–´ì§€ë©´ Turbineì„ ì•Œì•„ë³´ì„¸ìš”.</p>
  </li>
</ul>

<h2 id="22-lab-7---hystrix">22. Lab 7 - Hystrix</h2>

<hr />

<ul>
  <li>Hystrix ì‹¤ìŠµ</li>
</ul>

<h2 id="23-spring-cloud-bus---dynamic-configuration-changes">23. Spring Cloud Bus - Dynamic Configuration Changes</h2>

<hr />

<ul>
  <li>Spring Cloud BusëŠ” ì„œë¹„ìŠ¤ë“¤ì´ ì‹¤í–‰ ì¤‘ì— ì„¤ì •ì´ ë°”ë€Œë©´ ë°”ë€ ì„¤ì •ì„ ì„œë¹„ìŠ¤ë“¤ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.</li>
</ul>

<h3 id="231-í•™ìŠµëª©í‘œ">23.1. í•™ìŠµëª©í‘œ</h3>

<ul>
  <li>(Spring Cloud Bus ì—†ì´) ë™ì ìœ¼ë¡œ ì„¤ì •ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒì˜ ë¬¸ì œì ì„ ì•Œì•„ë´…ë‹ˆë‹¤.</li>
  <li>Spring Cloud Busì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.</li>
  <li>Refreshê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.</li>
</ul>

<h3 id="232-ì–´í”Œë¦¬ì¼€ì´ì…”-ì‹¤í–‰-ì¤‘-ì„¤ì •-ì—…ë°ì´íŠ¸">23.2. ì–´í”Œë¦¬ì¼€ì´ì…” ì‹¤í–‰ ì¤‘ ì„¤ì • ì—…ë°ì´íŠ¸</h3>

<ul>
  <li>Sprinc Cloud Configë¥¼ ë‹¤ì‹œ ë– ì˜¬ë ¤ ë´…ì‹œë‹¤.
    <ul>
      <li>ì¤‘ì•™í™” ëœ ì„¤ì • ì„œë²„ê°€ ì„¤ì • íŒŒì¼ë“¤ì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¤ë‹ˆë‹¤.</li>
      <li>ì„¤ì • íŒŒì¼ ìì²´ëŠ” ì›ê²©ì§€ì—ì„œ ë²„ì „ ì»¨íŠ¸ë¡¤, ì†ŒìŠ¤ ì»¨íŠ¸ë¡¤ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
      <li>Config í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹œì‘ ë  ë•Œë§Œ Config ì„œë²„ì—ì„œ ì„¤ì • íŒŒì¼ì„ ë°›ì•„ì˜µë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>ê·¼ë°, í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ì‹¤í–‰ ëœ í›„ì— ì„¤ì • íŒŒì¼ì´ ë°”ë€Œë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?
    <ul>
      <li>ì´ì „ì— ì‚¬ìš©í•˜ë˜ ë°©ì‹ì€ ì—°ê´€ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ë“¤ì„ â€œBounceâ€ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‰½ê²Œ ë§í•´ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.</li>
      <li>ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡  ì£¼ê¸°ì ìœ¼ë¡œ Config ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì„¤ì • íŒŒì¼ì´ ì–¸ì œ ì—…ë°ì´íŠ¸ ë  ì§„ ëª¨ë¦…ë‹ˆë‹¤. ë‚­ë¹„ê°€ ì‹¬í•©ë‹ˆë‹¤.</li>
      <li>Spring Cloud BusëŠ” ì„¤ì • íŒŒì¼ì„ Config ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í‘¸ì‰¬ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. AMQP ê°™ì€ ë©”ì„¸ì§•ìœ¼ë¡œ ì „ì†¡ì´ ë©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="233-spring-cloud-bus">23.3. Spring Cloud Bus</h3>

<ul>
  <li>
    <p>BusëŠ” Config ì„œë²„ì—ì„œ ì„¤ì • íŒŒì¼ì˜ ë³€ê²½ì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p>ë©”ì„¸ì§• ê¸°ìˆ ì— ê¸°ë°˜í•©ë‹ˆë‹¤. (í˜„ì¬ëŠ” AMQP í”„ë¡œí† ì½œë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.)</p>
  </li>
  <li>
    <p>ì‚¬ìš©ë°©ë²• ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

    <ul>
      <li>
        <p>ì˜ì¡´ì„±ì„ Config ì„œë²„, í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ë™ì¼í•˜ê²Œ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-bus-amqp<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>AMQP ì„œë²„ë¥¼ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤. ê°•ì˜ì—ì„  Rabbit MQë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

        <ul>
          <li>AMQP ì„œë²„ëŠ” Config ì„œë²„ì˜ ë³€ê²½ëœ ì„¤ì • íŒŒì¼ì„ ë°›ì•„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¿Œë ¤ì£¼ëŠ” ì¤‘ê°œì ì—­í• ì„ í•©ë‹ˆë‹¤.</li>
          <li>Config ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ì•Œì•„ì„œ AMQP ì„œë²„ì™€ í†µì‹ í•©ë‹ˆë‹¤.</li>
        </ul>
      </li>
      <li>
        <p>ì„¤ì • íŒŒì¼ì´ ë°”ë€Œë©´ Config ì„œë²„ì— (ìˆ˜ë™ìœ¼ë¡œ) <code class="highlighter-rouge">POST /bus/refresh</code> ìš”ì²­ì„ ë³´ë‚´ì¤ë‹ˆë‹¤.</p>
      </li>
      <li>
        <p>ìš”ì²­ì„ ë°›ì€ Config ì„œë²„ëŠ” AMQP ì„œë²„ì— ë³€ê²½ëœ ì„¤ì • íŒŒì¼ì„ ë³´ë‚´ëƒ…ë‹ˆë‹¤.</p>
      </li>
      <li>
        <p>AMQP ì„œë²„ëŠ” ë°›ì€ ì„¤ì • íŒŒì¼ì„ í´ë¼ë¦¬ì–¸íŠ¸ë“¤ì—ê²Œ ë¿Œë ¤ì¤ë‹ˆë‹¤.</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="234-how-refresh-work">23.4. How Refresh Work</h3>

<ul>
  <li>Spring Boot ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹¤í–‰ì¤‘ì— refresh í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>Spring Boot ì–´í”Œë¦¬ì¼€ì´ì…˜ì—” Actuator ë¼ëŠ”ê²Œ ìˆìŠµë‹ˆë‹¤. ê°ì¢… endpointë¥¼ ì œê³µí•´ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. Eurekaì—ì„œ Eureka ì„œë²„ì—ê²Œ í´ë¼ì´ì–¸íŠ¸ê°€ ì‚´ì•„ìˆìŒì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚¼ ë•Œë„ Actuatorë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</li>
  <li>Actuatorì—ì„œ <code class="highlighter-rouge">/refresh</code>ë¼ëŠ” endpointë¥¼ ì œê³µí•©ë‹ˆë‹¤.
    <ul>
      <li>org.springframework.bootì™€ spring-boot-actuator ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>í•˜ì§€ë§Œ refresh í•˜ëŠ” ì¼ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤í–‰ í•  ìˆ˜ ìˆì„ë§Œí¼ ê°„ë‹¨í•œ ì¼ì€ ì•„ë‹™ë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë“¤ë§Œ refresh í•˜ê²Œ ë©ë‹ˆë‹¤.
    <ul>
      <li><code class="highlighter-rouge">@ConfigurationProperties</code> ë˜ëŠ” <code class="highlighter-rouge">@RefreshScope</code>ê°€ ë¶™ì€ ë¹ˆ</li>
      <li>ë¡œê¹…</li>
    </ul>
  </li>
</ul>

<h3 id="235-configurationproperties">23.5. @ConfigurationProperties</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">@ConfigurationProperties</code> ëŠ” ìƒˆë¡œìš´ ì–´ë…¸í…Œì´ì…˜ì€ ì•„ë‹™ë‹ˆë‹¤. Spring Bootì— í¬í•¨ëœ ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤. <code class="highlighter-rouge">@ConfigurationProperties</code> ì–´ë…¸í…Œì´ì…˜ì€ <code class="highlighter-rouge">@Value</code> ì–´ë…¸í…Œì´ì…˜ì„ ì—¬ëŸ¬ ê°œ ë¶™ì—¬ì•¼ í•  ë•Œ ê°„í¸í•˜ê²Œ í•œ ë²ˆì— ë¶™ì¼ ìˆ˜ ìˆê²Œí•´ì¤ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì”ë‹ˆë‹¤.</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">"wordConfig"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LuckyWordController</span> <span class="o">{</span>
  
	<span class="nc">String</span> <span class="n">luckyWord</span><span class="o">;</span>
	<span class="nc">String</span> <span class="n">preamble</span><span class="o">;</span>
  	
	<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/lucky-word"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">showLuckyWord</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">preamble</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">luckyWord</span><span class="o">;</span>
	<span class="o">}</span>
  	
	<span class="cm">/* luckWord, preamble Getter/Setter */</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">\---</span>
<span class="na">wordConfig</span><span class="pi">:</span>
  <span class="na">lucky-word</span><span class="pi">:</span> <span class="s">Irish</span>
  <span class="na">preamble</span><span class="pi">:</span> <span class="s">The lucky word is</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>â€˜relaxed bindingâ€™ ì´ë€ ê²ƒë„ ì œê³µí•˜ëŠ”ë°, â€˜lucky-wordâ€™ë¥¼ ì°¾ì„ë•Œ â€˜LuckyWordâ€™, â€˜LUCKY_WORDâ€™ ê°™ì€ ê²ƒë„ ê°™ì´ ì°¾ì•„ì¤ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">@ConfigurationProperties</code> ìœ¼ë¡œ ì°¾ì•„ì§„ propertyë“¤ì€ refresh ë  ë•Œ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ rebound ë©ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p>í•˜ì§€ë§Œ <code class="highlighter-rouge">@ConfigurationProperties</code> ëŠ” ìƒˆë¡œìš´ propertyë¥¼ reboundë§Œ ì‹œì¼œì£¼ê³ , ì´ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„  í•´ë‹¹ beanì„ ë‹¤ì‹œ ì´ˆê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤.</p>
  </li>
</ul>

<h3 id="236-refreshscope">23.6. @RefreshScope</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">@RefreshScope</code>ëŠ” Spring Cloudì—ì„œ ë“±ì¥í•œ ê²ƒì…ë‹ˆë‹¤.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">@ConfigurationProperties</code>ëŠ” propertyë¥¼ reboundë§Œ ì‹œì¼°ë‹¤ë©´, <code class="highlighter-rouge">@RefreshScope</code>ëŠ” í•œ bean ë‹¨ìœ„ë¡œ propertyë¥¼ rebound í•˜ê³  beanì„ ì•ˆì „í•˜ê²Œ reloading í•´ì¤ë‹ˆë‹¤.</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RefreshScope</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LuckyWordController</span> <span class="o">{</span>
  
	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${wordConfig.lucky-word}"</span><span class="o">)</span><span class="nc">String</span> <span class="n">luckyWord</span><span class="o">;</span>
	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${wordConfig.preamble}"</span><span class="o">)</span><span class="nc">String</span> <span class="n">preamble</span><span class="o">;</span>
  	
	<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/lucky-word"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">showLuckyWord</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">preamble</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">luckyWord</span><span class="o">;</span>
	<span class="o">}</span>
  	
	<span class="cm">/* luckWord, preamble Getter/Setter */</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">@RefreshScope</code>ëŠ” Proxy íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>

    <ul>
      <li>Beanì´ ìì²´ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•Šê³  Proxy Beanì´ ë§Œë“¤ì–´ì§€ê³  ê·¸ ì•ˆì— ì›ë˜ Bean injection ë©ë‹ˆë‹¤.</li>
      <li>Proxy Beanì´ refreshë¥¼ í•˜ë©´ Proxy Beanì€ ê³„ì† ì‚´ì•„ ìˆìœ¼ë©´ì„œ ê¸°ë³¸ì— injectionëœ Beanê³¼ì˜ ê´€ê³„ë¥¼ ëŠê³  ìƒˆë¡œìš´ ì„¤ì •ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ Beanì„ ë‹¤ì‹œ injection í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ul>

<h2 id="24-lab-8---spring-cloud-bus">24. Lab 8 - Spring Cloud Bus</h2>

<hr />

<ul>
  <li>Spring Cloud Bus ì‹¤ìŠµ</li>
</ul>
:ET