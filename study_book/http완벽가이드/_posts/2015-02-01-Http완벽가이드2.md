---
layout: post
title: URL과 리소스
---

---

### 들어가며 
 앞 장에서 리소스, URI, URL, URN에 대해 간략히 살펴봤었습니다. 이번 장에선 URL과 리소스에 대해 자세히 알아볼 것입니다.

 특정한 하나를 식별해야 하는 것에는 모두 식별하는 체계가 있습니다. 특정한 집을 식별하기 위해 사용되는 주소, 책을 식별하기 위한 ISBN번호, 사람을 식별하기 위한 주민등록번호 등...

 URI는 인터넷 상에서 리소스를 식별하기 위한 체계입니다. 그리고 같은 주소를 식별하는데 지번주소, 도로명주소가 있듯이 리소스를 식별하는데에도 URL과 URN이 있습니다. 

 URN은 아직 개발중이고 대중적으로 사용되지 않기 때문에 URL에 대해서 집중적으로 알아볼 것입니다.

---

### 2.1. 인터넷의 리소스 탐색하기
 몇 가지 URL의 사례를 살펴보겠습니다.
 1) http://www.joes-hardware.com/seasonal/index-fall.html
 여기서 http는 '스킴'이라고 합니다. 리소스에 접근하는 방법을 말해줍니다.
 www.joes-hardware.com 은 서버의 위치 입니다. 리소스가 어느 서버에 호스팅 되었는지 알려줍니다.
 /seasonal/index-fall.html은 서버 내의 리소스 경로 입니다. 

 2) mailto:president@whitehouse.gov
 위 URL의 mailto는 이메일 전송 프로토콜 입니다. 다른 URL들과는 형식이 조금 다릅니다.

 3) ftp://ftp.lots-o-books.com/pub/complete-price-list.xls
 ftp(File Transfer Protocol)는 파일 전송 프로토콜이고 ftp.lots-o-books.com는 서버 주소를, /pub/complete-price-list.xls는 서버 내 리소스 위치 입니다. 

 4) rtsp://www.joes-hardware.com:554/interview/cto_video
 rtsp(Real Time Streaming Protocol)는 스트리밍 전송 프로토콜입니다. 

 대부분의 URL은 '스킴://서버위치/리소스경로'로 이루어져 있습니다.

#### 2.1.1. URL이 있기 전 암흑의 시대
 '스킴://서버위치/리소스경로'의 어느정도 통일된 URL을 사용하게 된건 그리 오래되지 않았습니다. URL이 있기 이전엔 애플리케이션마다 리소스를 찾는 방법이 매우 다양했습니다. 

 책에 나온 사례를 보겠습니다.
 >URL이 있기 전에 친구와 complete-catalog.xls이라는 파일을 공유하려고 했다면 이렇게 말해야 했을 것이다. "ftp.joes-hardware.com에 FTP로 접속해. 익명 사용자로 로그인한 다음 비밀번호로 네 이름을 입력해. pub 디렉토리로 이동한 다음, 바이너리 형식으로 전환해. 이제 complete-catalog.xls란 이름의 파일을 너의 로컬 파일 시스템에 내려 받은 다음 보면 될 거야."

 URL이 없던 시절엔 이렇게 직접 서버에 커넥션을 맺고, 디렉터리를 찾아서 리소스를 받아왔다고 합니다. URL과 웹 브라우저가 발달된 지금은 아래와 같이 진행됩니다.

 > 위의 복잡한 설명 대신에, 친구에게 브라우저에서 "ftp://frp.lots-o-books.com/pub/complete-catalog.xmls 를 열어봐" 라고 말하면 된다.

 다시 한 번 선배 개발자님들이 존경스러워 지는 순간입니다.

 그리고 사실 요즘 웹 브라우저를 사용한다면 ftp를 사용할 필요도 없습니다. 저도 개발을 시작하기 전엔 URL에 http, https 말곤 다른 프로토콜이 들어가는걸 본적이 없으니까요. http 프로토콜로 파일 다운을 요청해도 1장에서 설명했고 뒤에서 설명할 게이트웨이, 프록시 등이  ftp 통신을 대신 해줍니다.

### 2.2. URL 문법
 URL의 문법은 스킴(앞서 본 http, ftp, mailto 등..)에 따라 달라집니다. 하지만 대부분 스킴의 URL문법은 일반적인 URL 문법을 따릅니다. 몇몇 스킴을 제외한다면 말이죠.

 일반적인 URL 문법은 아래와 같습니다.
 > <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>

 각 < > 를 컴포넌트라고 부릅니다. 위 모든 컴포넌트를 모두 갖는 URL 스킴은 거의 없습니다. 

 각 컴포넌트에 대해 자세히 알아봅시다.

#### 2.2.1. 스킴: 사용할 프로토콜
 스킴은 리소스에 접근하는 방법을 알려주는 아주 중요한 컴포넌트입니다. 스킴은 대소문자를 가리지 않고 나머지 부분들과 ' : '로 구분합니다.

#### 2.2.2. 호스트와 포트
 리소스를 찾기 위해선 리소스를 갖고 있는 컴퓨터와 그 컴퓨터 내에 서버가 어딘인지 알아야 합니다.
 호스트 컴포넌트가 리소스를 가지고 있는 컴퓨터(장비)를 가리키고, 포트 컴포넌트가 컴퓨터 내에 어느 서버인지를 가리킵니다. 
 TCP 프로토콜을 사용하는 HTTP의 기본 포트는 80입니다. 

#### 2.2.3. 사용자 이름과 비밀번호 
 일반인이나 저와 같이 이제 막 개발에 입문한 개발자라면 URL에 id와 pw가 들어가는 걸 본적이 없을겁니다. 
 어느 스킴에서 사용자 이름이나 비밀번호를 요구하지만 입력하지 않은 경우 사용자 이름엔 기본 사용자이름인 'anonymous' 가 들어가고, 비밀번호는 브라우저마다 가지고 있는 기본 비밀번호가 입력됩니다.(크롬 - chrome@example.com, IE - IEUser) 
 따라서 아래와 같은 URL들이 가능합니다.
> ftp://ftp.prep.ai.mit.edu/pub/gnu
> ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu
> ftp://anonymous:my_password@ftp.prep.ai.mit.edu/pub/gnu
> http://joe:joespasswd@www.joes-hardware.com/sales_info.txt

 사용자이름 컴포넌트와 비밀번호 컴포넌트는 ' : '로 구분하고 비밀번호 컴포넌트와 호스트 명 컴포넌트는 '@'로 구분합니다. 위의 URL들을 보면 우리가 잘 알고있는 메일 주소와 비슷하게 생겼습니다.

 우리가 알고있는 메일 주소도 사실은 URL 스킴입니다. ntz4kiseung@gmail.com 제 메일주소입니다. 여기서 ntz4kiseung이 사용자명, 비밀번호 컴포넌트는 생략되고 '@'로 비밀번호와 호스트를 구분해줍니다. 그리고 제 메일과 관련한 리소스들을 가지고 있는 서버는 gmail.com이 되는 겁니다.


#### 2.2.4. 경로
 URL 경로는 리소스가 서버 내 어디에 위치해 있는지를 지정합니다. 폴더 디렉터리를 생각하면 쉬울 것 같습니다. 각 경로내 디렉토리는 ' / '로 각각의 경로 조각으로 나뉩니다. 각 경로조각은 각각 파라미터를 가질 수 있습니다.

 윈도우에서 사용하는 백슬래쉬 ' \ '가 아니라 그냥 슬래쉬 ' / '임을 한 번더 각인합시다. 
 여담으로 첫 프로젝트에 나갔을때 윈도우 환경인 로컬 서버에서 파일 저장 경로를 ' \ '로 지정해 'folder1 > folder2 > folder3 > file1.txt' 와 같은 디렉토리에 파일이 저장되게 해뒀었습니다. 그 후에 팀원들이 공동으로 사용하는 리눅스 기반의 개발서버에 올려놓으니까 원래 구성해놓은 디렉토리 구조를 따라가는게 아니라  'folder1\folder2\folder3\'라는 이름의 폴더가 생기고 그 안에 file1.txt가 만들어 졌었습니다.

#### 2.2.5. 파라미터
 웹 서비스가 방대해지면 단순히 호스트명, 포트, 리소스 경로만 가지고는 리소스들을 특정하기 힘들어 집니다. 이때 서버는 경로 안에서 더 상세하게 리소스를 특정하기 위해 파라미터들을 요구할 수 있습니다. 
 파라미터는 경로와 ' ; ' 로 구분되며 {name}={value}의 형태로 전달됩니다. 
> ftp://prep.ai.mit.edu/pub/gnu;type=d

 위의 사례에서 type이 name, d가 value인 type=d 파라미터가 사용됐습니다. 

 2.2.4.에서 말했듯이 경로조각 마다 파라미터가 사용될 수 있습니다.

> http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true

 hammers경로 조각에 'sale=false' 파라미터가 사용됐고 index.html 경로조각에 'graphics=true' 파라미터가 사용됐습니다.

#### 2.2.6. 질의 문자열
 

#### 2.2.7. 프래그먼트

### 2.3. 단축 URL

#### 2.3.1. 상대 URL

#### 2.3.2. URL 확장

### 2.4. 안전하지 않은 문자

#### 2.4.1. URL 문자 집합 

#### 2.4.2. 인코딩 체계

#### 2.4.3. 문자 제한

#### 2.4.4. 좀 더 알아보기

### 2.5. 스킴의 바다

### 2.6. 미래

#### 2.6.1. 지금이 아니면, 언제?

### 마치며