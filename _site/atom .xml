<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>이기승의 끄적끄적..</title>
 <link href="http://localhost:4000/atom.xml" rel="self"/>
 <link href="http://localhost:4000/"/>
 <updated>2020-06-13T19:49:37+09:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name>Lee Kiseung</name>
   <email>ntz4kiseung@gmail.com</email>
 </author>

 
 <entry>
   <title>코딩테스트 하루 두 탕...</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/CodingTest-Review/"/>
   <updated>2020-06-13T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/CodingTest-Review</id>
   <content type="html">
&lt;p&gt; 우선, 앞으로 블로그에 기업명은 맨 앞글자만 남기기로 했습니다! (직접 언급하면서 코딩테스트나 면접이 어땠느니 하면 안 좋아할 회사도 있을 것 같아서 😅😅)&lt;/p&gt;

&lt;h2 id=&quot;코딩테스트가-겹쳤다&quot;&gt;코딩테스트가 겹쳤다!!&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; W사, S사를 지원했는데, 지원할 때부터 둘 다 코딩 테스트가 6/13일로 예정 되어 있었다. 같은 날이어도 오전 / 오후 갈리면 둘 다 볼만하지 않을까 하고 기다리고 있었는데… S사 12시 ~ 15시, W사14시 ~ 17시!! 1시간이 겹친다! 😥😥&lt;/p&gt;

&lt;p&gt; 2시간 30분씩 나눠서 볼까? 괜히 나눠했다가 둘 다 떨어질 수도 있으니까 한 개 3시간 전부 투자하고 하나는 포기할까? 고민했다. 일단 S사를 12시 부터 보다가 2시에 W사 문제를 한 번 훑어 보고 더 쉬워 보이는 쪽에 과감하게 시간 투자를 하기로 마음 먹었다.&lt;/p&gt;

&lt;h2 id=&quot;코딩테스트---s사&quot;&gt;코딩테스트 - S사&lt;/h2&gt;

&lt;p&gt; 12시가 됐고, S사의 문제를 한 번 훑어봤다. ‘할만한데…?’ 솔직히 쉬웠다. 180분 4문제라길래 문제가 얼마나 어려울려고 문제당 45분을 잡아주지? 했는데 너무 쉬웠다. 단순히 돌아가기만 하는 코드 작성하는데엔 1시간 조금 더 걸렸던 것 같다.&lt;/p&gt;

&lt;p&gt; 4문제 중 2문제는 크게 머리 쓸 것도 없는 문제 였고 1문제는 약간의 고민이 필요해 보였다. 그리고 나머지 1문제는 O(n^2)으로 풀면 누구나 쉽게 풀 수 있는 문제였지만 딱 봐도 O(n^2)보다 좋은 풀이가 있어보였다. 여차저차 해서 O(n)으로 줄였는데 여기에 시간을 좀 쓴 것 같다.&lt;/p&gt;

&lt;p&gt; S사에선 구름이라는 곳을 이용해 코딩테스트를 진행했다. 좋았던 점은 코드창에 복붙이 된다는 점, 나쁜 점은 우선 ‘실행’만 눌러선 실행이 안된다.😅 실행 시킬 수 있는 방법이 바로 ‘실행’ 버튼을 누르는 것과 ‘테스트 케이스 추가하기’에 들어가서 ‘실행’을 누르는 것인데.. 내가 사용을 잘못한건 지 몰라도 그냥 ‘실행’을 눌러선 코드 실행이 안됐다. 그래도 ‘테스트 케이스 추가하기’에서 실행하면 잘 됐다. 그리고 또 다른 단점으론 코드 제출이 너무 오래 걸린다. 시간이 여유로웠어서 크게 문제가 안됐지만, 시간이 부족했으면 아마 많이 답답했을 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;코딩테스트---w사&quot;&gt;코딩테스트 - W사&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 아무튼, 2시간 30분 정도 S사에 쓰고 W사로 넘어갔다. W사의 문제도 예전에 본 C사, L사의 문제보단 쉬웠지만 S사 보단 어려워보였다. W사도 180분 4문제 였다. 2문제는 쉬운 문제였고 1문제는 구현이 조금 까다롭지만 쉽게 볼 수 있는 유형의 문제, 1문제는 조금 생각이 필요한 문제였다.&lt;/p&gt;

&lt;p&gt; 구현이 까다로운 문제를 푸는데 시간을 좀 잡아먹었다. 로직은 금방 세웠는데 바보같은 실수를 몇 번 하면서 시간을 좀 까먹었다. 생각이 조금 필요했던 마지막 문제는 꽤 재밌는 문제였다. 까다로운 조건을 풀어내기 위한 로직을 세우는게 조금 어려웠는데 구현은 까다롭지 않아서 적당히 시간안에 푼 것 같다.&lt;/p&gt;

&lt;p&gt; W사는 프로그래머스를 이용했다. 프로그래머스는 자주 사용하는 곳이라 인터페이이스도 익숙하고 실행도 잘 됐다. 코드 제출도 빠르다! 그런데 이번 W사의 프로그래머스 코딩테스트에선 복붙이 금지됐다. 후…. 😤 문제를 옮겨 적는 데도 몇 번 실수했다… 개인적으로 복붙 못하게 하는 건 이해가 안간다. 부정행위를 막는 효용보단(사실 효용이 있는지도 모르겠다) 선량한 유저의 불편을 초래하는 게 더 큰 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;둘-다-합격했으면&quot;&gt;둘 다 합격했으면!&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 그래도 확실히 코딩테스트 능력이 좀 늘은 것 같다. 예전보다 구현도 깔끔해졌고, 로직 세우는 속도도 늘었다. 또, 처음 로직에서 고려하지 못한 부분을 찾았을 때 침착하게 대처하는 능력도 좀 생긴 것 같다.&lt;/p&gt;

&lt;p&gt; 5시간 동안 8문제를 모두 풀었다. 뿌듯😀 (물론 테스트 케이스만 맞고 다른 코너 케이스를 발견 못했을 수도 있다.) S사, W사 둘 다 합격을 기대해도 좋지 않을까 생각한다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>알고리즘 - 다익스트라(Dijkstra) 알고리즘</title>
   <link href="http://localhost:4000/posts/study/algorithm/Dijkstra/"/>
   <updated>2020-06-12T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/algorithm/Dijkstra</id>
   <content type="html">
&lt;h2 id=&quot;노드간-최단-거리비용-찾기&quot;&gt;노드간 최단 거리(비용) 찾기&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 원래 다익스트라 알고리즘은 두 노드 간의 가장 짧은 경로를 찾는 알고리즘이었지만, 요즘은 일반적으로 한 노드에서 다른 노드들까지의 최단 경로를 찾는 알고리즘으로 통용되고 있습니다.&lt;/p&gt;

&lt;p&gt; 아래는 다익스트라 알고리즘의 작동 방식입니다.&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/Dijkstra_Animation.gif&quot; alt=&quot;Dijkstra_Animation.gif&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;https://ko.wikipedia.org/wiki/데이크스트라_알고리즘&quot;&gt;https://ko.wikipedia.org/wiki/데이크스트라_알고리즘&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt; 작동 방식은 매우 간단합니다. &lt;strong&gt;그래프를 탐색하면서 cost를 기록하기만 하면 됩니다. 이미 cost가 기록된 노드라면 더 작은 cost를 사용하면 됩니다.&lt;/strong&gt; 위 gif를 단순 탐색으로 한 번, 다익스트라 알고리즘으로 한 번 수행해보겠습니다.&lt;/p&gt;

&lt;p&gt; &lt;strong&gt;지금부터 나오는 코드들은 input의 노드가 0번부터가 아니라 1번부터 시작했다는걸 가정했습니다.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;예시---일반-bfs-탐색&quot;&gt;예시 - 일반 BFS 탐색&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 아래 텍스트를 input으로 받습니다. 첫 번재 줄은 노드 수, 간선 수 이고 뒤로는 간선들의 정보 (노드1, 노드2, 비용)들입니다. 무방향 그래프를 가정하겠습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;6 9
1 2 7
1 3 9
1 6 14
2 4 15
2 3 10
3 6 2
3 4 11
6 5 9
4 5 6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 아래와 같이 input을 받고 노드별 간선정보를 딕셔너리에 저장합니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# n : 노드 수, m : 간선 수
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# nodes : 한 노드를 key로 하고, 그 노드의 간선 정보 (목적지, 비용) 배열을 value로 갖음
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    
&lt;span class=&quot;c1&quot;&gt;# 간선 정보 입력
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 기본적인 BFS 탐색을 해줍니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 방문한 노드를 기록, 시작노드는 True로
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 방문할 노드를 갖는 queue
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 방문 노드를 기록할 배열
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visited_result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# BFS
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popleft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 방문 안했던 곳이면 대기열에 추가
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visited_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 방문한 결과를 출력합니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 결과 출력
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visited_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# &amp;gt;&amp;gt; 1 2 3 6 4 5 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 1, 2, 3, 6, 4, 5 번 순서로 탐색했습니다.&lt;/p&gt;

&lt;h2 id=&quot;예시---다익스트라-알고리즘&quot;&gt;예시 - 다익스트라 알고리즘&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 이번엔 다익스트라 알고리즘으로 1번 노드에서 각 노드들 까지의 최단 비용을 알아보겠습니다.&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/Dijkstra_Animation.gif&quot; alt=&quot;Dijkstra_Animation.gif&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;https://ko.wikipedia.org/wiki/데이크스트라_알고리즘&quot;&gt;https://ko.wikipedia.org/wiki/데이크스트라_알고리즘&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt; 입력은 똑같이 받습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;6 9
1 2 7
1 3 9
1 6 14
2 4 15
2 3 10
3 6 2
3 4 11
6 5 9
4 5 6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# n : 노드 수, m : 간선 수
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# nodes : 한 노드를 key로 하고, 그 노드의 간선 정보 (목적지, 비용) 배열을 value로 갖음
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    
&lt;span class=&quot;c1&quot;&gt;# 간선 정보 입력
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 위의 BFS를 토대로, 비용을 기록할 costs 배열을 추가 선언해줍니다. 그리고 최단 비용을 업데이트 하는 부분을 추가합니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 다익스트라 알고리즘
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 방문한 노드를 기록, 시작노드는 True로
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 방문할 노드를 갖는 queue
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 다익스트라) 비용을 기록할 배열
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popleft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 다익스트라) 다음 노드에 현재 기록된 비용보다 낮은 비용이면 업데이트
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 방문 안했던 곳이면 대기열에 추가
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;        
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 결과 출력
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'1 -&amp;gt; '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;' : '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  1  :  0
# 1 -&amp;gt;  2  :  7
# 1 -&amp;gt;  3  :  9
# 1 -&amp;gt;  4  :  20
# 1 -&amp;gt;  5  :  20
# 1 -&amp;gt;  6  :  11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;예시---경로-추적&quot;&gt;예시 - 경로 추적&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 한 노드에서 각 노드까지 걸리는 최단 비용은 위와 같이 구할 수 있습니다. 이런 다익스트라 알고리즘은 지도상의 최단경로를 찾는 문제에 적용할 수 있습니다.&lt;/p&gt;

&lt;p&gt; 그런데, 지도상 최단경로 문제에 적용하기 위해선 한 노드에서 목적지 노드까지의 총 비용만 알아서 되는게 아닙니다. 최단 비용으로 목적지 노드까지 가는 경로를 알아야 합니다.&lt;/p&gt;

&lt;p&gt; 한 노드에서 각 노드까지 최단 비용으로 도달하는 경로 역시 위 다익스트라 알고리즘 코드에 조금만 로직을 추가하면 됩니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 위 비용을 업데이트 하는 부분에 어느 노드로부터 업데이트를 받았는지를 기록할 배열만 추가하면 됩니다. input은 동일하니 생략하겠습니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 다익스트라 알고리즘
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 방문한 노드를 기록, 시작노드는 True로
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 방문할 노드를 갖는 queue
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 다익스트라) 비용을 기록할 배열
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 경로 추적) prev_arr[idx] : idx노드의 비용을 어디서 업데이트 받았는가(== 직전 노드가 어디인가)
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_arr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popleft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 다익스트라) 다음 노드에 현재 기록된 비용보다 낮은 비용이면 업데이트
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# 경로 추적) 어디서 업데이트 받았는지 기록
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;prev_arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# 방문 안했던 곳이면 대기열에 추가
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;visit_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 비용을 업데이트 할 때 어디서 어디로 업데이트 했는지를 남겨줍니다. 결과를 출력해봅시다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 결과 출력
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'1 -&amp;gt; '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;' : '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;costs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;reversed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'path : '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  1  :  0
# path :  [1]
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  2  :  7
# path :  [1, 2]
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  3  :  9
# path :  [1, 3]
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  4  :  20
# path :  [1, 3, 4]
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  5  :  20
# path :  [1, 3, 6, 5]
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 1 -&amp;gt;  6  :  11
# path :  [1, 3, 6]
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;관련-문제&quot;&gt;관련 문제&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://www.acmicpc.net/problem/10282&quot;&gt;https://www.acmicpc.net/problem/10282&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.acmicpc.net/problem/5719&quot;&gt;https://www.acmicpc.net/problem/5719&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>알고리즘 - 이진탐색 문제풀이 잡기술</title>
   <link href="http://localhost:4000/posts/study/algorithm/binary-search/"/>
   <updated>2020-06-10T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/algorithm/binary-search</id>
   <content type="html">
&lt;h2 id=&quot;이진탐색-풀이-프레임워크&quot;&gt;이진탐색 풀이 프레임워크&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 이진 탐색 문제를 풀어봤다면 대부분의 이진탐색 문제는 아래와 같은 구조로 진행 되는 걸 알수 있습니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;binary_search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;최소값&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;최대값&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;가&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;보다&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;작을&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;때&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;와&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;의&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;중간쯤&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_possible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;is_possible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;문제에&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;따라&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;많이&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;다름&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
   	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; left와 right, mid를 잡고 mid일때 문제의 풀이가 가능하다면 left나 right를 mid로 옮기고 계속 반복하는 구조입니다. 문제에 따라 is_possible 함수는 상이하지만 binary_search 함수 부분은 거의 모든 문제에서 동일합니다.&lt;/p&gt;

&lt;p&gt; 그런데 개인적으로 이진 탐색 관련 문제를 여러개 풀다보니 +-1, &amp;lt;=, &amp;lt;, &amp;gt;, &amp;gt;= 처럼 한 끗 차이로 틀리고 애먹는 경우가 많았습니다.&lt;/p&gt;

&lt;p&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;mid = (left+right)//2&lt;/code&gt; 로 잡아야 하는지 &lt;code class=&quot;highlighter-rouge&quot;&gt;mid = (left+right)//2 +-1&lt;/code&gt;로 잡아야 하는지…  &lt;code class=&quot;highlighter-rouge&quot;&gt;left, right&lt;/code&gt;를 옮길 때 &lt;code class=&quot;highlighter-rouge&quot;&gt;mid&lt;/code&gt;로 잡아야 하는지, &lt;code class=&quot;highlighter-rouge&quot;&gt;mid+-1&lt;/code&gt;로 잡아야 하는 지…  &lt;code class=&quot;highlighter-rouge&quot;&gt;while ( left &amp;lt; right )&lt;/code&gt;로 해야하는지 &lt;code class=&quot;highlighter-rouge&quot;&gt;while ( left &amp;lt;= right )&lt;/code&gt;로 해야 하는지… 어떤 강의에서 이런식으로 잡으라고 했는데 다른 문제에 적용하면 틀리고..&lt;/p&gt;

&lt;p&gt; 문제 마다 고심에 고심을 해가며 문제 조건에 맞게 디테일을 조정하며 풀고 있었습니다. 그런데 매번 이진 탐색 문제 풀 때 마다 푸는 시간의 반정도를 디테일을 조정하는데 쓰고 있자니 화가나서 정리해두었습니다.&lt;/p&gt;

&lt;h2 id=&quot;이진-탐색-문제-디테일-잡기술&quot;&gt;이진 탐색 문제 디테일 잡기술&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 10문제 남짓한 이진 탐색 문제들을 분석하면서 아래와 같은 이진 탐색 문제 잡기술을 마련했습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;while ( &lt;strong&gt;left&amp;lt;=right&lt;/strong&gt; )&lt;/li&gt;
  &lt;li&gt;mid = &lt;strong&gt;( left + right ) // 2&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;left = &lt;strong&gt;mid + 1&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;right = &lt;strong&gt;mid - 1&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;중요&lt;/strong&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;strong&gt;가능한 최댓값 찾기 : return right&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;가능한 최솟값 찾기 : return left&lt;/strong&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt; 디테일을 조정할 때 위의 원칙을 따르면 되는 것 같습니다! 프로그래머스와 백준의 이진탐색 문제에서 10개 조금 안되게 테스트 했는데 다 통과했습니다.&lt;/p&gt;

&lt;p&gt; 물론 안 되는 문제가 있을 수도 있습니다. 😅😅&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>그런 REST API로 괜찮은가</title>
   <link href="http://localhost:4000/posts/googling/network/REST-API/"/>
   <updated>2020-06-10T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/network/REST-API</id>
   <content type="html">
&lt;h2 id=&quot;들어가며&quot;&gt;들어가며&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 개발을 하다보면 자주 듣지만 자세히 모르는 단어 REST API가 있습니다. 저 역시 client-server 구조의 서비스들을 설계하며 REST API 비스무리하게 만드려고 했는데 REST API가 뭔지 명확하게 알 수 있는 글이 없었습니다.&lt;/p&gt;

&lt;p&gt; 그러던 중 ‘&lt;a href=&quot;https://www.youtube.com/watch?v=RP_f5dMoHFc&quot;&gt;그런 REST API로 괜찮은가&lt;/a&gt;‘라는 Naver Deview의 강연이 혼란스러운 REST API의 개념을 잘 잡아준다는 얘기를 듣고 해당 영상을 찾아가게 됐습니다.&lt;/p&gt;

&lt;p&gt; 47분이라는 짧다면 짧지만, 또 그렇게 짧지만은 않은 강연이었기 때문에 나중에 다시 복기하기 위해 정리해둡니다.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/RP_f5dMoHFc&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;ul&gt;
  &lt;li&gt;목차(내용의 순서는 강연을 따르되, 목차의 구성과 제목엔 제 주관이 들어가있습니다.)
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#강연의-시발점&quot;&gt;강연의 시발점&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rest란&quot;&gt;REST란?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rest-탄생-배경&quot;&gt;REST 탄생 배경&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rest-api의-등장과-성장&quot;&gt;REST API의 등장과 성장&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#혼동의-시작&quot;&gt;혼동의 시작&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#그래서-rest-api란&quot;&gt;그래서 REST API란?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rest와-rest-api&quot;&gt;REST와 REST API&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#반드시-rest-api여야-하는가&quot;&gt;반드시 REST API여야 하는가?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#우리의-선택&quot;&gt;우리의 선택&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#rest-api를-구현해보자&quot;&gt;REST API를 구현해보자!&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;강연의-시발점&quot;&gt;강연의 시발점&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 현업에서 REST API는 많이 언급됩니다. ‘REST API로 개발합시다.’, ‘그건 REST 스럽지 않은데?’ 그런데 현업에서도 ‘그래서 REST API가 뭔데?’라고 물으면 명확히 대답할 수 있는 사람이 없습니다.&lt;/p&gt;

&lt;h2 id=&quot;rest란&quot;&gt;REST란?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST API 중 API는 대강 알것 같은데 REST가 뭘까요? REpresentational State Transfer. 대의적인 상태 전환…?&lt;/p&gt;

&lt;p&gt; 위키백과엔 이렇게 나와있습니다. &lt;em&gt;a way of providing &lt;strong&gt;interoperability&lt;/strong&gt; between computer systems on the Internet.&lt;/em&gt; 인터넷의 컴퓨터 시스템간의 상호운용성을 제공하는 방법이라는데… 아직 잘 모르겠습니다.&lt;/p&gt;

&lt;h2 id=&quot;rest-탄생-배경&quot;&gt;REST 탄생 배경&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST의 탄생 배경부터 알아봅시다. 우선 REST의 배경무대가 되는 WEB의 배경을 알아봅시다. WEB 이전에도 인터넷은 있었습니다. 인터넷을 이용하던 사람들은 &lt;strong&gt;어떻게 인터넷에서 정보를 잘 공유할 것인가?&lt;/strong&gt;라는 의문이 있었습니다.&lt;/p&gt;

&lt;p&gt; 이에 대한 WEB의 창시자 &lt;em&gt;Tim Berners-Lee&lt;/em&gt;의 답은 이렇습니다. 표현형식은 HTLM, 식별자는 URI, 전송 방법은 HTTP! 이것들이 WEB의 주요 구성요소가 됩니다.&lt;/p&gt;

&lt;p&gt; 그런데 이중 HTTP의 작성자 중 하나이자 REST의 창시자인 &lt;em&gt;Roy T. Fielding&lt;/em&gt;은 고민이 하나 있었습니다. 당시 &lt;em&gt;Roy T. Fielding&lt;/em&gt;은 HTTP/1.0(1994~1996)의 작업에 참여하고 있었는데, 이미 HTTP/1.0 이전에 인터넷과 웹이 등장했고 급속도로 성장해 있었습니다. 이런 상황에서 &lt;em&gt;Roy T. Fielding&lt;/em&gt;의 고민은 &lt;strong&gt;&lt;u&gt;어떻게 하면 기존의 웹을 깨뜨리지 않고 HTTP를 발전시키는 것이냐&lt;/u&gt;&lt;/strong&gt;는 였습니다.&lt;/p&gt;

&lt;p&gt; 이에 대한 답이 HTTP Object Model이었습니다. 그리고 이 HTTP Object Model이 4년 후인 1998년 &lt;strong&gt;REST&lt;/strong&gt;라는 이름으로 처음 발표가 됩니다. 그리고 또 2년 후인 2000년에 박사 논문으로 발표가 됩니다. 이 논문이 REST의 가장 근본 정의가 되는 논문입니다.&lt;/p&gt;

&lt;h2 id=&quot;rest-api의-등장과-성장&quot;&gt;REST API의 등장과 성장&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST API중 REST의 탄생 배경에 대해 얘기했습니다. 그렇다면 API에 대해 얘기해봅시다.&lt;/p&gt;

&lt;p&gt; 1998년 마이크로소프트에서 XML-RPC라는 원격으로 어떤 시스템의 메서드를 호출하는 프로토콜을 만들어냅니다. 그리고 이게 나중에 SOAP이라는 이름으로 바뀝니다.&lt;/p&gt;

&lt;p&gt; 그리고 Salesforce라는 기업에서 SOAP을 이용한 거의 최초의 API를 공개합니다. 하지만 매우 길고 복잡해 큰 인기를 얻진 못합니다.&lt;/p&gt;

&lt;p&gt; 4년 후인 2004년, flickr에서 API를 공개하는데 flickr에선 SOAP방식의 API와 REST 방식의 API 모두를 공개했습니다. 딱 봐도 REST방식의 API가 훨씬 짧았습니다.&lt;/p&gt;

&lt;p&gt; 그 뒤로 사람들에겐 SOAP은 복잡하고 규칙이 많고 어려우며, REST는 단순하고 규칙이 적고 쉽다는 느낌이 자리잡게 됩니다. 그리고 그 느낌때문인지 SOAP의 인기는 추락하고 REST의 인기는 급상승합니다.&lt;/p&gt;

&lt;p&gt; 2006년 아마존에서 AWS의 API중 85%가 REST임을 밝힙니다. 또한, SOAP API의 선구자였던 salesforce역시 2010년에 REST API를 추가하게 됩니다.&lt;/p&gt;

&lt;p&gt; 👉 REST의 승리!!! ??&lt;/p&gt;

&lt;h2 id=&quot;혼동의-시작&quot;&gt;혼동의 시작&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST의 인기가 높아지던 와중 CMIS라는 CMS를 위한 표준이 제작됩니다. EMC, IBM, Microsoft등이 작업해 만들어졌고, CMIS의 주요 기능중 ‘REST 바인딩 지원’이라는 것이 있었습니다.&lt;/p&gt;

&lt;p&gt; 그런데 이를 본 &lt;em&gt;Roy T. Fielding&lt;/em&gt;가 얘기합니다. “No REST in CMIS!”&lt;/p&gt;

&lt;p&gt; EMC, IBM, Mircrosoft와 같은 굴지의 기업들이 머리를 맞대고 만든 표준도 REST의 의미를 제대로 잡지 못했습니다.&lt;/p&gt;

&lt;p&gt; 한편, 2016년 Microsoft에서 REST API의 가이드라인을 발표합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;uri는 https://{serviceRoot}/{collection}/{id} 형식이어야 한다.&lt;/li&gt;
  &lt;li&gt;GET, PUT, DELETE, POST, HEAD, PATCH, OPTIONS를 지원해야 한다.&lt;/li&gt;
  &lt;li&gt;API 버저닝은 Major.minor로 하고 uri에 버전 정보를 포함시킨다.&lt;/li&gt;
  &lt;li&gt;등등…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt; 저희가 일반적으로 REST API의 설계방법이라고 알고 있는 내용들입니다. 하지만 &lt;em&gt;Roy T. Fielding&lt;/em&gt;은 트위터를 통해 이것 역시 REST API가 아니라고 합니다. 이 가이드라인은 HTTP API라고 합니다.&lt;/p&gt;

&lt;p&gt; 사람들이 REST API를 헷갈리는 것에 짜증이 났는지 &lt;em&gt;Roy T. Fielding&lt;/em&gt;는 블로그에 이런 글을 게시합니다. &lt;em&gt;&lt;a href=&quot;https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&quot;&gt;REST APIs must be hypertext-driven&lt;/a&gt;&lt;/em&gt;(실제 글의 제목).  또한 ”REST API를 위한 최고의 버저닝 전략은 버저닝을 안 하는 것”이라는 말도 남깁니다.&lt;/p&gt;

&lt;p&gt; 이렇게 사람들이 사용하는 용어 REST API와 그의 창시자인 &lt;em&gt;Roy T. Fielding&lt;/em&gt;가 생각하는 REST API는 어긋나게 됩니다.&lt;/p&gt;

&lt;h2 id=&quot;그래서-rest-api란&quot;&gt;그래서 REST API란?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST API는 쉽게 말해 말 그대로 REST 아키텍처 스타일을 따르는 API입니다. 그럼 REST는 무엇이냐.&lt;/p&gt;

&lt;p&gt; &lt;em&gt;Roy T. Fielding&lt;/em&gt;는 논문에 REST를 ‘분산 하이퍼미디어 시스템을 위한 아키텍처 스타일’이라고 부릅니다. 여기서 말하는 분산 하이퍼미디어 시스템의 대표적인 예가 ‘웹’입니다.&lt;/p&gt;

&lt;p&gt; 아키텍처 스타일이란 제약조건들의 집합입니다. 그러므로 REST 아키텍처 스타일의 제약조건들을 모두 따라야 엄밀하게 말하는 REST API가 되는 것입니다.&lt;/p&gt;

&lt;p&gt; REST 아키텍처를 구성하는 대표적인 스타일은 아래 6가지 입니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;client-server&lt;/li&gt;
  &lt;li&gt;stateless&lt;/li&gt;
  &lt;li&gt;cache&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;uniform interface&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;layered system&lt;/li&gt;
  &lt;li&gt;code-on-demand (optional)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt; 그런데 이중 4번을 제외한 나머지는 대부분의 시스템에서 잘 지킵니다. HTTP를 따르기만해도 자동으로 충족되는 조건들이기 때문입니다. (code-one-demand는 자바스크립트같이 서버에서 클라이언트로 코드를 보내 실행시킬 수 있게 하는 것입니다.)&lt;/p&gt;

&lt;p&gt; 그럼 사람들이 잘 지키지 못하는 uniform interface는 무엇일까요? uniform interface의 제약조건은 아래와 같습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;identifical of resources&lt;/li&gt;
  &lt;li&gt;manipulation of resources through representations&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;self-descriptive messages&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;hypermedia as the engine of application state (HATEOAS)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt; 1번 identifical of resources는 URI로 리소스를 식별할 수 만 있으면 됩니다. 2번 manipulation of resources through representations는 리소스 조작시에 메세지에 조작에 대한 표현을 담아야 한다는 것입니다.(GET, POST, DELETE 같은 메서드를 말하는것 같습니다.) 이 1, 2번 제약사항은 거진 잘 지켜지는 것 같습니다.&lt;/p&gt;

&lt;p&gt; 3, 4번이 잘 지켜지지 않습니다. 거의 지키지 못하는 편입니다.&lt;/p&gt;

&lt;h3 id=&quot;self-descriptive-messages&quot;&gt;self-descriptive messages&lt;/h3&gt;

&lt;p&gt; self-descriptive messages는 쉽게 말해 메세지가 메세지 자체로 스스로를 설명할 수 있어야 한다는 것입니다. 예를들어 아래와 같은 메세지가 있다고 합시다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /something HTTP/1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; something이라는 리소스를 가져오는 단순한 요청입니다. 하지만 이는 self-descriptive하지 않습니다. 어디로 요청이 가는지 메세지 자체에 정보가 없기 때문입니다. 아래와 같이 Host 헤더를 추가하면 self-descriptive 할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /something HTTP/1.1
Host : www.example.org
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 이번엔 아래와 같이 json을 Body로 같는 메세지가 있다고 가정합시다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK

[{&quot;op&quot;:&quot;remove&quot;, &quot;path&quot;:&quot;/something/a&quot;}]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 위 응답 메세지가 self-descriptive하지 못한 이유중 첫번째는 Body를 어떤 방식으로 읽어야 하는지 메세지에 정보가 없기 때문입니다. 아래와 같이 json으로 읽어야 한다고 정보를 추가해봅시다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json

[{&quot;op&quot;:&quot;remove&quot;, &quot;path&quot;:&quot;/something/a&quot;}]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 하지만 이것만으론 self-descriptive가 아닙니다. 위 정보만으론 Body를 json으로 파싱하는게 전부입니다. 메세지의 “op”, “path”의 의미를 알 수 없습니다. 아래와 같이 json의 key들이 무엇을 의미하는 지도 알수 있어야 합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json-patch+json

[{&quot;op&quot;:&quot;remove&quot;, &quot;path&quot;:&quot;/something/a&quot;}]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; json-patch라는 명세를 따른다면 “op”와 “path”를 알 수 있습니다.&lt;/p&gt;

&lt;p&gt; REST API를 따른다는 대부분의 API가 이런 self-descriptive한 속성을 만족시키지 못합니다.&lt;/p&gt;

&lt;h3 id=&quot;hateoas&quot;&gt;HATEOAS&lt;/h3&gt;

&lt;p&gt; 또 다른 잘 지켜지지 않는 속성인 hypermedia as the engine of application state (HATEOAS)를 알아봅시다. HATEOAS는 쉽게 말해 “애플리케이션의 상태는 Hyperlink를 이용해 전이되어야 한다.”는 것입니다. 웹 서비스를 이용할 때 첫 페이지 주소에만 접근하면 나머지 이동은 링크를 따라가는 것을 생각하면 됩니다.&lt;/p&gt;

&lt;p&gt; Html의 경우 HATEOAS를 따르기 쉽습니다.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : text/html

&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/test&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; Json에서도 HTTP의 Link 헤더를 사용하면 HATEOAS를 구현할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json
Link: &amp;lt;/articles/1&amp;gt;; rel=&quot;previous&quot;,
      &amp;lt;/articles/3&amp;gt;; rel=&quot;next&quot;
      
{
	&quot;title&quot;:&quot;Main title..&quot;,
	&quot;contents&quot; : &quot;test...&quot; 
}      
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;uniform-interface-의-목적&quot;&gt;uniform interface 의 목적&lt;/h3&gt;

&lt;p&gt; 다시 돌아옵시다. REST 아키텍처의 6가지 특징중 uniform interface가 잘 안지켜지고, uniform interface 중엔 위에서 살펴본 self-descriptive messages와 HATEOAS가 안지켜진다고 했습니다. 그럼 uniform interface의 목적은 무엇일까요?&lt;/p&gt;

&lt;p&gt; 이는 앞서 언급한 &lt;em&gt;Roy T. Fielding&lt;/em&gt;의 근본적인 질문인 &lt;strong&gt;&lt;u&gt;어떻게 하면 기존의 웹을 깨뜨리지 않고 HTTP를 발전시키는 것이냐&lt;/u&gt;&lt;/strong&gt;와 맞닿습니다.&lt;/p&gt;

&lt;p&gt; uniform interface는 웹의 &lt;strong&gt;독립적 진화&lt;/strong&gt;를 위해 필요합니다. 독립적 진화란 웹을 이루는 각 구성요소들이 서로에게 의존하거나 얽매이지 않고 진화하는 것입니다.&lt;/p&gt;

&lt;p&gt; 예를들어, 저희가 사용하는 웹 서비스 네이버, 유튜브, 쿠팡 등이 업데이트 했다고 해서 저희의 웹 브라우저를 업데이트 할 필요는 없습니다. 마찬가지로, 크롬이 업그레이드해서 버전을 올렸다고 해서 네이버, 유튜브, 쿠팡 등이 각자의 서비스를 바꿀 필요가 없다는 것입니다. 이것이 기존의 웹을 깨뜨리지 않고 HTTP를 발전하는 것입니다.&lt;/p&gt;

&lt;p&gt; 또한, HTTP 명세 역시 업그레이드 됩니다. 2014년에 HTTP/2.0이 나왔고 어떤 웹서비스는 HTTP/2.0에 맞도록 수정을 하고, 어떤 웹 서비스는 수정하지 않았지만, 일반 유저들은 이에 상관없이 모든 웹 서비스를 이용할 수 있습니다.&lt;/p&gt;

&lt;p&gt; HTML5의 경우 초안이 나오고 이후 권고안이 나오는데 까지 6년이 걸립니다. HTTP/1.1은 명세 개정판 작업에만 7년이 걸립니다.(이 작업은 새로운 기능을 추가한 것도 아니고 그냥 명세를 다듬기만 하는 작업이었습니다.) 이렇게 웹의 제작자들이 하나의 기술에 오랜 시간을 들이는 이유가 완벽한 하위 호환을 완성하기 위해서입니다. 기존의 웹과 충돌을 일으키지 않기위해(상호 운용성, interoperability를 위해) 오랜 시간을 들입니다.&lt;/p&gt;

&lt;p&gt; 상호 운용성을 위해 예전에 내놨던 Referer 오타를 계속 가져가고 있고(Referrer 이 되었어야 함) 잘못 이름 붙인 charset도 안 고치고 계속 가져갑니다.(encoding으로 했어야 하는데 당시 charset과 개념 혼동으로 encoding의 기능이지만 charset으로 이름 붙임)&lt;/p&gt;

&lt;h3 id=&quot;self-descriptive-hateoas와-독립적-진화&quot;&gt;Self-descriptive, HATEOAS와 독립적 진화&lt;/h3&gt;

&lt;p&gt; 그럼 Self-descriptive와 HATEOAS를 지키면 uniform interface의 목적인 독립적 진화가 가능해질까요?&lt;/p&gt;

&lt;p&gt; Self-descriptive가 지켜지면 서버나 클라이언트가 변경되더라도 메세지를 항상 올바른 방식으로 해석가능합니다. 메세지의 의미를 알기 위해 직접 서버나 클라이언트에게 물어볼 필요 없이(독립적으로), 메세지가 Self-descriptive 하고 있는 정보를 따라가면 해석 가능합니다.&lt;/p&gt;

&lt;p&gt; HATEOAS를 구현하면 애플리케이션 상태 전이의 late binding이 가능해집니다. 애플리케이션 상태 전이의 late binding 이란, 쉽게 말해 전이가 동적으로 변경될 수 있다는 것입니다. 웹 어플리케이션의 상태 전이가 미리 binding 되어 있다면, 정해진 전이대로 따라갈 수 밖에 없습니다. 반면, late binding 한다면, 서버에서 링크를 바꿔 줄 수 도 있고, 한 단계 전이를 해야만 그 다음 단계의 전이를 결정할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&quot;rest와-rest-api&quot;&gt;REST와 REST API&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; REST 아키텍처는 원래 목적하던 바를 충실히 해냈습니다. 웹의 독립적인 발전을 가능하게 해 현대의 웹이 급성장 하는 데 지대한 공헌을 했습니다.&lt;/p&gt;

&lt;p&gt; 하지만, REST API는 REST 아키텍처를 제대로 구현하지 못하고 있습니다. 그렇다면 이런 의문을 가질 수 있습니다. ‘다 같이 그렇게 조금 오해하며 쓰는데… 그냥 REST 아키텍처의 일부만 만족해도 REST API로 불러도 되는거 아니야??’&lt;/p&gt;

&lt;p&gt; 이에 대한 &lt;em&gt;Roy T. Fielding&lt;/em&gt;의 답은 완강합니다. 하이퍼텍스트를 포함한 self-descriptive한 메세지의 uniform interface를 통해 리소스에 접근하는 API가 REST API 라는 것입니다.&lt;/p&gt;

&lt;h2 id=&quot;반드시-rest-api여야-하는가&quot;&gt;반드시 REST API여야 하는가?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 그럼 근본적인 질문을 하나 하겠습니다. ‘이렇게 구현하기 까다롭고 난해한데 굳이 원격 API를 만드는데 REST API로 해야 하나?’ &lt;em&gt;Roy T. Fielding&lt;/em&gt;의 답은 &lt;em&gt;‘&lt;strong&gt;시스템 전체를 통제할 수 있다고 생각하거나, 진화에 관심이 없다면, REST에 대해 따지느라 시간을 낭비하지 마라’&lt;/strong&gt;&lt;/em&gt;라고 합니다.&lt;/p&gt;

&lt;p&gt; 소규모 서비스 내부에서 사용하는 API같은 경우 굳이 REST API를 사용하지 않아도 된다는 것입니다. 상호운용성을 손과 입으로 해결할 수 있으니까요. 그리고, 나의 웹 서비스는 웹 생태계가 바뀌면 그냥 토대되도 좋다! 하면 상호운용성을 버리고 REST 아키텍처를 따르지 않아도 됩니다.&lt;/p&gt;

&lt;h2 id=&quot;우리의-선택&quot;&gt;우리의 선택&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 이런 상황에서 우리에겐 다음의 선택지들이 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;REST API를 구현하고 REST API라고 부른다.&lt;/li&gt;
  &lt;li&gt;REST API 구현을 포기하고 HTTP API라고 부른다.&lt;/li&gt;
  &lt;li&gt;REST API가 아니지만 REST API라고 부른다. (현재 상황)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt; 3번에 관해선 &lt;em&gt;Roy T. Fielding&lt;/em&gt;이 이런 말을 합니다. “나는 아무 HTTP 기반의 API를 REST API라고 부르는 사람들에 지쳤다. 제발 제약조건을 따르던지, 아니면 다른 단어를 써라”&lt;/p&gt;

&lt;p&gt; 강의의 마지막 부분은 1번을 도전하는 데에 할애합니다.&lt;/p&gt;

&lt;h2 id=&quot;rest-api를-구현해보자&quot;&gt;REST API를 구현해보자!&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 우선 왜 REST API가 &lt;em&gt;Roy T. Fielding&lt;/em&gt;의 의도대로 구현되지 않는 지 알아봅시다. HTML은 REST 아키텍처를 만족시키기 쉽습니다. 반면, API에 사용되는 JSON은 REST 아키텍처를 만족시키기 어렵습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;HTML&lt;/th&gt;
      &lt;th&gt;JSON&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Hyperlink&lt;/td&gt;
      &lt;td&gt;a태그 등&lt;/td&gt;
      &lt;td&gt;정의되어있지 않음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Self-descriptive&lt;/td&gt;
      &lt;td&gt;HTML 명세&lt;/td&gt;
      &lt;td&gt;불완전&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt; 우선 HTML은 Hyperlink 구현이 잘 되어있어 HATEOAS를 만족 시키기 쉽습니다. 반면, JSON의 경우 Hyperlink에 대한 것이 정의되지 않았습니다.(앞서 언급했던 json응답에 링크를 주는 것은 HTTP 메세지의 Link 헤더를 사용하는 것이었습니다.)&lt;/p&gt;

&lt;p&gt; 또한, HTML은 HTML 명세가 굉장히 정성들여 작성되었기 때문에 HTML 명세 안의 범위에서만 사용하면 Self-descriptive 합니다. 반면, JSON에 대한 명세는 불완전하며, 각 웹서비스의 JSON에 사용되는 name : value의 name들의 Self-descriptive를 지키기 위해선 각 웹 서비스에서 직접 API문서를 작성해야 합니다.&lt;/p&gt;

&lt;p&gt;### 예시 - HTML&lt;/p&gt;

&lt;p&gt; 간단한 to-do 서비스 API를 HTML로 작성한 경우와 JSON으로 작성한 경우를 알아보겠습니다. 우선 HTML입니다. 아래의 요청을 보내고 아래 아래의 응답을 받았다고 가정합시다.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /todos HTTP/1.1
Host : test.org
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : text/html

&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://todos/1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;회사 가기&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://todos/2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;집에 가기&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 응답의 Content-Type을 통해 응답의 Body를 text/html로 읽어야 한다는걸 알 수 있고, HTTP 명세에 각 media type은 IANA에 등록되어 있다고 합니다. IANA에 가보면 text/html의 명세 링크(&lt;a href=&quot;http://www.w3.org/TR/html&quot;&gt;http://www.w3.org/TR/html&lt;/a&gt;)가 있습니다. 해당 명세를 참고하면 위 HTML 응답을 Self-descriptive하게 해석할 수 있습니다.&lt;/p&gt;

&lt;p&gt; HATEOAS는 a태그를 통해 간단히 구현됩니다.&lt;/p&gt;

&lt;h3 id=&quot;예시---json&quot;&gt;예시 - JSON&lt;/h3&gt;

&lt;p&gt; 위와 같은 요청, 응답을 우선 기존의 잘못된 REST API로 작성해보겠습니다.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /todos HTTP/1.1
Host : test.org
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json

[
	{&quot;id&quot;:1, &quot;title&quot;:&quot;회사 가기&quot;},
	{&quot;id&quot;:2, &quot;title&quot;:&quot;집에 가기&quot;}
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 우선 Content-Type을 보고 media type이 application/json인 것은 확인할 수 있습니다. 그리고 IANA에서 application/json의 명세의 링크(&lt;a href=&quot;https://tools.ietf.org/html/draft-ietf-jsonbis-rfc7159bis-04&quot;&gt;https://tools.ietf.org/html/draft-ietf-jsonbis-rfc7159bis-04&lt;/a&gt;) 역시 찾을 수 있습니다. 명세에 따라 Body를 JSON 형식으로 파싱할 순 있지만 “id”와 “title”이 무엇인지는 알 수 없습니다. 즉, Self-descriptive하지 못합니다.&lt;/p&gt;

&lt;p&gt; 링크는 아예 없기 때문에 HATEOAS도 만족시키지 못합니다. 이런 잘못된 API를 REST API로 바꿔보겠습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/vnd.todos+json

[
	{&quot;id&quot;:1, &quot;title&quot;:&quot;회사 가기&quot;},
	{&quot;id&quot;:2, &quot;title&quot;:&quot;집에 가기&quot;}
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 우선 Self-descriptive를 만족시키는 방법으로 직접 Media type을 정의합니다.(어플리케이션에서 쓰는 “id”와 “title”의 의미를 정의하기 위해) 그리고 만든 Media type을 IANA에 정식 등록합니다! (실제 정식 등록하기 쉽다고 합니다.. 😅) 이 방법이 번거롭다면 아래의 방법도 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json
Link: &amp;lt;https://test.org/docs/todos&amp;gt;; rel = &quot;profile&quot;

[
	{&quot;id&quot;:1, &quot;title&quot;:&quot;회사 가기&quot;},
	{&quot;id&quot;:2, &quot;title&quot;:&quot;집에 가기&quot;}
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; Link헤더에 profile relation으로 링크를 남깁니다. 쉽게 말해 직접 Media Type을 정의하고 IANA에 등록하진 않아도, 해당 메세지를 해석하는 데 필요한 명세의 링크를 메세지에 남기는 것입니다. 메세지를 본 사람이 해당 링크를 따라가면 메세지의 의미를 해석할 수 있게 됩니다.&lt;/p&gt;

&lt;p&gt; 이 방법의 단점으론, 클라이언트가 Link 헤더와 profile을 이해할 수 있어야 하고 Content negotiation이 불가능 하다는 것입니다.&lt;/p&gt;

&lt;p&gt; 다음은 HATEOAS를 해결하는 방법입니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json
Link: &amp;lt;https://test.org/docs/todos&amp;gt;; rel = &quot;profile&quot;

[
	{
		&quot;id&quot;:1, 
		&quot;title&quot;:&quot;회사 가기&quot;,
		&quot;link&quot;:&quot;https://test.org/todos/1&quot;	
	},
	{
		&quot;id&quot;:2, 
		&quot;title&quot;:&quot;집에 가기&quot;,
		&quot;link&quot;:&quot;https://test.org/todos/2&quot;	
	}
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 위와 같이 JSON 자체에 링크를 남기는 것입니다. 하지만 이 방법을 사용하려면 또 “link”를 정의하는 명세를 남겨야 합니다.&lt;/p&gt;

&lt;p&gt; 다른 방법으론 JSON으로 하이퍼링크를 표현하는 걸 이미 정의해둔 명세를 따르는 것입니다. JSON API, HAL, UBER, Siren 등의 명세가 있습니다. 다만, 이를 사용하면 나머지도 해당 명세를 따라야 합니다.&lt;/p&gt;

&lt;p&gt; 또 다른 방법은 위에서 살펴본 것처럼 HTTP 헤더를 사용하는 것입니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Content-Type : application/json
Location: /todos/1
Link: &amp;lt;/todos/&amp;gt;; rel = &quot;collections&quot;

[
	{&quot;id&quot;:1, &quot;title&quot;:&quot;회사 가기&quot;},
	{&quot;id&quot;:2, &quot;title&quot;:&quot;집에 가기&quot;}
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>알고리즘 - 크루스칼 알고리즘, Union-Find, 최소 신장 트리</title>
   <link href="http://localhost:4000/posts/study/algorithm/Kruskal/"/>
   <updated>2020-06-09T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/algorithm/Kruskal</id>
   <content type="html">
&lt;h2 id=&quot;가장-적은-비용으로-모든-노드-방문하기&quot;&gt;가장 적은 비용으로 모든 노드 방문하기&lt;/h2&gt;

&lt;hr /&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/kruskal_graph.png&quot; alt=&quot;kruskal_graph.png&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&quot;&gt;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt; 위와 같은 그래프가 있다고 가정합시다. 간선들엔 방향이 없으며, 간선의 숫자들은 A, B, C, …, G 노드를 연결하는데 필요한 비용입니다. 이때, 최소 비용으로 모든 노드들이 서로 연결되도록 하고 싶습니다. 최소 비용으로 연결했을 때 비용은 어떻게 될까요?&lt;/p&gt;

&lt;p&gt; 관련 문제&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://programmers.co.kr/learn/courses/30/lessons/42861?language=python3&quot;&gt;https://programmers.co.kr/learn/courses/30/lessons/42861?language=python3&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.acmicpc.net/problem/1774&quot;&gt;https://www.acmicpc.net/problem/1774&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.acmicpc.net/problem/4386&quot;&gt;https://www.acmicpc.net/problem/4386&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;크루스칼-알고리즘&quot;&gt;크루스칼 알고리즘&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 이런 상황에서 사용하는 알고리즘으로 크루스칼(Kruskal) 알고리즘, 프림(Prim’s) 알고리즘이 있습니다. 프림 알고리즘은 다음에 알아보도록 하고… 😅 크루스칼 알고리즘을 알아보겠습니다.&lt;/p&gt;

&lt;h3 id=&quot;동작과정&quot;&gt;동작과정&lt;/h3&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/kruskal_graph.png&quot; alt=&quot;kruskal_graph.png&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&quot;&gt;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt; 앞에서 본 위의 그래프가 주어졌다고 가정합시다. 크루스칼 알고리즘은 다음과 같은 과정으로 이루어집니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;간선들을 비용 기준으로 오름차순 정렬합니다.&lt;/li&gt;
  &lt;li&gt;정렬한 간선을 하나씩 선택합니다.
    &lt;ol&gt;
      &lt;li&gt;간선을 선택했을 때 사이클이 생성되는지 확인합니다.&lt;/li&gt;
      &lt;li&gt;사이클이 생성되지 않는다면 해당 간선을 선택해 트리에 추가합니다.&lt;/li&gt;
      &lt;li&gt;사이클이 생성된다면 해당 간선은 무시하고 다음 간선을 진행합니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt; 위의 그래프의 경우 아래처럼 연결됩니다.&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/kruskal_graph3.png&quot; alt=&quot;kruskal_graph3.png&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&quot;&gt;https://ko.wikipedia.org/wiki/크러스컬_알고리즘&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;[노드, 노드, 비용] 기준으로 [A, D, 5] 간선과 [C, E, 5] 간선 중 임의로 1개를 선택합니다. (여기선 [A, D, 5] 간선 부터 골랐습니다.) A, D를 이어도 사이클은 형성되지 않습니다.&lt;/li&gt;
  &lt;li&gt;[C, E, 5] 간선을 선택합니다. 역시 이어도 사이클은 형성되지 않습니다.&lt;/li&gt;
  &lt;li&gt;[D, F, 6] 간선을 선택합니다. 사이클을 형성하지 않습니다.&lt;/li&gt;
  &lt;li&gt;[A, B, 7] 간선을 선택합니다. 사이클을 형성하지 않습니다.&lt;/li&gt;
  &lt;li&gt;[B, E, 7] 간선을 선택합니다. 사이클을 형성하지 않습니다.&lt;/li&gt;
  &lt;li&gt;[B, C, 8] 간선을 선택합니다. 이 간선을 연결할 시에 B-C-E 노드가 사이클을 이루게 됩니다. 이 간선은 배제합니다.&lt;/li&gt;
  &lt;li&gt;[F, E, 8] 간선을 선택합니다. 이 간선을 연결할 시에 A-B-E-F-D 노드가 사이클을 이루게 됩니다. 이 간선은 배제합니다.&lt;/li&gt;
  &lt;li&gt;[D, B, 9] 간선을 선택합니다. 이 간선을 연결할 시 A-B-D 노드가 사이클을 이루게 됩니다.&lt;/li&gt;
  &lt;li&gt;[E, G, 9] 간선을 선택합니다. 사이클을 형성하지 않습니다.&lt;/li&gt;
  &lt;li&gt;[F, G, 11] 간선을 선택합니다. 이 간선을 연결할 시 A-B-E-G-F-D 노드가 사이클을 이루게 됩니다. 이 간선은 배제합니다.&lt;/li&gt;
  &lt;li&gt;[D, E, 15] 간선을 선택합니다. 이 간선을 연결할 시 A-B-E-D 노드가 사이클을 이루게 됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;사이클-검사---union---find&quot;&gt;사이클 검사 - Union - Find&lt;/h3&gt;

&lt;p&gt; 위 과정은 ‘간선 정렬’, ‘간선 선택’, ‘사이클 검사’, ‘트리에 포함’ 4가지만 수행하면 됩니다. 정렬은 말 그대로 너무 익숙한 정렬, 선택은 foreach문과 같은 걸로 하나씩 선택하면 됩니다. ‘트리에 포함’은 문제의 요구사항에 따라 구현이 달라지긴 하겠지만, 최소 비용 자체를 구하는 문제라면 최소 비용을 더하는 변수를 하나 둬서 비용을 더하는 방식으로 트리에 포함시킬 수 있습니다.&lt;/p&gt;

&lt;p&gt; 그렇다면 사이클 검사는 어떻게 할까요? Union-Find 알고리즘이 하나의 방법이 될 수 있습니다. 개인적으로 부모 찾기라고 부르는 방법입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find1.png&quot; alt=&quot;union_find1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 우선 각 노드는 각자 스스로를 부모로 갖고 시작합니다. 처음으로 [A, D, 5] 간선을 연결 시도합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find2.png&quot; alt=&quot;union_find2.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 이때 A노드와 D노드의 &lt;strong&gt;부모를 찾습니다.(Find)&lt;/strong&gt; 두 부모가 다르다면 사이클을 형성하지 않습니다. &lt;strong&gt;둘을 연결합니다. 둘을 연결하며 D의 부모를 A의 부모로 바꿔줍니다.(Union)&lt;/strong&gt; 문제의 최종 목표인 모든 노드가 연결 된다는 것은 결국 모든 노드가 같은 부모를 갖고 있게 된다는 얘기입니다. 다음 [C, E, 5] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find3.png&quot; alt=&quot;union_find3.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 마찬가지로 C, E 노드의 부모를 찾고 두 부모가 다르다면 사이클을 형성 하지 않으니 둘을 연결해줍니다. E의 부모를 C로 바꿔줍니다. 다음 [D, F, 6] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find4.png&quot; alt=&quot;union_find4.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; D의 부모는 A, F의 부모는 F였기 때문에 둘을 연결해줍니다. F의 부모를 D의 부모인 A로 바꿔줍니다. 다음 [A, B, 7] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find5.png&quot; alt=&quot;union_find5.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; A의 부모는 A, B의 부모는 B였기 때문에 B의 부모를 A로 바꿔 둘을 연결해줍니다. 다음은 [B, E, 7] 간선입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find6.png&quot; alt=&quot;union_find6.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; B의 부모는 A, E의 부모는 C였기 때문에 E의 부모인 C를 A에 연결해줍니다. 다음은 [B, C, 8] 간선입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find7.png&quot; alt=&quot;union_find7.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; B의 부모는 A, C의 부모도 A입니다. 이 상황이 사이클이 생기는 상황입니다. 둘은 아무 행동도 취하지 않고 다음 [E, F, 8] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find8.png&quot; alt=&quot;union_find8.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; E의 부모는 A, F의 부모도 A이기 때문에 역시 사이클입니다. 다음 [B, D, 9] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find9.png&quot; alt=&quot;union_find9.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; B의 부모 A, D의 부모 A이기 때문에 역시 사이클입니다. 다음 [E, G, 9] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find10.png&quot; alt=&quot;union_find10.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; E의 부모는 A, G의 부모는 G였기 때문에 둘을 연결해줍니다. G의 부모를 A로 바꿉니다. 이렇게 되면 모든 노드가 같은 부모를 갖고 있습니다. 즉, 모든 노드들이 서로 연결 되어 있습니다. 이 이후로는 더 이상 수행하지 않아도 되지만 구현에 따라 나머지 간선들을 끝까지 검사할 수도 있습니다. 다음 [F, G, 11] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find11.png&quot; alt=&quot;union_find11.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; F, G 부모 모두 A입니다. 마지막 [D, E, 15] 간선을 봅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Algorithm/union_find12.png&quot; alt=&quot;union_find12.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 역시 D, E의 부모 모두 A입니다.&lt;/p&gt;

&lt;h3 id=&quot;참고자료&quot;&gt;참고자료&lt;/h3&gt;

&lt;p&gt; &lt;a href=&quot;https://www.cs.usfca.edu/~galles/visualization/Kruskal.html&quot;&gt;https://www.cs.usfca.edu/~galles/visualization/Kruskal.html&lt;/a&gt; 를 보시면 동작과정이 애니메이션으로 설명되어 있습니다.&lt;/p&gt;

&lt;h2 id=&quot;코드-보기&quot;&gt;코드 보기&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 위의 상황을 python 코드로 보겠습니다. 아래는 그래프 input입니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# input
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'F'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'F'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'G'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'F'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'G'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; edges를 정렬해주고 총 비용을 저장할 g_total_cost변수를 선언해줍시다. 그리고 Union-Find 에서 사용할 부모 딕셔너리를 만들어줍니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;g_total_cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'D'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'E'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'F'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'G'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; Union-Find 알고리즘 중 Find를 먼저 만들어줍니다. 부모 딕셔너리에 노드를 넣었을 때 자기 자신이 나올때 까지 while문이 돌아갑니다.&lt;/p&gt;

&lt;p&gt; 만약 x의 부모가 x이고, y의 부모가 x이고, z의 부모가 y인 경우를 가정합시다. find함수에 z를 넣으면 z-&amp;gt;y-&amp;gt;x-&amp;gt;x 의 결과로 x가 나오게 됩니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; union 함수도 만들어줍시다. x와 y를 합칠때 숫자가 작은 쪽으로 합치도록 했습니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;union&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_total_cost&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;g_total_cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cost&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 정렬한 간선을 하나씩 꺼내 부모를 Find하고, 부모가 서로 다르다면(사이클을 만들지 않는다면) Union 해줍니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Find
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Union
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;union&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;결과를 확인해봅니다.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'total cost : '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_total_cost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# total cost :  39
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' -&amp;gt; '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# A  -&amp;gt;  A
# B  -&amp;gt;  A
# C  -&amp;gt;  A
# D  -&amp;gt;  A
# E  -&amp;gt;  C
# F  -&amp;gt;  A
# G  -&amp;gt;  A
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;최소-신장-트리minimum-spanning-tree&quot;&gt;최소 신장 트리(Minimum Spanning Tree)&lt;/h2&gt;

&lt;p&gt; 이렇게 얻어진 그래프를 &lt;strong&gt;최소 신장 트리(Minimum Spanning Tree)&lt;/strong&gt; 라고 부릅니다.&lt;/p&gt;

&lt;p&gt; 트리(Tree)는 사이클이 없는 그래프를 뜻합니다. &lt;strong&gt;신장 트리(Spanning Tree)&lt;/strong&gt;는 모든 노드들을 최소 간선으로 연결하는 트리를 말합니다. n개의 노드를 연결한 신장 트리는 n-1개의 간선으로 연결됩니다.&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Algorithm/spanning_tree.png&quot; alt=&quot;spanning_tree.png&quot; /&gt;&lt;small&gt;&lt;a href=&quot;https://ko.wikipedia.org/wiki/신장_부분_그래프&quot;&gt;https://ko.wikipedia.org/wiki/신장_부분_그래프&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt; 위와 같이 4개의 노드와 6개의 간선이 있는 그래프의 신장 트리는 총 16개가 나옵니다.&lt;/p&gt;

&lt;p&gt; 최소 신장 트리는 간선에 비용이 있을때 모든 신장 트리 중 비용을 최소로 하는 신장 트리를 말합니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>DB 인덱스 관련(작성중)</title>
   <link href="http://localhost:4000/posts/googling/etc/index/"/>
   <updated>2020-06-08T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/index</id>
   <content type="html">
&lt;p&gt; DB 인덱스에 관해 모든걸 정리하는건 책 한권으로도 힘들 것 같고, 개인적으로 궁금하던 부분들을 위주로 정리해둡니다. Oracle 기준입니다.&lt;/p&gt;

&lt;h2 id=&quot;인덱스란&quot;&gt;인덱스란?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 인덱스란 테이블의 검색을 빠르게 하기위한 DB의 오브젝트입니다. 테이블의 각 컬럼을 기준으로 하나의 컬럼에 대해 인덱스가 만들어 질 수도 있고 여러 열에 대해 하나의 인덱스가 만들어 질 수도 있습니다.&lt;/p&gt;

&lt;p&gt; Primary Key나 Unique 제약조건이 달린 컬럼에 대해선 자동으로 인덱스가 생성 됩니다.&lt;/p&gt;

&lt;h2 id=&quot;인덱스를-사용하면-왜-빠른가&quot;&gt;인덱스를 사용하면 왜 빠른가?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 인덱스는 내부적으로 B-Tree 인덱스, BITMAP 인덱스, 함수 기반 인덱스 등 다양하게 구현될 수 있지만, 일반적으로 언급하는 인덱스는 B-Tree (Balanced Tree) 구조를 따르는 인덱스입니다. B-Tree 구조를 기반으로 정리하겠습니다.&lt;/p&gt;

&lt;p&gt; DB의 데이터는 ‘데이터 블록’을 단위로 저장이 됩니다. 64비트 운영체제에선 기본 8KB, 32 비트 운영체제에선 기본 4KB입니다. (최소 2KB ~ 최대 64KB로 튜닝할 수도 있습니다.) 이 글에선 설명의 편의상 한 데이터 블록에 5개의 데이터만 들어간다고 가정하겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/etc/data_block.png&quot; alt=&quot;data_block.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 위와 같이 한 테이블에 1,000개의 데이터가 id, name 컬럼으로 저장되어 있다고 가정하겠습니다. 한 데이터블록에 5개씩 저장된다고 가정하면 총 200개의 데이터 블록이 필요합니다. 여기서 id = 993의 name을 찾을 때, 인덱스가 없다면 컴퓨터는 차례대로 id를 검사할 수 밖에 없습니다.(이런 식으로 차례대로 모두 검사하는걸 흔히 풀 스캔이라고 합니다.) 198개의 데이터 블록을 모두 검사하고 199번째 데이터블록의 세번째에서 id = 993을 발견하고 name을 읽어 옵니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/etc/b_tree1.png&quot; alt=&quot;b_tree1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 이번엔 테이블의 데이터 블록중 id의 맨 앞의 값들(0, 5, 10, 15…)만 모아놓은 데이터블록이 있다고 가정해봅시다. 200개의 데이터 블록의 대표갑들을 5개씩 모았으니 총 40개의 데이터 블록이 생성될 것입니다. 이 맨앞 id들을 모아놓은 데이터블록을 따라가면 원본 데이터가 있는 데이터 블록에 갈 수 있을때, 위 상황에서 id = 993을 찾으려면 ..&lt;/p&gt;

&lt;h2 id=&quot;인덱스-사용시-단점&quot;&gt;인덱스 사용시 단점&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;인덱스를 저장할 추가 공간 필요&lt;/li&gt;
  &lt;li&gt;처음 인덱스 생성시 시간이 많이 걸림 (대용량 데이터에서 인덱스를 뽑을 때)&lt;/li&gt;
  &lt;li&gt;insert, update, delete 작업이 자주 일어나는 경우엔 오히려 성능이 나빠질 수 있음.
    &lt;ul&gt;
      &lt;li&gt;insert 작업을 할때 인덱스 분할 과정이 일어날 수 있음(한 리프 블록이 꽉 찼는데 해당 리프 블록에 새로운 데이터가 들어와야 할때) 인덱스 분할 과정은 DB에게 부하가 큰 작업. 리프 노드만 분할하면 그나마 다행인데 가끔 중간노드를 분할해야 할 때도 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;인덱스-생성-및-조회&quot;&gt;인덱스 생성 및 조회&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;PK컬럼, unique 컬럼 인덱스 자동 생성&lt;/li&gt;
  &lt;li&gt;user_indexes 테이블에 인덱스들 보관됨&lt;/li&gt;
  &lt;li&gt;USER_INDEXES 테이블에서 INDEX_TYPE == NORMAL이 B-TREE 인덱스라는 거임.&lt;/li&gt;
  &lt;li&gt;pk, unique 컬럼으로 만들어진 인덱스는 drop 인덱스로 지우지 못함. 컬럼 속성을 바꿔야 함.&lt;/li&gt;
  &lt;li&gt;rowid는 데이터의 실제 물리 주소&lt;/li&gt;
  &lt;li&gt;where절에 index를 사용한 열이 나와 있어야 인덱스를 활용해 조회 가능&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>해시관련 정리</title>
   <link href="http://localhost:4000/posts/googling/data_structure/Hash/"/>
   <updated>2020-06-07T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/data_structure/Hash</id>
   <content type="html">
&lt;p&gt; 면접 보는데 해시 관련 질문이 나왔습니다. 예전에 자료구조 공부 하면서 보고 구현도 해봤기 때문에 나름 알고는 있다고 생각했는데, 막상 면접에선 머릿속에 있던 명확하지 않은 개념들 때문에 어버버버 하면서 원하는 만큼의 답변을 못했던 것 같습니다. 그런 의미에서 해시 관련 내용들을 정리해보기로 했습니다. 다음에 누가 해시 관련해서 물어보면 술술술 대답할 수 있도록!&lt;/p&gt;

&lt;h2 id=&quot;해시-테이블-동작-방식&quot;&gt;해시 테이블 동작 방식&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/hash_flow.png&quot; alt=&quot;hash_flow.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/hash_flow_example.png&quot; alt=&quot;hash_flow_example.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 해시 테이블은 배열입니다. 단, 한 데이터의 해시 값(해시 코드, 해시)을 그 데이터가 배열에 들어갈 인덱스로 사용하는 배열입니다. 해시 테이블의 가장 큰 장점은 데이터의 삽입, 검색, 삭제가 모두 O(1)으로 일어난다는 것입니다.&lt;/p&gt;

&lt;p&gt; 위 해시 테이블 예시 다이어그램은 자바의 기본 Object 메서드인 hashCode()를 이용해 해시 값을 뽑고 해시 값을 모듈로 연산을 통해 배열의 인덱스를 뽑은 것입니다.&lt;/p&gt;

&lt;p&gt; 위 예시에선 해시 값을 만들고 모듈로 연산으로 색인을 만드는 과정을 분리해서 설명했지만, 두 과정을 합쳐서 해시 함수라고 부르고 결과로 나온 색인을 해시 값이라고 하기도 합니다.&lt;/p&gt;

&lt;p&gt; ‘해시 함수’의 범위를 어디까지 볼 거냐는 무의미한 질문입니다. 해시 함수의 정의상 모듈로 연산을 끼든 안끼든 둘 다 해시함수이기 때문입니다. 모듈로 연산 자체도 해시 함수의 성격을 갖습니다.&lt;/p&gt;

&lt;h2 id=&quot;해시-함수란-좋은-해시-함수란&quot;&gt;해시 함수란? 좋은 해시 함수란?&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 위키 피디아의 정의를 빌리자면 해시 함수는 다음과 같습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A hash function is any function that can be used to map data of arbitrary size to fixed-size values.&lt;br /&gt;해시함수란 임의의 길이를 갖는 데이터를 고정된 사이즈의 값으로 맵핑 하는 함수이다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/hash_flow_range.png&quot; alt=&quot;hash_flow_range.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 문자열, 정수, 객체 등 모든 데이터는 해시 함수를 통해 고정된 크기인 int 범위 안으로 압축될 수 있습니다. 그리고 int 범위로 좁혀진 해시 값을 모듈로 연산을 통해 해시 테이블 크기안의 범위로 압축 시킬 수 있습니다.&lt;/p&gt;

&lt;p&gt; 모듈로 연산은 한 수로 나눈 나머지를 가져오면 되니 어려울게 없습니다. 그렇다면 모든 타입의 데이터를 int 범위로 압축 시키는 해시 함수는 어떤 방식으로 동작할까요?&lt;/p&gt;

&lt;p&gt; 우선 해시 함수는 모든 타입의 데이터를 받아들일 수 있어야 합니다. 모든 타입의 데이터를 받아들이기 위해선 임의의 길이의 문자열만 받아들일 수 있으면 됩니다. 어차피 메모리의 입장에서 볼 때의 데이터들은 char 단위(해당 아키텍쳐에서 사용하는 가장 작은 단위) 데이터의 배열이기 때문입니다.(문자열은 char의 배열이고 다른 객체들의 비트 패턴도 결국 char 단위의 배열로 읽어 들일 수 있기 때문.)&lt;/p&gt;

&lt;p&gt; 받아 들인 데이터를 char 배열로 읽어들여 하나의 int 값으로 압축하는 방법은 다양합니다. 가장 간단한 방법으로 char 배열 각 요소의 ASCII 코드를 산술적으로 더해 int 값을 뽑을 수도 있습니다. 아래의 C 코드처럼 말이죠.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash_loselose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'\0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;Hello hash!&quot;&lt;/code&gt; 를 위 해시 함수에 넣으면 &lt;code class=&quot;highlighter-rouge&quot;&gt;104 + 101 + 108 + 108 + 111 + 32 + 119 + 111 + 114 + 108 + 100 = 1116&lt;/code&gt;의 결과가 나옵니다.&lt;/p&gt;

&lt;p&gt; 하지만 위 해시 함수는 나쁜 해시 함수입니다. 다른 데이터에 대해 같은 해시 값이 너무 많이 나오기 때문입니다. 이렇게 다른 입력에 대해 같은 해시 값이 나오는 것을 충돌(Collision)이라고 합니다.&lt;/p&gt;

&lt;p&gt; 아래는 간단하면서도 실무에서 쓸 수 있을 정도로 성능도 꽤 좋은 해시함수인 65599 해시 함수입니다. 해시 코드에 65599를 곱하고 char 배열 한 요소의 ASCII 값을 산술적으로 더해 새로운 해시 코드로 삼습니다. char 배열을 돌면서 이걸 반복하고 끝까지 돈 해시 코드와 그 해시 코드를 16비트만큼 left shift 한 비트 패턴을 xor 연산 해줍니다.(size_t는 8바이트=32비트이니, 계산된 해시코드와 해시코드를 절반만큼 옮긴 해시코드를 xor로 섞어줍니다.)&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash_65599&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;65599&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; 또 하나의 예로, java의 String 클래스의 hashCode() 함수를 보겠습니다. 마찬가지로 해시 값에 31을 곱하고 char의 ASCII 값을 더하는 걸 반복합니다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hashCode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/* hash : static 변수, 기본값 0 */&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &lt;a href=&quot;https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed&quot;&gt;https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed&lt;/a&gt;에서 여러 해시 함수들을 비교분석 해준 결과를 아래 첨부합니다.  216,553 개의 영단어, 216,553개의 랜덤한 GUID, 1~216,553의 숫자를 테스트한 결과(평균 해시 계산 시간, 총 충돌 수)입니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Hash&lt;/th&gt;
      &lt;th&gt;words&lt;/th&gt;
      &lt;th&gt;GUIDs&lt;/th&gt;
      &lt;th&gt;Numbers&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Murmur&lt;/td&gt;
      &lt;td&gt;145 ns / 6 개&lt;/td&gt;
      &lt;td&gt;259 ns / 5 개&lt;/td&gt;
      &lt;td&gt;92 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;FNV-1a&lt;/td&gt;
      &lt;td&gt;152 ns / 4 개&lt;/td&gt;
      &lt;td&gt;504 ns / 4 개&lt;/td&gt;
      &lt;td&gt;86 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;FNV-1&lt;/td&gt;
      &lt;td&gt;184 ns / 1 개&lt;/td&gt;
      &lt;td&gt;730 ns / 5 개&lt;/td&gt;
      &lt;td&gt;92 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;DBJ2a&lt;/td&gt;
      &lt;td&gt;158 ns / 5 개&lt;/td&gt;
      &lt;td&gt;443 ns / 6 개&lt;/td&gt;
      &lt;td&gt;91 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;DJB2&lt;/td&gt;
      &lt;td&gt;156 ns / 7 개&lt;/td&gt;
      &lt;td&gt;437 ns / 6 개&lt;/td&gt;
      &lt;td&gt;93 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SDBM&lt;/td&gt;
      &lt;td&gt;148 ns / 4 개&lt;/td&gt;
      &lt;td&gt;484 ns / 6 개&lt;/td&gt;
      &lt;td&gt;90 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SuperFastHash&lt;/td&gt;
      &lt;td&gt;164 ns / 85 개&lt;/td&gt;
      &lt;td&gt;344 ns / 4 개&lt;/td&gt;
      &lt;td&gt;118 ns / 18,742 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;CRC32&lt;/td&gt;
      &lt;td&gt;250 ns / 2 개&lt;/td&gt;
      &lt;td&gt;946 ns / 0 개&lt;/td&gt;
      &lt;td&gt;130 ns / 0 개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;LoseLose&lt;/td&gt;
      &lt;td&gt;338 ns / 215,178 개&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt; 위 해시 함수들의 비교를 보면 각 해시 함수마다 장단점이 있다는 것을 알 수 있습니다. FNV-1의 경우 words에서 충돌이 1개 밖에 나지 않았지만 평균 해시 계산 시간이 184ns로 다른 함수들보다 조금 느립니다. 하지만 GUID에선 해시 계산시간이 현저히 느립니다. 참고로 엄청나게 충돌이 많이 나는 LoseLose 해시 함수는 위에서 살펴본 char의 ASCII 값을 산술적으로 더하는 해시 함수입니다. 다른 해시 함수들에서 어떤 단어가 충돌이 났는지는 위 링크를 따라가면 보실 수 있습니다.&lt;/p&gt;

&lt;p&gt; 좋은 해시 함수는 해시 계산 속도가 빠르고, 충돌이 적은 함수입니다. 본인이 다루는 데이터의 형식에 따라 좋은 해시함수는 달라질 수 있습니다. 유저에게 데이터를 입력받지 않는 프로그램의 경우엔 들어올 수 있는 모든 입력의 풀을 검토해서 충돌이 아예 안나는 해시 함수 중 빠른 해시 함수를 선택할 수 있습니다.&lt;/p&gt;

&lt;p&gt; 아래는 DJB2 해시 함수입니다. 65599 해시 함수랑 크게 다르진 않습니다. 다만 처음 해시 값을 5381로 두고, 문자열을 돌면서 해시 값에 33을 곱하고 문자열의 ASCII 값을 더해줍니다.&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash_djb2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5381&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* hash * 33 + c */&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/* source : http://www.cse.yorku.ca/~oz/hash.html */&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;그런데 위 해시 함수들에 나오는 수를 봅시다. 65599, 31, 5381의 공통점은 모두 소수라는 것입니다. 또한, 제가 처음 글을 시작할때 모듈로 연산에서 나누는 값으로 쓴 수 역시 23으로 소수였습니다. 왜 해시 함수는 이렇게 소수를 좋아할까요?&lt;/p&gt;

&lt;h2 id=&quot;왜-소수를-쓰는가&quot;&gt;왜 소수를 쓰는가&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 해시 값을 구하는 데도, 구한 해시 값을 모듈로 연산으로 나눠 인덱스를 구하는 데도 소수를 씁니다.(버킷의 수를 소수 개로 사용합니다.) 왜 소수를 쓸까요? 일단 궁극적인 목적은 충돌(입력 데이터가 다른데 해시 값이나 색인 값이 같은 경우)의 가능성을 줄이기 위해서 입니다. 그렇다면 왜 소수를 사용하면 충돌의 가능성이 줄어들까요?&lt;/p&gt;

&lt;h3 id=&quot;17년-주기-매미&quot;&gt;17년 주기 매미&lt;/h3&gt;

&lt;p&gt; 감을 잡기 위해 뜬금없이 매미 얘기를 하겠습니다. 매미는 종에 따라 5년, 7년, 13년, 17년 등의 주기로 땅속에서 있다가 다 같이 한 번에 땅 밖으로 나온다고 합니다. 이 매미들의 생존 전략엔 두가지 특징이 있습니다.&lt;/p&gt;

&lt;p&gt; 우선, 다 같이 한 번에 나온다는 것입니다. 이것은 단순히 종의 보전을 위한 인해전술입니다. 천적들이 아무리 많아도 천적들이 잡아먹는 매미의 수는 한정되어 있습니다. 서로 엇갈려 나와서 매년 같은 수의 매미들이 잡아 먹히기 보단, 한 번에 다 같이 나와서 살아 돌아가는 매미의 수를 많이 남기려는 전략입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/maemi.png&quot; alt=&quot;maemi.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 두 번째 특징이 진짜 말하려는 특징입니다. 5년, 7년, 13년, 17년. 모두 소수입니다. 왜 매미들은 소수년도를 주기로 올라올까요?  대부분의 생물 개체수는 일정 주기를 갖습니다. 매미의 천적들도 주기를 갖습니다. 그런데 매미의 천적들은 새, 다람쥐, 거북, 거미, 고양이, 개, 물고기 등 매우 많습니다. 천적들과의 주기를 피하기 위한 매미들의 전략이 소수입니다.(엄밀히 말하자면, 소수의 주기로 나오는 매미들이 살아남은 것이겠지만)&lt;/p&gt;

&lt;p&gt; 매미의 주기가 8같은 수였다면, 8의 약수인 1, 2, 4, 8년 주기로 올라오는 천적들과 항상 마주칠 것입니다. 하지만 주기가 7년이라면, 주기가 n인 천적과는 7*n년에 한번씩만 만나도 되는 것입니다.&lt;/p&gt;

&lt;h3 id=&quot;해시-값-퍼뜨리기&quot;&gt;해시 값 퍼뜨리기&lt;/h3&gt;

&lt;p&gt; 다시 본론으로 돌아옵시다. 우리의 목적은 충돌을 줄이는 것입니다. 충돌의 가능성을 줄이는데 우선적으로 행해져야 하는 것은 임의의 데이터에 대한 해시 값을 균등하게 퍼뜨리는 것입니다. 해시 함수를 만들 때 소수를 사용하면 해시 값들을 효과적으로 분산시킬 수 있습니다.&lt;/p&gt;

&lt;p&gt; 소수를 사용하면 왜 분산이 잘 되는지에 대해 이해하기 쉽고 납득할만한 수학적 증명을 찾으려 했습니다만… 나왔는데 이해를 못하고 넘어간건지, 인터넷엔 쉽게 볼 수 없는 정보인건지.. 쉽게 풀어 쓸만한 증명은 찾지 못했습니다. 다만, 소수를 사용하지 않으면 분산이 덜 되는 것을 보여드리겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/power_series.png&quot; alt=&quot;power_series.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 해시 함수의 세부 사항은 구현에 따라 다르지만, 대부분의 해시 함수는 위와 같이 일정 수에대한 거듭 제곱의 형태로 표현되어 있습니다. 마지막 문자열(a0)가 같은 임의의 문자열들을 가정합시다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/power_series2.png&quot; alt=&quot;power_series2.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/power_series3.png&quot; alt=&quot;power_series3.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 해시 값은 k*X의 형태로 표현될 수 있습니다. 이때, X는 1~10이고 k가  30인 경우와 31인 경우를 생각해봅시다. k가 30 = 2*3*5 인 경우에 X가 어떤 값이 오더라도 해시 값은 2, 3, 5의 배수가 됩니다. 한편, k가 31인 경우엔 X값에 따라 2의 배수가 될 지, 3의 배수가 될 지, 5의 배수가 될 지, 혹은 2, 3, 5의 배수가 모두 아닐 수도 있게됩니다.&lt;/p&gt;

&lt;h3 id=&quot;오해-바로잡기---모듈로-연산의-소수&quot;&gt;오해 바로잡기 - 모듈로 연산의 소수&lt;/h3&gt;

&lt;p&gt; 우선 저도 가지고 있었고, 구글링 해본 결과 다른 사람들도 가지고 있는 것 같은 오해를 바로잡겠습니다. 그것은 바로 모듈로 연산에서 소수를 사용하는 것입니다.&lt;/p&gt;

&lt;p&gt; 모듈로 연산에서 소수를 사용하는 것은 해시 함수와 해시 테이블(모듈로 연산이 필요한곳)이 독립적으로 작성 되어 해시 테이블 작성자가 해시 함수를 신뢰하지 못하거나 해시 함수의 성능(해시 값을 퍼뜨리는)을 테스트하지 못할 때 입니다.&lt;/p&gt;

&lt;p&gt; 해시 함수가 임의의 데이터에 대해 해시 값들을 제대로 분산 시켜주는걸 확신할 수 있다면 버킷의 사이즈(모듈로 연산의 수)는 어떤 수가 와도 상관 없습니다. 실제로, 모듈로 연산의 속도를 고려해 버킷 사이즈를 2의 거듭제곱으로 많이 사용합니다. (A mod 2^n 연산은 A 비트 패턴의 0~n-1 비트만 가져오면 되므로)&lt;/p&gt;

&lt;p&gt; 하지만, 그렇다면 해시 함수를 못 믿을 땐 왜 버킷 사이즈를 소수로 쓸까요? 감을 잡기 위해 잠시 매미 얘기를 들려드립니다.&lt;/p&gt;

&lt;h3 id=&quot;해시-함수의-소수와-모듈로-연산의-소수&quot;&gt;해시 함수의 소수와 모듈로 연산의 소수&lt;/h3&gt;

&lt;p&gt; 해시 함수에서 어떤 일이 벌어지고 있는지 모르는 해시 테이블 제작자는 해시 테이블에 매미 전략을 사용하게 됩니다. 해시 값의 분포가 불균등 할 수도 있는 상황이라면, 모듈로 연산의 값을 소수로 선택해 충돌의 가능성을 줄이는 것입니다.&lt;/p&gt;

&lt;h3 id=&quot;찝찝&quot;&gt;찝찝…&lt;/h3&gt;

&lt;p&gt; 사실 정리를 해놓고도 찝찝합니다. 뭔가 수학적으로 그럴것 같긴한데 엄밀하게 증명이 안되니…  스택오버플로우의 ‘This answer is useful’을 많이 받은 답변들을 봐도 뭔가 명확히 정리가 안되고.. 나중에 이쪽을 수학적으로 제대로 공부해본 사람을 만나면 다시 물어봐야 할 것 같습니다.&lt;/p&gt;

&lt;h3 id=&quot;출처&quot;&gt;출처&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1145217/why-should-hash-functions-use-a-prime-number-modulus&quot;&gt;https://stackoverflow.com/questions/1145217/why-should-hash-functions-use-a-prime-number-modulus&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://cs.stackexchange.com/questions/11029/why-is-it-best-to-use-a-prime-number-as-a-mod-in-a-hashing-function&quot;&gt;https://cs.stackexchange.com/questions/11029/why-is-it-best-to-use-a-prime-number-as-a-mod-in-a-hashing-function&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier?noredirect=1&amp;amp;lq=1&quot;&gt;https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier?noredirect=1&amp;amp;lq=1&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;충돌---해시-충돌-색인-충돌&quot;&gt;충돌 - 해시 충돌, 색인 충돌&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 앞에서 해시 함수들을 소개하면서 충돌의 가능성을 얘기했습니다. 그리고 모듈로 연산 역시 충돌의 가능성을 가지고 있습니다. 중간 해시 값이 같은 것을 “해시 충돌”, 모듈로 연산의 결과로 나온 색인이 충돌 하는 것을 “색인 충돌”이라고 합니다.&lt;/p&gt;

&lt;p&gt; 사실 색인 충돌을 해결하면 해시 충돌은 해결 안해도 될 수도 있습니다. 어차피 해시 충돌이 났으면 색인 충돌도 날 것이고, 해시 충돌은 그냥 방치하고 색인 충돌만 해결해도 되기 때문입니다.&lt;/p&gt;

&lt;p&gt; 하지만 해시 충돌을 완전히 해결할 수 있으면 하나의 이점을 얻게 됩니다. “Teemo”와 “Yasuo”가 A 해시 함수에 의해서 같은 해시 값인 12345를 갖는다고 가정합시다. 충돌을 해결하기 위해서 여러 방법이 쓰이지만 결국 입력 데이터인 “Teemo”와 “Yasuo” 자체를 기억해야 합니다.&lt;/p&gt;

&lt;p&gt; 미지의 데이터 x를 해시 테이블에서 찾을 때 미지의 데이터 x의 해시 값이 12345가 나왔다고 하더라도 x가 “Teemo”인지 “Yasuo”인지 확인해야 하기 때문입니다.&lt;/p&gt;

&lt;p&gt; 하지만 해시 충돌을 완벽히 해결했다면, 입력 데이터는 기억할 필요가 없습니다. int 형의 해시 값만 기억하면 됩니다. 입력 문자열 전체를 기억하는 상황 대비 int의 해시 값만 기억하는 상황은 매우 큰 이득이 아닐 수 없습니다.&lt;/p&gt;

&lt;p&gt; 하지만, 이 세상에 완벽한 해시 함수는 없으며, 사용자로부터 임의의 데이터를 받는 프로그램에선 해시 충돌을 완벽히 해결할 순 없습니다. 다만, 사용자로부터 데이터를 입력받는 프로그램이 아니라 들어올 수 있는 데이터를 한정 할 수 있는 프로그램이라면 해시 충돌을 완벽히 방지하여 데이터 소모를 크게 줄일 수 있습니다.&lt;/p&gt;

&lt;p&gt; 주로 알아봐야 할 것은 색인 충돌을 해결하는 방법입니다. 색인 충돌 해결엔 크게 ‘주소 개방법(Open Addressing)’과 ‘체이닝(Chaining)’ 방법이 있습니다.&lt;/p&gt;

&lt;h2 id=&quot;충돌-해결---open-addressing&quot;&gt;충돌 해결 - Open Addressing&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/collision_linear_probing.png&quot; alt=&quot;collision_linear_probing.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; Open Addressing은 인덱스 주소를 Open 하겠다는 것입니다. 예를들어 위 그림처럼 “Teemo”를 해시 함수 A에 넣어서 index 3을 얻었다고 가정합시다. 그런데, “Yasuo”를 해시 함수 A에 넣었더니 똑같이 index 3이 나왔습니다. 이렇게 색인이 충돌할 때, “Yasuo”를 굳이 index 3에 저장하려 하지 않고, 빈 주소를 찾아서 그곳에 넣도록 합니다. 이렇게 빈 주소를 찾아가는 방법을 Probing (탐색법)이라고 하고, 위 예시처럼 일정 간격으로 찾아가는 걸 Linear Probing (선형 탐색법)이라고 합니다. (여기선 다루지 않지만 탐색 폭이 제곱으로 늘어나는Quadratic probing(제곱 탐색법)도 있습니다.)&lt;/p&gt;

&lt;p&gt; 다음으로 “Vayne”을 해시 함수 A에 넣었더니 index 4가 나왔습니다. 그런데 4 자리는 “Yasuo”가 차지하고 있습니다. 따라서 “Vayne”은 다음 빈 곳인 5번에 들어가게 됩니다.&lt;/p&gt;

&lt;h3 id=&quot;장점과-단점&quot;&gt;장점과 단점&lt;/h3&gt;

&lt;p&gt; Open Addressing 방식으로 충돌을 해결한다면 공간을 절약할 수 있습니다. 처음 선언해 둔 해시 테이블 배열만 가지고도 충돌을 해결할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/collision_linear_probing_weak.png&quot; alt=&quot;collision_linear_probing_weak.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 하지만, 검색시에 시간이 더 걸릴 수도 있습니다. 위처럼 크기 23짜리 해시 테이블에서 0~14가 모두 차있고 다음에 넣을 데이터 “something”이 index 2로 충돌을 일으킨다고 가정합시다. “something”은 빈자리를 찾아 index 15 까지 검사해야 합니다. 마찬가지로 다시 “something”을 검색할 때도 찾을때 까지 Linear Probing을 돌아야 합니다.&lt;/p&gt;

&lt;p&gt; 더 문제는 없는 값을 검색 할 때도 해시 테이블을 모두 돌아봐야 한다는 것입니다.(Linear Probing 하게 검사도중 빈 값이 있으면 검색 결과가 없다고 반환하도록 구현한다면, 중간에 해시 값을 삭제하는 경우에 문제가 될 수 있습니다.)&lt;/p&gt;

&lt;h3 id=&quot;완전히-꽉-차버린다면&quot;&gt;완전히 꽉 차버린다면?&lt;/h3&gt;

&lt;p&gt; 그런데 만약 Bucket 사이즈가 23이고 충돌도 일어나고 하면서 해시 테이블 배열이 꽉 차면 어떻게 될까요? 간단합니다. 배열 자료구조를 동적 할당 하듯이 해시 테이블도 더 큰 사이즈로 resizing 해주면 됩니다. resizing 하면 모듈로 연산에서 나누는 값(버킷 사이즈)도 달라질텐데, 그로인해 바뀌는 인덱스들을 다시 계산 할 지 말 지는 구현에 따라 달라집니다.&lt;/p&gt;

&lt;p&gt; 인덱스를 다시 계산해서 배열 해놓는다면 resizing 하는데에 시간이 좀 걸리겠지만, 다음에 해시 테이블에서 검색을 할 때 빠를 수 있습니다. 반면에 다시 계산하지 않고 그대로 복사해서 사용한다면 resizing 하는 데 시간이 적게 걸리겠지만 해시 테이블 검색 할 때 맞지 않는 인덱스를 계속 뒤져가며 찾으니 시간이 더 걸릴 것입니다.&lt;/p&gt;

&lt;h2 id=&quot;충돌-해결---chaining&quot;&gt;충돌 해결 - Chaining&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; Chaining 기법은 index는 같은 index로 유지하되, Bucket에 바로 데이터를 넣는게 아니라 연결 리스트의 노드 혹은 일정 사이즈의 배열을 할당하는 것입니다.&lt;/p&gt;

&lt;h3 id=&quot;연결-리스트-활용&quot;&gt;연결 리스트 활용&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/collision_linked_list.png&quot; alt=&quot;collision_linked_list.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; Bucket에 데이터 자체를 담는게 아니라 연결 리스트의 노드 주소를 담습니다.(구현에 따라 기본적으론 데이터를 넣고 충돌 시에 연결 리스트의 노드를 활용할 수도 있습니다.) 위처럼 “Teemo”가 먼저 해시 테이블에 들어가있는데 “Yasuo”가 색인 충돌을 일으킨다면, 연결 리스트를 따라 “Teemo”가 들어있는 노드 뒤에 “Yasuo”노드가 만들어져 연결 됩니다.&lt;/p&gt;

&lt;p&gt; 연결 리스트를 사용하면 필요한 노드만큼만 사용하면 되기 때문에 공간을 절약할 수 있습니다. 하지만 충돌이 일어날 때마다 연결 리스트의 노드를 동적 할당 해야 하기 때문에 동적 할당하는 시간이 필요하며 메모리 전체에 노드들이 퍼져있기 때문에 접근 시간이 느릴 수 있습니다.&lt;/p&gt;

&lt;h3 id=&quot;동적-할당-배열-활용&quot;&gt;동적 할당 배열 활용&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Data_Structure/collision_array.png&quot; alt=&quot;collision_array.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt; 연결 리스트의 노드들을 필요할 때마다 붙이는게 아니라 일정 크기의 배열을 미리 할당해줍니다. 충돌이 날때마다 해야하는 동적 할당의 부담을 줄일 수 있습니다. 충돌이 많이 일어나 정해진 크기의 배열이 꽉 찼다면 더 큰 사이즈의 배열로 다시 할당해줍니다.&lt;/p&gt;

&lt;h2 id=&quot;마치며&quot;&gt;마치며&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 면접 얘기로 시작했으니 면접 얘기로 끝내야 겠습니다. 면접 중에 스스로 뜨끔했던 게 있습니다. 객체지향에 관한 대화를 주고 받다보니 제가 이런 말을 뱉었습니다.&lt;/p&gt;

&lt;p&gt; “이론적으로는 그렇게 알고 있는데, 실제로 그 이론적 지식이 활용될 프로젝트를 해보지 않아 직접 써본적은 없습니다.”&lt;/p&gt;

&lt;p&gt; 웬지 오늘 해시에 대해 정리한 내용도 비슷한 맥락일 것 같습니다. 학습의 목적으로는 이론적으로 정리도 하고 구현도 해봤는데, 실제 프로젝트에서 해시 함수의 시간적 성능과 충돌의 가능성을 저울질 해가며 해시 테이블을 커스터마이징 할 일이 빠르게 오진 않을 것 같습니다. 😥&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>L사 2차 면접 및 학습 방향에 대한 고민</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/%ED%95%99%EC%8A%B5%EB%B0%A9%ED%96%A5/"/>
   <updated>2020-06-06T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/학습방향</id>
   <content type="html">
&lt;h3 id=&quot;l사-2차-면접&quot;&gt;L사 2차 면접&lt;/h3&gt;

&lt;p&gt; 얼마전 L사 2차 면접을 봤다. 흔히 개발자 면접이 그러하듯이 몇 번 질문에 밑천이 금방 드러났다. 😅 뭔가 아는걸 100% 전달 못한것 같아 아쉽지만 어찌됐든 그것도 실력이니까 만족한다. 사실, L사라는 회사에 2차 면접까지 간 것만 해도 엄청나게 감격할 일이긴 하지만.. 그래도 붙었으면.. ㅎㅎ 바로 판교 방향으로 절 해야지&lt;/p&gt;

&lt;h3 id=&quot;학습-방향에-대한-고민&quot;&gt;학습 방향에 대한 고민&lt;/h3&gt;

&lt;p&gt; 그런데 면접 도중에 면접관님께서 정곡을 찌르면서도 도움이 되는 말을 해주셨다. 비전공자로서 이제 막 열심히 달려가고 있는 것 같은데 학습 방향을 제시해줄 멘토를 구하는게 어떠냐는 것이었다.&lt;/p&gt;

&lt;p&gt; 사실 나 스스로도 학습 방향이 너무 중구난방이 아닌가 생각하고 있긴했다. 이론지식도 쌓아야지, C도 연습해봐야지, 코딩테스트 위해서 알고리즘 연습도 해야지, 프로젝트도 해야지.. 지금 벌여놓은 공부가 너무 많다. 취준생 입장에서 불안한 마음에 이것 저것 동시에 진행하고 있는데 확실히 하나에 대한 집중도도 떨어지거니와, 전체의 방향성을 스스로도 모르겠다.&lt;/p&gt;

&lt;p&gt; 3월에 퇴사했을 때의 마음가짐은 ‘꼼꼼하게 공부해서 올해 안에만 취업하자’ 였는데, 괜찮은 회사들 2~3개씩 지원하다 보니 꼼꼼히 공부하자는 마음가짐이 조금 흐트러지는 것 같다.(빨리 취업해야 하는 이유도 생겼고..) 코딩테스트 볼 때면 매번 1주일은 빡세게 코딩테스트만 잡고 있고, 프로젝트가 부실한 것 같아 프로젝트 붙잡고 있자니 진도도 잘 안나가고.. 후.. 그러다 보니 정작 계획했던 이론공부도 늦춰진다.&lt;/p&gt;

&lt;p&gt;  역시 공부할게 예쁘게 짜여져 있던 고등학교 공부가 가장 쉬운 것 같다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Sagyo MSA 개편 2 - Spring Cloud Oauth2를 이용한 인증 서비스(작성중)</title>
   <link href="http://localhost:4000/posts/projects/sagyo_reboot/Sagyo5/"/>
   <updated>2020-05-27T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/sagyo_reboot/Sagyo5</id>
   <content type="html">
&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/msa_sketch.png&quot; alt=&quot;msa_sketch.png&quot; class=&quot;center&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;OAuth2.0을 이용해 권한 서버를 구현합니다. OAuth2.0에 대한 설명은 &lt;a href=&quot;http://localhost:4000/posts/googling/etc/Oauth/&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/oauth_web_server_flow.png&quot; alt=&quot;oauth_web_server_flow.png&quot; /&gt;&lt;small&gt;출처 : https://docs.oracle.com/cd/E39820_01/doc.11121/gateway_docs/content/oauth_flows.html &lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;위에 보이는 OAuth2.0의 구성요소중  Client App은 추후에 만들 web-client 서비스가 될 것이고,  Resource Server는 추후에 만들 API Gateway 뒤에 있는 서비스들(search, user, contact, common, post)이 될 것입니다.&lt;/li&gt;
  &lt;li&gt;이 포스트에서 집중할건 Authorization Server 구축입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;구현-레퍼런스&quot;&gt;구현 레퍼런스&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;다음 포스팅들을 바탕으로 구현했습니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://daddyprogrammer.org/post/1239/spring-oauth-authorizationserver/&quot;&gt;https://daddyprogrammer.org/post/1239/spring-oauth-authorizationserver/&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/spring-cloud-samples/authserver&quot;&gt;https://github.com/spring-cloud-samples/authserver&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;구현&quot;&gt;구현&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;(구현중..)&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>인증 관련 개념들 - 쿠키+세션, Token, JWT, OAuth2</title>
   <link href="http://localhost:4000/posts/googling/network/Oauth/"/>
   <updated>2020-05-25T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/network/Oauth</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 아래 포스팅들을 참고하여 작성되었습니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://velopert.com/2350&quot;&gt;https://velopert.com/2350&lt;/a&gt;, &lt;a href=&quot;https://velopert.com/2389&quot;&gt;https://velopert.com/2389&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;쿠키/세션 방식에서 토큰 방식으로의 이행&lt;/li&gt;
          &lt;li&gt;JWT 토큰의 구성&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.sauru.so/blog/basic-of-oauth2-and-jwt/&quot;&gt;https://www.sauru.so/blog/basic-of-oauth2-and-jwt/&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;OAuth2와 JWT의 동작 원리&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://bcho.tistory.com/999&quot;&gt;https://bcho.tistory.com/999&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;OAuth에서 JWT로의 이행&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6749&quot;&gt;https://tools.ietf.org/html/rfc6749&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;OAuth2.0 Specification (RFC 6749)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc7519&quot;&gt;https://tools.ietf.org/html/rfc7519&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;JWT Specification (RFC 7519)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Sagyo_Reboot 프로젝트에서 로그인/인증 기능을 새로 구현하고 싶은데 어깨 넘어로 듣기로 Oauth2가 요즘 가장 많이 쓰이는 것 같았습니다. 그래서 Oauth2에 대해 찾다보니 인증방식에 대한 정보들이 줄줄이 계속 나오길래 정리해서 올립니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래의 것들을 알아보겠습니다.&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;쿠키 / 세션 (서버 기반 인증)&lt;/li&gt;
      &lt;li&gt;토큰 기반 인증
2.1. Oauth 2.0
2.2. JWT&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-쿠키--세션-서버-기반-인증&quot;&gt;1. 쿠키 / 세션 (서버 기반 인증)&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;인증의 가장 기본적인 방법입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;동작과정&quot;&gt;동작과정&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Client -&amp;gt; Server
    &lt;ul&gt;
      &lt;li&gt;Id와 Pw를 보내 로그인을 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Server -&amp;gt; Client
    &lt;ul&gt;
      &lt;li&gt;Id와 Pw가 맞다면 Session Id를 발급해 서버에 저장하고 클라이언트에도 전송합니다.&lt;/li&gt;
      &lt;li&gt;Session Id의 유효기간을 정하는건 서버 나름입니다.&lt;/li&gt;
      &lt;li&gt;Session Id 관리엔 Redis, Memcached 등을 사용할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Client -&amp;gt; Server
    &lt;ul&gt;
      &lt;li&gt;받은 Session Id는 쿠키에 저장합니다.&lt;/li&gt;
      &lt;li&gt;다음 요청시 Session Id를 같이 보내 인증을 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;장점&quot;&gt;장점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;쉬운 구현&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;단점&quot;&gt;단점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Session Id를 탈취 당할 경우 보안에 취약합니다.&lt;/li&gt;
  &lt;li&gt;세션은 한 서버마다 저장되기 때문에 여러 복제 서버를 사용하는 현대의 큰 웹 서비스엔 적합하지 않습니다.
    &lt;ul&gt;
      &lt;li&gt;WAS 인스턴스 3개(A1, A2, A3 서버)를 사용중인데 웹 서버에서 로드밸런싱을 하며 A1, A2, A3 중 어느 인스턴스로 요청을 보낼 지 모릅니다. 이때, A1서버에서 받은 Session Id는 A2 서버에서 동작하지 않을 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;마찬가지로, 현대의 웹은 서버의 유연한 Scale Out을 지향하기 때문에 한 서버에 귀속된 세션은 사용에 어려움이 따릅니다.&lt;/li&gt;
  &lt;li&gt;HTTP서버는 Stateless를 지향합니다. (요청과 응답이 끝나면 그로 인한 상태들을 남기지 않는 것) 하지만, 세션 방식에선 지속 로그인을 위해 접속 했던 클라이언트의 세션을 살려둬야 합니다. 즉, Stateful 해집니다.
    &lt;ul&gt;
      &lt;li&gt;Stateless 한 서버를 지향하면 서버와 클라이언트의 연결고리가 없기 때문에 서버의 확장성이 높아집니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CORS (Cross-Origin Resource Sharing)
    &lt;ul&gt;
      &lt;li&gt;쿠키는 해당 쿠키를 생성한 단일 도메인 및 서브 도메인에서만 작동합니다. 어플리케이션이 여러 도메인을 가지고 작동한다면 CORS를 피해 쿠키를 다룰 방법을 찾아야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-token-기반&quot;&gt;2. Token 기반&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Session Id를 발급받는 대신 Token을 발급 받습니다. Session Id는 서버가 Session Id를 기억하고 있어야 하지만 Token 방식은 서버가 Token을 저장해두지 않고 요청이 올때 Token을 검증합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;대략적인-동작-과정&quot;&gt;(대략적인) 동작 과정&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Client -&amp;gt; Server
    &lt;ul&gt;
      &lt;li&gt;Id와 Pw를 보내 로그인을 요청합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Server -&amp;gt; Client
    &lt;ul&gt;
      &lt;li&gt;Id와 Pw가 맞다면 Signed Token을 발급해줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Client -&amp;gt; Server
    &lt;ul&gt;
      &lt;li&gt;Token을 쿠키에 저장해둡니다.&lt;/li&gt;
      &lt;li&gt;다음 요청시 Token을 같이 보내 인증합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;특징&quot;&gt;특징&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;위의 동작과정만 보면 Session Id를 발급 받는 것과 크게 다를 바 없어 보입니다.&lt;/li&gt;
  &lt;li&gt;우선 핵심적인 차이는 서버에 흔적이 남지 않는 다는 것입니다. Stateless한 서버를 구현할 수 있고 여러 WAS를 사용할 수도 있고 Scale Out도 용이합니다.&lt;/li&gt;
  &lt;li&gt;다만, 그렇다면 한 가지 의문이 생깁니다. &lt;strong&gt;“서버에 아무 것도 남기지 않는데 어떻게 Token을 인증할 것인가”&lt;/strong&gt; 그에 대해선 Oauth 2.0과 JWT를 살펴보며 더 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;장점-1&quot;&gt;장점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;서버가 따로 저장할 것이 없습니다(서버의 부담이 줄어듭니다.)&lt;/li&gt;
  &lt;li&gt;Scale Out에 강합니다.&lt;/li&gt;
  &lt;li&gt;관련 기술들이 웹 표준으로 등록되어 있습니다. 다양한 프레임워크, 언어에서 호환가능 합니다.
    &lt;ul&gt;
      &lt;li&gt;인증 프레임워크인 OAuth 2.0은 RFC 6749에 등록되어 있습니다.&lt;/li&gt;
      &lt;li&gt;표준 토큰인 JWT는 RFC 7519에 등록되어 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;보안상 완벽한 기술은 없지만, 그래도 현재는 가장 널리 쓰이는 인증 방식입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;단점-1&quot;&gt;단점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Token관련 기술을 학습해야 하는 부담감.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;21-oauth-20&quot;&gt;2.1. OAuth 2.0&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;요즘 인터넷을 이용하면 아래와 같은 소셜 로그인을 자주볼 수 있습니다. 유저로서 소셜로그인의 경험을 떠올려보면 다음과 같은 과정으로 진행되는걸 알 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;A 서비스 홈페이지를 이용하기 위해 로그인 필요&lt;/li&gt;
      &lt;li&gt;소셜 로그인 버튼 클릭 - 구글로 로그인&lt;/li&gt;
      &lt;li&gt;구글 페이지로 넘어가 id/pw 입력&lt;/li&gt;
      &lt;li&gt;id/pw 입력 성공시 각종 권한을 허용해주겠냐는 페이지에서 권한 승낙&lt;/li&gt;
      &lt;li&gt;다음 A서비스 이용부턴 소셜 로그인만 하면 권한 허용 필요 없이 이용가능&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이 과정을 가능하게 해주는게 OAuth2.0입니다. OAuth2.0은 이렇게 &lt;strong&gt;third-party 어플리케이션이 다른 서비스들의 권한을 사용할 수 있게&lt;/strong&gt; 도와주는 프레임워크 입니다. OAuth2.0의 이런 특징은 명세에서도 확인할 수 있습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;The OAuth 2.0 authorization framework enables &lt;strong&gt;a third-party application to obtain limited access to an HTTP service&lt;/strong&gt;, either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service, or by allowing the third-party application to obtain access on its own behalf.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;oauth20-흐름&quot;&gt;OAuth2.0 흐름&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;토큰 기반인증의 대표적인 프레임워크인 Oauth2.0은 다음과 같은 방식으로 작동합니다. Oracle의 설명이 너무 깊지도 얕지도 않아 적당하다고 생각해 가져왔습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Network/oauth_web_server_flow.png&quot; alt=&quot;oauth_web_server_flow.png&quot; /&gt;&lt;small&gt;출처 : https://docs.oracle.com/cd/E39820_01/doc.11121/gateway_docs/content/oauth_flows.html&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;용어&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;User : 서비스를 이용하고 있는 사람입니다.&lt;/li&gt;
      &lt;li&gt;UserAgent (Browser) : 유저가 사용하고 있는 웹 브라우저입니다.&lt;/li&gt;
      &lt;li&gt;Web Server(Client App) : 위에서 말한 third-party 어플리케이션입니다. 구글, 네이버, 카카오 등의 소셜 로그인을 이용하는 웹 서비스입니다.&lt;/li&gt;
      &lt;li&gt;Authorization Server : 구글, 네이버, 카카오 등 원 리소스를 가지고 있는 서버의 권한 서버입니다. 권한을 확인하고 토큰을 발급하는 역할을 합니다.&lt;/li&gt;
      &lt;li&gt;Resource Server : 허용해준 권한에 따라 실제 리소스를 가지고 있는 서버입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;흐름&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;그림엔 안나왔지만 Client와 Authorization Server간의 등록 과정이 필요합니다. 보통 Client Id와 Client Secret, redirect URL을 등록합니다.&lt;/li&gt;
      &lt;li&gt;Enter URL&lt;br /&gt;유저가 웹 브라우저로 Client 앱(앞서 말한 third-party 앱)의 사이트에 접근합니다.&lt;/li&gt;
      &lt;li&gt;Open URL &amp;amp; Start OAuth Process&lt;br /&gt;브라우저가 Client 서버로 url요청을 보내며 OAuth2.0의 프로세스가 시작됩니다.&lt;/li&gt;
      &lt;li&gt;Redirect to AuthZ Server&lt;br /&gt;Client 앱에서 Authorization Server로 리다이렉트 보냅니다. (보낼때 사전 등록해둔 Client Id와 redirect URL을 같이 보냅니다.)&lt;/li&gt;
      &lt;li&gt;Opens redirect URL&lt;br /&gt;사용자의 웹 브라우저는 응답받은 리다이렉트 주소로 리다이렉트 보냅니다.&lt;/li&gt;
      &lt;li&gt;Present Authorization UI&lt;br /&gt;권한 허용 UI를 사용자에게 보내줍니다. (위 그림엔 안나왔지만 로그인이 안되어 있다면 로그인 UI부터 보내주고 후에 권한 허용 UI를 보내줍니다.)&lt;/li&gt;
      &lt;li&gt;Present credentials and authorise or deny&lt;br /&gt;유저가 권한을 허용합니다. (거부하면 종료)&lt;/li&gt;
      &lt;li&gt;Present submitted data from user&lt;br /&gt;유저가 입력한 데이터를 Authorization Server에게 보냅니다.&lt;/li&gt;
      &lt;li&gt;Verify and create Authorization code&lt;br /&gt;해당 유저를 확인하고 Authorization code를 발급합니다.&lt;/li&gt;
      &lt;li&gt;Redirect to Web Server with Authorization Code&lt;br /&gt;Authorization code를 브라우저로 보냅니다.&lt;/li&gt;
      &lt;li&gt;Follow redirect to Web Server&lt;br /&gt;등록해둔 redirect URL로 요청합니다.(보통 Client앱의 메인화면) 유저의 입장에선 &lt;strong&gt;6&lt;/strong&gt;에서 권한 확인을 한 이후에 바로 Client앱의 메인 화면이 나올 것입니다.&lt;/li&gt;
      &lt;li&gt;Present Authorization Code&lt;br /&gt;유저의 요청을 받은 Client 서버는 유저의 Authorizaion Code를 Authorization Server로 보냅니다.&lt;/li&gt;
      &lt;li&gt;Return Access Token : &lt;strong&gt;access token을 발급해줍니다.&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;Call protected resource with Access Token&lt;br /&gt;access token을 이용해 제한된 리소스에 접근 가능해집니다.(구글 캘린더, 메일 등..)&lt;/li&gt;
      &lt;li&gt;Return protected resource&lt;br /&gt;리소스를 제공해줍니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;OAuth2.0은 12에서 발급한 access token을 Authorization Server가 저장하고 있고 유저도 쿠키의 형태로 가지고 있습니다. 다음 접근시엔 access token과 같이 요청을 보내고 요청을 받은 Resource Server는 access token을 Authorization Server로 보내 검증합니다.&lt;/li&gt;
  &lt;li&gt;그런데 OAuth2.0에서 사용하는 기본 access token은 아무 의미 없는 랜덤한 문자열입니다. 그래서 매 요청마다 Authorization Server에 검증을 보내야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;22-jwt&quot;&gt;2.2. JWT&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;JWT (Json Web Token)은 토큰에 대한 규약입니다. OAuth2.0같이 전체 인증 흐름에 대한 프레임워크는 아니고 인증과정에서 쓰이는 토큰에 관한 규약입니다.&lt;/li&gt;
  &lt;li&gt;JWT는 기존의 토큰들이 무의미한 문자열로 이루어져 있어서 매 요청시마다 Authorization Server를 거치는 것이 불만족스러워 만들어 졌습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;jwt-구성&quot;&gt;JWT 구성&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;JWT의 예시입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;span style=&quot;color: red; overflow-wrap: break-word&quot;&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9&lt;/span&gt;.&lt;span style=&quot;color:purple; overflow-wrap: break-word&quot;&gt;eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJhYmMiOiJhd2R3ZCJ9&lt;/span&gt;.&lt;span style=&quot;color:blue; overflow-wrap: break-word&quot;&gt;rbbjXAT2YxB5tAPtbZyJJF12y7uyLyPLHAvC2QDMrbM&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;JWT는 . 으로 구분된 3개의 문자열로 이루어져 있습니다. 이를 순서대로 Header, Payload, Signature라고 부릅니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Header&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;header는 토큰의 종류를 뜻하는 “typ”과 해싱 알고리즘을 뜻하는 “alg”를 Json 형태로 표현한걸 BASE 64 인코딩해 얻어집니다.&lt;/p&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;alg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;HS256&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;typ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;JWT&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Payload&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Payload엔 보내야할 정보들을 JSON형태로 표현 후 BASE 64로 인코딩해 얻어집니다. Payload에서 쓰이는 정보들을 claim이라고 부릅니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;claim에는 registered claim, public claim, private claim이 존재합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;registered claim&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;토큰에 대한 정보를 담기위해 미리 지정된 이름의 클레임입니다. 토큰 발급자(iss), 토큰 제목(sub), 토큰 대상자(aud), 토큰 만료시간(exp), 토큰 발급시간(iat) 등이 있습니다. 모두 옵션입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;public claim&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;collision-resistant한 이름을 가지고 있어야 합니다. 클레임 이름을 URI 형식으로 만듭니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;private claim&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;기타 모든 클레임들이며 서버와 클라이언트간에 합의된 이름을 사용합니다. registered claim과 이름이 겹치지 않도록 주의해야 합니다.&lt;/li&gt;
        &lt;/ul&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1234567890&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;John Doe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;iat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1516239022&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;https://ntz4kiseung.github.io/&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;coffee&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;starbucks&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Signature&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Signature는 “header의 BASE 64 인코딩”+ “.” +”Payload의 BASE 64 인코딩” 을 header에 기술된 해시 함수에 넣어 만든 해시값입니다.&lt;/li&gt;
      &lt;li&gt;JWT를 발급하는 쪽에선 비밀키를 이용해 해시값을 만들고 JWT를 검증하는 쪽에선 공개키를 이용해 받은 JWT를 검증합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>객체지향의 사실과 오해</title>
   <link href="http://localhost:4000/posts/study/short_books/OOP_Truth_Misunderstanding/"/>
   <updated>2020-05-22T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/short_books/OOP_Truth_Misunderstanding</id>
   <content type="html">
&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Short_Books/OOP_Truth_Misunderstanding.png&quot; alt=&quot;OOP_Truth_Misunderstanding.png&quot; class=&quot;center&quot; width=&quot;50%&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;0-후기&quot;&gt;0. 후기&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;후기&quot;&gt;후기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;책의 전반적인 느낌은 ‘아는 만큼 더 보이고, 더 얻어가는 책’인 것 같습니다.
    &lt;ul&gt;
      &lt;li&gt;저자는 객체 지향에 대한 이해를 10까지 가지고 있습니다. 그리고 책에선 ‘이 정도 설명해줬으면 제발 10까지 이해해주세요!!!’라는 느낌으로 자세히 설명합니다.&lt;/li&gt;
      &lt;li&gt;하지만 저는 책을 읽기 전에 3만큼의 이해를 가지고 있었고, 3을 통해 책을 읽으니 5까지만 알아듣고 ‘아~ 이 책 뭐 말하려는 지 알겠어!’ 라고 생각하는 것 같습니다.&lt;/li&gt;
      &lt;li&gt;책 중간중간에 ‘왜 이렇게까지 설명하지?’라는 느낌이 드는걸 보니, 제가 지금 이해한 것 이상이 있는 책인 것 같습니다. 몇 년 더 경험을 쌓고 다시 읽으면 이번엔 7~8정도까지 얻어갈 수 있지 않을까 생각됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;책에서 말하고자 하는 핵심 내용은 1장에서 다 나옵니다. 나머지 장에선 1장에서 나온 개념들을 자세히 풀어 설명해줍니다. 그런데 자세한 설명이 프로그래밍의 내용을 추상화해 객체 지향 철학 같은 느낌이라 사실 약간 말장난처럼 느껴지는 부분도 많습니다.(ex - 타입에 속하는 객체 역시 타입의 인스턴스라고 한다.) 그래도 모든 장에서 이상한 나라의 앨리스를 예로 들어가며 설명해서 이해가 어렵진 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;내가-정의하는-객체-지향-프로그래밍&quot;&gt;내가 정의하는 객체 지향 프로그래밍&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;한 어플리케이션을 이루는 구성요소들을 효과적으로 구성하고 관리하기 위한 프로그래밍 방법론이다.&lt;/li&gt;
  &lt;li&gt;효과적으로 구성하고 관리하기 위한 방법으로 객체들의 행동을 &lt;strong&gt;추상화&lt;/strong&gt; 하고 추상화 한 행동들을 &lt;strong&gt;캡슐화&lt;/strong&gt;한다.&lt;/li&gt;
  &lt;li&gt;추상화한 객체를 &lt;strong&gt;구현&lt;/strong&gt;하고 &lt;strong&gt;상속&lt;/strong&gt;해 사용 가능한 객체를 만든다. 구현과 상속은 1:1로 대응하는 게 아니라 1:다로 대응할 수 있는데 이런 특징을 &lt;strong&gt;다형성&lt;/strong&gt;이라고 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-협력하는-객체들의-공동체&quot;&gt;1. 협력하는 객체들의 공동체&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;11-실세계의-비유&quot;&gt;1.1. 실세계의 비유&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;흔히 사용하는 기존의 객체 지향 설명
    &lt;ul&gt;
      &lt;li&gt;“객체지향이란 실세계를 직접적이고 직관적으로 모델링할 수 있는 패러다임”&lt;/li&gt;
      &lt;li&gt;위와 같은 실세계의 비유로 객체 지향 전부를 설명하려면 맞지 않는 부분이 많습니다. 하지만 그럼에도 불구하고 아직까지도 실세계의 비유를 객체 지향 프로그래밍에 사용하는 이유는 실세계의 비유로 쉽게 설명할 수 있는 특징들도 많기 때문입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;실세계의 비유를 하나 보겠습니다.
    &lt;ul&gt;
      &lt;li&gt;손님이 커피를 주문합니다.&lt;/li&gt;
      &lt;li&gt;캐셔는 주문을 받고 계산을 합니다.&lt;/li&gt;
      &lt;li&gt;캐셔는 손님에겐 벨을 주고, 바리스타에겐 주문 쪽지를 넘겨줍니다.&lt;/li&gt;
      &lt;li&gt;바리스타는 쪽지에 있는 대록 제조를 한 뒤 캐셔에게 넘겨줍니다.&lt;/li&gt;
      &lt;li&gt;캐셔는 제조된 커피를 받고 손님의 호출벨을 울립니다.&lt;/li&gt;
      &lt;li&gt;손님을 커피를 받고 벨을 반납합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;위와 같은 과정이 일어나기 위해선 손님, 캐셔, 바리스타가 &lt;strong&gt;협력&lt;/strong&gt;해야 합니다. 협력을 하기위한 각자의 &lt;strong&gt;역할&lt;/strong&gt;이 있고, 각 역할엔 역할에 맞는 &lt;strong&gt;책임&lt;/strong&gt;이 따릅니다.&lt;/li&gt;
  &lt;li&gt;위의 예시를 비유로 객체 지향 프로그래밍을 설명한다면, 각 사람은 &lt;strong&gt;객체&lt;/strong&gt;가 됩니다. 서로 주고 받는 요청과 응답은 &lt;strong&gt;메세지&lt;/strong&gt;로 처리될 것이고, 손님이 어떤말로 주문을 할지, 캐셔가 어떻게 계산을 해줄지, 바리스타가 어떻게 커피를 만들지 각 방법들은 &lt;strong&gt;메소드&lt;/strong&gt;가 됩니다.&lt;/li&gt;
  &lt;li&gt;객체들은 &lt;strong&gt;협력적&lt;/strong&gt;이어야 합니다. 다른 객체와의 협력 없이 홀로 작동하는 객체는 없습니다.
    &lt;ul&gt;
      &lt;li&gt;“어떤 객체도 섬이 아니다” - Kent Beck 1989&lt;/li&gt;
      &lt;li&gt;협력을 위해 명확한 역할이 필요하고 역할엔 책임이 따릅니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;객체는 &lt;strong&gt;자율적&lt;/strong&gt;이어야 합니다. 바리스타가 어떻게 제조를 하는 지 캐셔는 몰라도 되는 것 처럼, 객체들은 다른 객체들에게 자신이 어떻게 작동하는지 등을 노출할 필요가 없습니다.
    &lt;ul&gt;
      &lt;li&gt;자율적인 객체는 각자의 &lt;strong&gt;상태&lt;/strong&gt;와 &lt;strong&gt;행위&lt;/strong&gt;를 갖습니다.&lt;/li&gt;
      &lt;li&gt;주고 받는 메세지와 메세지를 처리하는 메서드를 분리하는 것 역시 자율성의 하나입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;12-객체를-지향하라&quot;&gt;1.2. 객체를 지향하라&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;객체 지향에서 흔히 통용되는 잘못된 생각중 하나는 “클래스”를 객체 지향의 핵심 개념으로 보는 것입니다. 객체 지향이 무엇인지 설명하라고 하면 클래스가 갖고 있는 추상화, 상속 등의 특징에 대해 설명하는 사람들이 많습니다.&lt;/li&gt;
  &lt;li&gt;클래스는 많은 객체 지향 프로그래밍의 중요 요소긴 하지만, 그 자체가 핵심은 아닙니다. 클래스가 존재하지 않는 객체 지향 언어도 있습니다.(Javascript와 같은 Prototype 기반의 언어들)&lt;/li&gt;
  &lt;li&gt;클래스는 객체 지향 프로그래밍의 구현 메커니즘 중 하나일 뿐입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-이상한-나라의-객체&quot;&gt;2. 이상한 나라의 객체&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;이 장에선 객체의 &lt;strong&gt;상태&lt;/strong&gt;와 &lt;strong&gt;행동&lt;/strong&gt;, &lt;strong&gt;식별자&lt;/strong&gt;를 중점으로 알아봅니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;상태는 행동이 결정하지만, 행동의 결과를 결정하는 것은 상태 입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;상태1 –[행동1]–&amp;gt; 상태2 –[행동2]–&amp;gt; 상태2 –[행동3]–&amp;gt; 상태3&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;21-상태&quot;&gt;2.1. 상태&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;상태란 특정 시점에 객체가 가지고 있는 정보의 집합으로, 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;상태
    &lt;ul&gt;
      &lt;li&gt;정적 프로퍼티&lt;/li&gt;
      &lt;li&gt;동적 프로퍼티&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;프로퍼티
    &lt;ul&gt;
      &lt;li&gt;값&lt;/li&gt;
      &lt;li&gt;링크&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;설명을 위해 이상한 나라의 사람 객체와 체중 증가 포션, 체중 감소 포션을 가정해봅시다.
    &lt;ul&gt;
      &lt;li&gt;사람
        &lt;ul&gt;
          &lt;li&gt;이름 : 민수&lt;/li&gt;
          &lt;li&gt;체중 : 60kg&lt;/li&gt;
          &lt;li&gt;왼쪽 주머니 : 체중 증가 포션&lt;/li&gt;
          &lt;li&gt;오른쪽 주머니 : 체중 감소 포션&lt;/li&gt;
          &lt;li&gt;행동
            &lt;ul&gt;
              &lt;li&gt;포션 먹기&lt;/li&gt;
              &lt;li&gt;체중 변화&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;체중 증가 포션
        &lt;ul&gt;
          &lt;li&gt;용량 : 10 회분&lt;/li&gt;
          &lt;li&gt;행동 :
            &lt;ul&gt;
              &lt;li&gt;용량 변화&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;체중 감소 포션
        &lt;ul&gt;
          &lt;li&gt;용량 : 10회분&lt;/li&gt;
          &lt;li&gt;행동 :
            &lt;ul&gt;
              &lt;li&gt;용량 변화&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이름인 ‘민수’는 바뀔 수 없는 정적 프로퍼티 입니다. 체중인 ‘60kg’은 동적 값 프로퍼티입니다. 왼쪽 주머니와 오른쪽 주머니는 동적 링크 프로퍼티입니다. 체중 증가 포션과 체중 감소 포션에 링크되어 있습니다.&lt;/li&gt;
  &lt;li&gt;민수가 왼쪽 주머니의 포션을 3번 마시고 오른족 주머니의 포션을 2번 마셨다면 체중은 60 -&amp;gt; 61 -&amp;gt; 62 -&amp;gt; 63 -&amp;gt; 62 -&amp;gt; 61 순으로 변합니다.
    &lt;ul&gt;
      &lt;li&gt;상태는 행동의 결과들이 쌓인 결과입니다.&lt;/li&gt;
      &lt;li&gt;상태를 이용하면 과거 모든 행동을 설명하지 않고도 모든 행동의 결과를 말해줄 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;현실 세계에선 포션을 마신다면 포션의 용량이 마신 사람에 의해 줄어들 것입니다. 하지만, 객체 지향의 세계의 객체들은 자율적이기 때문에 자신의 상태를 다른 객체가 바꾸는걸 용납하지 않습니다. 다만 다른 객체가 자신의 상태를 변화시킬 수 있도록 요청할 수 있는 창구를 만들어 놓습니다. &lt;strong&gt;행동&lt;/strong&gt;으로 넘어갑시다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;22-행동&quot;&gt;2.2. 행동&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;행동이란 외부의 요청 또는 수신된 메세지에 응답하기 위해 동작하고 반응하는 활동이다. 행동의 결과로 자신의 상태를 변경하거나 다른 객체에 메세지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;객체의 상태를 변경하는 것은 행동입니다.
    &lt;ul&gt;
      &lt;li&gt;행동은 객체 스스로 수행할 수도 있고, 다른 객체가 행동을 하도록 요청할 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;앞서 말했듯이, 객체지향의 세계의 객체들은 자율적이어야 하기 때문에 다른 객체가 자신의 상태에 직접 접근하도록 허락하지 않습니다. 객체가 다른 객체의 상태를 변경할 수 있는건 다른 객체에게 상태를 변경하는 행동을 해달라고 요청하는 것 뿐입니다. 마찬가지로, 상태를 조회하는 것 역시 직접 접근하지 못하고 요청을 할 뿐입니다.
    &lt;ul&gt;
      &lt;li&gt;이렇게 자신의 상태와 상태를 조작하는 행동을 묶는 방법을 캡슐화라고 합니다. 또한, 외부에서 자신의 상태에 직접 접근하지 못하도록 하는 것을 정보은닉이라고 합니다.&lt;/li&gt;
      &lt;li&gt;java에서 properties를 private로 두고(정보은닉) getter/setter(혹은 다른 메서드)로 properties로 다룹니다.(캡슐화)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;캡슐화는 객체의 자율성을 높여 협력을 단순하고 유연하게 만듭니다.(즉, 객체간의 결합도를 떨어뜨립니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;23-식별자&quot;&gt;2.3. 식별자&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;식별자란 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다. 값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야 한다. 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;식별자는 말 그대로 객체들 간에 구별을 하는 기준이 되는 프로퍼티입니다.&lt;/li&gt;
  &lt;li&gt;어느 두 객체가 있을때, 두 객체의 상태가 모두 같더라도 두 객체의 식별자가 다르다면 다른 객체입니다. 반대로, 어느 두 객체가 있을때, 두 객체의 상태가 다르더라도 객체의 식별자가 같으면 같은 객체입니다.(같은 객체이지만 시점이 다르다던지 등..)&lt;/li&gt;
  &lt;li&gt;한편, 상태가 같음으로서 식별을 완료하는 것들을 값이라고 부릅니다.(키, 몸무게 등..)&lt;/li&gt;
  &lt;li&gt;값 vs 객체
    &lt;ul&gt;
      &lt;li&gt;값과 객체를 혼란스러워 하는 이유는 두 개념 모두 클래스를 이용해 구현되기 때문입니다.
        &lt;ul&gt;
          &lt;li&gt;책엔 그냥 ‘값’과 ‘객체’라고 나오지만 사견으론 ‘값 객체’와 ‘값이 아닌 객체’? 혹은 아래 처럼 ‘참조 객체’라고 표현하는게 낫지 않을까 생각합니다. ‘값’이라고 하니 primitive 자료형만 말하는 것 같은 느낌이 듭니다. 아래 value object가 언급된 걸 보면 primitive 자료형이 아니어도 ‘==’에서 객체 주소 비교가 아니라 값 비교로 비교되는 모든 객체들을 일컫는 것 같은데..&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;일부 서적에선 오해를 없애기 위해 객체는 reference object 나 entity라는 이름을 쓰고 값은 value object 라는 이름을 쓰기도 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;24-행동이-상태를-결정한다&quot;&gt;2.4. 행동이 상태를 결정한다.&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;객체 지향 입문자들이 흔히 하는 실수는 객체를 상태 중심으로 바라보는 것입니다. 설계할 때도 객체에 필요한 상태가 무엇인지 먼저 결정하고 상태에 필요한 행동을 결정합니다.&lt;/li&gt;
  &lt;li&gt;하지만 이와 같이 상태를 먼저 고려하는건 다음과 같은 문제들을 야기할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;첫째, 캡슐화가 저해됩니다.상태가 객체 내부로 깔끔하게 캡슐화 되지 못하고 밖으로 노출될 수 있습니다.
        &lt;ul&gt;
          &lt;li&gt;사견) properties에 private 같은 접근 지시자를 깜빡하는 경우를 말하는 것이라면 그렇게 큰 우려거리는 아닐것 같습니다만..&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;둘째, 객체를 협력자가 아닌 고립된 섬으로 만듭니다. 객체의 존재 이유는 다른 객체와의 협력을 위해서입니다. 상태를 먼저 고려한다면 객체를 고립된 섬으로 만들 수 있습니다.&lt;/li&gt;
      &lt;li&gt;셋째, 객체의 재사용성이 저하됩니다. 둘째이유에서 파생되는 결과입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;객체의 행동은 객체의 역할과 책임을 나타냅니다.&lt;/li&gt;
  &lt;li&gt;사견) 개인적으로 이 문제는 닭이 먼저냐 달걀이 먼저냐의 논리 같긴 합니다. 오히려 ‘역할’을 먼저 생각하라고 했다면 더 말이 되었을 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;25-현실-세계의-비유&quot;&gt;2.5. 현실 세계의 비유&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;사견) 아직까진 현실 세계의 비유가 맞지 않는 이유가 ‘현실 세계와 다르게 객체는 자율적이어서 자신의 상태를 능동적으로 조절한다.’ 밖에 없는데… 이게 끝이라면 저도 다른 데서 객체지향을 설명하는데 현실 세계의 비유를 사용할 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-타입과-추상화&quot;&gt;3. 타입과 추상화&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;31-추상&quot;&gt;3.1. 추상&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;추상화란 어떤 양상, 세부사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.&lt;/p&gt;

  &lt;p&gt;복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다[Kramer 2007]&lt;/p&gt;

  &lt;p&gt;첫 번째 차원은 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다.&lt;/p&gt;

  &lt;p&gt;두 번째 차원은 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것이다.&lt;/p&gt;

  &lt;p&gt;모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이라는 점을 기억하라.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;‘추상’이라는 개념은 어디서 많이 들어보지만 이를 명확히 알고 있는 사람은 드뭅니다. 저는 추상의 개념을 미술에서 배웠습니다. 미술에서의 추상은 그리고자 하는 대상의 본질을 뽑아내는 일입니다.&lt;/li&gt;
  &lt;li&gt;책에서 설명하는 추상 역시 그와 같습니다. 여러 객체를 다룰 때 복잡성을 줄이기 위해 공통점을 뽑고 차이점을 버리는 것, 불필요한 세부사항을 버리고 중요한 부분만 뽑는 것이 책에서 말하는 추상입니다.&lt;/li&gt;
  &lt;li&gt;프로그래밍을 배웠다면 여러 클래스들의 공통점들을 뽑아 요약한 인터페이스 같은 개념을 말하려는걸 눈치 챌 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-개념&quot;&gt;3.2. 개념&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;객체들을 추상화해서 묶는 그릇을 ‘개념’이라고 소개하고 있습니다.&lt;/li&gt;
  &lt;li&gt;개념은 심볼, 내연, 외연으로 구성됩니다.
    &lt;ul&gt;
      &lt;li&gt;심볼(symbol) : 개념을 가리키는 간략한 이름이나 명칭
        &lt;ul&gt;
          &lt;li&gt;ex) 음료&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;내연(intension) : 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 속하는지 여부를 확인 (개념의 특징)
        &lt;ul&gt;
          &lt;li&gt;ex) 액체, 식용 …&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;외연(extension) : 개념에 속하는 모든 객체의 집합 (개념의 구성원)
        &lt;ul&gt;
          &lt;li&gt;ex) 사이다, 콜라, 주스 …&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;추상화는 개념을 만듦으로서 구현되며, 프로그래밍에선 이 개념을 타입이라고 부릅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;33-타입&quot;&gt;3.3. 타입&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;‘개념’을 프로그래밍의 영역으로 끌고 오면 ‘타입’이 됩니다. (객체지향에서 말하는 클래스, 인터페이스 등..)&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;타입은 개념과 동일하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미한다. 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다. 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;책에선 타입의 세부 개념으로 ‘데이터 타입’을 얘기하는데, 음… 제 이해가 부족한 탓에 이 ‘데이터 타입’에 관한 부분의 설명이 이해가지 않아 생략합니다.&lt;/li&gt;
  &lt;li&gt;객체가 어떤 타입에 속하는 지 결정하는 것은 객체가 수행하는 행동입니다. 2장에서 객체에 상태와 행동이 있다고 했는데, 타입을 결정하는건 행동입니다. 타입이 행동에 의해 결정 된다는건 다음의 것들의 의미합니다.
    &lt;ul&gt;
      &lt;li&gt;동일한 행동이란 동일한 책임을 의미합니다.&lt;/li&gt;
      &lt;li&gt;동일한 책임이란 동일한 메세지 수신을 의미합니다.&lt;/li&gt;
      &lt;li&gt;즉, 같은 타입이라면 동일한 메세지를 처리할 수 있어야 합니다. 어떻게 처리할 지는 타입의 구성원에 따라 다를 수 있지만, 같은 메세지를 처리하며 같은 역할, 책임을 갖습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이렇게, 객체를 분류하기 위해선 객체가 외부에 제공하는 행동을 먼저 생각해야 합니다. 행동을 생각하기 위해선 그 객체의 책임을 고려해야 합니다. 이를 책임 주도 설계(Responsible Driven Design)이라고 합니다. (데이터 주도 설계의 대안으로 제시된 설계입니다.)&lt;/li&gt;
  &lt;li&gt;타입을 계층화 할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;일반화 / 특수화로 계층화 합니다. 일반화 해서 얻어진 상위 타입을 슈퍼타입이라고 하고, 특수화해 얻어진 하위 타입을 서브타입이라고 합니다.&lt;/li&gt;
      &lt;li&gt;일반화 된 타입은 특수화 된 타입보다 외연의 크기(구성원의 수)는 커지지만 행동의 수는 적어집니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;34-정적-모델&quot;&gt;3.4. 정적 모델&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문이다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;우리가 사용하는 객체는 프로그램이 실행됨에 따라 마음껏 변할 수 있습니다.(한 객체를 디버그 해보면 properties들이 계속 바뀌듯이) 이렇게 시간에따라 변하는 것의 상태나 행동을 포착하는 것을 &lt;strong&gt;동적 모델&lt;/strong&gt;이라고 합니다.&lt;/li&gt;
  &lt;li&gt;한편, 객체들을 추상화한 타입 자체는 모든 상태와 행동이 시간에 독립적입니다. 이런 모델을 &lt;strong&gt;타입 모델&lt;/strong&gt;이라고 하는데, 타입의 정적인 모습을 표현하기 때문에 &lt;strong&gt;정적 모델&lt;/strong&gt;이라고도 합니다.&lt;/li&gt;
  &lt;li&gt;많은 객체지향 프로그래밍 언어에서 정적 모델은 우리에게 익숙한 &lt;strong&gt;클래스&lt;/strong&gt;를 통해 구현됩니다. 클래스는 타입을 구현하는 여러 구현 메커니즘 중 하나입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-역할-책임-협력&quot;&gt;4. 역할, 책임, 협력&lt;/h2&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;5-책임과-메시지&quot;&gt;5. 책임과 메시지&lt;/h2&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;6-객체-지도&quot;&gt;6. 객체 지도&lt;/h2&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;7-함께-모으기&quot;&gt;7. 함께 모으기&lt;/h2&gt;

&lt;hr /&gt;

</content>
 </entry>
 
 <entry>
   <title>Javascript 실행 과정 및 비동기</title>
   <link href="http://localhost:4000/posts/googling/etc/Javascript-run-async/"/>
   <updated>2020-05-15T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/Javascript-run-async</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 아래의 글을 참고했습니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://blog.sessionstack.com/how-does-javascript-actually-work-part-1-b0bacc073cf&quot;&gt;https://blog.sessionstack.com/how-does-javascript-actually-work-part-1-b0bacc073cf&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://blog.sessionstack.com/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code-ac089e62b12e&quot;&gt;https://blog.sessionstack.com/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code-ac089e62b12e&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://blog.sessionstack.com/how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-2f077c4438b5&quot;&gt;https://blog.sessionstack.com/how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-2f077c4438b5&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;javascript-엔진&quot;&gt;Javascript 엔진&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;자바스크립트 엔진이란 자바스크립트 코드를 해석하고 실행하는 프로그램 또는 인터프리터입니다. (다른 언어에선 컴파일러, 인터프리터라고 부르는데 왜 자바스크립트에선 엔진이라 부르는지는 모르겠습니다..)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;자바스크립트 엔진은 대부분 웹 브라우저, Node JS에서 실행됩니다. (물론, 자바스크립트 엔진을 사용하는 다른 프로그램들도 있습니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;자바스크립트 엔진에 따라 구현하는 ECMAScript의 버전이 다릅니다. (흔히 말하는 ES6, ES7, ES8…)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;유명한 자바스크립트 엔진엔 다음과 같은 것들이 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;V8 : 구글에서 개발, 크롬, NodeJS에서 사용중.&lt;/li&gt;
      &lt;li&gt;Rhino : 모질라재단에서 개발&lt;/li&gt;
      &lt;li&gt;SpiderMonkey : 최초의 자바스크립트 엔진, 파이어폭스에서 사용중&lt;/li&gt;
      &lt;li&gt;Chakra(JScript9) : 인터넷익스플로러에서 사용&lt;/li&gt;
      &lt;li&gt;Chakra(Javascript) : 마이크로소프트 엣지에서 사용&lt;/li&gt;
      &lt;li&gt;Jerryscript : IoT 에서 많이 사용&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;v8&quot;&gt;V8&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;대부분 엔진은 비슷하게 동작하지만, 엔진마다 다소간의 차이가 있으므로 현재 가장 유명한 엔진인 V8엔진을 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;구성요소&quot;&gt;구성요소&lt;/h3&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/etc/v8-engine.png&quot; alt=&quot;v8-engine.png&quot; /&gt;&lt;small&gt;출처 : https://blog.sessionstack.com/how-does-javascript-actually-work-part-1-b0bacc073cf&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;V8 엔진은 위와 같이 두 부분으로 이루어집니다.
    &lt;ul&gt;
      &lt;li&gt;메모리 힙(Memory Heap) : 다른 언어들의 힙 메모리 처럼 메모리 할당이 이루어집니다.&lt;/li&gt;
      &lt;li&gt;콜 스택(Call Stack) : 다른 언어들의 스택 메모리 처럼 함수의 스택 프레임이 쌓입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;그런데, 우리가 실제로 자바스크립트를 이용할 땐 V8 엔진만 가지고 동작하는 것은 아닙니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/etc/v8-engine-web-api.png&quot; alt=&quot;v8-engine-web-api.png&quot; /&gt;&lt;small&gt;출처 : https://blog.sessionstack.com/how-does-javascript-actually-work-part-1-b0bacc073cf&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;DOM, AJAX(XMLHttpRequest), Timeout과 같이 자바스크립트를 사용하면 반드시 마주치게 되는 것들이 브라우저의 Web API에서 지원되는 것들입니다. Web API에 대한 자세한 사항은 &lt;a href=&quot;https://developer.chrome.com/apps/api_other&quot;&gt;크롬의 Web API 문서&lt;/a&gt;를 참조해주세요.&lt;/li&gt;
  &lt;li&gt;Event Loop와 Callback Queue는 뒤에서 살펴볼 자바스크립트의 비동기에 있어 필수적인 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;call-stack&quot;&gt;Call Stack&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;자바스크립트는 싱글 스레드 언어라는 말을 들어보셨을 겁니다. 대부분 언어에서 한 스레드당 하나의 스택 메모리를 할당 받는데, 자바스크립트는 오직 하나의 콜 스택을 갖습니다. 때문에, 자바스크립트를 싱글 스레드 언어라고 부릅니다.&lt;/li&gt;
  &lt;li&gt;콜 스택의 작동방식은 다른 언어의 스택 메모리와 크게 다르지 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;javascript-비동기&quot;&gt;Javascript 비동기&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;비동기 방식은 한 개의 작업을 기다리는 동안 다른 작업을 수행할 수 있는것입니다. 그런데 스택 메모리가 1개인데 어떻게 한개를 기다리며 다른 작업을 할 수 있을까요?&lt;/li&gt;
  &lt;li&gt;Web API와 Callback Queue, Event Loop를 통해 가능합니다.
    &lt;ul&gt;
      &lt;li&gt;Web API는 앞서 말했듯이 브라우저 차원에서 지원해주는 SetTimeOut, DOM 같은 API입니다.&lt;/li&gt;
      &lt;li&gt;Callback Queue는 onClick, onLoad, onDone과 같은 이벤트와 콜백 함수들이 저장되는 곳입니다.&lt;/li&gt;
      &lt;li&gt;Event Loop는 JS의 Call Stack과 브라우저의 Callback Queue를 감시하고 있다가 Call Stack이 비었을 때 Callback Queue에 있는 작업을 Call Stack에 옮깁니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/etc/v8-engine-web-api.png&quot; alt=&quot;v8-engine-web-api.png&quot; /&gt;&lt;small&gt;출처 : https://blog.sessionstack.com/how-does-javascript-actually-work-part-1-b0bacc073cf&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;자바스크립트가 싱글스레드라는 것은 위 그림에서 JS의 Call Stack이 하나라는 것입니다. Web API는 별도의 스레드를 가지고 있습니다.&lt;/li&gt;
  &lt;li&gt;비동기 작업(SetTimeOut이나 외부 API 호출 등..)은 Web API의 스레드로 옮겨집니다.&lt;/li&gt;
  &lt;li&gt;작업이 끝나고 이후의 작업을 할 준비가 됐다면 Callback Queue로 옮겨집니다.&lt;/li&gt;
  &lt;li&gt;Event Loop가 Call Stack을 보고있다가 Callback Queue의 콜백 함수를 Call Stack에 옮겨줍니다.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D&quot;&gt;latentflip&lt;/a&gt;에서 코드의 진행에 따라 각 메모리가 어떻게 변하는 지 확인할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>인터프리터 언어? 컴파일 언어? - C, Java, Python 빌드 및 실행 과정</title>
   <link href="http://localhost:4000/posts/googling/etc/Interpreter-Compile-Language/"/>
   <updated>2020-05-14T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/Interpreter-Compile-Language</id>
   <content type="html">
&lt;h2 id=&quot;인터프리터-언어-컴파일-언어&quot;&gt;인터프리터 언어? 컴파일 언어?&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;프로그래밍을 배우면서 계속 헷갈렸던 개념이 있습니다. 언어를 인터프리터 언어 / 컴파일 언어로 나누는 것입니다.&lt;/li&gt;
  &lt;li&gt;컴파일 언어는 받아들이기 쉬웠습니다. ‘실행 전에 컴파일이 되고, 컴파일 및 빌드된 파일로 실행한다.’&lt;/li&gt;
  &lt;li&gt;하지만 인터프리터 언어는 개념이 애매하게 느껴집니다. 인터프리터 언어의 설명들을 보면 인터프리터 언어란 컴파일러 없이 인터프리터가 소스코드를 한줄씩 바로바로 해석하는 언어라고 합니다.&lt;/li&gt;
  &lt;li&gt;그런데 인터프리터 언어라고 알려진 파이썬의 동작 과정을 살펴보면 컴파일 과정도 있고 컴파일러도 있습니다. 또, 컴파일 언어라고 알려진 Java는 자바 바이트코드를 실행시 한줄씩 JVM에서 해석한다고 합니다. 오잉?? 🤔🤔&lt;/li&gt;
  &lt;li&gt;그러던 와중 &lt;a href=&quot;https://soooprmx.com/archives/11330&quot;&gt;https://soooprmx.com/archives/11330&lt;/a&gt; 글을 읽게 됐고, C, Java, Python의 빌드 및 실행 과정을 구글링 해보며 어느 정도 정리가 된 것 같아 포스팅으로 남깁니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;인터프리터-언어-컴파일-언어--옛날-얘기&quot;&gt;인터프리터 언어? 컴파일 언어? 👉 옛날 얘기!&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;우선, 프로그래밍 언어를 인터프리터 언어 / 컴파일 언어로 나누는 분류는 잘못됐습니다. 프로그래밍의 초기에나 가능한 얘기이지, JIT 컴파일러, Virtual Machine 등의 등장 이후론 이와 같은 분류는 더이상 유효하지 않습니다.
    &lt;ul&gt;
      &lt;li&gt;물론, ‘컴파일 언어’와 ‘인터프리터 언어’의 개념을 선 긋듯이 명확히 하면 구분 가능할 수 있겠으나, 현재는 이미 다양한 개념과 해석이 있는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;컴파일 언어
    &lt;ul&gt;
      &lt;li&gt;‘컴파일’ 이란 한 언어에서 다른 언어로 변환 되는 것입니다.
        &lt;ul&gt;
          &lt;li&gt;C 소스코드를 컴파일 하면 (컴파일의 범위를 어디까지 잡느냐에 따라) 어셈블리 코드 혹은 기계어 코드가 나옵니다.&lt;/li&gt;
          &lt;li&gt;Java 소스코드를 컴파일 하면 자바 바이트코드 (.class)가 나옵니다.&lt;/li&gt;
          &lt;li&gt;Python 소스코드를 CPython으로 컴파일하면 .pyc 코드가 나오고 Jython으로 컴파일 하면 .class 코드가 나옵니다.&lt;/li&gt;
          &lt;li&gt;Typescript는 Javascript로 컴파일 됩니다.&lt;/li&gt;
          &lt;li&gt;Javascript는 엔진에 따라 다양하게 컴파일됩니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;인터프리터 언어, 스크립트 언어라고 알고 있는 Python, Javascript, Typescript 모두 컴파일 과정을 거칩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;인터프리터 언어
    &lt;ul&gt;
      &lt;li&gt;전통적인 의미의 인터프리터 언어는 컴파일 과정 없이 인터프리터에 의해 소스 코드가 바로 해석되어 실행됩니다.&lt;/li&gt;
      &lt;li&gt;cmd나 bash같은 쉘이 대표적인 인터프리터 언어입니다.&lt;/li&gt;
      &lt;li&gt;Python의 경우 내부적으론 컴파일러가 있지만, 실행 전까진 소스코드의 형태로만 있고 실행 시에 컴파일이 이루어지기 때문에 인터프리터 언어라고 불리는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;C는 확실하게 컴파일 언어라고 할 수 있습니다. 빌드를 끝내면 기계어로 이루어진 실행 파일이 남기 때문입니다.&lt;/li&gt;
  &lt;li&gt;Java는 어플리케이션 실행 전에 컴파일을 하지만 완전한 기계어 코드가 아닙니다. 어플리케이션 실행 시 바이트코드를 기계어 코드로 다시 번역해야 합니다. 컴파일 언어와 인터프리터 언어의 특징을 모두 가지고 있습니다.&lt;/li&gt;
  &lt;li&gt;Python은 실행 전엔 Python 소스코드의 형태로 존재하기 때문에 ‘인터프리터 언어’의 정의에 따라 인터프리터 언어라고 부를 수도 있지만, 분명히 컴파일러도 존재하고 컴파일 과정도 존재합니다.&lt;/li&gt;
  &lt;li&gt;그런데, Java나 Python 모두 미리 컴파일과 빌드를 마쳐 실행 파일을 만들어 놓을 수도 있습니다. 이 경우엔 Java와 Python도 어플리케이션 실행 전에 기계어 코드로 번역을 끝내 놓으니 컴파일 언어라고 부를 수도 있을 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;c의-빌드-과정&quot;&gt;C의 빌드 과정&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;C의 빌드 과정은 수강중인 &lt;a href=&quot;https://www.udemy.com/course/c-unmanaged-programming-by-pocu/&quot;&gt;C 강의 - 빌드 단계&lt;/a&gt;를 참고하였습니다.&lt;/li&gt;
  &lt;li&gt;C계열 언어의 조상이라고 할 수 있는 C는 다음과 같은 과정을 따라 빌드됩니다.
    &lt;ul&gt;
      &lt;li&gt;전처리(preprocessing)
        &lt;ul&gt;
          &lt;li&gt;input : 소스코드(.h, .c) 👉 output : 확장된 소스코드(translation unit, .pre)&lt;/li&gt;
          &lt;li&gt;담당 : 전처리기&lt;/li&gt;
          &lt;li&gt;주석 제거, 매크로 확장(==텍스트 복붙), include 확장(==텍스트 복붙)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;컴파일(compilation)
        &lt;ul&gt;
          &lt;li&gt;input : 확장된 소스코드(translation unit, .pre) 👉 output : 어셈블리 코드(.s)&lt;/li&gt;
          &lt;li&gt;담당 : 컴파일러&lt;/li&gt;
          &lt;li&gt;소스코드를 어셈블리 코드로 변환&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;어셈블(assembling)
        &lt;ul&gt;
          &lt;li&gt;input : 어셈블리 코드(.s) 👉 output : 오브젝트 코드(.o)&lt;/li&gt;
          &lt;li&gt;담당 : 어셈블러&lt;/li&gt;
          &lt;li&gt;어셈블리어를 기계어로 변환&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;링크(linking)
        &lt;ul&gt;
          &lt;li&gt;input : 오브젝트 코드&lt;strong&gt;들&lt;/strong&gt;(.o) 👉 output : 실행 파일(.exe - 윈도우)&lt;/li&gt;
          &lt;li&gt;담당 : 링커&lt;/li&gt;
          &lt;li&gt;한 소스코드에서 다른 소스코드에 있는 함수를 호출하는 등의 행위가 오브젝트 코드까진 빈칸으로 남겨져 있습니다. 링크 과정에서 빈칸들에 알맞은 주소를 넣어줍니다. 모든 오브젝트 코드들을 연결해 하나의 실행 파일을 만듭니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;전처리, 컴파일, 어셈블을 합쳐 컴파일이라고 부르기도 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;java의-빌드-및-실행-과정&quot;&gt;Java의 빌드 및 실행 과정&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;자바의 빌드 및 실행 과정은 &lt;a href=&quot;http://tcpschool.com/java/java_intro_programming&quot;&gt;http://tcpschool.com/java/java_intro_programming&lt;/a&gt;를 참고했습니다.&lt;/li&gt;
  &lt;li&gt;자바 파일의 빌드 및 실행 과정은 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt;컴파일
        &lt;ul&gt;
          &lt;li&gt;input : 소스코드(.java) 👉 output : 자바 바이트코드(JVM이 이해할 수 있는 코드, .class)&lt;/li&gt;
          &lt;li&gt;담당 : 컴파일러&lt;/li&gt;
          &lt;li&gt;java 소스코드를 자바 바이트코드로 컴파일 합니다.&lt;/li&gt;
          &lt;li&gt;컴파일 할 때 상세한 과정은 &lt;a href=&quot;https://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/&quot;&gt;여기&lt;/a&gt;에 자세히 나와있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;실행 - JVM
        &lt;ul&gt;
          &lt;li&gt;클래스 로더
            &lt;ul&gt;
              &lt;li&gt;자바 바이트 코드는 JVM의 클래스 로더에 의해 JVM 메모리 상에 올라가게 됩니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;자바 인터프리터
            &lt;ul&gt;
              &lt;li&gt;기본적으론 자바 인터프리터가 자바 바이트 코드를 기계어로 해석해 실행 가능하도록 만듭니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;JIT(Just In Time) 컴파일러
            &lt;ul&gt;
              &lt;li&gt;인터프리터만으론 실행이 느리기 때문에 만들어진 것이 JIT 컴파일러 입니다. 자바 바이트 코드를 모두 기계어로 컴파일해 캐시해 둡니다. 한 번 기계어로 해석하는 건 인터프리터보다 느리지만, 컴파일한 바이트코드를 캐시해둬 다음 시행시엔 빠르게 수행됩니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;python-동작-과정&quot;&gt;Python 동작 과정&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Python의 기본 동작&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;소스코드를 컴파일해 바이트코드를 만듭니다. (컴파일러 종류가 많습니다..)&lt;/li&gt;
      &lt;li&gt;바이트코드가 Python Virtual Machine에서 기계어로 번역되어 실행됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Java파일이 Java 바이트코드로 컴파일 되고 JVM에서 실행 되는 것과 유사합니다. 다만, Java는 JVM 실행 전에 Java 바이트코드를 컴파일 하지만, Python은 실행시에 바이트 코드를 만듭니다.
    &lt;ul&gt;
      &lt;li&gt;컴파일 과정이 있지만 실행 후에 컴파일이 되므로 컴파일 과정을 인터프리팅 과정에 포함시켜 인터프리터 언어라고 불리는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Python의 인터프리터(컴파일러)들&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;CPython
        &lt;ul&gt;
          &lt;li&gt;가장 기본적인 컴파일러이며 C로 구현되어 있습니다. &lt;a href=&quot;https://github.com/python/cpython&quot;&gt;https://github.com/python/cpython&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;.pyc로 컴파일 됩니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Jython
        &lt;ul&gt;
          &lt;li&gt;.class로 컴파일 되어 JVM에서 돌아갈 수 있게 해줍니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;IronPython
        &lt;ul&gt;
          &lt;li&gt;.NET 프레임워크의 언어들과 Python을 호환 시키기 위한 파이썬입니다.&lt;/li&gt;
          &lt;li&gt;Python 코드를 다른 .NET 프레임워크 언어로 바꿀 수 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pypy (RPython)
    &lt;ul&gt;
      &lt;li&gt;JIT 컴파일러를 지원합니다.&lt;/li&gt;
      &lt;li&gt;Python 코드를 Python 코드로 컴파일 하여… 추후에 보강하겠습니다..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Web Server와 WAS의 차이점</title>
   <link href="http://localhost:4000/posts/googling/network/WebServer-WAS/"/>
   <updated>2020-05-14T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/network/WebServer-WAS</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 &lt;a href=&quot;https://gmlwjd9405.github.io/2018/10/27/webserver-vs-was.html&quot;&gt;https://gmlwjd9405.github.io/2018/10/27/webserver-vs-was.html&lt;/a&gt;를 참고하였습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;static-resource-vs-dynamic-resource&quot;&gt;Static Resource vs Dynamic Resource&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Web Server와 WAS의 차이를 알려면 Static Resource와 Dynamic Resource를 알아야 합니다.&lt;/li&gt;
  &lt;li&gt;둘의 차이는 말 그대로 어떤 요청에도 변하지 않는 정적인 자원이냐, 요청에 따라 변하는 동적인 자원이냐입니다.&lt;/li&gt;
  &lt;li&gt;Static Resource
    &lt;ul&gt;
      &lt;li&gt;예시 - 이미지, 비디오, 오디오, html 페이지, css파일, js 파일 등&lt;/li&gt;
      &lt;li&gt;어떤 클라이언트가 요청하든 같은 Resource를 받게 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Dynamic Resource
    &lt;ul&gt;
      &lt;li&gt;예시 - jsp, asp php 페이지 등&lt;/li&gt;
      &lt;li&gt;요청한 클라이언트에 따라 바뀌는 자원입니다.
        &lt;ul&gt;
          &lt;li&gt;예를들어, 네이버 카페에 들어가면 로그인한 유저에 따라 가입한 카페의 내역이 다를 것이고, 마이페이지에 로드되는 내용들이 다를 것입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;web-server-vs-web-application-server&quot;&gt;Web Server vs Web Application Server&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;웹 서버와 WAS의 차이를 정말 단순화 시켜 말한다면, 웹 서버는 Static Resource을 제공해주고, WAS는 Static, Dynamic Resource 모두를 제공해준다는 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;web-server&quot;&gt;Web Server&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;예시 - Apache, Nginx, IIS 등&lt;/li&gt;
  &lt;li&gt;웹 서버는 클라이언트와 HTTP 메세지를 주고 받는 역할을 합니다.&lt;/li&gt;
  &lt;li&gt;메세지를 주고 받을 때 따로 추가적인 처리가 필요하지 않은 Static Resource를 웹 서버 차원에서 제공해 줄 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;web-application-server&quot;&gt;Web Application Server&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;예시 - Tomcat, JBoss, JEUS 등&lt;/li&gt;
  &lt;li&gt;WAS = 웹 서버 + 웹 컨테이너&lt;/li&gt;
  &lt;li&gt;웹 컨테이너
    &lt;ul&gt;
      &lt;li&gt;웹 컨테이너란 jsp, asp, php 등 동적인 페이지를 만들어주는 어플리케이션을 실행시킬 수 있는 환경입니다.&lt;/li&gt;
      &lt;li&gt;WAS는 jsp, asp 등의 실행 환경을 제공한다고 볼 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;web-server는-왜-필요할까&quot;&gt;Web Server는 왜 필요할까&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 WAS = Web Server + Web Container 라고 했습니다. 하지만 &lt;strong&gt;실제론 WAS 앞에 Web Server를 따로 두기도 합니다.&lt;/strong&gt; WAS에 Web Server가 있는데 왜 Web Server를 따로 둘까요?&lt;/li&gt;
  &lt;li&gt;Web Server의 필요성
    &lt;ul&gt;
      &lt;li&gt;Static Resource 처리
        &lt;ul&gt;
          &lt;li&gt;Static Resource 요청이 WAS 까지 가지 않고 Web Server 단에서 처리되게 할 수 있습니다.&lt;/li&gt;
          &lt;li&gt;이를 통해 WAS의 부하를 줄일 수 있습니다. WAS는 Dynamic Resource를 처리하는 것으로도 부담이 큽니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;보안 강화
        &lt;ul&gt;
          &lt;li&gt;HTTPS 프로토콜 같은 경우 SSL 암복호화 처리를 해야 하는데 이를 WAS가 하지 않고 Web Server 단에서 처리해 줄 수 있습니다.&lt;/li&gt;
          &lt;li&gt;또한, 접근 허용 IP 관리를 앞의 Web Server 단에서 처리할 수 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;로드밸런싱
        &lt;ul&gt;
          &lt;li&gt;하나의 웹 서버 뒤에 여로 복제 WAS를 두어 로드밸런싱을 통해 각 WAS의 부담을 줄일 수 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;무중단 운영
        &lt;ul&gt;
          &lt;li&gt;여러 복제 WAS를 두고 새로운 WAS 배포시 차례차례 WAS를 배포해 무중단 운영을 이어갈 수도 있습니다.&lt;/li&gt;
          &lt;li&gt;또한, 하나의 WAS가 죽어도 다른 WAS를 사용하도록 할 수 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;A/B 테스트
        &lt;ul&gt;
          &lt;li&gt;두 가지 버전의 UI의 유저 반응을 테스트할 때 한쪽 클라이언트 집단에겐 A버전의 WAS를, 다른 클라이언트 집단에겐 B버전의 WAS를 연결해 주어 A/B 테스트를 진행할 수도 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>URL입력 부터 브라우저 출력까지</title>
   <link href="http://localhost:4000/posts/googling/network/Web-flow/"/>
   <updated>2020-05-13T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/network/Web-flow</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;클라이언트의 URL 입력&lt;/li&gt;
  &lt;li&gt;해당 URL에 대한 브라우저의 캐시 탐색&lt;/li&gt;
  &lt;li&gt;DNS 서버에서 입력받은 도메인명에 대한 IP 주소 탐색
    &lt;ul&gt;
      &lt;li&gt;보통 하나의 도메인은 여러 IP를 갖는데 DNS 수준에서 로드밸런싱이 일어나기도 합니다. (라운드로빈 방식으로..)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;URL 파싱 (포트번호 찾고, 파라미터 정리하고 등등..)&lt;/li&gt;
  &lt;li&gt;서버와 TCP 커넥션 연결
    &lt;ul&gt;
      &lt;li&gt;3 way handshake - “SYN”, “SYN+ACK”, “ACK”&lt;/li&gt;
      &lt;li&gt;바로 목적지 서버와 연결되는 경우는 거의 없습니다. 브라우저가 거치는 프록시, ISP업체의 캐시 서버, 요청한 url의 캐시 서버 등..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;클라이언트의 HTTP 요청 발신
    &lt;ul&gt;
      &lt;li&gt;중간에 여러 캐시, 프록시, 게이트웨이를 거칩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서버의 HTTP 요청 수신
    &lt;ul&gt;
      &lt;li&gt;IP 패킷의 checksum 검사 손상된 패킷 다시 요구, sequence 맞추기 등..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서버의 웹 서버 / WAS를 거쳐 돌려줄 HTTP 메세지가 만들어집니다.&lt;/li&gt;
  &lt;li&gt;서버의 HTTP 응답 발신&lt;/li&gt;
  &lt;li&gt;클라이언트의 HTTP 응답 수신&lt;/li&gt;
  &lt;li&gt;브라우저에 렌더링
    &lt;ul&gt;
      &lt;li&gt;한번의 HTTP 요청-응답으로 브라우저의 모든 내용을 그릴 수 있는 건 아니고 첫 HTTP 교환으론 HTTP의 뼈대와 페이지를 채우기 위해 필요한 추가 리소스를 요청할 url들을 가져옵니다.&lt;/li&gt;
      &lt;li&gt;페이지를 만들기 위해 필요한 추가 url들을 다시 요청해 받아와 렌더링합니다.&lt;/li&gt;
      &lt;li&gt;브라우저 렌더링에 관한 자세한 사항은… 나중에…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>TCP/IP 동작원리, UDP와 차이, handshake</title>
   <link href="http://localhost:4000/posts/googling/network/TCP/"/>
   <updated>2020-05-13T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/network/TCP</id>
   <content type="html">
&lt;h2 id=&quot;tcpip-동작-원리&quot;&gt;TCP/IP 동작 원리&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;TCP : Transmission Control Protocol, OSI 전송 계층&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;IP : Internet Protocol, OSI 네트워크 계층&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP는 데이터가 손실 되지 않은 안전한 통신인데 이 안정성을 TCP/IP가 보장해줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;TCP 프로토콜에선 HTTP 메세지를 통째로 전달하지 않습니다. IP 패킷(IP 데이터그램)이라는 작은 조각으로 나눠 전송합니다. (패킷 통신은 서킷 통신의 단점을 보완하고자 나왔습니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;IP 패킷은 아래와 같이 이루어져 있습니다.&lt;/p&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Network/ip_packet.png&quot; alt=&quot;ip_packet.png&quot; /&gt;&lt;small&gt;출처 : https://learning.oreilly.com/library/view/http-the-definitive/1565925092/ch04s01.html&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;IP 패킷 헤더
    &lt;ul&gt;
      &lt;li&gt;발신지에서 목적지로 이동하는 데에 필요한 정보를 가지고 있습니다.&lt;/li&gt;
      &lt;li&gt;그런데, 여러 조각으로 나뉜 HTTP의 조각들이 순서대로, 손실 없이 목적지에 도착하리란 보장은 없습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;TCP Segment 헤더
    &lt;ul&gt;
      &lt;li&gt;IP 패킷들의 순서를 맞춰주고 손실이 없는걸 보장해주기 위한 것이 TCP 세그먼트 헤더입니다.&lt;/li&gt;
      &lt;li&gt;TCP Checksum을 통해 메세지가 손실 됐는지 판별합니다. 손실 됐다면 해당 패킷을 다시 요청합니다.&lt;/li&gt;
      &lt;li&gt;TCP Sequence Number를 통해 IP패킷들의 순서를 맞춥니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;통신-과정--3-way-handshake-4-way-handshake-&quot;&gt;통신 과정( + 3 way handshake, 4 way handshake )&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트와 서버가 TCP 커넥션을 맺습니다.
    &lt;ul&gt;
      &lt;li&gt;TCP 커넥션은 3 way handshake로 맺어지며 쉽게 요약하면, “연결해달라 오바” - “연결했다 오바” - “알았다 오바” 입니다.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;3 way handshake&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;클라이언트 👉 서버&lt;br /&gt;‘SYN’ 플래그를 가진 40~60 Byte의 TCP 패킷을 보냅니다. 커넥션 생성 요청입니다.&lt;/li&gt;
          &lt;li&gt;서버 👉 클라이언트&lt;br /&gt;서버가 커넥션을 생성 후 ‘SYN + ACK’ 플래그를 가진 TCP 패킷을 클라이언트에게 보냅니다.  요청 승낙을 뜻합니다.&lt;/li&gt;
          &lt;li&gt;클라이언트 👉 서버&lt;br /&gt;커넥션 연결을 확인했다, 이제 메세지를 보내겠다는 ‘ACK’ 플래그를 가진 확인 응답 신호를 보냅니다. 요즘 TCP는 이 확인응답 신호를 보낼 데이터와 함께 보냅니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;분할 된 IP 패킷들을 보냅니다.&lt;/li&gt;
  &lt;li&gt;IP 패킷을 받은 쪽에선 각 IP 패킷의 TCP checksum을 검사해 손실된 패킷은 다시 요청하고 손실되지 않은 패킷들은 순서를 맞춥니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 HTTP 요청을 보내고, 서버의 HTTP 응답을 받았다면 커넥션을 끊게 됩니다.
    &lt;ul&gt;
      &lt;li&gt;커넥션을 끊는 과정은 4 way handshake로 이루어집니다.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;4 way handshake&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;클라이언트 👉 서버&lt;br /&gt;연결을 종료하겠다는 ‘FIN’플래그 전송&lt;/li&gt;
          &lt;li&gt;서버 👉 클라이언트&lt;br /&gt;확인 플래그인 ‘ACK’ 플래그를 전송 하고 서버의 통신이 끝나길 기다립니다. 이때 CLOSE_WAIT 상태가 됩니다.&lt;/li&gt;
          &lt;li&gt;서버 👉 클라이언트&lt;br /&gt;통신이 끝났으면 연결을 끊겠다는 ‘FIN’ 플래그를 전송합니다.&lt;/li&gt;
          &lt;li&gt;클라이언트 👉 서버&lt;br /&gt;확인 했다는 ‘ACK’ 플래그를 보내고 연결을 끊습니다.
            &lt;ul&gt;
              &lt;li&gt;연결을 끊기 전에 서버가 ‘FIN’플래그를 보내기전에 보냈으나 ‘FIN’플래그보다 늦게 도착한 메세지를 기다리기 위해 일정 시간 세션을 남겨 잉여 패킷을 기다립니다. 이 과정을 TIME_WAIT이라고 합니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;tcp와-udp의-차이&quot;&gt;TCP와 UDP의 차이&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;2000년대 이전 생 대한민국 남성이라면 스타크래프트를 안해봤을리 없고, PC방에서 친구들과 스타크래프트를 할 때 UDP로 연결한 경험이 있을 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Network/starcraft_udp.jpg&quot; alt=&quot;starcraft_udp.jpg&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;어렸을 땐 그냥 옆자리 친구와 하고 싶을 땐 UDP! 이렇게 알고 있었지만, 이제 UDP가 무엇이었는지 알아야 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;TCP와 UDP의 차이는 &lt;a href=&quot;https://mangkyu.tistory.com/15&quot;&gt;https://mangkyu.tistory.com/15&lt;/a&gt;를 참고하였습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;데이터의 교환 방식을 아래와 같이 나눌 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;교환방식
  └ 회선교환
  └ 축적후 교환
      └ 메세지 교환
      └ 패킷 교환
          └ 가상회선 방식 -&amp;gt; TCP
          └ 데이터그램 방식 -&amp;gt; UDP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;TCP와 UDP의 핵심 차이는 신뢰성을 중시하느냐, 연속성을 중시하느냐 입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tcp&quot;&gt;TCP&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;위에서 언급하지 않은 가상회선 방식이란, 발신지와 수신지 사이의 논리적인 경로를 정한다는 것입니다. 이런 특징 때문에 연결형 프로토콜이라고도 불립니다.&lt;/li&gt;
  &lt;li&gt;TCP는 신뢰성 있는 통신을 보장하는게 목적입니다.
    &lt;ul&gt;
      &lt;li&gt;TCP연결을 맺어야 하며 맺는 과정도 3 way handshake를 사용합니다.&lt;/li&gt;
      &lt;li&gt;Checksum을 검사해 손실된 데이터를 확인하고, 재전송을 요구합니다.&lt;/li&gt;
      &lt;li&gt;Sequence를 확인해 순서를 보장합니다.&lt;/li&gt;
      &lt;li&gt;위에선 언급되지 않았지만 흐름제어, 혼잡제어와 같은 기능도 있습니다.
        &lt;ul&gt;
          &lt;li&gt;흐름제어 : 수신자의 버퍼 오버플로 방지를 위해 송, 수신지의 데이터 처리 속도를 조절하는 것&lt;/li&gt;
          &lt;li&gt;혼잡제어 : 네트워크 내 패킷수가 넘치지 않기 위해 조절하는 것.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;신뢰성 있는 데이터를 주고받아야 하는 통신에 TCP를 사용합니다. (UDP가 아닌 대부분이 TCP라고 보면 됩니다.)&lt;/li&gt;
  &lt;li&gt;서버와 클라이언트가 1:1로 연결됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;udp-user-datagram-protocol&quot;&gt;UDP (User Datagram Protocol)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;데이터그램 방식이란 보내지는 패킷들이 서로 독립적인 관계를 지니는 것을 뜻합니다. TCP에서 가상회선이 정해지면 패킷들이 해당 회선으로 전송됐다면, UDP에서의 패킷들은 각자 독립적인 경로를 선택합니다. 이를 비연결형 프로토콜이라고 부릅니다.&lt;/li&gt;
  &lt;li&gt;UDP는 연속성을 지향합니다.
    &lt;ul&gt;
      &lt;li&gt;커넥션을 맺고 끊는 과정이 없습니다.&lt;/li&gt;
      &lt;li&gt;checksum을 계산하거나 sequence를 맞추지도 않습니다. 패킷들의 순서는 RTP(Real-Time Protocol)같은 기술을 통해 맞추거나 어플리케이션 수준에서 맞춥니다.&lt;/li&gt;
      &lt;li&gt;흐름제어, 혼잡제어 이런 것도 없습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;UDP는 연속성이 중요한 스트리밍 서비스(RTSP 프로토콜)나 한 서버가 여러 클라이언트를 상대하는 Multicast 서비스에 사용됩니다. 안정성이 중요하지 않은 프로토콜(DNS)에서 사용되기도 합니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>JAVA Garbage Collection</title>
   <link href="http://localhost:4000/posts/googling/java/Garbage-Collection/"/>
   <updated>2020-05-13T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/java/Garbage-Collection</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; 본 포스팅은 네이버 D2의 &lt;a href=&quot;https://d2.naver.com/helloworld/1329&quot;&gt;Java Garbage Collection&lt;/a&gt;을 정리한 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc란&quot;&gt;GC란?&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;메모리를 사용했으면 참조관계를 끊어 해제해야 합니다. C에선 malloc()으로 힙메모리를 할당하고 free()를 해주어 개발자가 직접 메모리 관리를 해줘야 하지만 자바에선 GC가 이를 해줍니다.&lt;/li&gt;
  &lt;li&gt;GC란, 더이상 사용하지 않는 메모리의 참조관계를 끊어주는(메모리를 해제하는) 작업입니다.&lt;/li&gt;
  &lt;li&gt;자바에서도 객체를 null로 둔다거나 System.gc()를 써서 직접 메모리를 해제할 수도 있지만, System.gc()는 잘못 쓰면 성능에 매우 큰 영향을 미치므로 웬만해선 사용을 금지합니다. (저는 사실 처음 봤습니다.. ㅎㅎ)&lt;/li&gt;
  &lt;li&gt;Stop The World
    &lt;ul&gt;
      &lt;li&gt;GC를 실행하기 위해 JVM이 애플리케이션을 멈추는 것입니다. GC를 수행하는 쓰레드 외에 모든 쓰레드가 멈춥니다.&lt;/li&gt;
      &lt;li&gt;GC튜닝의 핵심은 Stop The World의 시간을 줄이는 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc가-일어나는-영역&quot;&gt;GC가 일어나는 영역&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;GC는 힙 메모리에서 일어납니다. 그리고 힙 메모리는 객체의 지속 여부에 따라 아래와 같이 나뉩니다.
    &lt;ul&gt;
      &lt;li&gt;Young Generation
        &lt;ul&gt;
          &lt;li&gt;Eden&lt;/li&gt;
          &lt;li&gt;Survivor1&lt;/li&gt;
          &lt;li&gt;Survivor2&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Old Generation
        &lt;ul&gt;
          &lt;li&gt;Tenured&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Permanet Generation == Method Area&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Method Area라고 더 잘 알려져 있는 Perm 영역은 클래스 로드시 static 변수, intern 변수 등이 저장됩니다.&lt;/li&gt;
  &lt;li&gt;Young / Old Generation이 구성되는 과정은 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt;객체가 생성되면 Eden 영역에 들어있습니다.&lt;/li&gt;
      &lt;li&gt;GC가 일어나고 살아남은 Eden의 객체는 Survivor중 하나로 이동합니다.&lt;/li&gt;
      &lt;li&gt;GC가 일어나며 하나의 Survivor가 가득차면 그 중 살아남은 객체를 다른 Survivor영역으로 옮기고 가득찬 Survivor영역의 참조는 모두 끊깁니다.&lt;/li&gt;
      &lt;li&gt;Survivor영역에서도 계속 살아남는 객체는 Tenured 영역으로 이동합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc의-방식&quot;&gt;GC의 방식&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Young Generation에서 GC가 일어나는 방식엔 다음과 같은 것들이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;bump-the-pointer&lt;/li&gt;
      &lt;li&gt;TLABs(Thread-Local Allocation Buffers)
        &lt;ul&gt;
          &lt;li&gt;bump-the-pointer는 다중 스레드 환경에서 스레드락이 걸릴수 있기 때문에 각 스레드마다 Eden영역의 작은 부분을 할당해주는 방법입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Old Generation에서 GC가 일어나는 방법은 JDK7을 기준으로 5가지 방법이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;Serial GC&lt;/li&gt;
      &lt;li&gt;Parallel GC&lt;/li&gt;
      &lt;li&gt;Parallel Old GC (Parallel Compacting GC)&lt;/li&gt;
      &lt;li&gt;Concurrent Mark &amp;amp; Sweep GC (이하 CMS)&lt;/li&gt;
      &lt;li&gt;G1 (Garbage First) GC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Sagyo MSA 개편 1 - common, contact 서비스</title>
   <link href="http://localhost:4000/posts/projects/sagyo_reboot/Sagyo4/"/>
   <updated>2020-05-07T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/sagyo_reboot/Sagyo4</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본격적으로 Monolithic구조의 Sagyo를 MSA로 개편하기 시작했습니다. 우선 공통코드(common), 고객센터(contact) 서비스 부터 개발에 들어갔습니다.&lt;/li&gt;
  &lt;li&gt;공통코드는 이미 입력된 코드들만 출력해주면 되고, 고객센터는 구색맞추기용으로 넣어놓았기 때문에 기능이 많지 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;0-후기&quot;&gt;0. 후기&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;배운걸 토대로 common서비스, contact 서비스를 개발한 결과 느낀점을 적자면… 프레임워크의 기능이 정말 너무 강력하다는 것입니다.  &lt;u&gt;프레임워크에서 제공해주는 기본 기능만 사용한다면&lt;/u&gt; 코드는 정말 몇 줄이면 끝납니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;c1&quot;&gt;// 주소 - 시 도메인&lt;/span&gt;
 &lt;span class=&quot;nd&quot;&gt;@Entity&lt;/span&gt;
 &lt;span class=&quot;nd&quot;&gt;@Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDR_SI&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 테이블이름과 클래스 이름이 다를 경우 설정&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddrSi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt;
     &lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSIID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSINAME&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

     &lt;span class=&quot;nd&quot;&gt;@OneToMany&lt;/span&gt;
     &lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSIID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 실제 DB에서 key로 들어갈 것&lt;/span&gt;
     &lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 도메인 path로 들어갈 이름&lt;/span&gt;

     &lt;span class=&quot;c1&quot;&gt;// getter/setter&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 주소 - 시 Repository&lt;/span&gt;
 &lt;span class=&quot;nd&quot;&gt;@RestResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;si&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;si&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddrSiRepository&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrSi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;저는 지금 REST 방식의 리소스를 제대로 이해하지 못해 버벅이고 있지만, REST 방식에 정통한 사람이 처음부터 리소스를 구성한다면 개발은 정말 순식간에 끝날 것 같습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;CRUD중 CUD도 프레임워크가 알아서 구현해줘서 해당 요청을 막던가 권한 검사를 하던가 해야될 것 같습니다. (DELETE가 바로 되는걸 보고 섬짓했습니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;프레임워크들이 개발자 대신 너무 많은 일을 해줘서 편하고 좋기도 하지만 한편으론 제가 이 프레임워크들을 모두 따라갈 수 있을지 걱정이 되기도 합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-dependency&quot;&gt;1. Dependency&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;common 서비스와 contact 서비스는 아래의 Dependency를 사용했습니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Spring Boot Starter Web --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Spring Data - REST --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-data-rest&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;	
  
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Spring Data JPA --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-data-jpa&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- 커넥션풀 라이브러리(보통 dbcp를 많이씀) --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.zaxxer&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;HikariCP&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ojdbc 드라이버 --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.oracle&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;ojdbc6&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;11.2.0.3&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Spring Boot 테스트 --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusions&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusion&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.junit.vintage&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;junit-vintage-engine&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusion&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusions&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-common-서비스&quot;&gt;2. common 서비스&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;21-호출-api&quot;&gt;2.1. 호출 API&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;공통 코드를 관리하는 common 서비스에선 조회만 하면 됐기 때문에 아래와 같은 요청만 마련해뒀습니다.(POST, PUT, DELETE도 프레임워크 자체에서 구현해줬지만, 실제로 사용하는건 아래의 요청만 사용한다는 뜻입니다.)&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/si 👉 전체 시 리스트&lt;/p&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_embedded&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;si&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SI00001&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;서울&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSi&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001/gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SI00005&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;광주&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00005&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSi&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00005&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00005/gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/profile/si&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/si/{si} 👉 시 1개 상세사항 (아래는 {si}==”SI00001”)&lt;/p&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SI00001&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSiName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;서울&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrSi&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001/gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/si/{si}/gu  👉 시 1개의 구 전체 리스트 (아래는 {si}==”SI00001”)&lt;/p&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_embedded&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GU00023&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;종로구&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00023&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00023&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GU00009&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;노원구&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00009&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00009&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/si/SI00001/gu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/si/{si}/gu/{gu} 👉 해당 시, 구에 대한 상세사항&lt;/p&gt;

        &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GU00003&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGuName&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;강서구&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00003&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;addrGu&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8090/common/gu/GU00003&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;다음 4개의 공통코드는 위 시/구와 다를게 없어서 결과는 생략합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/interest-main&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/interest-main/{interest-main}&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/interest-main/{interest-main}/interest-sub&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;GET /common/interest-main/{interest-main}/interest-sub/{interest-sub}&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;22-기록-사항&quot;&gt;2.2. 기록 사항&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Boot, Spring Data에서 가장 기본이 되는 사항 외에, 다음에 개발할 때 사용할만한 것들을 기록해두겠습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;테이블 조인 시키기 &lt;code class=&quot;highlighter-rouge&quot;&gt;@OneToMany&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;@JoinColumn&lt;/code&gt;&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDR_SI&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 테이블이름과 클래스 이름이 다를 경우 설정&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddrSi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSIID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSINAME&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@OneToMany&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ADDRSIID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 실제 DB에서 key로 들어갈 것&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 도메인 path로 들어갈 이름&lt;/span&gt;
  	
	&lt;span class=&quot;cm&quot;&gt;/**
	getter/setter
	**/&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Data 조회 결과에 id 컬럼도 추가시키기(기본적으론 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Id&lt;/code&gt; 컬럼은 나오지 않습니다.)&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CommonConfiguration&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RepositoryRestConfigurerAdapter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  
    &lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EntityManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entityManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;configureRepositoryRestConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RepositoryRestConfiguration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exposeIdsFor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entityManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMetamodel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getEntities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getJavaType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 출처 : https://stackoverflow.com/questions/30912826/expose-all-ids-when-using-spring-data-rest&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Data JPA + Hibernate 에서 제공하는 기본쿼리가 아닌 다른 네이티브 쿼리 사용하기 (아래 두 메서드는 실제로 사용하는 메서드는 아닙니다.)&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gu&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddrGuRepository&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;{&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SELECT ADDRGUID, ADDRGUNAME FROM ADDR_GU WHERE ADDRSIID=:si&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nativeQuery&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findBySiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;SELECT ADDRGUID, ADDRGUNAME FROM ADDR_GU WHERE ADDRSIID=:si AND ADDRGUID=:gu&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nativeQuery&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;AddrGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findOneGu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;si&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-contact-서비스&quot;&gt;3. contact 서비스&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;고객센터(contact) 서비스는 사실 Sagyo 프로젝트에선 웹 서비스의 구색 맞추기용으로 넣어 놓은 서비스라 기능은 간단합니다.
    &lt;ul&gt;
      &lt;li&gt;자주 묻는 질문 READ&lt;/li&gt;
      &lt;li&gt;공지사항 READ&lt;/li&gt;
      &lt;li&gt;1:1 질문 CREATE&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;31-페이징-정렬-조회&quot;&gt;3.1. 페이징, 정렬 조회&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;자주 묻는 질문과 공지사항 조회는 게시일 역순, 10개씩 페이징 처리를 했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Repository는 &lt;code class=&quot;highlighter-rouge&quot;&gt;CrudRepository&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Repository&lt;/code&gt;인터페이스를 확장한 &lt;code class=&quot;highlighter-rouge&quot;&gt;PagingAndSortingRepository&lt;/code&gt; 인터페이스를 사용했습니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;notice&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;notice&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoticeRepository&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PagingAndSortingRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Notice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// 확장만 하면 기본 기능은 구현되니 코드 올리기도 민망합니다.&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@RepositoryRestController&lt;/code&gt; 를 이용해 기존 Spring Data REST의 요청 경로를 덮어썼고, 요청 받는 메서드를 따로 만들고 해당 메서드 안에서 Pageable 객체를 구성한 뒤 &lt;code class=&quot;highlighter-rouge&quot;&gt;PagingAndSortingRepository&lt;/code&gt;의 &lt;code class=&quot;highlighter-rouge&quot;&gt;findAll(Pageable)&lt;/code&gt;을 사용했습니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RepositoryRestController&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoticeController&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;NoticeRepository&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;noticeRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/notice&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RequestMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Notice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAllBySortAndPaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@RequestParam&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;page&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pageNum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Pageable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PageRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pageNum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;noticeDate&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;noticeRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;GET /contact/notice?page={pageNum} 👉 공지사항 조회(기본 0번 페이지, 10개)&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;제목&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;내용&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;noticeDate&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18 00:00:00&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;30&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;개인정보 처리방침 및 위치기반 서비스 이용약관 변경 안내&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;안녕하세요, 회원님....동의한 것으로 간주됩니다.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;noticeDate&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-06-11 00:00:00&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;23&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;3월 20일 (수) 사교 웹사이트 업데이트 안내&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;안녕하세요 회원님...업데이트 될 예정입니다!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;noticeDate&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-03-20 00:00:00&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;pageable&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sort&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sorted&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;unsorted&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;empty&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;offset&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;pageNumber&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;pageSize&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;paged&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;unpaged&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;totalElements&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;last&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;totalPages&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;size&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sort&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sorted&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;unsorted&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;empty&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;first&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;numberOfElements&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;empty&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;자주 묻는 질문 조회는 공지사항 조회와 동일하므로 생략합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-11-질문-입력&quot;&gt;3.2. 1:1 질문 입력&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Data JPA에서 CREATE는 &lt;code class=&quot;highlighter-rouge&quot;&gt;Repository&lt;/code&gt; 인터페이스의 Save 메서드를 이용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;기존 1:1 질문 입력에선 id는 시퀀스를, 질문 일자는 SYSDATE를 이용했습니다. 시퀀스와 SYSDATE는 도메인 클래스를 만들 때 어노테이션들을 설정해주면 쉽게 가능합니다.(하지만 쉬운 방법을 찾는데 꽤 많은 시간을 썼습니다.. 😥)&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;엔터티 클래스에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@SequenceGenerator&lt;/code&gt;를 추가합니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;@SequenceGenerator&lt;/code&gt;에서 sequenceName은 오라클 DB에서 사용하는 시퀀스 이름입니다.&lt;/li&gt;
      &lt;li&gt;다음 id 필드에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@GeneratedValue&lt;/code&gt;를 추가합니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;@GeneratedValue&lt;/code&gt;에서 generator는 위에서 추가한 &lt;code class=&quot;highlighter-rouge&quot;&gt;@SequenceGenerator&lt;/code&gt;의 name입니다.&lt;/li&gt;
      &lt;li&gt;중요한건 strategy인데, 식별자를 어떻게 생성할지를 지정합니다.   AUTO, TABLE, SEQUENCE, IDENTITY 가 있습니다.
        &lt;ul&gt;
          &lt;li&gt;AUTO를 고르면 오라클, MySQL등 사용중인 DB에 따라 SEQUENCE, IDENTITY를 정합니다.&lt;/li&gt;
          &lt;li&gt;TABLE은 식별키를 위한 테이블에서 키를 생성합니다.&lt;/li&gt;
          &lt;li&gt;SEQUENCE는 오라클 등의 시퀀스&lt;/li&gt;
          &lt;li&gt;IDENTITY는 Mysql 처럼 Auto-Increment 컬럼이 가능한 곳에 사용합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;날짜에 SYSDATE를 넣는건 테이블 컬럼에 DEFAULT SYSDATE가 걸려있기 때문에 directQuestionDate 속성에 insertable=false만 걸어서 INSERT 쿼리에서 빠지게 하였습니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SequenceGenerator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DIRECT_QUESTION_SEQ_GENERATOR&quot;&lt;/span&gt;
				 &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sequenceName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DIRECT_QUESTION_SEQ&quot;&lt;/span&gt;
				 &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allocationSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DIRECT_QUESTION&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DirectQuestion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GenerationType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SEQUENCE&lt;/span&gt;
				  &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DIRECT_QUESTION_SEQ_GENERATOR&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;TITLE&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;USERID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CONTENTS&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DIRECTQUESTIONDATE&quot;&lt;/span&gt;
		  &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;insertable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directQuestionDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; 
  	
	&lt;span class=&quot;c1&quot;&gt;// getter/setter&lt;/span&gt;
  	
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위의 설정을 했다면 POST 메서드로 Body에 JSON 데이터를 담아 요청을 보냅니다. Hibernate는 다음과 같은 쿼리를 수행하게 됩니다. 시퀀스가 설정 됐고,  directQuestionDate는 INSERT문에서 빠진 것을 볼 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Hibernate: select direct_question_seq.nextval from dual
Hibernate: insert into direct_question (contents, title, userid, id) values (?, ?, ?, ?)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;POST /direct-question 👉 1:1 질문 입력(아래는 JSON데이터를 담은 Body)&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b001&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;contents~~&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;리턴 값&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b001&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;contents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;contents~~&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;directQuestionDate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8010/contact/direct-question/21&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;directQuestion&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8010/contact/direct-question/21&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;directQuestionDate는 Hibernate에서 입력한게 아니기 때문에 null이 나오는데 DB에는 SYSDATE로 잘 들어가있습니다. DB자체에서 입력한 결과를 리턴값에 포함 시키는 방법을 본 것 같은데… 링크가 어딨더라..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Spring Data, Spring Data JPA, JPA, Hibernate, JDBC, DBCP 용어정리</title>
   <link href="http://localhost:4000/posts/googling/spring/Spring-Data,-JPA,-Hibernate-%EB%B3%B5%EC%82%AC%EB%B3%B8/"/>
   <updated>2020-05-07T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/spring/Spring Data, JPA, Hibernate - 복사본</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;Spring Data로 프로젝트를 개편하던 중에 검색시 Order By를 해야할 일이 있었습니다. 그런데 ‘JPA order by’로 검색할 지, ‘hibernate order by’로 검색할 지, ‘Spring Data order by’로 검색할 지 고민이 됐습니다.&lt;/li&gt;
  &lt;li&gt;이 외에도, 가벼운 클론 코딩을 맛보고 프로젝트에 들어가니 클론 코딩 때 쏟아진 다양한 기술들이 서로 엉켜 각 기술의 관계나 역할을 제대로 정립하지 못한 것 같아 용어와 역할 등을 정리해둡니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;용어-정리&quot;&gt;용어 정리&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;jpa&quot;&gt;JPA&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Java Persistence API 로, 자바 어플리케이션과 RDB가 함께할 때 사용되는 인터페이스입니다.&lt;/li&gt;
  &lt;li&gt;즉, 자바 어플리케이션에 RDB를 붙이고 싶으면 JPA를 구현해서 붙이라는 것입니다.&lt;/li&gt;
  &lt;li&gt;인터페이스이기 때문에 구현해줘야 합니다.&lt;/li&gt;
  &lt;li&gt;Java기술이기 때문에 공식 명세는 oracle 홈페이지에서 찾을 수 있습니다. javax.persistence 패키지입니다. &lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/persistence/package-summary.html&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;hibernate&quot;&gt;Hibernate&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;JPA를 구현한 기술들 중 하나입니다. Hibernate 외에도 JPA를 구현한 다양한 기술들이 있습니다.&lt;/li&gt;
  &lt;li&gt;Hibernate ORM이라고도 불리는데 ORM은 Object-relational mapping로 데이터베이스 어플리케이션과 객체지향 어플리케이션이 호환될 수 있도록 데이터를 변환하는 프로그램입니다.&lt;/li&gt;
  &lt;li&gt;JPA의 인터페이스를 구현합니다.&lt;/li&gt;
  &lt;li&gt;소개부터 구현 클래스까지 &lt;a href=&quot;https://hibernate.org/orm/documentation/5.4/&quot;&gt;여기&lt;/a&gt;에 자세히 설명되어 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;spring-data&quot;&gt;Spring Data&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Data는 자바어플리케이션에서 데이터를 다뤄야 하는 기술들을 Spring과 연동하기 쉽게 모듈화 해놓은 기술들입니다.&lt;/li&gt;
  &lt;li&gt;JPA를 Spring과 연동하기 쉽게 묶어둔 게 Spring Data JPA이고, 이 외에도 Spring Data JDBC, Spring Data MongoDB, Spring Data Redis 등 다양한 Spring Data family가 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;spring-data-jpa&quot;&gt;Spring Data JPA&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Data JPA는 JPA를 Spring과 연동하기 쉽도록 묶어둔 것입니다. 즉, Spring Data JPA 자체 역시 인터페이스입니다.&lt;/li&gt;
  &lt;li&gt;Spring Data JPA에서 기본 구현체로 Hibernate로 사용합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;jdbc&quot;&gt;JDBC&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;JDBC는 Java DataBase Connectivity로, 자바 애플리케이션에서 DB에 연결하기 위한 인터페이스입니다.&lt;/li&gt;
  &lt;li&gt;자바애플리케이션과 데이터베이스를 연결해주는 인터페이스라는 점에서 JPA와 유사하지만 JPA는 데이터를 변환해주고 JDBC는 데이터베이스 연결을 해줍니다.&lt;/li&gt;
  &lt;li&gt;인터페이스이기 때문에 역시 구현체가 필요합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;dbcp&quot;&gt;DBCP&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;DBCP는 DataBase Connection Pool로, 데이터베이스의 커넥션을 관리하는 기술입니다.&lt;/li&gt;
  &lt;li&gt;주로 사용되는 기술은 Apache의 Commons DBCP, BoneCP, HikariCP 등이 있습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>디렉터리 구조 개편 및 MSA 설계</title>
   <link href="http://localhost:4000/posts/projects/sagyo_reboot/Sagyo3/"/>
   <updated>2020-04-28T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/sagyo_reboot/Sagyo3</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; 저번에 폴더 구조를 개편 하려다가 DAO, Service, DTO, Map 등등.. 에 관해서만 조사하다가 끝났습니다. 어차피 MSA 구조를 적용하려면 폴더는 자연스럽게 개편될 것 같아 폴더 구조 개편은 멈추고 MSA에 관한 스터디를 먼저 진행했습니다.&lt;/li&gt;
  &lt;li&gt; MSA 설계를 위해 Sagyo의 기존 파일들과 url을 분석하고 MSA에서 사용할 서비스와 url을 설계해봤습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-기존-sagyo-파일-분류&quot;&gt;1. 기존 Sagyo 파일 분류&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 기존의 모든 *.java의 리스트를 뽑아봤더니  14개의 컨트롤러, 12개의 DAO, 14개의 DTO, 1개의 유틸 파일이 나왔습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;~Controller.java&lt;/th&gt;
          &lt;th&gt;~DAO.java&lt;/th&gt;
          &lt;th&gt;~DTO.java&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Badge&lt;/td&gt;
          &lt;td&gt;IBadge&lt;/td&gt;
          &lt;td&gt;Badge&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Cs&lt;/td&gt;
          &lt;td&gt;ICs&lt;/td&gt;
          &lt;td&gt;Cs&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Follow&lt;/td&gt;
          &lt;td&gt;IFollow&lt;/td&gt;
          &lt;td&gt;Follow&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Message&lt;/td&gt;
          &lt;td&gt;IMessage&lt;/td&gt;
          &lt;td&gt;Message&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;LogIn&lt;/td&gt;
          &lt;td&gt;IInter&lt;/td&gt;
          &lt;td&gt;Inter&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Main&lt;/td&gt;
          &lt;td&gt;IJoin&lt;/td&gt;
          &lt;td&gt;Join&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;FindIdPw&lt;/td&gt;
          &lt;td&gt;IAddr&lt;/td&gt;
          &lt;td&gt;Addr&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Mypage&lt;/td&gt;
          &lt;td&gt;IPost&lt;/td&gt;
          &lt;td&gt;Post&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;MyProfile&lt;/td&gt;
          &lt;td&gt;IReport&lt;/td&gt;
          &lt;td&gt;Report&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;PostReadHost&lt;/td&gt;
          &lt;td&gt;IReview&lt;/td&gt;
          &lt;td&gt;Review&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;PostReadJoin&lt;/td&gt;
          &lt;td&gt;IUser&lt;/td&gt;
          &lt;td&gt;User&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;PostWrite&lt;/td&gt;
          &lt;td&gt;IWithdrawal&lt;/td&gt;
          &lt;td&gt;Withdrawal&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Search&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;Util 클래스&lt;/strong&gt;(*.java)&lt;/td&gt;
          &lt;td&gt;PointLog&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Singup&lt;/td&gt;
          &lt;td&gt;MorphemeAnalyze&lt;/td&gt;
          &lt;td&gt;Search&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt; 2개의 DTO를 제외하곤 DAO와 DTO가 1:1 대응 됐습니다. 다만, 앞선 포스팅에서도 언급했듯이 DTO의 속성들이 많이 겹쳤습니다.&lt;/li&gt;
  &lt;li&gt; 앞선 포스팅에선 테이블별로 VO, DAO를 구성하고 Service단에서 DAO를 엮으려 했으나 다음과 같은 이유로 지금처럼 테이블 기준이 아니라 필요한 속성들 기준으로 DTO를 구성하거나 Map을 사용할까 생각중입니다.
    &lt;ul&gt;
      &lt;li&gt; 테이블 정규화가 잘 되어있어 게시글 조회를 하는 데 5~6개의 테이블이 사용되어야 합니다.(게시글 기본 정보와 id로 참조 되어 있는 주소, 성별, 관심사, 댓글 등..)&lt;/li&gt;
      &lt;li&gt; 뽑아온 데이터가 MSA의 여러 서비스를 다녀야 하니 개념상 VO보다 DTO가 맞는 것 같습니다.&lt;/li&gt;
      &lt;li&gt; MSA의 서비스를 돌아다닐 땐 json으로 변환해야 하는데 여러 VO를 묶은 json을 전송하기 보단 하나의 DTO를 json으로 변환하는 게 맞는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-기존-url-분류&quot;&gt;2. 기존 url 분류&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 기존 컨트롤러들에서 요청 url들을 모두 정리해 보니 84개의 url이 나왔습니다. 너무 길어 포스팅에 담진 못하지만 &lt;a href=&quot;/public/document/sagyo-controller-url.pdf&quot;&gt;여기&lt;/a&gt;에 올려둡니다.&lt;/li&gt;
  &lt;li&gt; 정리해본 결과 몇 개의 논점을 뽑았습니다. 모든 논점이 제가 한 건 아니지만… 다들 비슷비슷한 실력이었기 때문에 다른 친구들의 실수도 기록하겠습니다.
    &lt;ul&gt;
      &lt;li&gt; 메서드를 명확히 하기
        &lt;ul&gt;
          &lt;li&gt; POST, UPDATE, DELETE 가 되어야 할 url이 GET으로 된 게 꽤 많이 있습니다. 작업자 6명 모두 메서드의 역할에 대해 명확히 이해하지 못한 것 같습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; 유사한 url 합칠지 고민
        &lt;ul&gt;
          &lt;li&gt; ‘내 프로필 조회’ url, ‘다른 사람 프로필 조회’url과 같이 유사한 기능의 url이 나뉘어져 있는데, 이를 하나의 url안에서 처리해도 될 것 같습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; url의 의미를 명확히하기 (어차피 REST url로 고치며 갈아 엎을 예정이지만 다음에 url 설계할 땐 주의하자는 뜻에서 남깁니다.)
        &lt;ol&gt;
          &lt;li&gt; 프로젝트 당시엔 문제 없었지만, 1년 뒤에 다시 보니 뭘 뜻하는 건지 짐작이 안되어 sql 쿼리문까지 가봐야 되는 url들이 있었습니다.&lt;/li&gt;
          &lt;li&gt; 같은 url에 다른 메서드만 써도 되는데 아예 url을 갈라버린 경우도 있습니다.&lt;/li&gt;
          &lt;li&gt; 전체 view를 리턴하는 지, 이미 로드된 페이지에 삽입 될 view를 ajax로 리턴하는 지, 0,1 값을 리턴하는 지 등을 url을 보고 알 수 있으면 좋겠습니다.&lt;/li&gt;
          &lt;li&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;/do_something&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;/do_something2&lt;/code&gt; 같은 최악의 네이밍도 보였습니다.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt; 불필요한 요청 줄이기
        &lt;ul&gt;
          &lt;li&gt; url을 둘러보다 보니 아래와 같은 과정이 보였습니다.
            &lt;ul&gt;
              &lt;li&gt; (브라우저) 전화번호 인증 번호 입력 &lt;br /&gt;👉 (서버) 인증 번호 맞다면 인증 성공 코드 전송 &lt;br /&gt;👉 (브라우저) 인증 번호 저장 요청 &lt;br /&gt;👉 (서버) 인증번호 저장&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt; 인증 번호가 맞다면 서버에서 바로 저장해도 되는 데, 왜 브라우저에서 다시 저장 요청을 보내게 했는지 모르겠습니다… 그리고 이와 같은 불필요한 요청이 몇 가지 더 보였습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-필요한-service-목록&quot;&gt;3. 필요한 Service 목록&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; MSA 강의와 현재 Sagyo의 기능을 바탕으로 필요한 서비스들을 모두 나열해 보았습니다.
    &lt;ul&gt;
      &lt;li&gt;웹 클라이언트 서버 - “web-client”&lt;/li&gt;
      &lt;li&gt;API 게이트웨이 - “gateway” - Spring Cloud Zuul&lt;/li&gt;
      &lt;li&gt;설정 파일 서버 - “config” - Spring Cloud Config&lt;/li&gt;
      &lt;li&gt;&lt;del&gt;설정 파일 자동 배포 - Spring Cloud Bus&lt;/del&gt; (MSA 1차 완성 후 추가)&lt;/li&gt;
      &lt;li&gt;인증서버 - “oauth” - Spring Security&lt;/li&gt;
      &lt;li&gt;유저정보 - “user”
        &lt;ul&gt;
          &lt;li&gt;&lt;del&gt;뱃지 CRUD - “badge”&lt;/del&gt;&lt;/li&gt;
          &lt;li&gt;&lt;del&gt;쪽지 CRUD - “message”&lt;/del&gt;&lt;/li&gt;
          &lt;li&gt;&lt;del&gt;팔로워 CRUD - “follow”&lt;/del&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;게시글 검색 - “search”&lt;/li&gt;
      &lt;li&gt;게시글 CRUD - “post”
        &lt;ul&gt;
          &lt;li&gt;&lt;del&gt;댓글(참여신청) CRUD - “reply”&lt;/del&gt;&lt;/li&gt;
          &lt;li&gt;&lt;del&gt;후기 CRUD - “review”&lt;/del&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;고객센터 - “contact”&lt;/li&gt;
      &lt;li&gt;공통 코드 관리 - “common”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 총 9개의 서비스가 선정되었습니다. (14개로 했다가 과하게 나눈 것 같아 줄였습니다.)&lt;/li&gt;
  &lt;li&gt; 각 서비스들 모두 1개의 인스턴스만 사용한다는 전제로 1차 완성을 한 뒤, 여러 인스턴스를 띄워 로드밸런서(Spring Cloud Ribbon), 서킷브레이커(Spring Cloud Hystrix)를 적용하고 설정 자동 배포 서비스도 추가 개발 할 예정입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/msa_sketch.png&quot; alt=&quot;msa_sketch.png&quot; /&gt;&lt;small&gt;간단한 스케치&lt;/small&gt;&lt;/p&gt;

&lt;h2 id=&quot;4-서비스별-기존-url-분류&quot;&gt;4. 서비스별 기존 url 분류&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; REST url을 설계하기 전에 기존 url들을 MSA 서비스별로 분류했습니다. 결과는 &lt;a href=&quot;/public/document/sagyo-controller-url-classify.pdf&quot;&gt;여기&lt;/a&gt;를 참조해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;5-서비스별-rest-url---기존-url-개편-추가-url&quot;&gt;5. 서비스별 REST url - 기존 url 개편, 추가 url&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 기존 url들을 기반으로 불필요한 것들은 삭제 및 병합하고 새로 필요해진 url들을 추가했습니다.&lt;/li&gt;
  &lt;li&gt; 기존에 84개의 url이 있었는데 개편후 오히려 79개로 줄었습니다!!?? 😳😳😳 개발 4~5개월 차 학생들이 만든 웹 서비스라 불필요한 url이 많았나 봅니다..&lt;/li&gt;
  &lt;li&gt; 개발하면서 url은 필요하면 더 추가할 생각입니다. 제가 RESTful하게 url을 구성했는지 잘 모르겠습니다. 일단 현재 계획된 url은 &lt;a href=&quot;/public/document/sagyo-rest-url.pdf&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;6-개발-순서&quot;&gt;6. 개발 순서&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; url을 구성할 땐 top-down 방식으로 설계했지만 개발은 bottom-up으로 진행합니다. (아무래도 테스트 가능한 작은 단위부터 만드는 게 마음이 놓일 것 같아서…)&lt;/li&gt;
  &lt;li&gt; 개발은 DB 테이블, 다른 서비스가 조금 엮여 있는 순서인 contact - common - oauth - user - post - search - web-client - config - api gateway 순서로 진행하겠습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 6 - API Gateway (Zuul)</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA6/"/>
   <updated>2020-04-25T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA6</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;25-api-gateway---part-1---purpose-and-spring-cloud-zuul&quot;&gt;25. API Gateway - Part 1 - Purpose and Spring Cloud Zuul&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;강의를 끝내기 전에 API Gateway에 대해 알아볼 것입니다.
    &lt;ul&gt;
      &lt;li&gt;API Gateway가 왜 필요한지&lt;/li&gt;
      &lt;li&gt;Spring Cloud Netflix Zuul&lt;/li&gt;
      &lt;li&gt;캐싱&lt;/li&gt;
      &lt;li&gt;Resource Expansion&lt;/li&gt;
      &lt;li&gt;Protocol Translation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;251-api-gateway가-왜-필요할까요&quot;&gt;25.1. API Gateway가 왜 필요할까요&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;지금까지 실습을 진행하며 많은 서비스들을 만들었습니다. 이 서비스들을 외부 public internet에 노출하면 어떻게 될까요?
    &lt;ul&gt;
      &lt;li&gt;내부에서만 쓰여야할 api들이 밖으로 노출됩니다. 수정, 삭제 api만 알아내면 외부의 아무 유저나 데이터를 조작할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;즉, 보안상 문제가 됩니다.&lt;/li&gt;
      &lt;li&gt;또한 CORS(Cross-Origin Resource Sharing) 이슈에도 부딪힙니다.&lt;/li&gt;
      &lt;li&gt;그 외에도 여러 문제들이 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;또한, 현대의 웹에는 클라이언트의 종류도 다양합니다. 웹 브라우저, pc 클라이언트, 모바일 클라이언트, TV, 게임 콘솔 등.. 이런 다양한 종류의 클라이언트에게 적합한 결과를 돌려줘야 합니다.&lt;/li&gt;
  &lt;li&gt;위와 같은 문제들 때문에 API Gateway가 등장했습니다.
    &lt;ul&gt;
      &lt;li&gt;내부에서 사용하는 api 외에, 클라이언트가 호출하기 좋은 api를 따로 구성할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;내부 api는 내부 api와 api 게이트웨이에서 오는 요청만 처리하고 나머지 요청은 거절하면 됩니다. 보안을 강황할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;클라이언트는 api 게이트웨이만 상대하면 되므로 CORS 이슈도 해결할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;캐싱도 할 수 있고 프로토콜 변환도 할 수 있고 등등… 이점이 많습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;api 게이트웨이를 여러개 둘 수 있고 하나만 둘 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;252-spring-cloud-netflix-zuul&quot;&gt;25.2. Spring Cloud Netflix Zuul&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Zuul 역시 Netfilx OSS이며 Spring Cloud에서 wrapper api를 만들었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Zuul은 JVM 기반의 라우터이자 로드밸런서입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spring-cloud-starter-zuul&lt;/code&gt; 의존성을 추가합니다. 안에 Ribbon과 Hystrix를 포함합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;어노테이션은 &lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableZuulProxy&lt;/code&gt;만 추가하면 됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Zuul은 다음과 같이 작동합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Eureka client-id 가 URI로 쓰입니다.
        &lt;ul&gt;
          &lt;li&gt;“subject” 서비스는 “/subject”가 되고 “verb”서비스는 “/verb”가 됩니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;한 서비스가 여러개 있다면 자동으로 로드밸런서가 작동합니다.&lt;/li&gt;
      &lt;li&gt;Hystrix의 서킷 브레이커도 자동으로 작동합니다.&lt;/li&gt;
      &lt;li&gt;클라이언트는 “/{service name}” 을 호출하면 됩니다. Zuul이 해당 서비스에 해당하는 서버들 중 가장 빠른 서버를 찾아서 ip와 포트를 설정한뒤 요청해줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;zuul.ignored-services에 등록하면 해당 서비스만 제외시킬 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;zuul.ignored-services: *&lt;/code&gt; 를 설정해 모든 주소를 막아놓고 허용할 api만 열수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;zuul.prefix를 통해 접미사를 붙일 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같이 prefix와 ignored-services를 설정할 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;zuul&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/api&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ignored-services&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;verb&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/sentence-subject/**&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;noun&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/sentence-noun/**&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트가 사용할 api는 다음과 같이 구성됩니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Result:
localhost:8080/api/sentence-subject/
              /api/verb/ 👉 ignored
              /api/article/
              /api/adjective/
              :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Zuul 자체로는 다음과 같은 것들은 제공해주지 않습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;캐싱&lt;/li&gt;
      &lt;li&gt;프로토콜 변환&lt;/li&gt;
      &lt;li&gt;Resource Expansion, Link Resolution&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;26-api-gateway---part-2---caching-options&quot;&gt;26. API Gateway - Part 2 - Caching Options&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;MSA에 존재하는 static 데이터들을 다룰 때 캐싱은 매우 중요합니다.&lt;/li&gt;
  &lt;li&gt;이미 우리가 구축해 놓은 애플리케이션에서 몇 가지 캐싱 방법을 사용할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;사실 우리가 캐싱을 하기 전에, 이미 클라이언트에서 캐싱을 하고 있습니다. 현대의 브라우저는 모두 캐싱을 사용합니다. 하지만, 클라이언트단 캐싱 자체로는 불완전 합니다. 우선 클라이언트단에서 캐싱을 하기 위해선 서버에서 헤더를 잘 정해줘야 하기 때문이죠.&lt;/li&gt;
      &lt;li&gt;API 게이트웨이에서 캐싱을 할수도 있고, MSA의 각 서비스 서버에서 캐싱을 할수도 있습니다.&lt;/li&gt;
      &lt;li&gt;Spring에서 Caching abstraction을 지원합니다. Cache 메서드를 구현하면 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;261-springs-caching-abstraction&quot;&gt;26.1. Spring’s Caching Abstraction&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring의 캐싱을 사용하는건 다음과 같이 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Cacheable&lt;/code&gt; 어노테이션을 추가하면 됩니다. value는 캐시의 이름이고, key는 캐시를 저장할 때 쓸 값입니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@FeignClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;localhost:8080/warehouse&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InventoryClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Cacheable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;inventory&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#sku&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/inventory/{sku}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Item&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getInventoryItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sku&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그리고 CacheManager를 정의해줘야 합니다. SynchronizedMaps, EHCache, Gemfire 등을 사용할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;기본적으로 캐싱을 사용하려면 expires나 Etags 같은 태그를 다뤄야 합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;현대의 웹에선 expries보단 Etags를 선호합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Etags는 다음과 같이 작동합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;클라이언트가 리소스를 요청합니다.&lt;/li&gt;
      &lt;li&gt;서버는 리소스에 Etag를 붙여 건네줍니다. Etag는 ResponseBody를 해시함수로 요약한 것입니다.&lt;/li&gt;
      &lt;li&gt;클라이언트는 다음에 같은 리소스를 요청할 때 if-none-match 헤더를 Etag와 같이 보냅니다.&lt;/li&gt;
      &lt;li&gt;서버가 현재 Etag와 클라이언트가 보낸 Etag가 맞는지 확인하고 맞으면 304 Not modified를, 다르면 새로운 리소스와 Etag를 200코드와 함께 보내줍니다.&lt;/li&gt;
      &lt;li&gt;이건 Shallow Etags의 작동과정이고 Deep Etags는 서버의 일을 더 줄여줍니다만 여기선 패스합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;262-etags-server-side&quot;&gt;26.2. Etags Server Side&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;서버에서 Etags를 사용하는 방법은 다음과 같이 Filter 단에서 작동하게 하는 것입니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Bean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;shallowEtagHeaderFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ShallowEtagHeaderFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다시한번 말하지만, 이건 shallow Etags입니다. 네트워크의 부하를 줄여주지만 서버의 일은 줄여주지 않습니다. 서버는 어쨌든 Etag가 맞는지 확인하고, 304든 200이든 돌려줘야 하니까요. 단, 304만 돌려줄 경우 네트워크 부하는 줄일 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;263-etags-client-side&quot;&gt;26.3. Etags Client Side&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트에서 Etag를 사용하는 방법은 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;아쉽게도 Spring RestTemplate 자체에선 캐싱을 지원하지 않습니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;하지만 Apache HttpClient에서 캐싱을 지원하고, 이를 RestTemplate에 등록할 수 있습니다.(Factory에 등록하는 방식으로..)&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;CacheConfig&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cacheConfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CacheConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;custion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setMaxCacheEntries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setMaxObjectSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8192&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    	
&lt;span class=&quot;nc&quot;&gt;CloseableHttpClient&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cachingClient&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CachingHttpClients&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;custom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setCacheConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cacheConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    	
&lt;span class=&quot;nc&quot;&gt;RestTemplate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RestTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HttpComponetsClientHttpRequestFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachingClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;RestTemplate와 마찬가지로 Feign 역시 자체적으로 캐싱을 지원하진 않습니다. 이 부분은 고민해보세요 어떻게 쓸지.(선생님도 이제 지친것 같다.)&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;27-api-gateway---part-3---resource-expansion&quot;&gt;27. API Gateway - Part 3 - Resource Expansion&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Resource Expansion이란건 Resource Link Expansion을 말하며 HATEOS 배울 때 본 것처럼 한 리소스가 관련 리소스로 링크타고 expansion 될 수 있는 걸 말합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;271-traverson&quot;&gt;27.1. Traverson&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Traverson은 Spring HATEOAS 프로젝트의 일부입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;원래는 Node js의 라이브러리로 만들어졌습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이름 그대로 링크들을 알아서 traverse 해줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음 의존성이 필요합니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.hateoas&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-hateoas&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.jayway.jsonpath&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;json-path&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 Resource 클래스를 만들어야 합니다. HATEOAS에서 한 것 처럼&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Resource 클래스는 도메인 object의 wrapper입니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PlayerResources&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Resources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Resource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;{&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으론 Traverson 객체를 만들고 타겟이 될 서비스의 url과 미디어 타입을 입력해줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그리고 traverson 객체에 어떤 링크를 따를 건지 .follow()메서드를 통해 등록하고 traverse 한 결과 어떤 타입을 반환 할 건지 .toObject를 통해 등록합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;traverson.follow().toObject()로 나온 객체는 Resources&amp;lt;Resource&amp;lt;Player&amp;gt;&amp;gt; 이기 때문에 foreach로 Resource&amp;lt;Player&amp;gt;를 하나씩 집어 원하는 로직을 수행해주면 됩니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Traverson&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;traverson&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Traverson&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8080/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;MediaTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;HAL_JSON&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;PlayerResources&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;playerResources&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;traverson&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;follow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$_links.team.href&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;$_embedded.team[0]._links.players.href&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;PlayerResources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Resource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;playerResource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;playerResources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()){&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;playerResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Traverson의 단점입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Traversal일뿐 Expansion이 아닙니다.&lt;/li&gt;
      &lt;li&gt;포맷이 한정적입니다. (Limited capability with other formats)&lt;/li&gt;
      &lt;li&gt;xml을 지원하지 않습니다. xml 위주로 어플리케이션을 구성하고 있다면 다른 걸 찾아보세요.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;272-spring-data-rest-projections&quot;&gt;27.2. Spring Data REST Projections&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Resource Expansion의 다른 방법으론 Spring Data REST Projection이 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Projection은 링크가 ‘inlined’ 되게 해줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;사용법은 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@Projection&lt;/code&gt;인 인터페이스를 만들어 줍니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Projection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;inlinePlayers&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;classe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InlinePlayers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getLocation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getMascotte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getPlayers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;아래와 같이 projection 파라미터에 위의 name을 주면 선수 목록을 보여주게 됩니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://localhost:8080/teams/1?projection=inlinePlayers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/teams/&lt;/code&gt;을 요청했다면 다음과 같은 응답이 옵니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Harlem&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Globetrotters&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/teams/1{?projection}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;templated&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/teams/1/players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;링크를 따라 &lt;code class=&quot;highlighter-rouge&quot;&gt;/teams/?projection=inlinePlayers&lt;/code&gt;를 요청하면 다음과 같은 응답이 옵니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Harlem&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Globetrotters&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Dizzu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Guard&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Big Easy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Showman&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Buckets&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Guard&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/teams/1{?projection}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;templated&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/teams/1/players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Projection의 단점은 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Spring Data REST에서만 작동합니다.&lt;/li&gt;
      &lt;li&gt;projection이 같은 마이크로서비스의 일부분이어야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;28-api-gateway---part-4---protocol-conversion&quot;&gt;28. API Gateway - Part 4 - Protocol Conversion&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;마지막 주제는 프로토콜 변환입니다.&lt;/li&gt;
  &lt;li&gt;많은 서비스들은 각기 다른 프로토콜에 최적화 되어 있을 수 있습니다. 앞서 배운 Bus의 경우 AMQP 서버가 필요했던것 처럼 말입니다.
    &lt;ul&gt;
      &lt;li&gt;다른 프로토콜을 쓰는 서비스 앞에 Adapter를 둘 수도 있긴합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API 게이트웨이는 다양한 프로토콜과 통신할 수 있어야 합니다.&lt;/li&gt;
  &lt;li&gt;아쉽게도 만병통치약 같은 방법은 없습니다. 어떤 프로토콜과 통신해야 하는지 확인하고 필요한 프로토콜에 맞게 레퍼런스를 참고해 방법을 찾아야 합니다.&lt;/li&gt;
  &lt;li&gt;그래도 많이 사용되는 좋은 툴을 하나 꼽자면 Spring Integration을 꼽을 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;281-spring-integration&quot;&gt;28.1. Spring Integration&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring의 일부이고 in-memory messaging 패턴을 이용해 intergration을 해준다고 합니다.&lt;/li&gt;
  &lt;li&gt;Spring Integration은 많은 프로토콜 게이트웨이, 어댑터를 지원합니다.
    &lt;ul&gt;
      &lt;li&gt;AMQP, ATOM, Flat Files, FTP(S), Gemfire, HTTP, JDBC, JMS, JMX, JPA, eMail, Mongo, MQTT, Redis, RMI, SFTP, streams, syslog, TCP, Twitter, UDP, Web Services (SOAP), Web Sockets, XMPP&lt;/li&gt;
      &lt;li&gt;정말 많습니다. 전 이거면 될 거 같은데요 선생님..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;각 프로토콜을 어떻게 integration 하는지를 보여주는건 너무 길어지니 추상적으로 설명만 해드립니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;29-lab-9---zuul-and-etags&quot;&gt;29. Lab 9 - Zuul and Etags&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;API 게이트웨이 실습&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;30-summary-resources-and-feedback&quot;&gt;30. Summary, Resources, and Feedback&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;지금까지 배운 것들 총 정리&lt;/li&gt;
  &lt;li&gt;Microservices 전반&lt;/li&gt;
  &lt;li&gt;Spring Boot - Overview, Data, REST - 빠르게 프로젝트 빌드하기&lt;/li&gt;
  &lt;li&gt;Spring Cloud - 아래 기술들을 모두 포함하는, 클라우드 환경을 구성하기 위한 기술들
    &lt;ul&gt;
      &lt;li&gt;Config - 중앙화되고 버전관리 가능한 설정 파일 서버&lt;/li&gt;
      &lt;li&gt;Bus - 설정 파일 동적 업데이트&lt;/li&gt;
      &lt;li&gt;Netflix Eureka - Service Discovery&lt;/li&gt;
      &lt;li&gt;Netflix Ribbon - 클라이언트단 로드 밸런서&lt;/li&gt;
      &lt;li&gt;Netflix Feign - Declarative REST 클라이언트(선언만 하면 끝난다!)&lt;/li&gt;
      &lt;li&gt;Netflix Hystrix - 서킷 브레이커&lt;/li&gt;
      &lt;li&gt;Netflix Zuul - API 게이트웨이 만들기&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;레퍼런스들이 잘 돼있으니 찾아가면서 열심히 해보세요!&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 5 - Spring Cloud Hystrix, Bus</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA5/"/>
   <updated>2020-04-25T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA5</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;21-spring-cloud-hystrix---circuit-breaker&quot;&gt;21. Spring Cloud Hystrix - Circuit Breaker&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Hystrix 역시 클라이언트단 기술입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;211-학습목표&quot;&gt;21.1. 학습목표&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;어떻게 서킷 브레이커가 cascade failure로 부터 애플리케이션을 보호하는지 이해합니다.&lt;/li&gt;
  &lt;li&gt;Spring Cloud Netflix Hystrix를 사용해 서킷 브레이커를 구현해봅시다.&lt;/li&gt;
  &lt;li&gt;Hytrix Dashboard와 Turbine을 이용해 서킷 브레이커를 모니터링 하는 방법을 알아봅시다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;212-cascading-failure-and-the-circuit-breaker-solution&quot;&gt;21.2. Cascading Failure and the Circuit Breaker Solution&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Cascading failure란 복잡하게 얽혀있는 네트워크, 시스템에서 한 부분의 고장이 연관된 다른 부분들을 고장을 연쇄하는 것을 말합니다. MSA는 기본적으로 여러 서비스들이 서로 얽혀 통신하기 때문에 대비를 하지 않으면 cascading failure에 매우 취약합니다.&lt;/li&gt;
  &lt;li&gt;이런 failure의 연쇄를 끊기 위해 도입된 것이 Circuit Breaker Pattern 입니다.&lt;/li&gt;
  &lt;li&gt;누전 차단기를 생각하면 쉽습니다.(원래 circuit breaker가 물리적인 회로 차단기입니다.)
    &lt;ul&gt;
      &lt;li&gt;누전 차단기는 전기 회로를 감시하고 있습니다.&lt;/li&gt;
      &lt;li&gt;회로에 너무 많은 전기가 흐르면(프로그래밍에선 오류가 나면) 누전 차단기가 스스로 회로를 열어서 전기를 차단합니다.&lt;/li&gt;
      &lt;li&gt;문제를 해결한 뒤에 사람이 다시 회로를 닫으면 전기가 흐르며 정상적으로 작동합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;213-using-spring-cloud-netflix-hystrix&quot;&gt;21.3. Using Spring Cloud Netflix Hystrix&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Hystrix는 Netflix OSS의 하나였고 현재는 Spring Cloud에서 wrapper api를 제공합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Hysytrix는 어플리케이션의 요청이 failure 되는걸 감시하고 있습니다. 일정 기준을 정해두고 그 이상 failure가 감지되면 “open” 하여 더 이상의 요청이 발생하지 않도록 합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;기본 값은 5초안에 20 failure로 셋팅되어 있고 개발자가 따로 설정할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;open 했을 때 어떻게 행동해야 할지 fallback을 설정할 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;캐시된 이전 요청을 쓰거나, 에러 메세지를 보내거나 등을 할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;open된 후 일정 시간 이후 close를 시도합니다. (운영자가 직접 닫을 필요가 없습니다!)&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;기본 값은 5초입니다. 역시 설정할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;사용방법은 지금까지 했던 다른 기술들과 유사합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;의존성을 추가하고&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-netflix-hystrix&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;application에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@EnalbeHystrix&lt;/code&gt;를 추가합니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@EnableHystrix&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;각 요청들에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@HystrixCommand&lt;/code&gt;를 설정해 서킷 브레이커 발생시 행동 및 기타 옵션을 정해줍니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WordServiceImpl&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WordService&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// getNoun에서 서킷 브레이커 발생시 getFallbackNoun 메서드로 가겠다. &lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@HystrixCommand&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fallbackMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getFallbackNoun&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Word&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getNoun&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nounClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;	
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Word&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getFallbackNoun&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Word&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;something&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@HystrixCommand&lt;/code&gt; 작성시 아래와 같은 &lt;code class=&quot;highlighter-rouge&quot;&gt;commandProperties = {@HystrixPropery...}&lt;/code&gt;를 설정하면 옵션을 정해줄 수 있습니다. properties에 대한 상세사항은 &lt;a href=&quot;https://github.com/Netflix/Hystrix/wiki/Configuration#CommandCircuitBreaker&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@HystrixCommand&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;fallbackMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getFallbackNoun&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;commandProperties&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nd&quot;&gt;@HystrixPropery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;circuitBreaker.errorThresholdPercentage&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;20&quot;&lt;/span&gt;
			&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;
		&lt;span class=&quot;nd&quot;&gt;@HystrixPropery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;circuitBreaker.sleepWindowInMilliseconds&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1000&quot;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;	
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HystrixCommand는 다양하게 사용가능합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Synchronously - 기본적으론 동기식으로 작동합니다. call을 하고 쓰레드는 대기합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Asynchronously - 비동기식으로 작동할 수도 있습니다. call을 부르고 기다리는 동안 다른 쓰레드를 작업할 수 있습니다. 리턴 타입을 바꾸기만 하면 비동기식으로 바꿀 수 있습니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@HystrixCommand&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(...)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AsyncResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(){&lt;/span&gt;
		&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;// do something..&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Reactively - listener를 통해 따로 추가명령이 없어도 call에서 응답이오면 처리 가능합니다.(??) Reactive 하게 만드는 것 역시 리턴 타입만 바꿔주면 됩니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@HystrixCommand&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(...)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ObservableResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(){&lt;/span&gt;
		&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Store&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;// do something..&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;214-hystrix-dashboard-and-turbine&quot;&gt;21.4. Hystrix Dashboard and Turbine&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Hystrix Dashboard는 서킷 브레이커들의 상태를 시각적으로 보여줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/hystrix_dashboard.png&quot; alt=&quot;hystrix_dashboard.png&quot; /&gt;&lt;small&gt;출처 : https://cloud.spring.io/spring-cloud-netflix/multi/multi__circuit_breaker_hystrix_dashboard.html&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;사용하고 싶다면 의존성을 추가하고, application에 &lt;code class=&quot;highlighter-rouge&quot;&gt;asd&lt;/code&gt;를 추가해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@EnableHystrix&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@EnableHystrixDashboard&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;설정이 됐다면 http://{host}:{port}/hystrix 에서 볼 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;서비스가 커져서 Dashboard만으로 관리하기 힘들어지면 Turbine을 알아보세요.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;22-lab-7---hystrix&quot;&gt;22. Lab 7 - Hystrix&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Hystrix 실습&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;23-spring-cloud-bus---dynamic-configuration-changes&quot;&gt;23. Spring Cloud Bus - Dynamic Configuration Changes&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud Bus는 서비스들이 실행 중에 설정이 바뀌면 바뀐 설정을 서비스들에게 알려주는 기술입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;231-학습목표&quot;&gt;23.1. 학습목표&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;(Spring Cloud Bus 없이) 동적으로 설정을 업데이트 하는 것의 문제점을 알아봅니다.&lt;/li&gt;
  &lt;li&gt;Spring Cloud Bus에 대해 알아봅니다.&lt;/li&gt;
  &lt;li&gt;Refresh가 어떻게 동작하는지 알아봅시다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;232-어플리케이셔-실행-중-설정-업데이트&quot;&gt;23.2. 어플리케이셔 실행 중 설정 업데이트&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Sprinc Cloud Config를 다시 떠올려 봅시다.
    &lt;ul&gt;
      &lt;li&gt;중앙화 된 설정 서버가 설정 파일들을 클라이언트에게 줍니다.&lt;/li&gt;
      &lt;li&gt;설정 파일 자체는 원격지에서 버전 컨트롤, 소스 컨트롤 될 수 있습니다.&lt;/li&gt;
      &lt;li&gt;Config 클라이언트는 시작 될 때만 Config 서버에서 설정 파일을 받아옵니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;근데, 클라이언트들이 실행 된 후에 설정 파일이 바뀌면 어떻게 될까요?
    &lt;ul&gt;
      &lt;li&gt;이전에 사용하던 방식은 연관된 어플리케이션들을 “Bounce” 하는 것입니다. 쉽게 말해 다시 시작합니다.&lt;/li&gt;
      &lt;li&gt;다른 방식으론 주기적으로 Config 서버에 요청을 보내는 방법이 있습니다. 하지만, 설정 파일이 언제 업데이트 될 진 모릅니다. 낭비가 심합니다.&lt;/li&gt;
      &lt;li&gt;Spring Cloud Bus는 설정 파일을 Config 서버가 클라이언트에게 푸쉬 하는 방식으로 작동합니다. AMQP 같은 메세징으로 전송이 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;233-spring-cloud-bus&quot;&gt;23.3. Spring Cloud Bus&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Bus는 Config 서버에서 설정 파일의 변경을 클라이언트에게 알려주는 방식으로 동작합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;메세징 기술에 기반합니다. (현재는 AMQP 프로토콜만 사용합니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;사용방법 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;의존성을 Config 서버, 클라이언트 모두 동일하게 추가해줍니다.&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-bus-amqp&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;AMQP 서버를 실행해줍니다. 강의에선 Rabbit MQ를 사용합니다.&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;AMQP 서버는 Config 서버의 변경된 설정 파일을 받아 클라이언트에게 뿌려주는 중개자 역할을 합니다.&lt;/li&gt;
          &lt;li&gt;Config 서버와 클라이언트 모두 알아서 AMQP 서버와 통신합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;설정 파일이 바뀌면 Config 서버에 (수동으로) &lt;code class=&quot;highlighter-rouge&quot;&gt;POST /bus/refresh&lt;/code&gt; 요청을 보내줍니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;요청을 받은 Config 서버는 AMQP 서버에 변경된 설정 파일을 보내냅니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;AMQP 서버는 받은 설정 파일을 클라리언트들에게 뿌려줍니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;234-how-refresh-work&quot;&gt;23.4. How Refresh Work&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Boot 어플리케이션은 실행중에 refresh 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;Spring Boot 어플리케이션엔 Actuator 라는게 있습니다. 각종 endpoint를 제공해주는 컴포넌트입니다. Eureka에서 Eureka 서버에게 클라이언트가 살아있음을 주기적으로 보낼 때도 Actuator를 사용했습니다.&lt;/li&gt;
  &lt;li&gt;Actuator에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;/refresh&lt;/code&gt;라는 endpoint를 제공합니다.
    &lt;ul&gt;
      &lt;li&gt;org.springframework.boot와 spring-boot-actuator 가 있어야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;하지만 refresh 하는 일은 어플리케이션 내의 모든 컴포넌트가 실행 할 수 있을만큼 간단한 일은 아닙니다. 따라서 다음과 같은 컴포넌트들만 refresh 하게 됩니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt; 또는 &lt;code class=&quot;highlighter-rouge&quot;&gt;@RefreshScope&lt;/code&gt;가 붙은 빈&lt;/li&gt;
      &lt;li&gt;로깅&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;235-configurationproperties&quot;&gt;23.5. @ConfigurationProperties&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt; 는 새로운 어노테이션은 아닙니다. Spring Boot에 포함된 어노테이션입니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt; 어노테이션은 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Value&lt;/code&gt; 어노테이션을 여러 개 붙여야 할 때 간편하게 한 번에 붙일 수 있게해줍니다. 아래와 같이 씁니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@ConfigurationProperties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wordConfig&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LuckyWordController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;luckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preamble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/lucky-word&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;showLuckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preamble&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;luckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  	
	&lt;span class=&quot;cm&quot;&gt;/* luckWord, preamble Getter/Setter */&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;wordConfig&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;lucky-word&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Irish&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;preamble&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;The lucky word is&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;‘relaxed binding’ 이란 것도 제공하는데, ‘lucky-word’를 찾을때 ‘LuckyWord’, ‘LUCKY_WORD’ 같은 것도 같이 찾아줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt; 으로 찾아진 property들은 refresh 될 때 새로운 값으로 rebound 됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;하지만 &lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt; 는 새로운 property를 rebound만 시켜주고, 이를 적용하기 위해선 해당 bean을 다시 초기화해야 합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;236-refreshscope&quot;&gt;23.6. @RefreshScope&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@RefreshScope&lt;/code&gt;는 Spring Cloud에서 등장한 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ConfigurationProperties&lt;/code&gt;는 property를 rebound만 시켰다면, &lt;code class=&quot;highlighter-rouge&quot;&gt;@RefreshScope&lt;/code&gt;는 한 bean 단위로 property를 rebound 하고 bean을 안전하게 reloading 해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@RefreshScope&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LuckyWordController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  
	&lt;span class=&quot;nd&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${wordConfig.lucky-word}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;luckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${wordConfig.preamble}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preamble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/lucky-word&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;showLuckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preamble&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;luckyWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  	
	&lt;span class=&quot;cm&quot;&gt;/* luckWord, preamble Getter/Setter */&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@RefreshScope&lt;/code&gt;는 Proxy 패턴을 기반으로 작동합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Bean이 자체로 만들어지지 않고 Proxy Bean이 만들어지고 그 안에 원래 Bean injection 됩니다.&lt;/li&gt;
      &lt;li&gt;Proxy Bean이 refresh를 하면 Proxy Bean은 계속 살아 있으면서 기본에 injection된 Bean과의 관계를 끊고 새로운 설정으로 만들어진 Bean을 다시 injection 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;24-lab-8---spring-cloud-bus&quot;&gt;24. Lab 8 - Spring Cloud Bus&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud Bus 실습&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 4 - Spring Cloud Eureka, Ribbon, Feign</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA4/"/>
   <updated>2020-04-25T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA4</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;15-spring-cloud-eureka---service-discovery&quot;&gt;15. Spring Cloud Eureka - Service Discovery&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud Eureka를 이용한 Passive Service Discovery 를 배워보겠습니다.
    &lt;ul&gt;
      &lt;li&gt;passive 하니까 수동 서비스 발견? 으로 읽힐 수 있지만, 동작 하는걸 보면 Service Discovery를 게임에서 패시브 스킬 쓰듯이 알아서 쓴다는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;151-학습목표&quot;&gt;15.1. 학습목표&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;이번 강의를 들으면
    &lt;ul&gt;
      &lt;li&gt;Passive Service Discovery가 뭔지 알게 됩니다.&lt;/li&gt;
      &lt;li&gt;Eureka Server를 Build and Run 할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;Eureka Client를 Build and Run and Configure 할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;152-passive-service-discovery-란&quot;&gt;15.2. Passive Service Discovery 란?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;채팅 프로그램을 켜서 채팅 방에 들어갔다고 생각 해봅시다.
1 사용자 클라이언트는 자신을 서버에 등록합니다. 
2 서버는 사용자가 온라인에 있다는걸 알게 됩니다.
3 서버가 채팅방에 있는 다른 사람들을 알려줍니다.
4 마찬가지로, 사용자도 다른 사용자들에 의해 discovered 됩니다.
5 그리고 채팅방에 있는 사람들은 새로운 사람이 들어오면 계속 discovered 됩니다.&lt;/li&gt;
  &lt;li&gt;MSA엔 많은 서비스들이 있습니다. 각 서비스들이 서로 사용 가능한 상태인지 알아야 합니다.
    &lt;ul&gt;
      &lt;li&gt;수동으로 상태를 확인해 줄 수도 있지만 딱 봐도 안좋은 방법입니다.&lt;/li&gt;
      &lt;li&gt;이때 Service Discovery를 사용합니다. Service Discovery는 lookup 기능을 제공해줍니다.
        &lt;ul&gt;
          &lt;li&gt;클라이언트는 자기 자신을 등록하고, 다른 서비스들을 발견합니다.&lt;/li&gt;
          &lt;li&gt;Eureka 말고도 Consul, Etcd, Zookeeper 등의 기술이 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;153-eureka&quot;&gt;15.3. Eureka!!&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Eureka는 Netflix에서 만들었습니다. 지금은 Spring Cloud Netflix에 포함되어 있습니다.&lt;/li&gt;
  &lt;li&gt;Eureka는 lookup 서버를 제공합니다.
    &lt;ul&gt;
      &lt;li&gt;lookup 서버는 등록된 클라이언트들을 관리합니다.&lt;/li&gt;
      &lt;li&gt;lookup 서버는 여러 인스턴스가 실행됩니다.(한 JVM에서 여러 인스턴스가 아니라 여러 서벅랙, Region별 인스턴스 인것 같습니다.) 로드밸런서를 통해 빠른 lookup이 가능하게 합니다.&lt;/li&gt;
      &lt;li&gt;여러 사본 서버들은 서로 상태를 공유합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;클라이언트는 Eureka 서버를 등록합니다.
    &lt;ul&gt;
      &lt;li&gt;호스트 ip, 포트 health indicator url 등을 등록합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;클라이언트는 주기적으로 Eureka 서버에 살아있다는 신호를 보냅니다. Eureka 서버는 일정 시간동안 신호를 주지 않는 클라이언트를 해제합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;154-eureka-서버-만들기&quot;&gt;15.4. Eureka 서버 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;서버를 만드는 방법은 쉽습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Spring Boot 어플리케이션을 만들고 의존성을 추가합니다.&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-eureka-server&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableEurekaServer&lt;/code&gt; 어노테이션을 이용해 Eureka 서버로 등록합니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
  &lt;span class=&quot;nd&quot;&gt;@EnableEurekaServer&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nc&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;155-multi-servers&quot;&gt;15.5. Multi Servers&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Eureka 서버를 1개만 실행하면 경고가 뜹니다. Eureka 서버는 기본적으로 여러 사본들이 서로 통신하며 상태를 공유하는걸 기본으로 만들어졌습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;각 Eureka 서버는 다른 Eureka 서버의 url을 알고 있어야 합니다. Config 서버에서 가져오도록 할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;설정의 자세한 방법은 &lt;a href=&quot;https://github.com/Netflix/eureka/wiki/Configuring-Eureka&quot;&gt;여기&lt;/a&gt;를 참고하면 됩니다. 간단한 설정은 아래와 같이 합니다. 여러 서버를 등록 할 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 1개의 인스턴스만 실행할 땐 default 가 실행됩니다.&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;profiles&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;default&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8010&lt;/span&gt;  
&lt;span class=&quot;na&quot;&gt;eureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;eurekahost&lt;/span&gt; 
  &lt;span class=&quot;na&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;registerWithEureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;fetchRegistry&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;serviceUrl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;defaultZone&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://${eureka.instance.hostname}:${server.port}/eureka/&lt;/span&gt;    
  
&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;profiles&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;primary&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;eureka-server-clustered&lt;/span&gt;   
&lt;span class=&quot;na&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8011&lt;/span&gt;  
&lt;span class=&quot;na&quot;&gt;eureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;eureka-primary&lt;/span&gt;       
  &lt;span class=&quot;na&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;registerWithEureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;fetchRegistry&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;        
    &lt;span class=&quot;na&quot;&gt;serviceUrl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;defaultZone&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://eureka-secondary:8012/eureka/,http://eureka-tertiary:8013/eureka/&lt;/span&gt;
  
&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;profiles&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;secondary&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;eureka-server-clustered&lt;/span&gt;      
&lt;span class=&quot;na&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8012&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;eureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;eureka-secondary&lt;/span&gt;       
  &lt;span class=&quot;na&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;registerWithEureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;fetchRegistry&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;        
    &lt;span class=&quot;na&quot;&gt;serviceUrl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;defaultZone&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://eureka-tertiary:8013/eureka/,http://eureka-primary:8011/eureka/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;156-eureka-클라이언트-만들기&quot;&gt;15.6. Eureka 클라이언트 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트를 만드는 방법도 간단합니다. 의존성은 서버와 같은걸 사용하고, 서버를 만들 때 &lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableEurekaServer&lt;/code&gt;를 썼다면, 클라이언트를 만들 땐 &lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableDiscoveryClient&lt;/code&gt;를 쓰면 됩니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@SpringBootApplication
@EnableDiscoveryClient
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;설정파일에 기본 fallback 주소를 등록해줍니다. 여러 개를 등록할 수도 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;\---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;eureka&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;serviceUrl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;defaultZone&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://localhost:8011/eureka/, http://localhost:8012/eureka/, http://localhost:8013/eureka/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 자기 자신을 설정해둔 Eureka 서버에 등록합니다. name, hostm port 같은 것들을 들록합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;등록 할 때 Environment 객체에 있는 것으로 등록을 하며, 원한다면 Environment 값들을 바꿔줄 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 Eureka 서버에 등록된 다른 클라이언트들을 뽑아 볼 수 있습니다. 다음과 같이 DiscoveryClient 인스턴스를 만들고 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Autowired&lt;/code&gt;해주면 Eureka가 등록된 클라이언트들을 넣어주고, 원하는 서비스를 getInstances로 뽑아주면 됩니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SentenceController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DiscoveryClient&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getWord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ServiceInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstances&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      	&lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getUri&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	      	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	      		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RestTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getForObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	      	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;157-zone&quot;&gt;15.7. Zone?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 말했듯이 Eureka는 여러 인스턴스를 실행하는걸 기본으로 설계되었습니다.&lt;/li&gt;
  &lt;li&gt;Eureka 서버의 모든 정보는 메모리에 저장됩니다. 따로 DB 같은걸 쓰지 않습니다.
    &lt;ul&gt;
      &lt;li&gt;즉, Eureka 서버는 Eureka 클라이언트가 자기 자신을 등록하는 것에 의존하고, 항상 클라이언트의 최신 정보를 가지고 있습니다.&lt;/li&gt;
      &lt;li&gt;이런 어플리케이션을 ‘stateful application’이라고 부릅니다.&lt;/li&gt;
      &lt;li&gt;만약 Eureka 서버가 정보를 로컬 파일에 저장해두면 클라이언트들에게 옛날 정보를 줄 수도 있고, 어차피 최신 정보가 맞는지 통신도 해야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Eureka에서 ‘Zone’ 이라는 용어가 자주 나오는데, 이는 아마존에서 사용하는 용어로서 분리된 각각의 데이터 센터를 말합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;158-eureka-server-vs-config-server&quot;&gt;15.8. Eureka Server vs Config Server&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;MSA 서비스가 실행되면 지금 배운 Eureka 서버를 먼저 다녀올까요, 아니면 Config 서버를 먼저 다녀올까요.
    &lt;ul&gt;
      &lt;li&gt;일반적으론 Config 서버부터 다녀와 Config 서버에서 Eureka 서버의 정보도 가져옵니다.&lt;/li&gt;
      &lt;li&gt;드문 경우긴 한데, Eureka 서버부터 다녀오는 경우도 있습니다. Config 서버 역시 살아있음을 알려줘야 다녀올 수 있기 때문에 Eureka 서버를 들려 ‘Config 서버 살아 있습니까?’ 라고 먼저 묻는 경우입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;16-lab-4---spring-cloud-eureka&quot;&gt;16. Lab 4 - Spring Cloud Eureka&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud Eureka 클라이언트, 서버 만들어보기&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;17-spring-cloud-ribbon---client-side-load-balancing&quot;&gt;17. Spring Cloud Ribbon - Client-Side Load Balancing&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 Spring Cloud Config, Eureka 같은 서버단의 기술을 살펴 봤습니다. 이번엔 클라이언트 쪽 기술입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;171-학습목표&quot;&gt;17.1. 학습목표&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트단 로드 밸런싱의 목적을 이해합니다.&lt;/li&gt;
  &lt;li&gt;Spring Cloud Ribbon을 이용해 클라이언트단 로드 밸런싱을 구현해봅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;172-load-balancer&quot;&gt;17.2. Load Balancer?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;로드 밸런서는 보통 서버단의 기술로 사용합니다. 한 서버에 부하가 걸리는걸 방지하기 위해 여러 서버로 트래픽을 분산하는 용도입니다.&lt;/li&gt;
  &lt;li&gt;보통 많이 알고있는 로드 밸런서는 Apache, Nginx, HA Proxy 같은 소프트웨어도 있고 F5, NSX, BigIP 같은 하드웨어도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;173-client-side-load-balancer&quot;&gt;17.3. Client-Side Load Balancer&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;서버 간의 부하를 줄이는 로드 밸런서를 클라이언트에서 사용할 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;로드 밸런서가 클라이언트단에서 사용되면 ‘요청을 어느 서버로 보낼 지 고르는 방식’으로 작동합니다.
    &lt;ul&gt;
      &lt;li&gt;고르는 방식엔 다양한 방법이 있습니다. 요청 가능한 서버들중 응답이 가장 빠른 쪽에 본 요청을 보내는 방식도 사용합니다.(이 경우에 앞서 살펴본 Eureka가 사용 될 수 있습니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;클라이언트단에서 로드밸런서를 사용했다고 해서 서버에서 사용 안하는 것은 아닙니다. 서버도 계속 자신의 로드밸런서를 사용할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;그럼 왜 클라이언트단 로드밸런서를 사용할까요?
    &lt;ul&gt;
      &lt;li&gt;여러 서버들이 다른 리전에 있는 경우가 있습니다. 여러 리전 중 응답이 빠른 리전에 보내면 더 효율적입니다.&lt;/li&gt;
      &lt;li&gt;중앙 로드밸런서를 가진 서버가 장애가 나 사용 불가능해지거나, 느려질 수 있습니다. 이때 대안이 없다면 시스템 전체가 마비됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;174-spring-cloud-netflix-ribbon&quot;&gt;17.4. Spring Cloud Netflix Ribbon&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Ribbon은 Netflix OSS 프로젝트중 하나입니다.
    &lt;ul&gt;
      &lt;li&gt;계속 말하고 있듯이, 클라이언트단 로드밸런서입니다.&lt;/li&gt;
      &lt;li&gt;앞서 배운 Eureka와 함께 사용됩니다.&lt;/li&gt;
      &lt;li&gt;뒤에 배울 Hystrix와 함께 사용돼 장애에 대응할 수 있습니다.(failure resiliency - 장애에 대한 복원력이 뛰어나다는 뜻인데 한글로 어떻게 번역해야 할 지 모르겠습니다.)&lt;/li&gt;
      &lt;li&gt;Caching과 Batching을 지원합니다.
        &lt;ul&gt;
          &lt;li&gt;캐싱은 알고있는 캐싱이고, Batching은 여러 requiest가 한 call에 올 때 대응하는 방법 인것 같습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;다양한 프로토콜을 지원합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Cloud는 Ribbon을 사용하기 쉽게 Wrapper API를 만들었습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;175-ribbon-concept&quot;&gt;17.5. Ribbon Concept&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;List of Servers : 사용 가능한 서버의 리스트를 가지고 있습니다.&lt;/li&gt;
  &lt;li&gt;설정 파일로 정적으로 제공할 수도 있고&lt;/li&gt;
  &lt;li&gt;Eureka를 이용해 동적으로 발견할 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;Spring Cloud에선 Eureka가 설정되어 있으면 Eureka를 기본으로 사용합니다.&lt;/li&gt;
  &lt;li&gt;Filtered List of Servers : 사용 가능한 서버들 중 일정 기준에 맞는 서버들의 목록을 따로 관리합니다.&lt;/li&gt;
  &lt;li&gt;Ping : 서버가 살아있는 지 죽었는 지 확인합니다. Eureka를 통해 확인하는게 기본 설정입니다.&lt;/li&gt;
  &lt;li&gt;Load Balanceer
    &lt;ul&gt;
      &lt;li&gt;Filtered List of Server 중 요청을 보낼 서버를 고릅니다.&lt;/li&gt;
      &lt;li&gt;고르는 방식엔 여러 가지가 있고, ‘Rule’ 컴포넌트에 의해 결정됩니다. (Rule 컴포넌트를 무엇을 쓸지에 따라 방식이 달라집니다.)&lt;/li&gt;
      &lt;li&gt;Spring Cloud의 기본 로드밸런서는 ‘ZoneAwareLoadBalancer’ 라고 불리는 로드밸런서입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Rule
    &lt;ul&gt;
      &lt;li&gt;call을 보낼지 말지 정해주는 컴포넌트입니다.&lt;/li&gt;
      &lt;li&gt;Spring Cloud의 기본 Rule 컴포넌트는 ‘ZoneAvoidanceRule’ 이라는 컴포넌트입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;176-ribbon-사용하기&quot;&gt;17.6. Ribbon 사용하기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;pom.xml에 아래와 같은 dependencyManagement와(eureka, config 서버 때와 같은 것입니다.) 기존 의존성에 ribbon을 추가합니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencyManagement&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-dependencies&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;Dalston.RELEASE&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;pom&lt;span class=&quot;nt&quot;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;import&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencyManagement&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-ribbon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ribbon은 클라이언트만 존재합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;로드밸런서를 추가하는 방법은 LoadBalancer 인터페이스를 클래스변수에 추가하고 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Autowired&lt;/code&gt;해주면 됩니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoadBalancerClient&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loadBalancer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;ServiceInstacne&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loadBalancer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;choose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cliend-id&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subjectUri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://$s:$s&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHost&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()));&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;로드밸런서에서 choose() 메서드를 이용하면 가장 적합한 서버의 인스턴스를 돌려줍니다.&lt;/li&gt;
      &lt;li&gt;인스턴스엔 ip, port 등의 정보가 있어 요청을 보낼 uri를 구성할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그런데 위 방법은 Ribbon API를 직접 이용하는 방법입니다. 뒤에서 배울 Feign과 Hystrix를 이용하면 Ribbon API를 직접 이용하지 않고 로드밸런서를 이용할 수 있습니다.(어쩐지 실습 파일에 위 코드가 없었습니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;기본으로 설정된 컴포넌트를 사용하지 않고 커스텀 컴포넌트들을 사용할 수도 있습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;18-lab-5---spring-cloud-ribbon&quot;&gt;18. Lab 5 - Spring Cloud Ribbon&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Ribbon 실습&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;19-spring-cloud-feign---declarative-rest-client&quot;&gt;19. Spring Cloud Feign - Declarative REST Client&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번에 배울 Feign 역시 클라이언트단 기술입니다. Declarative REST 클라이언트를 만들어주는 기술입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;191-학습목표&quot;&gt;19.1. 학습목표&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Feign 라이브러리를 이용해 REST 서비스를 호출 할 줄 알게됩니다.&lt;/li&gt;
  &lt;li&gt;Feign, Ribbon, Eureka가 어떻게 협동하는지 이해합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;192-feign&quot;&gt;19.2. Feign?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Netflix OSS의 일부입니다. 마찬가지로 Spring Cloud에서 wrapper api를 만들었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;declarative REST 클라이언트입니다. (declarative - 선언형. 선언만으로 REST를 구현할 수 있어서 선언형 REST인 것 같습니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;구현 코드가 필요 없습니다. 말 그대로 선언만하면 injection 해주는 것 같습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Spring으로 REST를 만들 때 주로 사용하는 RestTemplate의 대안이 될 수 있습니다. 훨씬 쉽습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Spring REST Template는 다음과 같이 사용됩니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;RestTemplate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RestTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://inventory/{0}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Sku&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sku&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getForObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sku&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4723343&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;매우 편리하지만 일단 코드를 작성해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Feign은 다음과 같이 사용합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;의존성을 추가합시다. (컴파일할땐 필요 없지만 런타임시 필요합니다.)&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-feign&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;interface를 선언합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;interface에 Feign 어노테이션을 추가합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;필요한 Spring MVC 어노테이션을 추가합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;실행시 Spring Cloud가 interface를 구현해줍니다. (Spring Implemented Proxy를 통해..)&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@FeignClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;localhost:8080/warehouse&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InventoryClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RequestMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/inventory&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getItems&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RequestMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;POST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; 
					&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/inventory/{sku}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
					&lt;span class=&quot;n&quot;&gt;consumes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@PathVariable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;sku&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sku&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Item&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;Application에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@FeignClients&lt;/code&gt; 어노테이션을 추가합니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@EnableFeignClients&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;직접 짠 코드가 없어서 유닛 테스트를 할 필요가 없지만, 여러 기술들이 잘 통합되어 돌아가는지 테스트는 해봐야 합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;193-ribbon-and-eureka-with-feign&quot;&gt;19.3. Ribbon and Eureka with Feign&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;위의 예시에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;@FeignClient(url=&quot;localhost:8080/warehouse&quot;)&lt;/code&gt; 로 ip와 port를 하드코딩 했습니다. 하지만 Ribbon, Eureka와 함께 사용한다면 &lt;code class=&quot;highlighter-rouge&quot;&gt;@FeignClient(&quot;warehouse&quot;)&lt;/code&gt; 이렇게 Client id를 적는 것 만으로 충분합니다.
    &lt;ul&gt;
      &lt;li&gt;Eureka가 사용 가능한 서버들을 목록을 주면 Ribbon의 로드밸런서로 요청을 보낼 서버의 인스턴스를 고릅니다. Feign은 Ribbon이 골라준 서버로 REST 요청을 보낼 준비를 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;20-lab-6---feign&quot;&gt;20. Lab 6 - Feign&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Feign 실습&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 3 - Spring Cloud Overview, Config</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA3/"/>
   <updated>2020-04-24T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA3</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;11-spring-cloud-overview&quot;&gt;11. Spring Cloud Overview&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;우선 Spring Cloud가 무엇인지를 알아봅시다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;111-spring-cloud-origins&quot;&gt;11.1. Spring Cloud Origins&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring 프레임워크엔 다양한 sub project 들이 있습니다. 이 sub project들은 모두 Spring IO 아래 있습니다.
    &lt;ul&gt;
      &lt;li&gt;Spring Security, Web Flow, Integration, Data, Boot …&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Cloud 역시 Spring IO 아래 있는 기술입니다. Spring Cloud 아래엔 다음과 같은 기술들이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;Spring Cloud Config&lt;/li&gt;
      &lt;li&gt;Spring Cloud Netflix
        &lt;ul&gt;
          &lt;li&gt;Eureka&lt;/li&gt;
          &lt;li&gt;Hystrix&lt;/li&gt;
          &lt;li&gt;Zuul&lt;/li&gt;
          &lt;li&gt;Ribbon&lt;/li&gt;
          &lt;li&gt;etc…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;112-spring-cloud의-목적&quot;&gt;11.2. Spring Cloud의 목적&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud의 목적은 클라우드 기반의 어플리케이션을 만드는데 필요한 것들을 제공하는 것입니다.
    &lt;ul&gt;
      &lt;li&gt;클라우드 기반 어플리케이션이란 volatile 환경에서 운영되는 distributed 어플리케이션을 말합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;distributed 어플리케이션엔 다음과 같은 것들이 필요합니다. Spring Cloud가 아래와 같은 기능을 제공해주나 봅니다.
    &lt;ul&gt;
      &lt;li&gt;Distributed / Versioned / Centralized Configuration Management.&lt;/li&gt;
      &lt;li&gt;Service Registeration and Discovery&lt;/li&gt;
      &lt;li&gt;Load Balancing&lt;/li&gt;
      &lt;li&gt;Service to service calls&lt;/li&gt;
      &lt;li&gt;Circuit breakers&lt;/li&gt;
      &lt;li&gt;Routing&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;113-spring-cloud-netflix&quot;&gt;11.3. Spring Cloud Netflix&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud 얘기를 하려면 넷플릭스 얘기를 해야 합니다.&lt;/li&gt;
  &lt;li&gt;넷플릭스는 2007년 시스템을 완전히 개편해야 했습니다. 당시 개편을 할 때 넷플릭스는 전에 아무도 하지 않은 일을 시도합니다. AWS를 이용해 완전한 클라우드 환경으로 시스템을 재편하는 것입니다.&lt;/li&gt;
  &lt;li&gt;당시엔 시스템 전체를 클라우드에 올려 운영하는 회사가 없었습니다. 넷플릭스는 클라우드 환경에 작업하기 위한 툴들을 직접 개발했습니다. 그리고 그 기술들을 오픈 소스로 공개했습니다!
    &lt;ul&gt;
      &lt;li&gt;물론, 넷플릭스의 핵심 기술인 비디오 스트리밍 관련한 기술들은 비밀입니다. 🤫&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;넷플릭스 팀은 많은 유용한 툴들을 오픈 소스로 개발해냈습니다. 넷플릭스가 만든 툴들은 퀄리티가 좋았지만, 일반 사용자들이 사용하기엔 꽤나 어려웠습니다.
    &lt;ul&gt;
      &lt;li&gt;이때, Spring 팀이 들어왔습니다. Spring 에서 넷플릭스가 만든 오픈소스 기술들을 더 사용하기 쉽게 만들어 줬습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;곧 알게되겠지만 Spring Cloud 에선 넷플릭스 라이브러리들을 사용하기 매우 쉽습니다. 의존성을 추가하고 어노테이션을 다는 정도면 끝납니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;114-몇가지-컨셉&quot;&gt;11.4. 몇가지 컨셉&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;우선, Spring Cloud 프로젝트는 Spring Boot에 기반해 만들어 집니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;하지만 어플리케이션 실행 프로세스가(ApplicationContext startup process) 조금 다릅니다. 이 강의에선 여기 까진 안나갈 겁니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이 강의를 진행하면 ‘Client’ 와 ‘Server’의 용어에 대해 헷갈리지 마시길 바라겠습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;MSA에서 클라이언트와 서버는 누가 누굴 부르냐에 따라 정해집니다. 어떤 서비스도 클라이언트가 될 수도 있고 서버가 될 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Boot pom.xml의 &amp;lt;parent&amp;gt; 부분을 바꿔줘야 합니다. boot 를 cloud를 바꾸고 버전을 좀 바꿔줘야 합니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-parent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;Angel.SR4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;Spring Cloud는 빠르게 버전업 되고 있어서 강의가 진행될 때랑 수강할 때랑 좀 다를 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;12-spring-cloud-configuration---centralized-versioned-configuration---part-1&quot;&gt;12. Spring Cloud Configuration - Centralized, Versioned Configuration - Part 1&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 강의에선 중앙집중적이고 버전닝이 가능한 distributed 어플리케이션을 위한 설정 관리 방법 - Spring Cloud Config를 알려드리겠습니다.
    &lt;ul&gt;
      &lt;li&gt;Centralized, versioned configuration management for distributed applications&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이번 강의 학습목표입니다.
    &lt;ul&gt;
      &lt;li&gt;Spring Cloud Config가 뭔지 설명가능해지기&lt;/li&gt;
      &lt;li&gt;Spring Cloud Config Server 빌드하고 실행하기&lt;/li&gt;
      &lt;li&gt;Repository 만들기&lt;/li&gt;
      &lt;li&gt;클라이언트 빌드하고 실행하고 Configure 하기&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;121-application-configuration은-무엇인가요&quot;&gt;12.1. Application Configuration은 무엇인가요&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;어플리케이션은 단순히 코드가 아닙니다. 리소스나 다른 어플리케이션에도 접근해야 합니다.&lt;/li&gt;
  &lt;li&gt;이런 어플리케이션을 제어하기 위해 외부 configuration을 사용합니다.
    &lt;ul&gt;
      &lt;li&gt;어플리케이션 코드 안에 하드코딩 하는 방법은 모두가 지양합니다.&lt;/li&gt;
      &lt;li&gt;보통 어플리케이션 내부에서 사용하는 설정 xml 파일 등을 말하는게 아닙니다. 이 강좌에선 external configuration에 대해 말할 겁니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;122-configuration의-방법들&quot;&gt;12.2. Configuration의 방법들&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;우선 파일 안에 하드코딩 하는 방법은 제외합시다.&lt;/li&gt;
  &lt;li&gt;전통적인 방법으로, 어플리케이션 안에 설정 파일을 두는 방법이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;해당 설정을 적용하려면 다시 빌드하거나 실행해야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;어플리케이션 밖으로 빼서 다른 곳에 설정 파일을 둘 수도 있습니다.
    &lt;ul&gt;
      &lt;li&gt;클라우드 환경에 적용시키지 못합니다. 클라우드 환경에서 일반 파일 시스템을 사용하려고 한다면 꽤나 귀찮습니다. 설정 파일 하나 올리려 클라우드 환경에 파일 시스템을 도입하는건 무리입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;환경 변수를 사용하는 방법도 있습니다.
    &lt;ul&gt;
      &lt;li&gt;환경 변수는 플랫폼마다 사용하는 방법이 다르기 때문에 플랫폼을 고정시켜야 합니다.&lt;/li&gt;
      &lt;li&gt;고정 시켰다고 해도, 많은 설정들을 환경 변수로 다루려면 관리하기 까다롭습니다.(놓치기 쉽습니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud-Vendor specific solution을 사용하는 방법도 있습니다. 이 강의에선 Heroku를 사용합니다.
    &lt;ul&gt;
      &lt;li&gt;Heroku 같은 것도 사실 기본적으론 환경 변수를 사용하지만 더 관리하기 쉽습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;123-다른-challenge들&quot;&gt;12.3. 다른 Challenge들&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Microservices - 마이크로 서비스들을 만들면 많은 의존성이 생기고 이것들을 전통적인 방법으로 관리하긴 힘듭니다. 넷플릭스는 600여 개의 마이크로서비스가 있다고 합니다.&lt;/li&gt;
  &lt;li&gt;Dynamic updates - 설정들이 자동으로 업데이트 되어야 합니다.&lt;/li&gt;
  &lt;li&gt;Version Control - 버전 관리도 되면 당연히 좋습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;124-configuration-관리에-바라는-것들&quot;&gt;12.4. Configuration 관리에 바라는 것들&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;플랫폼, 클라우드, 개발언어 등에 독립적이어야 합니다.&lt;/li&gt;
  &lt;li&gt;중앙화 되어야 합니다.&lt;/li&gt;
  &lt;li&gt;동적으로 업데이트되고 실행되어야 합니다.&lt;/li&gt;
  &lt;li&gt;Controllable 해야합니다. Source Code Management 툴을 고를때와 마찬가지로 말입니다.&lt;/li&gt;
  &lt;li&gt;Passive해야 합니다.(운영자 입장에서 스스로 active 하게 컨트롤하는게 아니라 서비스들이 알아서 컨트롤 되는걸 뜻하는 것 같습니다.) 각 서비스들이 설정 관리를 스스로 해야합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;125-그에-대한-solution&quot;&gt;12.5. 그에 대한 Solution!&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Cloud Config
    &lt;ul&gt;
      &lt;li&gt;설정 관리를 중앙화 할 수 있고, 다른 서비스로부터 외부화 할 수 있으며, 보안도 할 수 있고 다른 서비스들이 접근하기도 쉽습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Cloud Bus
    &lt;ul&gt;
      &lt;li&gt;설정이 변경되었을 때 다른 서비스들이 알아차릴 수 있게 해줍니다. (provide simple way to push changes out)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Cloud Netflix Eureka
    &lt;ul&gt;
      &lt;li&gt;Service Discovery를 해줍니다. 서비스들이 자기 자신을 클라이언트로 등록하게 해줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;126-spring-cloud-config&quot;&gt;12.6. Spring Cloud Config&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;configuration을 제공해주는 중앙화된 서버입니다.&lt;/li&gt;
  &lt;li&gt;다른 서비스들이 시작될 때 이 설정 서버로 HTTP 요청을 보내 설정 정보를 받아갑니다.&lt;/li&gt;
  &lt;li&gt;Spring Cloud Config 에는 Server와 Client가 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;127-spring-cloud-config-server&quot;&gt;12.7. Spring Cloud Config Server&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;깃헙에서 서버를 받을 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/spring-cloud/spring-cloud-config&quot;&gt;https://github.com/spring-cloud/spring-cloud-config&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;스스로 빌드할 수도 있습니다! 쉽습니다!&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;127-spring-cloud-config-server-만들기&quot;&gt;12.7. Spring Cloud Config Server 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Boot 프로젝트를 하나 만들어서 pom.xml을 다음과 같이 수정합시다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Spring cloud 버전은 그때 stable한 최신의 버전을 쓰는게 맞지만 일단.. 강의에 있는걸 쓰겠습니다..&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-parent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;Angel.SR4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
  
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-config-server&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;application.properties를 application.yml로 바꾸고 아래와 같은 설정을 넣어줍니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;uri, searchPaths 부분에 나중에 실제로 쓰일 설정 파일의 경로를 넣어주면 됩니다.&lt;/li&gt;
      &lt;li&gt;git은 원격에 파일을 놓을 때, native는 서버가 돌아가는 파일시스템 상에 놓을 때 입니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
spring:
  cloud:
    config:
      server:
        git:
          uri: https://github.com/kennyk65/Microservices-With-Spring-Student-Files
          searchPaths: ConfigData
        native:
          searchLocations: classpath:offline-repository/
server:
  port: 8001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Application에 다음과 같이 &lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableConfigServer&lt;/code&gt; 어노테이션을 추가합니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@EnableConfigServer&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConfigServerApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ConfigServerApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;끝났습니다! 이것만 하면 Spring Cloud Config Server를 만든 겁니다!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;13-spring-cloud-configuration---centralized-versioned-configuration---part-2&quot;&gt;13. Spring Cloud Configuration - Centralized, Versioned Configuration - Part 2&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;131-spring-cloud-config-client-만들기&quot;&gt;13.1. Spring Cloud Config Client 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring Boot 프로젝트를 만들고 아래의 dependency management를 pom.xml에 추가합니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencyManagement&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-parent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;Angel.SR4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;pom&lt;span class=&quot;nt&quot;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;import&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencyManagement&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;기존의 dependencies엔 아래 의존성을 추가해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-config&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 설정 파일을 받아올 Config Server를 설정해야 합니다. properties 파일에 설정 할 수도 있고 yml 파일에 설정할 수도 있습니다. 설정 파일이름은 bootstrap.properties / bootstrap.yml 입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;bootstrap.properties 일 경우&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# bootstrap.properties:
spring.application.name : {server name}
spring.cloud.config.uri : http://{server ip}:{server port}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;bootstrap.yml 일 경우&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;spring:
  application:
    name: {server name}
      
  cloud:
    config:
      uri: http://{server ip}:{server port}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;끝입니다! 이렇게 설정해두면 클라이언트가 켜질 때 등록된 설정 서버로 HTTP 요청을 보내 설정을 받아옵니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Spring Cloud Config가 아닌 다른 클라이언트 서버를 사용한다면 어플리케이션이 켜질 때 Spring Cloud config 서버로 HTTP를 보내고 결과를 처리하는 걸 직접 구현해야 합니다.
        &lt;ul&gt;
          &lt;li&gt;결과는 json으로 옵니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;132-environmentrepository&quot;&gt;13.2. EnvironmentRepository&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;앞서 살펴봤듯이 Config server는 설정 파일을 클라우드에 가지고 있을 수도 있고, 프로젝트나 파일 시스템 안에 native 하게 가지고 있을 수도 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;만약 기본 설정 파일이 아닌 다른 설정 파일을 사용하고 싶다면 EnvironmentRepository 를 구현하면 됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;구현 하는 방법은 간단합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;{spring.application.name}-{profile}.yml / {spring.application.name}-{profile}.properties 를 만들어줍니다.
        &lt;ul&gt;
          &lt;li&gt;{spring.application.name} 은 위에서도 나왔던 어플리케이션 이름이고&lt;/li&gt;
          &lt;li&gt;{profile} 은 클라이언트의 spring.profiles.active 중 하나입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;가져오는 uri는 http://{server}:{port}/{spring.application.name}/{profile} 으로 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같이 서버에 여러 repository들을 구성 할 수 있습니다. 여기서 이름이 “application-sample” 이고 profile이 “asia”인 클라이언트가 요청을 한다면 아래 중 맞는 설정 파일만 포함해 돌려줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;application-sample-default.yml
application-sample.yml			# picked!
application-sample-europe.yml
application-sample-asia.yml		# picked!
application-sample.properties	# picked!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;133-yml-vs-properties&quot;&gt;13.3. .yml vs .properties&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;둘 다 장단점이 있지만, 기본적으로 Config Server는 yml 파일을 선호합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;yml 파일은 &lt;code class=&quot;highlighter-rouge&quot;&gt;---&lt;/code&gt;로 시작합니다. 공백 2개를 indentation으로 해서 값들의 위계를 구분합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;yml은 여러 profile을 한 파일안에 담을 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;properties 파일이라면 다음과 같이 2개의 파일을 만들어야 합니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# app-sample-east.properties
app-sample : Clover
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# app-sample-west.properties
app-sample : Rabbit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;yml은 &lt;code class=&quot;highlighter-rouge&quot;&gt;---&lt;/code&gt;를 이용해 한 파일에 구성할 수 있습니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# app-sample.yml
\---
spring:
  profiles: east
app-sample: Clover
    
\---
spring:
  profiles: west
app-sample: Rabbit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;134-클라이언트가-어떻게-동작-하는지&quot;&gt;13.4. 클라이언트가 어떻게 동작 하는지&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring 어플리케이션에는 Environment 객체가 있습니다. Environment. 해서 환경값을 가져와본적 있을 것입니다.&lt;/li&gt;
  &lt;li&gt;Environment 객체는 PropertySources 를 여러개 가지고 있습니다.(property를 가져오는 소스별로 따로 만들어지는 객체 같습니다.)
    &lt;ul&gt;
      &lt;li&gt;기본적으로 Spring 애플리케이션은 환경 변수, system properties, JNDI 등에서 properties를 가져옵니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Cloud Config Client가 실행될때 설정 서버로 HTTP 요청을 보내 결과를 받고, 결과를 새로운 PropertySource에 넣습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;135-spring-cloud-config-client가-아니면-어떻게-하죠-&quot;&gt;13.5. Spring Cloud Config Client가 아니면 어떻게 하죠? 😥&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP 통신이 되는 어플리케이션이면 모두 가능합니다.&lt;/li&gt;
  &lt;li&gt;다만, 설정 서버로 HTTP 요청을 보내고, 받은 설정을 애플리케이션에 설정하는 과정은 직접 구현해야 합니다.
    &lt;ul&gt;
      &lt;li&gt;웬만한 웹 프레임워크면 쉽게 보내고 설정 할 수 있을 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;136-config-server가-죽으면-어떻게-하죠&quot;&gt;13.6. Config Server가 죽으면 어떻게 하죠?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;우선 Spring Cloud Config Server는 기본적으로 여러 인스턴스가 돌고 있습니다. 하나가 죽어도 상관 없습니다.&lt;/li&gt;
  &lt;li&gt;Client 단에서도 설정을 가져오는 서버가 죽으면 어떻게 행동할지 설정할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;Config 서버에서 가져온 설정이 local setting을 덮어쓰게 되는데, 서버에서 가져오지 못하면 local setting으로 실행 되게 할 수도 있습니다. (provide local fallback setting)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;14-lab-3---spring-cloud-configuration&quot;&gt;14. Lab 3 - Spring Cloud Configuration&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;설정 서버, 클라이언트르 설정하는 실습입니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 2 - Modern Spring - Spring Boot, Spring Data, and Spring Data REST</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA2/"/>
   <updated>2020-04-22T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA2</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;5-spring-boot-part-1&quot;&gt;5. Spring Boot, Part 1&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;51-이번-장에서-배우게-될-것&quot;&gt;5.1. 이번 장에서 배우게 될 것&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장 (Video 5 ~ 10)에선 다음과 같은 것들을 배웁니다.
    &lt;ul&gt;
      &lt;li&gt;Spring Boot에 대해&lt;/li&gt;
      &lt;li&gt;Spring Boot로 웹 어플리케이션 만들기&lt;/li&gt;
      &lt;li&gt;Spring Data JPA&lt;/li&gt;
      &lt;li&gt;Spring Data REST&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;52-what-is-spring-boot&quot;&gt;5.2. What is Spring Boot?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;우선 Spring 자체는 공식적으론 2003년에 처음 등장한 오래된 프레임워크입니다. 많은 개발자들이 Spring을 사용하지만 많은 개발자들이 분노하는 부분이 있습니다. 바로 환경설정, 의존성, 플러그인 같은 것들을 관리하는 것입니다. 환경 설정에만 하루 이틀을 사용하는 것도 부지기수 입니다.&lt;/li&gt;
  &lt;li&gt;Spring Boot는 그런 것들을 해결해 주고자 등장했습니다.
    &lt;ul&gt;
      &lt;li&gt;Spring Boot는 “Opinionated”한 방법을 사용한답니다.&lt;/li&gt;
      &lt;li&gt;dependency 관리도 쉽게 해주고&lt;/li&gt;
      &lt;li&gt;configuration도 자동으로 해주고&lt;/li&gt;
      &lt;li&gt;defaults 값도 reasonable 하다고 합니다.&lt;/li&gt;
      &lt;li&gt;아무튼, 빠르게 프로젝트 시작하기 좋다!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Spring Boot는 IDE가 아니라 플러그인입니다. 이클립스, VSC 등등 어떤 IDE에서도 사용 가능합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;53-spring-boot-프로젝트-만들기&quot;&gt;5.3. Spring Boot 프로젝트 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Package Explorer에 우클릭 - New - New Spring Starter Project에 가줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_1.png&quot; alt=&quot;spring_boot_1.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;위의 설정을 잘 잡아줍시다. 파란색 형광펜은 Maven 관련 속성들입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_1.png&quot; alt=&quot;spring_boot_1.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;STS가 아니라 다른 IDE를 사용한다면 위의 주소에서 Spring Boot에 필요한 jar 파일을 받아올 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위와 같이 프로젝트를 생성하면 기본적인 폴더 구조와, 기본 Application 파일, &lt;strong&gt;Maven POM 파일&lt;/strong&gt;이 생성됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;pom.xml을 열면 아래와 같은 것이 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusions&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusion&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.junit.vintage&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;junit-vintage-engine&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusion&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusions&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;2개의 dependency만 가져온 것 같지만 pom.xml 파일의 Dependency Hierachy를 보시면 안에 다양한 필수 파일들을 꽉꽉 채워넣었습니다.&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_3.png&quot; alt=&quot;spring_boot_3.png&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;54-spring-boot-실행하기&quot;&gt;5.4. Spring Boot 실행하기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;서버에 올리기 전에 그냥 순수하게 Application만 실행시켜 봅시다.&lt;/li&gt;
  &lt;li&gt;프로젝트 우클릭해서 JUnit이나 Spring Boot App 등 다양한 방법으로 실행시켜 봅시다.&lt;/li&gt;
  &lt;li&gt;Run As - Java Application 으로 실행시키면, 프로젝트 안의 main 메서드들을 모두 보여줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_4.png&quot; alt=&quot;spring_boot_4.png&quot; /&gt;&lt;small&gt;Run 성공&lt;/small&gt;&lt;/p&gt;

&lt;h3 id=&quot;55-실행시-일어나는-일-어노테이션들&quot;&gt;5.5. 실행시 일어나는 일, 어노테이션들&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;main 메서드를 찾아가 SpringApplication.run()를 실행시켜 줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MicroservicesBootApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MicroservicesBootApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;main 메서드에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@SpringBootApplication&lt;/code&gt; 어노테이션을 볼 수 있습니다. 이 어노테이션은 아래 세가지 어노테이션으로 구성되어 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@Configuration&lt;/code&gt; 설정을 위해 필요한 Configuration 파일에 붙습니다.&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ComponentScan&lt;/code&gt; Spring이 시작될 때 모든 파일을 돌며 &lt;code class=&quot;highlighter-rouge&quot;&gt;@ComponentScan&lt;/code&gt;이 달린 컴포넌트를 읽어냅니다.&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableAutoConfiguration&lt;/code&gt; Spring Boot가 제공하는 마법같은 기능(알아서 의존성 찾아주기 등)을 여기서 해줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;6-spring-boot-part-2&quot;&gt;6. Spring Boot, Part 2&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;61-웹-어플리케이션으로-만들기&quot;&gt;6.1. 웹 어플리케이션으로 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;방금은 애플리케이션을 Java 애플리케이션으로 보고 실행 했습니다. 이를 웹 애플리케이션으로 바꾸겠습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;pom.xml에서 아래를 수정해주세요. -web을 붙이는 겁니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로, 컨트롤러를 하나 만들어 줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyController&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hi&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;helloWorld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello world!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@ResponseBody&lt;/code&gt; 어노테이션은 컨트롤러의 반환 결과를 View 이름으로 쓰는게 아니라 Response 메세지의 Body로 바로 사용하겠다는 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그리고 실행시켜주고, 포트번호 찾아 ‘/hi’ 로 가줍니다.&lt;/p&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_5.png&quot; alt=&quot;spring_boot_5.png&quot; /&gt;&lt;small&gt;Hello World!&lt;/small&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;이때, Java Application으로 실행해도 웹 어플리케이션 처럼 정상 동작합니다. Tomcat 같은 WAS를 올리지 않았는데도 웹 어플리케이션이 됐습니다.
        &lt;ul&gt;
          &lt;li&gt;흔히 알고 있는 웹서버에 war 파일을 올린다던가 하는 일을 하지 않았습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spring-boot-starter-web&lt;/code&gt; jar 파일 안에 &lt;code class=&quot;highlighter-rouge&quot;&gt;spring-boot-starter-tomcat&lt;/code&gt;이 있기 때문입니다.&lt;/li&gt;
      &lt;li&gt;이렇게 애플리케이션을 구성하면 cmd에서 java application 실행 시키듯이 웹 애플리케이션을 실행 시킬 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;62-what-just-happened&quot;&gt;6.2. What Just Happened?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@EnableAutoConfiguration&lt;/code&gt;이 돌며 missing bean을 찾아내고 수정합니다.&lt;/li&gt;
  &lt;li&gt;Spring Boot가 MVC에 필요한 bean들을 만들어 줍니다. (DispatcherServlet, HandlerMappings 등..)&lt;/li&gt;
  &lt;li&gt;Embedded 톰캣 인스턴스를 실행합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;63-war로-배포하고-싶으면&quot;&gt;6.3. WAR로 배포하고 싶으면…?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;그런데 WAR로 만들어서 웹 서버에 배포하고 싶다면 아래 세 가지만 하면 됩니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;pom.xml 수정&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;war&lt;span class=&quot;nt&quot;&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;main 메서드가 있는 클래스에 SpringBootServletInitializer 를 extends 해주고 configure 메서드를 오버라이드 합니다.&lt;/p&gt;

        &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MicroservicesBootApplication&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SpringBootServletInitializer&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// Used when run as JAR&lt;/span&gt;
	&lt;span class=&quot;kr&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;MicroservicesBootApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
	&lt;span class=&quot;c1&quot;&gt;// Used when run as WAR&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;Override&lt;/span&gt;
	&lt;span class=&quot;kr&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SpringApplicationBuilder&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SpringApplicationBuilder&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sources&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;MicroservicesBootApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;웹 서버에 올려 서버를 실행시킵니다.&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;웹 서버에 배포시 url이 달라집니다. 서버의 docBase를 앞에 붙여줘야 합니다.&lt;/li&gt;
          &lt;li&gt;현재 프로젝트에 올라와있는 tomcat jar의 버전과 맞는 걸 사용해야 하는 것 같습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_6.png&quot; alt=&quot;spring_boot_6.png&quot; /&gt;&lt;small&gt;WAS를 통한 Hello World!&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;64-view-페이지---thymeleaf&quot;&gt;6.4. View 페이지 - Thymeleaf&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring MVC에선 다양한 View 페이지를 지원합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;흔히 사용하는 jsp뿐 아니라 Freemarker, Velocity, Thymeleaf 같은 뷰페이지들이 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;여기선 Thymeleaf 라는 뷰 페이지를 사용하겠습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;thymeleaf dependency를 추가해줍시다. &lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-starter&quot;&gt;여기&lt;/a&gt;를 참고하면 다양한 starter dependency를 확인할 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-thymeleaf&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 뷰를 위한 templates를 만들어 줍시다. templates 폴더를 src/main/resource 아래 만들고 templates 폴더 안에 다음과 같은 간단한 hello.html 파일을 만들어줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Hello &lt;span class=&quot;nt&quot;&gt;&amp;lt;span&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;th:text=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${name}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;name-goes-here&lt;span class=&quot;nt&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; from a Thymeleaf page&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 컨트롤러를 수정해줍시다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyController&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hi/{name}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;helloWorld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@PathVariable&lt;/code&gt;파라미터에 주목합시다.&lt;/li&gt;
      &lt;li&gt;컨트롤러는 view name을 돌려주도록 했습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이제 url에 name을 담아 요청 보내면&lt;/p&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_7.png&quot; alt=&quot;spring_boot_7.png&quot; /&gt;&lt;small&gt;성공!&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Thymeleaf 문법에도 친해져야 할 것 같습니다. Thymeleaf 문법은 &lt;a href=&quot;https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.pdf&quot;&gt;여기&lt;/a&gt;를 참조!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;7-spring-boot-part-3&quot;&gt;7. Spring Boot, Part 3&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;71-jsp를-쓰고-싶다면&quot;&gt;7.1. JSP를 쓰고 싶다면…?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;우선 폴더 구조를 수정해줍니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;src/main/webapp 폴더에 /WEB-INF/views 폴더를 만들어 줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;뷰를 옮겨 확장자를 바꾸고, 문법을 수정합니다.&lt;/p&gt;

    &lt;div class=&quot;language-jsp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;Hello ${name} from a JSP page&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로, Thymeleaf Dependency를 제거해줍니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;제거하는 김에 가지고 있는 spring-boot-starter-tomcat 대신 외부 WAS 를 사용하겠다고 해줍니다.&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- 
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-thymeleaf&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-tomcat&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;	
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 파일들을 찾아갈 접미사, 접두사를 application.properties에 등록해 줍니다. application.prorperties에 들어갈 수 있는 다른 설정은 &lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#core-properties&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;같은 url로 요청해보면&lt;/p&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/spring_boot_8.png&quot; alt=&quot;spring_boot_8.png&quot; /&gt;&lt;small&gt;성공합니다.&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;72-what-just-happened&quot;&gt;7.2. What Just Happened?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ViewResolver로 ThymeleafViewResolver를 사용하겠다는 dependency를 지웠습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Spring은 기본 ViewResolver인 InternalResourceViewResolver를 사용해 jsp를 resolve 했습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;73-spring-rest&quot;&gt;7.3. Spring REST&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;REST 방식이 무엇이냐!에 대한 논의는 시작하면 끝이 없으니 practical한 관점에서 REST를 구성하는 방법을 알려드립니다.
    &lt;ul&gt;
      &lt;li&gt;url을 파라미터, 리턴값으 사용합니다.&lt;/li&gt;
      &lt;li&gt;파라미터를 &lt;code class=&quot;highlighter-rouge&quot;&gt;@RequestBody&lt;/code&gt;로 잡고, 리턴 값을 &lt;code class=&quot;highlighter-rouge&quot;&gt;@ResponseBody&lt;/code&gt;로 잡습니다.&lt;/li&gt;
      &lt;li&gt;Xml/Json 형변환을 알아서 해줍니다. (classpath에 등록된 사용가능한 converter에 따라서)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;74-spring-rest-만들어보기&quot;&gt;7.4. Spring REST 만들어보기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;우선 Domain Object 라고 부르는(?) VO 처럼 생긴 클래스를 2개 만듭니다. (Team 클래스와 Player 클래스)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그 다음 Controller를  수정합니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyController&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@PostConstruct&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
  		
		&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hi&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@ResponseBody&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;helloWorld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이제 같은 주소로 요청하면 아래와 같은 json을 리턴 받습니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mascotte&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;75-what-just-happened&quot;&gt;7.5. What Just Happened?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Controller가 View name이 아니라 Domain Object를 리턴 했습니다.&lt;/li&gt;
  &lt;li&gt;Spring이 &lt;code class=&quot;highlighter-rouge&quot;&gt;@ResponseBody&lt;/code&gt; 어노테이션을 읽었습니다. (&lt;code class=&quot;highlighter-rouge&quot;&gt;@RestController&lt;/code&gt; 어노테이션을 써도 됩니다.)&lt;/li&gt;
  &lt;li&gt;Spring 내부에서 적합한 HttpMessageConverter를 실행시킵니다.
    &lt;ul&gt;
      &lt;li&gt;컨버터는 요청 형식이나 classpath의 JARS에 의해 결정됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;76-xml로-받고-싶은데&quot;&gt;7.6. xml로 받고 싶은데…&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;가장 간단한 방법은 JAXB jar 파일을 추가한 뒤, Domain Object에 &lt;code class=&quot;highlighter-rouge&quot;&gt;@XmlRootElement&lt;/code&gt; 어노테이션을 주는 겁니다.
    &lt;ul&gt;
      &lt;li&gt;강의에서 쓰는 Spring Boot 버전엔 JAXB가 기본으로 들어있는데 최신 Spring Boot엔 없는 것 같습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;“/hi.json” 으로 요청오면 json으로, “/hi.xml” 로 요청오면 xml로 오게 할 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;클라이언트 요청에서 accept 협상 헤더에서 “application/json”이나 “application/xml”를 줘서 원하는 형식으로 받아올 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;8-spring-boot-part-4&quot;&gt;8. Spring Boot, Part 4&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;81-jpa&quot;&gt;8.1. JPA&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;JPA란 Java Persistence API 입니다.&lt;/li&gt;
  &lt;li&gt;spring-boot-starter-data-jpa dependency를 추가하면 쉽게 사용 할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;해당 dependency에는 Spring JDBC / Transaction management, Spring ORM, Hibernate / entity manager, Spring Data JPA subproject 등이 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;여기선 따로 외부 DB를 설치하고 드라이버로 연결하고… 하지 않을 겁니다. HSQL이라는 메모리 상에서만 돌아가는 DB를 사용할 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;82-spring-data-jpa&quot;&gt;8.2. Spring Data JPA&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Spring Data는 Spring Boot의 일부가 아니라 따로 또 큰 영역입니다.&lt;/li&gt;
  &lt;li&gt;Spring Data JPA는 Controller - Service - DAO 의 전형적인 Spring 어플리케이션에서 작동합니다.&lt;/li&gt;
  &lt;li&gt;REST Contollers가 클라이언트에게 CRUD 인터페이스를 지원해주게 됩니다.&lt;/li&gt;
  &lt;li&gt;DAO는 DB에게 CRUD 인터페이스를 제공해주게 됩니다.
    &lt;ul&gt;
      &lt;li&gt;여기서 쓰이는 DAO는 Spring Data Repository라고 불립니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;개발자가 인터페이스만 정의하면, Spring Data가 인터페이스를 구현하는 방식으로 동작합니다.
    &lt;ul&gt;
      &lt;li&gt;보통의 프레임워크는 프레임워크가 인터페이스를 제공하고 개발자가 구현하는데 정반대로 동작합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;더 자세한 사항은 &lt;a href=&quot;https://spring.io/projects/spring-data&quot;&gt;Spring Data의 공식 문서&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;83-dependency-및-annotation-설정&quot;&gt;8.3. Dependency 및 Annotation 설정&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;spring-boot-starter-data-jpa , hsqldb의존성을 추가해줍니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;앞에서 말 안했었는데 dependency에 버전을 명시하지 않으면 pom의 &amp;lt;parent&amp;gt; 버전을 따라갑니다.&lt;/li&gt;
      &lt;li&gt;버전을 명시하면 해당 버전을 가져옵니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-data-jpa&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.hsqldb&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;hsqldb&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Domain Object에 JPA를 위한 어노테이션들을 추가해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@GeneratedValue&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mascotte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cascade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CascadeType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ALL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;teamId&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
				&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Constructor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setter&lt;/span&gt;
				&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;	
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@Entity&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;@Id&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;@GeneratedValue&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;@OneToMany&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;@JoinColumn&lt;/code&gt; 어노테이션을 추가했습니다. 가장 기본적인 JPA 어노테이션들 입니다.&lt;/li&gt;
      &lt;li&gt;이 어노테이션들이 무엇인지 등 더 상세히 아는건 Spring Data의 영역이고 이 강의를 좀 벗어나니 일단 따라만 하시랍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Player 클래스에도 어노테이션을 추가해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@GeneratedValue&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
				&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Constructor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setter&lt;/span&gt;
				&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  	
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;84-crud-repositoy-dao-만들기&quot;&gt;8.4. CRUD Repositoy (DAO) 만들기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 CrudRepository를 extends하는 DAO인터페이스를 만듭니다. DAO의 역할을 하는게 JPA에선 Repository 라고 불리나 봅니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;CrudRepository 에서 제공하는 기본 CRUD 관련 인터페이스를 받아옵니다. 인터페이스만 받아오면 구현은 Spring Data가 해줍니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TeamDao&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findByName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;85-controller-변경-초기-데이터-입력&quot;&gt;8.5. Controller 변경, 초기 데이터 입력&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Controller는 다음과 같이 바꿔줍니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;@Controller&lt;/code&gt;를 &lt;code class=&quot;highlighter-rouge&quot;&gt;@RestController&lt;/code&gt;로 바꿔줍니다.&lt;/li&gt;
      &lt;li&gt;저장소인 TeamDao를 선언해놓고 &lt;code class=&quot;highlighter-rouge&quot;&gt;@Autowired&lt;/code&gt; 시키면 Spring 이 붙여줍니다.&lt;/li&gt;
      &lt;li&gt;DAO의 인터페이스중 원하는 메서드를 골라 호출해줍니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyController&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TeamDao&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teamDao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  	
	&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/teams/{name}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;helloWorld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
	&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teamDao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;findByName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;테스트를 위한 초기 데이터를 위해 컨트롤러에 있던  &lt;code class=&quot;highlighter-rouge&quot;&gt;@PostConstruct &lt;/code&gt; init 블럭을 main 메서드가 있는 클래스로 옮겨와줍니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;86-실행-및-what-just-happened&quot;&gt;8.6. 실행 및 What Just Happened?&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080/microservicesBoot/teams/Peanuts&lt;/code&gt;를 요청하면 아래와 같은 응답이 나옵니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mascotte&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이번 영상에서 한 걸 정리해보자면&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;spring-boot-starter-jpa 와 hsqldb 의존성을 추가했습니다.&lt;/li&gt;
      &lt;li&gt;Domain Object에 JPA 어노테이션을 붙였습니다.&lt;/li&gt;
      &lt;li&gt;Spring Data JPA 인터페이스를 추가했습니다. (DAO 만든거)&lt;/li&gt;
      &lt;li&gt;컨트롤러도 JPA를 사용하기 위해 DAO를 주입했습니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;애플리케이션이 시작되면 Spring Data가 동적으로 repository(DAO)를 구현합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DataSource, Transaction 관리 등은 모두 Spring Data가 해줍니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;9-spring-boot-part-5&quot;&gt;9. Spring Boot, Part 5&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;91-spring-data---rest&quot;&gt;9.1. Spring Data - REST&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Service와 DAO가 단순할 때 Spring Data도 REST 방식으로 쓸 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;‘Controller - Services - DAO’ 구조가 Spring Data를 만나면&lt;/li&gt;
      &lt;li&gt;‘Controller - Services - Spring Data Repositories’ 가 되고, Spring Data - REST를 만나면&lt;/li&gt;
      &lt;li&gt;‘Spring Data REST - Spring Data Repositories’ 가 되는 구조입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;기본적인 RESTful한 인터페이스를 Spring Data가 알아서 만들어줍니다. 따로 조작이 필요한 경우만 오버라이드 하면 됩니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;92-spring-data---rest-실습&quot;&gt;9.2. Spring Data - REST 실습&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;우선 의존성을 추가해줍니다.&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-data-rest&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;	
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 DAO를 &lt;code class=&quot;highlighter-rouge&quot;&gt;@RestResource&lt;/code&gt;를 이용해 REST Resource로 바꿔줍니다. rel은 나중에 해당 저장소로 링크를 만들 때 쓰입니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;teams&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;teams&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TeamDao&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findByName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;컨트롤러 RequestMapping이 &lt;code class=&quot;highlighter-rouge&quot;&gt;/teams/{name}&lt;/code&gt;으로 되어있으면 경로가 겹치므로 &lt;code class=&quot;highlighter-rouge&quot;&gt;/hi/{name}&lt;/code&gt;으로 바꿔줍시다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080/microservicesBoot/teams&lt;/code&gt;를 요청하면 아래의 응답을 받습니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_embedded&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;teams&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mascotte&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;team&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/profile/teams&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;search&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/search&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;응답으로 나온 링크들 중 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080/microservicesBoot/teams/1&lt;/code&gt;를 요청해보면 아래와 같은 응답이 나옵니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mascotte&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;team&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DB를 RESTful 하게 조회해 올 수 있습니다. DB 구조만 잘 짜놓으면 정말 강력한 도구가 될 것 같습니다. 이런 좋은 기술을 왜 모르고 있었나 놀랍습니다. 😲😲😲&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;93-hateoas&quot;&gt;9.3. HATEOAS&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장에서 마지막으로 알아볼 것은 HATEOAS입니다.
    &lt;ul&gt;
      &lt;li&gt;HATEOAS = Hypermedia As The Engine Of Application State 😅&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;HATEOAS는 저장소들 끼리 링크로 연결해 주는 것입니다.(이렇게 쉽게 정리 될 기술이 아니지만 강의 비중에 맞게…) 이미 실습 프로젝트엔 HATEOAS가 적용되어 있습니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;spring-boot-starter-data-rest&lt;/code&gt; 디펜던시에 &lt;code class=&quot;highlighter-rouge&quot;&gt;spring-hateoas&lt;/code&gt; 디펜던시가 포함되어 있습니다.
    &lt;ul&gt;
      &lt;li&gt;다만, HATEOAS는 링크를 통해 저장소끼리 연결을 해주는데 지금까진 저장소가 TeamDao 밖에 없었습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Martin Fowler에 따르면 Hypermedia를 제어하는게 REST의 가장 상위 레벨이라고 합니다. 근데 Hypermedia를 제어한다는게 아직 확 와닿진 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/rest_steps.png&quot; alt=&quot;rest_steps.png&quot; /&gt;&lt;small&gt;출처 : https://martinfowler.com/articles/richardsonMaturityModel.html&lt;/small&gt;&lt;/p&gt;

&lt;h3 id=&quot;94-hateoas-실습&quot;&gt;9.4. HATEOAS 실습&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;다른 저장소와의 링크를 보기 위해 PlayerDAO를 만들어줍시다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RestResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;player&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;player&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PlayerDAO&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이 상태로 직전에 요청했던 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080/microservicesBoot/teams/1&lt;/code&gt;를 다시 요청해보면&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Peanuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;California&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mascotte&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;team&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1/players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같이 player 저장소에 대한 링크가 생성됩니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8080/microservicesBoot/teams/1/players&lt;/code&gt; 로 요청을 보내면 이번엔 다음과 같은 응답이 돌아옵니다.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_embedded&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;player&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Brown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shortStop&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/player/2&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;player&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/player/2&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kiseung&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;position&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pitcher&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/player/3&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;player&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/player/3&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_links&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;self&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/microservicesBoot/teams/1/players&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;10-lab-1---create-a-spring-boot-application&quot;&gt;10. Lab 1 - Create a Spring Boot Application&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장(동영상 5~9)을 복습할 겸 간단한 어플리케이션을 만들어 봅니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>영어🤬🤬</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/%EC%98%81%EC%96%B4%EA%B3%B5%EB%B6%80/"/>
   <updated>2020-04-22T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/영어공부</id>
   <content type="html">
&lt;h3 id=&quot;udemy&quot;&gt;Udemy!&lt;/h3&gt;

&lt;p&gt; 학습할 내용을 찾아서 유데미, 인프런, 유튜브 등을 헤매고 있는데 역시 가장 좋은 건 유데미인것 같다. 특히, 유데미의 영어강의들!&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;인프런
    &lt;ul&gt;
      &lt;li&gt;유데미보다 살짝 비싼 가격 (3~7 만원)&lt;/li&gt;
      &lt;li&gt;한글 강의!&lt;/li&gt;
      &lt;li&gt;클론 코딩 강의가 많은 건 좋다. 처음 쓰는 기술은 클론 코딩 한 번 해주면 친해진 느낌이 든다.&lt;/li&gt;
      &lt;li&gt;양이 부족하다. 물론, 한국의 수강생만으론 수지타산이 안맞는다는 걸 알지만 아쉬운건 어쩔 수 없다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;유튜브
    &lt;ul&gt;
      &lt;li&gt;무료!&lt;/li&gt;
      &lt;li&gt;강의 자료를 기대할 수 없다. (무료에 강의자료까지 기대하는건 좀..)&lt;/li&gt;
      &lt;li&gt;무료라서 완강에 대한 의지가 떨어진다. 역시 돈을 써야… 😥&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;유데미
    &lt;ul&gt;
      &lt;li&gt;유료지만 저렴한 가격 (2~3 만원)&lt;/li&gt;
      &lt;li&gt;조금이지만 돈을 지불해 완강에 대한 의지가 생긴다.&lt;/li&gt;
      &lt;li&gt;방대한 양의 강의들
        &lt;ul&gt;
          &lt;li&gt;같은 주제여도 얕고 빠르게 훑는 강의도 있고, 깊게 천천히 훑는 강의도 있어서 선택권이 넓다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;알찬 강의자료 (과제까지 내주는 강의는 정말.. 감동..)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt; 이전에도 그랬고, 지금 MSA 강의 들을 때도 그렇지만 역시 유데미에선 영어강의에 대한 압박이 있다. 듣는데 시간이 거진 2배는 걸리는 것 같다. 1.5배 시간으로만 들을 수 있어도 좋을텐데.&lt;/p&gt;

&lt;p&gt; 지금 장바구니에 담아 놓은 강의도 8.5 시간이지만 듣는데 배는 걸리고, 포스팅 정리까지 하려면 3배 이상은 걸릴 것 같다. 씁…🤔&lt;/p&gt;

&lt;p&gt; 입사지원서 넣은데 연락오기 시작하면 5~6월엔 면접 준비할 시간도 빼야되는데.. 배울건 많고 시간은 없고~ 어디 정신과 시간의 방 같은 거 있으면 좋겠다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Daily Thoughts/mind_time_room.jpg&quot; alt=&quot;mind_time_room.jpg&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Microservices with Spring Cloud 1 - Introduction to Microservices</title>
   <link href="http://localhost:4000/posts/study/msa_ken_krueger/MSA1/"/>
   <updated>2020-04-21T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/msa_ken_krueger/MSA1</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;본 포스팅은 Ken Krueger 선생님의 &lt;a href=&quot;https://www.udemy.com/course/microservices-with-spring-cloud/&quot;&gt;Microservices with Spring Cloud&lt;/a&gt; 강의를 정리하며 사견을 붙인 것입니다.&lt;/li&gt;
  &lt;li&gt;포스팅 내 목차는 개별 동영상 강의 기준입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-course-introduction&quot;&gt;1. Course Introduction&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이 강의에선 다음과 같은 것들을 배웁니다.
    &lt;ul&gt;
      &lt;li&gt;MSA 소개&lt;/li&gt;
      &lt;li&gt;Spring Boot, Spring Data에 대한 간략한 소개&lt;/li&gt;
      &lt;li&gt;Spring Cloud의 간편한 기능들을 배웁니다.&lt;/li&gt;
      &lt;li&gt;실제 MSA 프로젝트를 구성해봅니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;강의를 잘 들으면 얻게 될 것
    &lt;ul&gt;
      &lt;li&gt;MSA의 특징 및 장,단점&lt;/li&gt;
      &lt;li&gt;간단한 Spring Boot 어플리케이션 만들기
        &lt;ul&gt;
          &lt;li&gt;웹 인터페이스, REST 인터페이스, Spring Data, Spring Data REST&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Spring Cloud를 이용한 MSA 어플리케이션 구축&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;강사님은 25년 경력의 자바 개발자입니다.&lt;/li&gt;
  &lt;li&gt;필요한 사전 지식
    &lt;ul&gt;
      &lt;li&gt;Java&lt;/li&gt;
      &lt;li&gt;Spring/ Spring Boot&lt;/li&gt;
      &lt;li&gt;다양한 Spring 어노테이션들&lt;/li&gt;
      &lt;li&gt;Maven :point_right: 이건 잘 모르는뎁..&lt;/li&gt;
      &lt;li&gt;Git&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;유의 사항
    &lt;ul&gt;
      &lt;li&gt;Spring Cloud가 너무 빨리 바뀌어서 강의랑 지금이랑 다를 수 있습니다.&lt;/li&gt;
      &lt;li&gt;MSA 역시 빠르기 진화중입니다.&lt;/li&gt;
      &lt;li&gt;MSA에 대한 모든 주제를 다루진 못합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-lab-setup&quot;&gt;2. Lab Setup&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;수강전 셋업
    &lt;ol&gt;
      &lt;li&gt;최신 JDK (Java 8 이상)&lt;/li&gt;
      &lt;li&gt;Maven 2 이상&lt;/li&gt;
      &lt;li&gt;Spring Tool Suite (다른 IDE 사용해도 무방)&lt;/li&gt;
      &lt;li&gt;Github 계정(은 굳이 없어도 될 것 같습니다.)&lt;/li&gt;
      &lt;li&gt;강사님 Github에서 강의자료 받기&lt;/li&gt;
      &lt;li&gt;IDE에서 Maven 프로젝트로 불러오기&lt;/li&gt;
      &lt;li&gt;(선택사항, 디버깅용) 웹 브라우저용 REST 플러그인 받기. 강사님은 크롬의 “Simple REST Client” 를 사용.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;프로그래밍 강의는 강사님이 하자는 대로 하는게 베스트이기 때문에 위에 있는 대로 셋팅 완료!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/setup.png&quot; alt=&quot;setup.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;3-what-are-microservices-part1&quot;&gt;3. What are Microservices? Part1&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;MSA가 무엇인지, 이전 구조인 Monolithic과의 차이, 왜 쓰는가 등을 배움&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;31-msa란-무엇인가&quot;&gt;3.1. MSA란 무엇인가&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;강사님 생각에 현재 MSA는 많은 과장(hype)이 좀 있는 편입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;MSA를 표현하는 적절한 표현들입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;architecture 스타일&lt;/li&gt;
      &lt;li&gt;전통적인 ‘monolithic’ 어플리케이션의 대안&lt;/li&gt;
      &lt;li&gt;단일 시스템을 서비스 단위로 분해한 것, 각 서비스들은 독립적으로 실행되며 open protocol로 통신함&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;전문가들의 정의입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;독립 적으로 동작하고 HTTP 같은 경량 메커니즘으로 통신하는 작은 서비스들의 집합으로 어플리케이션을 개발하는 것 - Martin Fowler&lt;/p&gt;

        &lt;blockquote&gt;
          &lt;p&gt;Developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API.&lt;/p&gt;
        &lt;/blockquote&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;세분화 된 SOA - Adrian Cockcroft (Netflix 개발자)&lt;/p&gt;

        &lt;blockquote&gt;
          &lt;p&gt;Fine-grained SOA&lt;/p&gt;
        &lt;/blockquote&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이 강의에서 사용하고 싶은 MSA의 정의입니다.
    &lt;ul&gt;
      &lt;li&gt;작은 서비스들로 하나의 어플리케이션을 구성하는 것 (Monolithic과 반대됨)&lt;/li&gt;
      &lt;li&gt;각 서비스들은 독립적으로 실행된다.&lt;/li&gt;
      &lt;li&gt;각 서비스들은 open protocol로 통신한다.&lt;/li&gt;
      &lt;li&gt;각 서비스들은 독립적으로 개발되고, 배포되고, scaled 되고, 유지된다.&lt;/li&gt;
      &lt;li&gt;각 서비스들은 업무 단위로 캡슐화 되어있다.&lt;/li&gt;
      &lt;li&gt;각 서비스들은 독립적으로 교체될 수 있고 업그레이드 될 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;다음과 같은 표현은 &lt;strong&gt;잘못된 표현&lt;/strong&gt;입니다.
    &lt;ul&gt;
      &lt;li&gt;SOA(Service Oriented Architecture)와 같은 것
        &lt;ul&gt;
          &lt;li&gt;SOA는 여러 애플리케이션을 합치는 방법에 대한 것이고, MSA는 단일 애플리케이션을 개발하는 방법입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;만병통치약이다! (영어 표현으론 A Silver Bullet)
        &lt;ul&gt;
          &lt;li&gt;MSA 역시 약점과 위험요소가 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;새로운 것이다!
        &lt;ul&gt;
          &lt;li&gt;예전부터 있던 것입니다. 다만, 트위터, 페이스북, 넷플릭스 등 유명 기업들이 MSA를 도입하며 이제야 주목을 받기 시작한 것입니다.(강의 년도는 2015년 입니다.)
            &lt;ul&gt;
              &lt;li&gt;트위터는 Ruby/Rails monolithic에서, 페이스북은 PHP monolithic에서, 넷플릭스는 Java monolithic에서 MSA로 바꾸었습니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-기존-monolithic-구조&quot;&gt;3.2. 기존 Monolithic 구조&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;쇼핑몰을 생각해봅시다. 다음과 같은 기능들이 필요합니다.
    &lt;ul&gt;
      &lt;li&gt;웹 화면, 모바일 화면&lt;/li&gt;
      &lt;li&gt;상품 검색&lt;/li&gt;
      &lt;li&gt;상품 카탈로그&lt;/li&gt;
      &lt;li&gt;재고 관리 기능&lt;/li&gt;
      &lt;li&gt;장바구니&lt;/li&gt;
      &lt;li&gt;결제&lt;/li&gt;
      &lt;li&gt;배송&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;전통적인 Spring MVC Monolithic 구조에선 다음과 같은 구조를 같게 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/monolithic.png&quot; alt=&quot;monolithic.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;이런 단일 구조도 잘 작동하지만 문제들이 발생합니다.
    &lt;ul&gt;
      &lt;li&gt;클라이언트가 단일 웹 브라우저가 아니라 모바일 어플리케이션, 인터넷 TV등 다양해졌고, DB 역시 기능에 따라 여러 형태의 DB들이 출현했습니다.&lt;/li&gt;
      &lt;li&gt;기존 Monolthic 구조에선 이런 변화에 대응하기 힘들었습니다. (아래 이미지의 화살표는 대충 이은거니 의미를 두지 말아주세요..)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/monolithic_problem.png&quot; alt=&quot;monolithic_problem.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;프론트와 백이 복잡해진 것과 더불어 웹 서비스가 점점 비대해지며 단지 귀찮은 정도였던 문제들이 점점 커져 팀 전체의 효율을 깨뜨리기 시작합니다.
    &lt;ul&gt;
      &lt;li&gt;규모가 커지며 팀별로 codebase를 나눠 따로 작업하고 배포하는데, 한 팀의 배포 파일에 문제가 있거나, 기존 시스템과 충돌을 일으키면 애플리케이션 전체를 마비시킵니다. (추가로, 개발자들의 퇴근이 늦어집니다.)&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://medium.com/coupang-tech/행복을-찾기-위한-우리의-여정-94678fe9eb61&quot;&gt;쿠팡의 블로그&lt;/a&gt;에서도 비대해진 Monolithic 어플리케이션의 문제를 확인 할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Monolithic 구조의 장점은 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt;이해하기 쉽다.
        &lt;ul&gt;
          &lt;li&gt;Easy to comprehend (but not digest) 라고 설명했는데 not digest가 어떤 의미인지 모르겠습니다.(완벽히 다 알긴 어렵다?)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;단일 유닛을 테스트하고 배포하기 쉽다.&lt;/li&gt;
      &lt;li&gt;관리하기 쉽다.(어느정도 까진)&lt;/li&gt;
      &lt;li&gt;scale 하기 쉽다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;단점은 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt;언어, 프레임워크에 제한적입니다. 한 언어, 프레임워크가 정해지면 그 외의 기술을 도입하기 힘듭니다.&lt;/li&gt;
      &lt;li&gt;한 개발자가 모든 코드를 이해할 수(cannot digest) 없습니다.&lt;/li&gt;
      &lt;li&gt;단일 팀이 애플리케이션 전체를 관리할 순 없습니다.&lt;/li&gt;
      &lt;li&gt;작은 수정 사항을 배포하기 힘듭니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-what-are-microservices-part2&quot;&gt;4. What are Microservices? Part2&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/msa_architecture.png&quot; alt=&quot;msa_architecture.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 살펴봤듯이, MSA는 독립적으로 운용가능하며 open protocol로 서로 통신하는 서비스들을 하나의 어플리케이션으로 구성한 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;41-msa의-특징&quot;&gt;4.1. MSA의 특징&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Componentization via Service.
    &lt;ul&gt;
      &lt;li&gt;Service를 컴포넌트화 합니다.&lt;/li&gt;
      &lt;li&gt;서비스는 작고 독립적인, 배포가능한 단위입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;각각의 서비스들은 독립적으로 기술을 선택할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;웹 클라이언트엔 JSP를, 모바일 클라이언트엔 React를 사용할 수도 있고, 상품 DB엔 오라클을, 리뷰 DB엔 MongoDB를 사용할 수도 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Open, Lightweight 프로토콜을 사용해 서비스끼리 통신합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;HTTP, TCP, UDP, Messaging..&lt;/li&gt;
      &lt;li&gt;Payload도 JSON, BSON, XML 등등 다양하게 선택 가능합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;서비스는 업무 단위로 캡슐화 됩니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;기술 단위로 가면 안딥니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;기존 Monolithic 구조가 Controller, Service, DAO 같이 수평 단위로 나뉘어졌다면 MSA는 업무 단위인 수직으로 나뉘어야 합니다.&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/horizontal.png&quot; alt=&quot;horizontal.png&quot; /&gt;&lt;small&gt;기존의 수평분할. (출처 : http://www.dhrubo.net/2017/04/microservices-vertical-slicing.html)&lt;/small&gt;&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/vertical.png&quot; alt=&quot;vertical.png&quot; /&gt;&lt;small&gt;업무 단위의 수직 분할.(출처 : http://www.dhrubo.net/2017/04/microservices-vertical-slicing.html)&lt;/small&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;MSA는 관리하기 쉽습니다. 작은 단위 하나하나를 이해하기 쉽습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;MSA는 Decentralized Governance와 같다고 할 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;MSA는 ESB(Enterprise Service Bus)의 안티테제, 정반대 라고 볼 수 있습니다.&lt;/li&gt;
      &lt;li&gt;정돈된 오케스트레이션이 아니라 자연스럽게 흐르는 안무, 보행자와 같습니다.&lt;/li&gt;
      &lt;li&gt;서비스는 각자 다른 속도와 기술을 찾아 발전합니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/intersection.png&quot; alt=&quot;intersection.png&quot; /&gt;&lt;small&gt;ESB의 예로 든 traffic. 강력한 규칙에 따라 정돈 되어 움직인다. (출처 : https://www.gessato.com/birds-eye-view-navid-baraty/navid-baraty-photography-nyc-intersections-2/)&lt;/small&gt;&lt;/p&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/MSA_Ken_Krueger/pedestrian.jpg&quot; alt=&quot;pedestrian.jpg&quot; /&gt;&lt;small&gt;MSA의 예로 든 보행자들. 강한 규칙이 없어도 서로 조화롭게 지나다닌다.(출처 : https://www.sciencenews.org/article/math-match-pedestrian-behavior-all-about-timing) &lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;업무에 따라 최적의 기술 선택이 가능합니다.
    &lt;ul&gt;
      &lt;li&gt;Polyglot Persistence 라고 부릅니다.&lt;/li&gt;
      &lt;li&gt;목적에 따라 다른 프레임워크, DB 등을 사용 할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;42-msa의-장점&quot;&gt;4.2. MSA의 장점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;각 서비스들을 쉽게 이해(digest) 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;테스트, 배포, 관리, 스케일링 등이 쉽습니다.&lt;/li&gt;
  &lt;li&gt;각 서비스들간의 변화 주기(change cycle)을 다르게 가져갈 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;43-msa의-단점&quot;&gt;4.3. MSA의 단점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;단일 서비스는 간단해지지만 서비스들끼리 통신하는 운영 레이어가 복잡해집니다.&lt;/li&gt;
  &lt;li&gt;한 서비스가 다른 서비스를 호출할 때, 그 서비스가 동작하지 않을 경우에도 대비해야 합니다.
    &lt;ul&gt;
      &lt;li&gt;기존 Monolithic 애플리케이션은 에러가 나면 전체가 멈추므로 에러를 찾기 쉽지만 MSA에선 한 서비스가 죽어 있는데도 발견이 늦을 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Remote call이 in-process call 보다 비용(지연 등)이 높습니다.&lt;/li&gt;
  &lt;li&gt;한 업무 트랜잭션이 여러 서비스를 거치기 때문에 트랜잭션을 보장하기 위해 ‘‘eventual consistency” 같은 기술에 의존해야 합니다.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Feature가 여러 서비스로 퍼질 수 있습니다. (여기서 Feature가 뭔지 잘 모르겠습니다..)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;‘관리’의 개념이 기존과 많이 달라집니다.
    &lt;ul&gt;
      &lt;li&gt;서비스 간의 통신을 관리하는게 주가 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;한 서비스를 수정하는 건 쉽지만, 서비스를 분리하거나, 다른 서비스를 합칠 때 까다롭습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;44-분산컴퓨팅에-대한-오해&quot;&gt;4.4. 분산컴퓨팅에 대한 오해&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;분산 컴퓨팅 뉴비들이 가끔 오해하는 것들입니다.
    &lt;ul&gt;
      &lt;li&gt;네트워크가 reliable 하다.&lt;/li&gt;
      &lt;li&gt;Latency가 0이다.&lt;/li&gt;
      &lt;li&gt;Bandwidth가 무한하다.&lt;/li&gt;
      &lt;li&gt;네트워크가 안전하다.&lt;/li&gt;
      &lt;li&gt;Topology가 변하지 않는다.&lt;/li&gt;
      &lt;li&gt;한 명의 관리자가 있다.&lt;/li&gt;
      &lt;li&gt;통신 비용이 없다.&lt;/li&gt;
      &lt;li&gt;네트워크가 모두 동질적이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;45-practical-considerations&quot;&gt;4.5. Practical Considerations&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;어떻게 기존 Monolithic한 애플리케이션을 나눌 것인가
    &lt;ul&gt;
      &lt;li&gt;가장 우선해야 할 건 업무 기능별로 나누는 것입니다.&lt;/li&gt;
      &lt;li&gt;이를 위해 명사 단위로(카탈로그, 장바구니, 회원) 나눌 수도 있고 동사 단위로(검색, 결제, 배송) 나눌 수도 있습니다. 강사님은 명사 단위를 선호하지만, 사실 이것 만으론 부족합니다.&lt;/li&gt;
      &lt;li&gt;더 좋은 분할 원리는 ‘single responsibility principle’입니다. 한 서비스가 장바구니, 결제 등 한 부분을 책임 질 수 있어야 합니다.
        &lt;ul&gt;
          &lt;li&gt;『97 Things Every Programmer Should Know』의 ‘The Single Responsibility Principle’ 장을 참고하길 바랍니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;DDD(Domain Driven Design)에서 자주 언급되는 Bounded Context 원리 역시 좋은 방법입니다.
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://martinfowler.com/bliki/BoundedContext.html&quot;&gt;https://martinfowler.com/bliki/BoundedContext.html&lt;/a&gt;를 참고하면 좋습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;얼마나 Micro 해야 Micro 인가? 단순한 크기는 중요하지 않습니다. 그래도 굳이 크기를 정해야 한다면 아래와 같은 기준을 줄 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;한 개발자가 이해할 수 있는 크기여야 합니다.&lt;/li&gt;
      &lt;li&gt;또는, 한 작은 단위의 팀이 관리 가능해야 합니다. (아마존의 피자2판 규칙 사이즈의 팀)&lt;/li&gt;
      &lt;li&gt;해당 서비스에대한 Document가 읽고 이해하기 쉬울 정도가 되야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SOA와 다른 점
    &lt;ul&gt;
      &lt;li&gt;SOA는 시스템들을 통합하는 문제이고, MSA는 한 애플리케이션을 구성하는 문제입니다.&lt;/li&gt;
      &lt;li&gt;앞서 언급한 비유를 다시 사용하자면, SOA는 &lt;em&gt;Strong Central Orchestration&lt;/em&gt; 이지만, MSA는 &lt;em&gt;Choreography&lt;/em&gt;입니다.&lt;/li&gt;
      &lt;li&gt;SOA는 통합할 각 시스템들은 &lt;em&gt;dumb&lt;/em&gt;하지만 통합하는 방법이 &lt;em&gt;smart&lt;/em&gt; 합니다. 반면, MSA는 각 시스템들은 &lt;em&gt;smart&lt;/em&gt; 하지만 통합하는 방법이 &lt;em&gt;dumb&lt;/em&gt;합니다.(기술 수준이 낮습니다.)
        &lt;ul&gt;
          &lt;li&gt;예를들어, Linux 커맨드를 이용해 구성한 MSA는 다음과 같이 &lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt; 하나 만으로 연결이 되기도 합니다.&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps aux | grep ooffice | grep -v grep | awk '{pring $2}'&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Monolithic 구조는 항상 나쁜가?
    &lt;ul&gt;
      &lt;li&gt;당연히 아닙니다.&lt;/li&gt;
      &lt;li&gt;Monolithic 구조를 고수하는 회사로 &lt;a href=&quot;https://www.etsy.com/&quot;&gt;etsy.com&lt;/a&gt;을 들 수 있습니다.
        &lt;ul&gt;
          &lt;li&gt;Etsy는 150명의 개발자가 하루에 60번의 배포를 진행하고 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>프로젝트 디렉토리 구조 정리 - 사전조사</title>
   <link href="http://localhost:4000/posts/projects/sagyo_reboot/Sagyo2/"/>
   <updated>2020-04-18T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/sagyo_reboot/Sagyo2</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; 프로젝트를 진행할 때도 너무 꼴 뵈기 싫었지만, 당시 프로젝트는 하루 하루가 소중했기 때문에 디렉토리 구조를 바꿀 엄두를 못냈습니다.
    &lt;h2 id=&quot;1-현재-디렉토리-구조&quot;&gt;1. 현재 디렉토리 구조&lt;/h2&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/dir_now.png&quot; alt=&quot;dir_now.png&quot; width=&quot;50%&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 한 폴더 안에 DAO, DTO, Controller, Service 모두 있는 것도 이해가 안되지만, 그 한 폴더가 왜 test.mybatis인지는… 왜 그랬을까요?&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/dir_now2.png&quot; alt=&quot;dir_now2.png&quot; width=&quot;50%&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; WebContent는 그나마 나은 편이지만 jsp 파일도 조금 분리할 필요가 있는 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-목표-디렉토리-구조&quot;&gt;2. 목표 디렉토리 구조&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 디렉토리 구조를 개편하기 위해 어떤 방식의 구조를 많이 쓰나 찾아봤습니다. 우선, 공식 문서 같은 곳에서 추천하는 구조는 따로 없었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 예전에 실무에서 썼던 구조가 직관적으로 사용하기 편하고, 구글링 해보니 해당 구조를 따르는 사람들도 꽤 있는 것 같아 그 구조를 가져오기로 했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 업무별로 크게 나눈 다음, 각 업무별로 DAO, DTO, Service, Web(Controller)를 만드는 구조입니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;com
 └ Sagyo
     └ user
         └ DAO
         └ VO(DTO)
         └ Service
              └ ServiceImpl
         └ Web(Controller)
     └ post
         └ DAO
         └ VO(DTO)
         └ Service
              └ ServiceImpl
         └ Web(Controller)
           
           :
           
     └ cs
         └ DAO
         └ VO(DTO)
         └ Service
              └ ServiceImpl
         └ Web(Controller)
     └ common
          └ util
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-의문점&quot;&gt;3. 의문점&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 그런데 프로젝트 구조를 생각하다 보니 몇 가지 의문점들이 생겼습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;31-dao와-service의-차이점&quot;&gt;3.1. DAO와 Service의 차이점&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 이 부분은 Sagyo 프로젝트를 할 때는 몰랐고, 현업에 나갔을 때 들었던 의문입니다.&lt;/li&gt;
  &lt;li&gt; 현업에서 위와 같이 DAO, Service, ServiceImpl을 따로 관리하고 있었는데, 실제 소스를 보면 3개의 역할이 동일한 것이었습니다.
    &lt;ul&gt;
      &lt;li&gt; Service 인터페이스는 구현체인 ServiceImpl 클래스와 1:1 대응되고 있고, DAO의 각 메서드는 ServiceImpl의 메서드들과 1:1 대응하고 있었습니다.&lt;/li&gt;
      &lt;li&gt; 당시 이 부분을 여쭤보고 싶었지만 프로젝트 분위기가 살벌했기에 물어볼 엄두가 안났습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 구글링 해보니 DAO와 Service에 대한 논의가 많았습니다. 글들을 간단히 요약하면 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt; DAO는 테이블의 CRUD 같이 작은 단위의 DB 접근&lt;/li&gt;
      &lt;li&gt; Service는 비즈니스 로직 단위의 트랜잭션. DAO들의 집합, 조합.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 예를들어, 게시글을 눌렀을 때 글쓴이의 프로필, 글 내용, 댓글이 보이는 게시판이 있다고 가정합시다.
    &lt;ul&gt;
      &lt;li&gt; 이때 DAO는 ‘프로필 조회’, ‘글 조회’, ‘조회수 증가’, ‘댓글 조회’ 같이 4개의 DAO 메서드가 필요합니다.&lt;/li&gt;
      &lt;li&gt; 이 4개의 작업이 게시글 조회라는 한 트랜잭션 안에 일어나야 하기 때문에 Service에는 1개의 메서드가 필요한 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 그런데 지금 Sagyo 프로젝트에선 DAO의 인터페이스를 만들고, MyBatis의 SqlSessionTemplate을 이용해 DAO 인터페이스를 구현하는 방식으로 구성되어 있습니다. CRUD중 CRD는 한 쿼리에서 한 테이블을 건드리니 상관 없지만 Read 같은 경우 여러 테이블을 붙여 아래와 같은 쿼리가 나오게 됐습니다.&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POSTID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;USERID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NICKNAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TITLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONTENTS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MEETDATE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ADDRSINAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ADDRGUNAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URLBAD&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POST_VIEW&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MEETDATE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SYSDATE&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FN_POST_IS_ACCEPTED&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;POSTID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
         &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RANK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RANK&lt;/span&gt;
           &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POST&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INTEREST_SUB&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;IS&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERSUBID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;IS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERSUBID&lt;/span&gt;
                       &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INTEREST_MAIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IM&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;IS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MEETDATE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SYSDATE&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTERMAINID&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RANK&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ROWNUM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MEETDATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ROWNUM&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 그리고 Service의 존재를 모르던 저희는 Service가 해야할 일을 Controller에 시켜버렸고 Controller에선 아래와 같은 일이 벌어졌습니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/opbadge.action&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RequestMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;opBadgeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;IBadgeDAO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;IBadgeDAO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;IUserDAO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dao2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;IUserDAO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList1_count&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList1_count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList1_date&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList1_date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
  
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList2&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList3&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BadgeList4&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BadgeList4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
  
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;MyPageBad&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dao2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MyPageBad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;myPageList&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dao2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;myPageList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;myPageAddrList&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dao2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;myPageAddrList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;myPageInterList&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dao2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;myPageInterList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
  
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;WEB-INF/views/OpBadge.jsp&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; 어쩐지 코드 작성하면서도 ‘Controller는 간단하게 구성된다는데…?’ 라는 의문이 들었습니다. 또, ‘DAO Service 차이’를 구글링 하는데 연관 검색어에 ‘Service Controller 차이’가 떠있었는데 역시 사람들은 거진 비슷한 실수를 하는구나 생각했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-dto는-어느-단위로-분리해야-하는지&quot;&gt;3.2. DTO는 어느 단위로 분리해야 하는지&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; Sagyo 프로젝트를 진행할 때 DTO를 어떤 단위로 구성해야 하는 지도 의문이었습니다.&lt;/li&gt;
  &lt;li&gt; 처음엔 DB 테이블 단위로 구성했는데, 정규화를 철저하게 해놓다보니 테이블과 1:1로 대응되는 DTO로는 업무를 처리하지 못했습니다.&lt;/li&gt;
  &lt;li&gt; ‘게시글 DTO에 유저 id 하나만 넣을게’ , ‘게시글 DTO에 이미지 url 하나만 넣을게’ … 6명이 한 DTO를 공유하며 각자 필요한 속성들을 넣다보니 하나의 DTO가 비대해졌습니다.&lt;/li&gt;
  &lt;li&gt; ‘기승아, 이 DTO 쓰면 이 DTO는 없어져도 되겠는데?’와 같은 질문도 나오기 시작했습니다. 시작은 엄연히 다른 DTO 였는데 속성 10개중 8~9개가 겹치는 DTO들이 생기고, 한 DTO가 다른 DTO를 포함하는 사태가 벌어졌습니다.
    &lt;ul&gt;
      &lt;li&gt;너도 나도 하나씩 추가하다 보니 가장 비대해져버린 게시글DTO입니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PostDTO&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrSiName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrGuId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrGuName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addrDetail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interMainId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interMainName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interSubId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interSubName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interDetail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;meetDate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;samegender&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;drink&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;moodName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlBad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;telCertiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emailCertiId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;followId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minNum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxNum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limitGrade&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      
    &lt;span class=&quot;c1&quot;&gt;// getter / setter&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; 당시 웹 개발 프로젝트도 처음이고 시간도 촉박한 상황이라 방법론에 대해 고민할 시간이 없었습니다. 여유가 있었다면 팀원들에게 더 좋은 방법론을 제시해 줄 수 있었을 텐데 미안할 따름입니다.&lt;/li&gt;
  &lt;li&gt; 그리고 이 DTO에 관한 고민은 아래 고민으로 이어지게 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;33-dto-방식과-map-방식&quot;&gt;3.3. DTO 방식과 Map 방식&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 당시 같이 프로젝트를 하던 다른 팀을 염탐하던 중 DTO 대신 Map을 쓰는 팀을 발견햤습니다. 팀에 Map을 도입시킨 친구는 이렇게 말했습니다. ‘너네도 DTO 쓰지말고 Map 써봐라, DTO 관리할 필요도 없고 새 프로퍼티 필요하면 그냥 쿼리에 쓰면 된다. Map관련해서 설정만 몇 가지 하면 되는데 금방한다.’&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 당시 DTO가 점점 비대해지는 이슈를 인지하고 있던터라 솔깃했습니다. 하지만, 프로젝트 중간에 방법론을 바꿨을 때의 리스크를 감당할 수 없었기 때문에 제안을 거절했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 이후 실무에 나갔을 땐 DTO와 Map을 혼용해서 쓰고 있었습니다. 프로젝트 안에 딱히 코드 표준을 두지 않았기 때문에 개발자 A님은 DTO를 쓰고 있고 개발자 B님은 Map을 쓰고 있었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 점심시간에 밥 먹으며 슬쩍 물어봤더니 다음과 같은 답이 돌아왔습니다. ‘예전엔 뭐 써야 된다 말이 많았는데, 요즘은 프로젝트 안에서 따로 정하지 않으면 개발자 개인 성향따라 간다. 둘 다 장단점이 있으니까 한 번 찾아봐라.’&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt; 최근(2017년)에 핫한 토론이 벌어진 &lt;a href=&quot;https://okky.kr/article/370609&quot;&gt;okky 링크&lt;/a&gt;를 첨부합니다. DTO파, Map파, 중도파 모두 있는 게시글인데 서로 충돌 지점이 없는 부분을 요약하면 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt; 프로젝트 안에 표준이 있다면 그걸 따른다.&lt;/li&gt;
      &lt;li&gt; Map : 생산성이 높다. 개발기간에 변경이 잦은 대한민국 SI 환경에 강하다. 그러나 다른 사람이 유지보수하기 힘들다.&lt;/li&gt;
      &lt;li&gt; DTO : 시스템의 구조를 잘 보여준다. 다른 사람이 코드를 봐도 쉽게 이해할 수 있어 유지보수에 강하다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 성능 부분에선 의견이 갈리는 것 같았습니다. 개인적으론 중도파를 선택하고 싶습니다.
    &lt;ul&gt;
      &lt;li&gt; CRUD중 CUD는 DTO와 DB 테이블을 일치 시키는 것도 용이하고, 타입에 관한 걱정도 해야하니 DTO를 쓰는게 맞는 것 같습니다.&lt;/li&gt;
      &lt;li&gt; 여러 테이블을 붙여 불러올 때가 많고, 불러오는 속성이 자주 바뀌기도 하는 Read는 Map을 써도 되지 않을까 생각합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 그런데 DTO vs Map을 찾아보던 중에 아래 의문이 생겼습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;34-vo와-dto는-같은-것인가&quot;&gt;3.4. VO와 DTO는 같은 것인가&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 사실 이 부분은 깐깐하게 가르치던 강사님도 ‘거의 같은 개념으로 사용한다고 보시면 됩니다.’ 라며 넘어가던 주제입니다.(프로그래밍을 처음 배우던 학생들에겐 적합하지 않은 주제인 것 같긴 합니다.)&lt;/li&gt;
  &lt;li&gt; 예전에 DTO를 Map으로도 쓸 수 있는 걸 알았을 땐 ‘아, DTO는 데이터를 옮겨주는 객체를 총칭하는 말이고, DTO안에 VO 방식과 Map방식이 있구나’라고 생각했지만, 구글링 해보니 DTO와 VO는 다른 개념인 것 같았습니다.&lt;/li&gt;
  &lt;li&gt; 구글링 해본 결과 VO와 DTO의 정의와 사용을 명시한 공식 레퍼런스는 없고, 프로그래밍의 바이블 같은 서적들을 출처로 삼으며 ‘여기선 ~~라더라’는 정보들이 많았습니다.&lt;/li&gt;
  &lt;li&gt; 공통적으로 나오는 특징들은 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt; VO는 read only가 강한것, 주로 DB 테이블과 1:1로 대응됨(필수는 아님), 어플리케이션과 DB사이를 왔다갔다함.&lt;/li&gt;
      &lt;li&gt; DTO는 비즈니스 로직 중심의 속성들로 구성됨, DB뿐 아니라 어플리케이션 안밖의 다른 레이어들끼리의 데이터 전송도 맡음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 사람들이 많이 언급하는 레퍼런스는 Martin Fowler의 『Patterns of Enterprise Application Architecture』 였습니다. &lt;del&gt;(인터넷에서 쉽게 pdf를 구할 수 있습니다.)&lt;/del&gt;
    &lt;ul&gt;
      &lt;li&gt; Martin Fowler는 DTO와 VO가 확실히 다르다고 언급하고 있습니다.
        &lt;blockquote&gt;
          &lt;p&gt; Sadly recently I’ve seen the J2EE community [Alur et al.] use the term “value object” to mean Data Transfer Object, which has caused a storm in the teacup of the patterns community. This is just one of those clashes over names that happen all the time in this business.&lt;/p&gt;

        &lt;/blockquote&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 한글 포스팅 중 깔끔하게 정리된 곳은 &lt;a href=&quot;https://medium.com/webeveloper/entity-vo-dto-666bc72614bb&quot;&gt;https://medium.com/webeveloper/entity-vo-dto-666bc72614bb&lt;/a&gt; 이곳 인것 같습니다. (여기선 덤으로 Entity도 비교해줍니다!)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-아이고-골이야&quot;&gt;4. 아이고 골이야..&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 단순히 프로젝트 파일만 옮기려고 시작한 작업이었는데 의문점들을 정리하다 보니 일이 커졌습니다.
    &lt;ol&gt;
      &lt;li&gt; VO를 사용해야할 곳에 DTO를 사용하고 있었습니다. DTO도 테이블 단위로 쪼개 VO로 만들어야 될 것 같습니다. VO로 표현하기 어려운 곳엔 Map을 사용해야 할 것 같습니다.&lt;/li&gt;
      &lt;li&gt; Service가 할 일을 Controller가 하고 있었습니다. Controller에서 여러 DAO를 호출하던 걸 Service로 묶어야 겠습니다.&lt;/li&gt;
      &lt;li&gt; 지금과 같은 ‘Controller - Service - DAO - DTO/VO’ 구조에서 Service 가 관습적으로 쓰이는 경우가 많고(기능이 단순해 Service로 묶을 필요 없거나 Sagyo처럼 Controller에서 Service 역할을 해버리기도 하고), 이를 대체하는 DDD 패턴 같은 것도 있고.. 역시 개발자의 길은 멀고 험하구나.. :sweat_smile:&lt;/li&gt;
    &lt;/ol&gt;

    &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/headache.jpg&quot; alt=&quot;headache.jpg&quot; /&gt;&lt;small&gt; 1시간 안에 쓱싹 할 줄 있을 줄 알았는데…&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt; 또 다른 걱정은 6명 분량의 어플리케이션을 혼자 수정해야 한다는 것입니다.:scream:&lt;/li&gt;
  &lt;li&gt; 한 편의 포스팅에 조사 및 수정을 다 담으려 했는데 포스팅이 길어져 두 편으로 나눠야겠습니다!&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>The Oyster Mine</title>
   <link href="http://localhost:4000/posts/projects/the_oyster_mine/The-Oyster-Mine/"/>
   <updated>2020-04-17T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/the_oyster_mine/The Oyster Mine</id>
   <content type="html">&lt;p&gt;redirect!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>황매산 등산경로 분석</title>
   <link href="http://localhost:4000/posts/projects/hwangmaesan/Maehwasan/"/>
   <updated>2020-04-17T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/hwangmaesan/Maehwasan</id>
   <content type="html">&lt;p&gt;redirect!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>About Me</title>
   <link href="http://localhost:4000/posts/about%20me/About-Me/"/>
   <updated>2020-04-17T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/about%20me/About Me</id>
   <content type="html">&lt;p&gt;redirect!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Spring 특징</title>
   <link href="http://localhost:4000/posts/googling/spring/Spring%ED%8A%B9%EC%A7%95/"/>
   <updated>2020-04-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/spring/Spring특징</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; Spring 특징이라고 검색하면 무조건 나오는 3개만 정리해둡니다.
    &lt;ul&gt;
      &lt;li&gt;POJO&lt;/li&gt;
      &lt;li&gt;IoC / DI&lt;/li&gt;
      &lt;li&gt;AOP&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 기존에 여기저기 주워 들어 알고 있던 지식과 &lt;a href=&quot;https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html&quot;&gt;Spring 공식 Document&lt;/a&gt;를 참고했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pojo&quot;&gt;POJO&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; Plain Old Java Object로 구성가능합니다. 즉, 어플리케이션을 위한 다른 라이브러리 등을 익힐 필요 없이 순수한 Java의 객체들로만 작성할 수 있다는 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 스프링이 없던 과거의 웹 개발자분들은 직접 Servlet 클래스를 구현해 웹 어플리케이션을 만들어야 했습니다. (학원에서 스프링 배우기 이전에 ‘원래 이런 방식으로 구현되니 알아만 둬라’라며 Servlet 클래스의 doGet과 doPost를 구현했던 기억이 납니다.) 그런데 Servlet 클래스는 순수한 자바 클래스는 아닙니다. 웹 개발을 위해 끌어와야할 외부 클래스입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; POJO는 이런 외부 클래스의 작성 없이, 개발자는 기존에 알던 Java만 사용해도 된다는 것입니다. (근데 이제 Java를 아는 것보다 Spring을 아는게 더 큰 일이 되버린것 같습니다..)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ioc--di&quot;&gt;IoC / DI&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; Spring의 공식 Document 중 Core 부분 Document에서 가장 처음 나오는 것이 IoC Container 입니다. 그리고, IoC Container에서 IoC의 개념에 대한 간략한 설명이 나와 있습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt; IoC is also known as dependency injection (DI).&lt;/p&gt;

      &lt;p&gt; It is a process whereby objects define their dependencies (that is, the other objects they work with) only through constructor arguments, arguments to a factory method, or properties that are set on the object instance after it is constructed or returned from a factory method.&lt;/p&gt;

      &lt;p&gt; The container then injects those dependencies when it creates the bean.&lt;/p&gt;

      &lt;p&gt; &lt;strong&gt;This process is fundamentally the inverse (hence the name, Inversion of Control) of the bean itself controlling the instantiation&lt;/strong&gt; or location of its dependencies by using direct construction of classes or a mechanism such as the Service Locator pattern.&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;ul&gt;
      &lt;li&gt; IoC는 DI 라고도 알려져있습니다.&lt;/li&gt;
      &lt;li&gt; IoC는 객체가 &lt;strong&gt;자신의 의존성을 정의하는 방법&lt;/strong&gt;입니다. 정의하는 방법은 아래의 과정을 통해서만 가능합니다.
        &lt;ul&gt;
          &lt;li&gt; 생성자 전달인자 (constructor arguments)&lt;/li&gt;
          &lt;li&gt; Factory 메서드로 전달된 전달인자 (arguments to a factory method)&lt;/li&gt;
          &lt;li&gt; 생성되거나 Factory method로 부터 돌려받은 객체 인스턴스에 설정된 property들 (properties that are set on the object instance after it is constructed or returned from a factory method.)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; &lt;strong&gt;해당 객체가 만들어질때 IoC 컨테어너가 의존성을 주입해줍니다.&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt; &lt;strong&gt;이 과정은 bean 자체가 만들어질 때의 과정과 근본적으로 반대입니다.&lt;/strong&gt; (Service Locator pattern같은 걸 이용해 의존성의 위치를 바꾼다는 내용은 아직 잘 모르겠습니다… :cry:)&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;br /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 간단하게 말하자면, IoC는 객체간의 의존성을 만들 때 기존의 방법과 반대의 방법을 사용한다는 뜻입니다. 말 그대로 Inversion of Control 입니다. 그리고 반대의 방법을 사용할 때 필요한게 의존성 주입(Dependency Injection)입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; Coffee 객체를 만들기 위해 EthiopiaBean 객체가 필요한 상황을 가정합시다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;EthiopiaBean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EthiopiaBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EthiopiaBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KenyaBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt; 순수한 자바라면, Coffee객체를 만드는 와중에 EthiopiaBean객체를 만들게 됩니다.&lt;/li&gt;
      &lt;li&gt; 이 상황에서 Coffee 객체에 필요한 커피 원두를 KenyaBean으로 바꾸고 싶다면 Coffee 객체 코드를 수정해야 합니다. 지금은 Coffee 객체와 EthiopiaBean 객체의 결합도가 높다고 볼 수 있습니다.&lt;/li&gt;
      &lt;li&gt; IoC / DI를 이용해 객체간의 결합도를 낮출 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 다음과 같이 상황을 바꿀 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;CoffeeBean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CoffeeBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EthiopiaBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KenyaBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt; Coffee 클래스엔 커피 원두의 interface만 남기고 직접적인 결합은 피해줍니다.&lt;/li&gt;
      &lt;li&gt; 위 코드엔 없지만 spring의 설정 파일을 통해 CoffeeBean에 어떤 커피 원두가 들어갈 지 설정해둡니다. (여기선 KenyaBean으로 설정해 두었다고 가정합시다.)&lt;/li&gt;
      &lt;li&gt; Coffee 객체가 만들어 질 때, 스프링 IoC 컨테이너가 KenyaBean 객체를 따로 만들어 Coffee 객체의 생성 과정에 주입해 줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 기존엔 EthiopiaBean 객체가 만들어지려면 Coffee 객체의 생성이 필요했습니다. 하지만 이제 반대로 Coffee 객체의 생성을 위해선 KenyaBean 의 생성이 필요해졌습니다. Dependency Injection을 통해 Inversion of Control이 되어 버린 것입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;aop&quot;&gt;AOP&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; AOP(aspect oriented programming)이란 쉽게 말해 보조적인 업무와 핵심 업무를 나눠 생각하겠다는 것입니다.
    &lt;ul&gt;
      &lt;li&gt; 로그, 예외 처리 같이 업무의 핵심은 아니지만 모든 업무마다 발생하는 보조업무들을 프로그래머들이 신경쓰지 않게 하기 위한 기법입니다.&lt;/li&gt;
      &lt;li&gt; 주업무 전, 후, 전후 언제 돌아갈지 정할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; &lt;a href=&quot;https://docs.spring.io/spring/docs/2.0.x/reference/aop.html#aop-understanding-aop-proxies&quot;&gt;Spring Document&lt;/a&gt;를 통해 동작 과정을 더 구체적으로 알아보겠습니다.
    &lt;ul&gt;
      &lt;li&gt; 우선 요약해서 말하자면. 보조업무가 주업무가 이루어지는 객체 자체를 찾아가는게 아닙니다. proxy라는 dummy 객체가 있고. 보조업무는 proxy를 찾아갑니다. proxy가 보조업무와 주업무를 실행 시킵니다.&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt; AOP가 없이 업무를 실행시키는 다음과 같은 상황을 가정하겠습니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// initiate Pojo object&lt;/span&gt;
      &lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pojo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SimplePojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// this is a direct method call on the 'pojo' reference&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;pojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
     
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SimplePojo&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// this next method invocation is a direct call on the 'this' reference&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// some logic...&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt; 이런 상황에선 아래와 같이 pojo.foo() 를 호출하면 Plain Pojo 객체에서 foo()를 실행시킵니다.&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Spring/aop-proxy-plain-pojo-call.png&quot; alt=&quot;aop-proxy-plain-pojo-call.png&quot; width=&quot;50%&quot; height=&quot;50%&quot; /&gt;&lt;small&gt;일반 메서드 호출 ( 출처 : https://docs.spring.io/spring/docs/2.0.x/reference/aop.html#aop-understanding-aop-proxies )&lt;/small&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt; 위 상황에 AOP를 적용해 보조 업무를 추가시키면 다음과 같습니다.
        &lt;ul&gt;
          &lt;li&gt; ProxyFactory에 관한건 &lt;a href=&quot;https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/aop/framework/ProxyFactory.html&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
        &lt;/ul&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// 프록시를 만드는 ProxyFactory 생성&lt;/span&gt;
       &lt;span class=&quot;nc&quot;&gt;ProxyFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ProxyFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SimplePojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// ProxyFactory에 주업무 Pojo를 등록 &lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;adddInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// 보조업무 RetryAdvice를 등록&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAdvice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RetryAdvice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// AopContext에서 검색 가능하게 할 건지&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setExposeProxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// 프록시 만들어 냄&lt;/span&gt;
       &lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pojo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getProxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// this is a method call on the proxy!&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;pojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      
 &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SimplePojo&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// this works, but... gah!&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Pojo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AopContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currentProxy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// some logic...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt; 위 상황은 아래와 같습니다. factory.getProxy()로 만들어진 Proxy Pojo 객체에서 pojo.foo()를 호출하면 등록해 둔 보조 업무를 실행 시킨 뒤, Plain Pojo의 foo를 실행 시킵니다.&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Spring/aop-proxy-call.png&quot; alt=&quot;aop-proxy-call.png&quot; /&gt;&lt;small&gt;proxy를 이용한 aop&lt;/small&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 추가로 AOP와 Filter, Interceptor를 헷갈릴 수 있는데 좋은 포스팅이 있어서 &lt;a href=&quot;https://thiago6.tistory.com/63?category=827160&quot;&gt;링크&lt;/a&gt;만 남기겠습니다.&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Spring MVC의 동작 과정</title>
   <link href="http://localhost:4000/posts/googling/spring/Spring-%EB%8F%99%EC%9E%91%EA%B3%BC%EC%A0%95/"/>
   <updated>2020-04-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/spring/Spring 동작과정</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Spring MVC의 동작 과정을 알아봅시다!&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;참고한 &lt;a href=&quot;http://terasolunaorg.github.io/guideline/1.0.1.RELEASE/en/Overview/SpringMVCOverview.html&quot;&gt;사이트&lt;/a&gt;에는 각 요소들의 구현체들도 소개해주는데, 거기까진 가지 않고 아래 다이어그램으로 알 수 있는 큰 흐름만 살펴봅니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래 다이어그램을 보시면 알겠지만, 이 많은 과정에서 개발자가 직접 작성해야 될 부분은 보라색, 연두색 부분 밖에 없습니다. 갓스프링…&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Spring/RequestLifecycle.png&quot; alt=&quot;RequestLifecycle.png&quot; /&gt;&lt;small&gt;출처 : &lt;a href=&quot;http://terasolunaorg.github.io/guideline/1.0.1.RELEASE/en/Overview/SpringMVCOverview.html&quot;&gt;http://terasolunaorg.github.io/guideline/1.0.1.RELEASE/en/Overview/SpringMVCOverview.html&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet 이 요청을 받습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet은 HandlerMapping에게 해당 요청을 다룰 Controller가 누구인지 찾아달라고 합니다. HandlerMapping은 요청 URL을 읽어 적합한 (selected hander)와 Controller를 찾아 DispatcherServlet에게 알려줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispathcerServlet은 돌려받은 Controller를 실행 시키는 일을 HandlerAdapter에게 넘겨줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HandlerAdapter가 Controller의 비즈니스 로직을 호출합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Controller는 정해진 비즈니스 로직을 수행하고, 수행한 결과를 Model담고, 결과를 보여줄 View의 이름을 HandlerAdapter에게 넘겨줍니다. (View자체를 넘기는게 아니라 View의 logical한 이름만 돌려줍니다. 실제 View를 찾는건 다음 과정입니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet은 View의 이름을 Resolve 하는 일을 ViewResolver에게 넘겨줍니다. ViewResolver는 넘겨받은 View의 이름을 토대로 적절한 View 오브젝트를 찾아줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet은 렌더링 과정을 View에게 넘겨줍니다.(여기서 View는 ViewResolver가 찾아준 View)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;View가 Model에 있는 데이터를 이용해 렌더링하고 응답을 돌려줍니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;아래는 위 다이어그램에 대한 원문입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet receives the request.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet dispatches the task of selecting an appropriate controller to HandlerMapping. HandlerMapping selects the controller which is mapped to the incoming request URL and returns the (selected Handler) and Controller to DispatcherServlet.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet dispatches the task of executing of business logic of Controller to HandlerAdapter.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HandlerAdapter calls the business logic process of Controller.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Controller executes the business logic, sets the processing result in Model and returns the logical name of view to HandlerAdapter.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet dispatches the task of resolving the View corresponding to the View name to ViewResolver. ViewResolver returns the View mapped to View name.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DispatcherServlet dispatches the rendering process to returned View.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;View renders Model data and returns the response.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>JVM 메모리 구조</title>
   <link href="http://localhost:4000/posts/googling/java/JVM_Memory/"/>
   <updated>2020-04-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/java/JVM_Memory</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; 이미 많은 포스팅들이 JVM 메모리 구조를 설명하고 있습니다. 본 포스팅은 저의 이해를 돕고자 남기는 포스팅입니다.&lt;/li&gt;
  &lt;li&gt; 많은 곳을 참고했고 내용 역시 거진 비슷하여 따로 출처를 남기지 않았습니다. 다만, PC Register와 Native Method Stack의 경우 포스팅 마다 내용이 상이해서 jvm 공식 문서를 참고했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Java/jvm-architecture.png&quot; alt=&quot;jvm-architecture.png&quot; /&gt;&lt;small&gt;출처 : https://javatutorial.net/jvm-explained&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 이번 포스팅에선 위의 다이어그램중 Runtime Data Area에 대해 알아봅니다.&lt;/li&gt;
  &lt;li&gt; Runtime Area에는 크게 다섯가지 영역이 존재합니다.
    &lt;ul&gt;
      &lt;li&gt;Heap Area&lt;/li&gt;
      &lt;li&gt;Method Area&lt;/li&gt;
      &lt;li&gt;Stack Area&lt;/li&gt;
      &lt;li&gt;PC Register&lt;/li&gt;
      &lt;li&gt;Native Method Stacks&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heap-area&quot;&gt;Heap Area&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 흔히 알고있는 객체 인스턴스들이 저장됩니다.&lt;/li&gt;
  &lt;li&gt; JVM이 시작될 때 생성됩니다.&lt;/li&gt;
  &lt;li&gt; 하나의 JVM에 하나의 Heap Area가 존재하며, JVM안의 여러 스레드가 공유하는 영역입니다.
    &lt;ul&gt;
      &lt;li&gt; thread-safe 하지 않다고 합니다.&lt;/li&gt;
      &lt;li&gt; 멀티 스레드 환경에서 작업한다면 주의해야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; GC의 대상이 되며, GC의 대상이 됐는지 안됐는지에 따라 아래와 같이 나뉩니다.
    &lt;ul&gt;
      &lt;li&gt;Young Generation
        &lt;ul&gt;
          &lt;li&gt;Eden&lt;/li&gt;
          &lt;li&gt;Survivor1&lt;/li&gt;
          &lt;li&gt;Survivor2&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Old Generation
        &lt;ul&gt;
          &lt;li&gt;Tenured&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;method-area&quot;&gt;Method Area&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 로드한 class 와 관련한 데이터들이 저장됩니다.
    &lt;ul&gt;
      &lt;li&gt; JVM이 시작될 때 생성됩니다.&lt;/li&gt;
      &lt;li&gt; 클래스의 메서드에 관한 정보들이 저장됩니다.&lt;/li&gt;
      &lt;li&gt; static 변수(class 변수, 멤버 변수), static 메서드들이 이곳에 저장됩니다.
        &lt;ul&gt;
          &lt;li&gt; static 변수는 한 class의 인스턴스들이 모두 공유하기 때문에 class 변수라고도 합니다.&lt;/li&gt;
          &lt;li&gt; static 변수는 static 초기화 블럭에서 초기화되는데, static 블럭은 클래스가 로딩될때 생성됩니다. 즉, 한 클래스의 인스턴스가 생성되지 않더라도 해당 class의 static 변수는 생성됩니다.&lt;/li&gt;
          &lt;li&gt; static 메서드는 객체를 만들지 않아도 사용할 수 있는데, 클래스를 로드할 때 static 메서드를 미리 로드하기 때문입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Heap메모리의 일부로 Permanent Generation라고도 불립니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;stack-area&quot;&gt;Stack Area&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 하나의 스레드에 하나의 스택이 할당됩니다.
    &lt;ul&gt;
      &lt;li&gt; 스레드가 생성될 때 하나의 Stack이 생성됩니다.&lt;/li&gt;
      &lt;li&gt; 크기를 고정적으로 줄 수도 있고, 동적으로 할당되게 할 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 하나의 메소드를 호출 할 때마다 메소드의 frame을 스택에 추가합니다. 메소드 frame크기는 해당 메소드에서 사용할 변수들의 크기를 계산해 컴파일시 미리 산정됩니다. 메소드가 종료되면 프레임이 제거 됩니다.  frame을 통해 흔히 알고 있는 변수들의 scope가 정해집니다.&lt;/li&gt;
  &lt;li&gt; 지역 변수들이 저장됩니다. 지역변수들은 Heap에 할당된 인스턴스 참조 주소를 갖고 있습니다.&lt;/li&gt;
  &lt;li&gt; 원시 타입(byte, short, int, long, double, float, boolean, char) 변수가 ‘값과 함께’ 저장됩니다.
    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt; 기본적으로 값과 함께 저장되기 때문에 원시타입은 null 을 갖을 수 없습니다. 아래 구문은 컴파일 과정에서 에러가 납니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt; 반면, 원시타입의 Wrapper 클래스는 변수명은 Stack에, 값은 Heap에 저장되기 때문에 null값을 선언할 수 있습니다.&lt;/p&gt;

        &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;stack-메모리-heap-메모리-시각화&quot;&gt;Stack 메모리, Heap 메모리 시각화&lt;/h3&gt;

&lt;hr /&gt;

&lt;script async=&quot;&quot; class=&quot;speakerdeck-embed&quot; data-id=&quot;9780d352c95f4361bd8c6fa164554afc&quot; data-ratio=&quot;1.77777777777778&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;

&lt;p class=&quot;p_img&quot;&gt; &lt;small&gt;출처 : https://deepu.tech/memory-management-in-jvm/&lt;/small&gt; &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 코드가 진행됨에 따라 Stack메모리와 Heap메모리가 어떻게 변하는지 시각화 하고 싶었는데 좋은 참고자료가 있어서 가져왔습니다.&lt;/li&gt;
  &lt;li&gt; 제 블로그가 폭이 좁아 슬라이드가 잘 안보입니다. 위 슬라이드 제목 부분 링크 클릭하셔서 보는걸 추천해드립니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pc-register&quot;&gt;PC Register&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; PC = Program Counter&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 한 스레드에 하나의 PC Register가 생성됩니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;Each Java Virtual Machine thread has its own &lt;code class=&quot;highlighter-rouge&quot;&gt;pc&lt;/code&gt; (program counter) register&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; &lt;strong&gt;현재 수행중인 JVM 명령 주소가 저장됩니다.&lt;/strong&gt; 단, 현재 수행중인게 자바 프로그램이 아닌 외부 Native 프로그램이라면 저장되지 않습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;If that method is &lt;code class=&quot;highlighter-rouge&quot;&gt;not native&lt;/code&gt;, the pc register contains the address of the Java Virtual Machine &lt;code class=&quot;highlighter-rouge&quot;&gt;instruction currently being executed.&lt;/code&gt; If the method currently being executed by the thread is &lt;code class=&quot;highlighter-rouge&quot;&gt;native&lt;/code&gt;, the value of the Java Virtual Machine’s pc register is &lt;code class=&quot;highlighter-rouge&quot;&gt;undefined.&lt;/code&gt;&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;p&gt;&lt;small&gt;출처 : https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.1&lt;/small&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;native-method-stack&quot;&gt;Native Method Stack&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; &lt;strong&gt;Java 이외의 언어로 작성된 프로그램, API 등을 운용하기 위해 필요한 영역&lt;/strong&gt;입니다. (외부 프로그램들이 주로 C언어로 작성되어서 ‘C stacks’라고도 불리는 것 같습니다.)&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt; An implementation of the Java Virtual Machine may use conventional stacks, &lt;code class=&quot;highlighter-rouge&quot;&gt;colloquially called &quot;C stacks,&quot;&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;to support native methods&lt;/code&gt; (methods written in a language other than the Java programming language)&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; native 메서드를 지원하지 않는 JVM은 Native Method Stack을 갖지 않을 수 있습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt; Java Virtual Machine implementations that &lt;code class=&quot;highlighter-rouge&quot;&gt;cannot load native methods&lt;/code&gt; and that do not themselves rely on conventional stacks &lt;code class=&quot;highlighter-rouge&quot;&gt;need not supply native method stacks.&lt;/code&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; Stack 메모리처럼 쓰레드 마다 할당되며, 쓰레드가 생성될 때 생성됩니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt; native method stacks are typically allocated per thread when each thread is created.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 크기는 고정적으로 할당 할 수도 있고, 동적으로 계산 될 수도 있습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt; This specification permits native method stacks either to be of a fixed size or to dynamically expand and contract as required by the computation.&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt; 정적 할당시 할당한 양을 초과하면 &lt;em&gt;StackOverFlow&lt;/em&gt; 날 수 있고, 동적으로 할당해도 메모리가 부족하면 &lt;em&gt;OutOfMemory&lt;/em&gt; 날 수 있습니다.&lt;/p&gt;

        &lt;blockquote&gt;
          &lt;p&gt; If the computation in a thread requires a larger native method stack than is permitted, the Java Virtual Machine throws a &lt;code class=&quot;highlighter-rouge&quot;&gt;StackOverflowError&lt;/code&gt;.&lt;/p&gt;

          &lt;p&gt; If native method stacks can be dynamically expanded and native method stack expansion is attempted but insufficient memory can be made available, or if insufficient memory can be made available to create the initial native method stack for a new thread, the Java Virtual Machine throws an &lt;code class=&quot;highlighter-rouge&quot;&gt;OutOfMemoryError&lt;/code&gt;.&lt;/p&gt;
        &lt;/blockquote&gt;

        &lt;p&gt;&lt;small&gt;출처 : https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.6&lt;/small&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>L사 코딩테스트 합격 및 그 외 진행 상황</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/L-Pass-CodingTest-etc/"/>
   <updated>2020-04-10T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/L-Pass-CodingTest-etc</id>
   <content type="html">&lt;h3 id=&quot;l사-코딩테스트-합격&quot;&gt;L사 코딩테스트 합격&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt; 음.. 일단 코딩테스트는 합격을 했다. 그리고 자기소개서를 작성하려 안내 메일에 준 L-Style과 기타 등등을 읽어보는데… :sweat: 후… L사가 바라는게 많은 걸까 내가 못난걸까.. 내가 못난거겠지.. 그래도 일단 서류는 써 보고, 떨어져도 좋으니 면접이나 한 번 봤으면!&lt;/p&gt;

&lt;h3 id=&quot;그-외-진행-상황&quot;&gt;그 외 진행 상황&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt; 코딩 테스트를 본 L사 외에 다른 L사도 지원했다. 다른 L사는 코로나 때문에 서류 발표조차 5월 중순으로 연기 됐다. 한 달 후에 봐요!&lt;/p&gt;

&lt;p&gt; S사의 SCSA코스라는 것도 지원했다. SCSA는 S사의 비전공자를 위한 전형이다. 6개월의 교육을 받고 취업을 하게 되는데 사실 나는 SCSA전형보다 바로 일 할 수 있도록 일반전형에 지원하려 했으나.. 대기업중 대기업인 S사이기 때문에 일반전형으로 지원하면 서류에서 컷 당할 것 같아 SCSA로 지원했다. SCSA는 코딩테스트를 안 보는게 조금 아쉽다. 지금 코딩테스트 3전 3승으로 꽤 자신 있는 상태인데..&lt;/p&gt;

&lt;p&gt; 프로그래머스에서 하는 Dev-Matching에도 참여하려 했으나 코딩테스트를 보는 날인 4/18에 뺄 수 없는 일이 있어서 아쉽지만… ㅜㅜ&lt;/p&gt;

&lt;p&gt; 코로나의 여파가 있지만 그래도 개발쪽은 꾸준히 채용하는 것 같다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>지금까지의 Twitch Chat Analysis</title>
   <link href="http://localhost:4000/posts/projects/twitch_chat_analysis/TCA1/"/>
   <updated>2020-04-09T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/twitch_chat_analysis/TCA1</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt; Twitch Chat Analysis (이하 TCA) 프로젝트는 2019년 8월경 약 한 달간 진행한 프로젝트입니다.&lt;/li&gt;
  &lt;li&gt; 원래 계획은 많았으나 예상보다 빠르게 취업이 되어 중단된 프로젝트입니다.&lt;/li&gt;
  &lt;li&gt; 본 포스팅에선 처음 계획과 지금까지의 진행상황을 요약하겠습니다.
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#1-개요&quot;&gt;개요&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#2-기획&quot;&gt;기획&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#3-유저-시나리오-기획&quot;&gt;유저 시나리오 기획&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#4-웹-디자인&quot;&gt;웹 디자인&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#5-기술-스택-선정&quot;&gt;기술 스택 선정&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#6-db-스키마&quot;&gt;DB 스키마&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#7-api-서버&quot;&gt;API 서버&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#8-클라이언트&quot;&gt;클라이언트&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-개요&quot;&gt;1. 개요&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 개인적으로 트위치 스트리머 ‘우왁굳’의 열렬한 팬입니다. 우왁굳의 유튜브는 모조리 보는 편입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/wakgood.png&quot; alt=&quot;wakgood.png&quot; width=&quot;30%&quot; height=&quot;30%&quot; class=&quot;center&quot; /&gt;&lt;small&gt;충분히 이상해 보이지만 이상한 사람은 아닙니다.&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 한편, 인터넷 방송은 방송시간이 굉장히 깁니다. 적게는 4~5시간, 많게는 12시간 이상도 됩니다. 일반적인 사람이라면 이렇게 긴 방송을 전부 볼 순 없습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 저 역시 우왁굳의 방송을 좋아하지만 다 보기엔 너무 깁니다. 재미있는 부분은 유튜브에 올라오지만 유튜브에 올라오지 않은 재밌는 부분들을 찾고 싶었습니다. 긴 방송 다시보기 중 재미있는 부분을 찾아주는 웹 서비스가 있으면 좋겠다고 생각했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 재미있는 부분은 채팅 속도가 빠르다는 단순한 생각에서 Twitch Chat Analysis 기획을 시작하게 됐습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 트위치에서 개발자용 API를 제공해준 덕분에 가능한 프로젝트입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-기획&quot;&gt;2. 기획&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 처음 기획은 다음과 같은 세 단계로 나누었습니다.
    &lt;ol&gt;
      &lt;li&gt;채팅 속도를 기반으로한 다시보기 서비스 개발&lt;/li&gt;
      &lt;li&gt;채팅 내용을 기반으로한 다시보기 서비스 개발&lt;/li&gt;
      &lt;li&gt;AWS에 올려 실제 서비스 하기&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt; 그리고 1번 기획은 아래와 같은 순서로 세부 기획을 했습니다.
    &lt;ol&gt;
      &lt;li&gt;유저 시나리오 기획&lt;/li&gt;
      &lt;li&gt;웹 디자인&lt;/li&gt;
      &lt;li&gt;API 서버 구현&lt;/li&gt;
      &lt;li&gt;클라이언트 구현&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-유저-시나리오-기획&quot;&gt;3. 유저 시나리오 기획&lt;/h2&gt;

&lt;hr /&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/flow.png&quot; alt=&quot;flow.png&quot; /&gt;&lt;small&gt;유저 시나리오&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 웹의 필수 기능을 덜어내고 서비스의 핵심 기능만 먼저 구현하기 위해 굉장히 간결하게 구성했습니다.&lt;/li&gt;
  &lt;li&gt; 핵심 서비스들을 만든 뒤에 부가 서비스들을 추가할 생각합니다.&lt;del&gt;(안 할 것 같지만..)&lt;/del&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-웹-디자인&quot;&gt;4. 웹 디자인&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 조경학과에서 익혀온 디자인 &lt;del&gt;베끼기&lt;/del&gt; 능력으로 웹 디자인 했습니다.&lt;/li&gt;
  &lt;li&gt; 핵심 기능만 구현해보기 때문에 6개의 적은 페이지만 나왔습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Main.png&quot; alt=&quot;Main.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;메인 페이지, 스트리머 id나 비디오 id를 넣는다.&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Streamer Not Found.png&quot; alt=&quot;Streamer Not Found.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;스트리머 id를 검색했지만 트위치에 없는 id일때&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Video Not Found.png&quot; alt=&quot;Video Not Found.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;비디오 id를 검색했지만 트위치에 없는 id일때&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Not Analyzed Video.png&quot; alt=&quot;Not Analyzed Video.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;비디오 id를 검색했고, 트위치에 있는 비디오지만 분석 되지 않은 비디오일 때&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Steamer.png&quot; alt=&quot;Steamer.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;스트리머를 검색했을 때 스트리머 정보와 함께 분석된 비디오들이 나온다.&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/Video.png&quot; alt=&quot;Video.png&quot; class=&quot;border-gray&quot; /&gt;&lt;small&gt;비디오를 검색하거나, 스트리머 정보창에서 분석된 비디오를 눌렀을때.&lt;/small&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-기술-선정&quot;&gt;5. 기술 선정&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;51-api서버-클라이언트-기술-선정&quot;&gt;5.1. API서버, 클라이언트 기술 선정&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 프로그래밍을 처음 배우기 시작하던 때(2019년 2~8월)엔 클론 코딩을 많이 했습니다. 프로그래밍엔 정말 다양한 기술들이 있었고 기술들을 가볍게 알아보는데엔 클론 코딩만한 것이 없다고 생각했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; MERN 스택에 관한 &lt;a href=&quot;https://www.youtube.com/watch?v=0oziV0FLhXc&amp;amp;list=PLBeQxJQNprbgrNfcntLO8N2Y-dzlMZXZe&quot;&gt;클론코딩 강의&lt;/a&gt;를 듣고난 후, API 서버와 클라이언트 서버를 나누는 설계 방식, 웹 클라이언트에서 React를 사용해 보고 싶다는 욕구가 있었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; API서버와 클라이언트를 나눠 놓으면 웹, 모바일을 같이 쓰는 서비스를 구축할 때 효과적일 것 같았고, 무엇보다 작업하기에 굉장히 깔끔했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; TCA를 계획 할 때 MERN 스택 강의가 생각났고 Node JS, Express 를 이용해 API 서버를 만들어야 겠다고 생각했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 클라이언트 단은 Facebook의 Create React App을 활용하면 React를 손 쉽게 구축할 수 있어 Node JS와 React를 사용했습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;52-db-선정&quot;&gt;5.2. DB 선정&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; MERN 스택에서 MongoDB는 매우 낯설었습니다. 반면, 학원에서 사용하고 있던 Oracle에는 점점 자신이 붙어가는 상황이었습니다. Node JS에 Oracle을 붙이는게 어렵지 않다는 것을 확인하고 Oracle을 사용하려 했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt; 하지만, API서버를 구축하던 중 문제가 생겼습니다. TCA에선 하나의 인터넷 방송 다시보기 안의 모든 채팅을 저장해야 하는데, 채팅의 수가 적게는 3~4만개, 많게는 10만개 이상 됐습니다. Oracle을 이용하니 다음과 같은 문제가 생겼습니다.
    &lt;ul&gt;
      &lt;li&gt; 하나의 채팅에  하나의 트랜잭션을 사용하면 속도가 너무 저하됐습니다.&lt;/li&gt;
      &lt;li&gt; 한 비디오의 모든 채팅을 하나의 트랜잭션으로 처리하려니, 한 트랜잭션에서 처리할 수 있는 쿼리문에 한계가 있었습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 트랜잭션을 튜닝하는 방법에 대한 팁을 얻기 위해 당시 다니던 개발 학원 강사님께 문의했습니다. 강사님께선 이 상황에 오라클을 튜닝하려면 지금 제 수준을 한참 벗어나는것 같으니 NoSQL 종류를 사용해보면 어떻겠냐고 제안했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt; 신뢰하던 강사님이었기 때문에 강사님의 조언을 받아들여 MongoDB로 전환했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;6-db-스키마&quot;&gt;6. DB 스키마&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; MongoDB 같은 NoSQL은 DB에 스킴이 없다고 들었지만, Mongoose와 같이 MongoDB를 지원하는 라이브러리들은 스킴 사용을 권장하는 것 같았습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt; 스트리머 정보에 대한 DB 스킴입니다.
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;streamerSchema&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mongoose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;displayName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;logo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;followers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;totalViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;videoThumbnails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;videoThumbnailSchema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; 스트리머의 분석된 비디오 썸네일 스킴입니다.
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;videoThumbnailSchema&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mongoose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;videoId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;thumbnail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; 비디오에 대한 DB스킴 입니다.
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;videoSchema&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mongoose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;videoId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;created_at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;commentSchema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; 채팅에 대한 스킴입니다.
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;commentSchema&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mongoose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;content_offset_seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;7-api-서버&quot;&gt;7. API 서버&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;71-api서버에서-사용하는-트위치-api&quot;&gt;7.1. API서버에서 사용하는 트위치 API&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 다음은 API 서버에서 사용하는 트위치 API입니다. 트위치 API는 &lt;a href=&quot;https://dev.twitch.tv/docs/v5&quot;&gt;공식 레퍼런스&lt;/a&gt;를 참고했습니다.
    &lt;ul&gt;
      &lt;li&gt; GET https://api.twitch.tv/kraken/users?login=:userName
        &lt;ul&gt;
          &lt;li&gt; 스트리머의 닉네임을 파라미터로 넣어 호출하면 스트리머에 대한 정보를 돌려줍니다.&lt;/li&gt;
          &lt;li&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;https://api.twitch.tv/kraken/users?login=woowakgood&lt;/code&gt;를 호출 했을 때 결과입니다.
            &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_total&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;users&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;display_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;우왁굳&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;49045679&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;woowakgood&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;안녕하세요 2008년부터 종합게임방송을 하고 있는 우왁굳이라고 합니다.이번에 트위치에서 본격적으로 방송을 시작하게 되었습니다. 많은 사랑 부탁드려요~ 앙 트위띠&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2013-09-15T15:22:27.073646Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-21T08:35:10.922798Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;logo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://static-cdn.jtvnw.net/jtv_user_pictures/ebc60c08-721b-4572-8f51-8be7136a0c96-profile_image-300x300.png&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; GET https://api.twitch.tv/kraken/channels/:userId
        &lt;ul&gt;
          &lt;li&gt; 스트리머 id를 파라미터로 넣어 호출하면 스트리머의 방송채널에 관한 정보를 가져옵니다. (닉네임과 id는 다르게 사용됩니다.)&lt;/li&gt;
          &lt;li&gt; 위에서 얻은 우왁굳의 id로 &lt;code class=&quot;highlighter-rouge&quot;&gt;https://api.twitch.tv/kraken/channels/49045679&lt;/code&gt;를 호출한 결과입니다.
            &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mature&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;오늘 그냥 기타 연습하면서 쉬는 날&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_software&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;unknown_rtmp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;display_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;우왁굳&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;game&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Just Chatting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;49045679&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;woowakgood&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2013-09-15T15:22:27Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-21T09:04:29Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;partner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;logo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://static-cdn.jtvnw.net/jtv_user_pictures/ebc60c08-721b-4572-8f51-8be7136a0c96-profile_image-300x300.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;video_banner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://static-cdn.jtvnw.net/jtv_user_pictures/06ce7816-98b1-44cb-98d0-5e040f7d82d9-channel_offline_image-1920x1080.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;profile_banner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://static-cdn.jtvnw.net/jtv_user_pictures/woowakgood-profile_banner-3be507d39ee04799-480.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;profile_banner_background_color&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://www.twitch.tv/woowakgood&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;views&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39735518&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;followers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;529455&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;partner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;안녕하세요 2008년부터 종합게임방송을 하고 있는 우왁굳이라고 합니다.이번에 트위치에서 본격적으로 방송을 시작하게 되었습니다. 많은 사랑 부탁드려요~ 앙 트위띠&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;private_video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;privacy_options_enabled&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; GET https://api.twitch.tv/kraken/videos/:videoId
        &lt;ul&gt;
          &lt;li&gt; 비디오 id를 넣어 호출하면 해당 비디오에 관한 정보를 가져옵니다.&lt;/li&gt;
          &lt;li&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;https://api.twitch.tv/kraken/videos/595442451/&lt;/code&gt; 를 호출한 결과중 일부입니다. (포스팅에 다 넣기에 너무 길어 잘랐습니다.)
            &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;출발&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;description_html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcast_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;37611880656&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcast_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;archive&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;recorded&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;tag_list&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;views&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10169&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://www.twitch.tv/videos/595442451&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;viewable&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;public&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;viewable_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;published_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;delete_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-06-17T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;v595442451&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;recorded_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;game&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Just Chatting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;length&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21636&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    		&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;restriction&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;channel&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mature&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;오늘 그냥 기타 연습하면서 쉬는 날&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_software&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;unknown_rtmp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;display_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;우왁굳&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        	&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    		&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;views&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39735518&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;followers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;529455&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;broadcaster_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;partner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;안녕하세요 2008년부터 종합게임방송을 하고 있는 우왁굳이라고 합니다.이번에 트위치에서 본격적으로 방송을 시작하게 되었습니다. 많은 사랑 부탁드려요~ 앙 트위띠&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;private_video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;privacy_options_enabled&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;increment_view_count_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://countess.twitch.tv/ping.gif?u=%7B%22id%22%3A%22595442451%22%2C%22type%22%3A%22vod%22%7D&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; GET https://api.twitch.tv/kraken/videos/:videoId/comments?:param
        &lt;ul&gt;
          &lt;li&gt; 비디오의 채팅 일부를 가져옵니다.&lt;/li&gt;
          &lt;li&gt; 파리미터엔 &lt;code class=&quot;highlighter-rouge&quot;&gt;cursor&lt;/code&gt;와 &lt;code class=&quot;highlighter-rouge&quot;&gt;content_offset_seconds&lt;/code&gt;가 올 수 있습니다. &lt;code class=&quot;highlighter-rouge&quot;&gt;cursor&lt;/code&gt;는 채팅 api를 호출하면 돌려주는 다음 채팅의 커서입니다.(한 번의 채팅 요청에 60개 정도의 채팅만 옵니다.) &lt;code class=&quot;highlighter-rouge&quot;&gt;content_offset_seconds&lt;/code&gt;는 비디오의 재생 위치(초단위)입니다.&lt;/li&gt;
          &lt;li&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;https://api.twitch.tv/kraken/videos/595442451/comments&lt;/code&gt; 를 호출한 결과는 너무 길어 &lt;a href=&quot;/public/document/tca_comment_api_call.txt&quot;&gt;링크&lt;/a&gt;를 남깁니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;72-api-서버의-api-목록&quot;&gt;7.2. API 서버의 API 목록&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트에서 호출할 수 있는 API는 다음과 같습니다.
    &lt;ul&gt;
      &lt;li&gt;GET /streamer/:name
        &lt;ul&gt;
          &lt;li&gt;DB에 저장된 {name}인 스트리머의 정보를 불러옵니다.&lt;/li&gt;
          &lt;li&gt;트위치에 없는 스트리머를 조회하면 에러 코드(StreamerNotFound)를 돌려줍니다.&lt;/li&gt;
          &lt;li&gt;트위치엔 있지만 DB에 없다면 DB에 저장하고 불러옵니다.&lt;/li&gt;
        &lt;/ul&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/api_call_test1.png&quot; alt=&quot;api_call_test1.png&quot; /&gt;&lt;small&gt;우왁굳의 스트리머 정보를 불러왔다!&lt;/small&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;GET /video/search/:videoId
        &lt;ul&gt;
          &lt;li&gt;DB에 저장된 {videoId}인 비디오의 정보(댓글 속도 등)를 불러옵니다.&lt;/li&gt;
          &lt;li&gt;트위치에 없는 video를 부르면 에러 코드(VideoNotFound)를 돌려줍니다.&lt;/li&gt;
          &lt;li&gt;트위치엔 있지만 DB에 없다면 에러 코드(NotAnaylzedVideo)를 돌려줍니다.&lt;/li&gt;
        &lt;/ul&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/api_call_test3.png&quot; alt=&quot;api_call_test3.png&quot; /&gt;&lt;small&gt;트위치엔 있지만 DB에 없는 경우&lt;/small&gt;&lt;/p&gt;

        &lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/api_call_test6.png&quot; alt=&quot;api_call_test6.png&quot; /&gt;&lt;small&gt;DB에 있는 비디오 조회시&lt;/small&gt;&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;DB에 있는 비디오를 호출하면 아래와 같은 json을 돌려줍니다.
            &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FoundVideo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  	&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;49045679&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;woowakgood&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;videoId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;v595442451&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;출발&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;game&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Just Chatting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;length&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21636&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;comments&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1435&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;816&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                      &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                      &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;671&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;726&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;782&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; GET /video/search/:videoId/:keyword
        &lt;ul&gt;
          &lt;li&gt; {videoId}인 비디오에서 {keyword}가 들어가는 채팅에 대한 정보를 불러옵니다.&lt;/li&gt;
          &lt;li&gt; 해당 키워드가 들어간 채팅의 속도를 검색하기 위해 사용됩니다.&lt;/li&gt;
          &lt;li&gt; ‘ㅋㅋㅋ’,  ‘ㅗㅜㅑ’, ‘형신’ 같은 인터넷 밈들을 검색해 ‘ㅗㅜㅑ’ 구간, ‘형신’ 구간 등을 구하기 위해 만들어 두었습니다.&lt;/li&gt;
          &lt;li&gt; 다음은 위와 같은 비디오에서 ‘ㅋㅋㅋ’를 검색한 결과입니다. ‘ㅋㅋㅋ’가 들어간 채팅만 카운팅해 구간별 카운팅이 줄어들었습니다.
            &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SearchKeyword&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;userId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;49045679&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;woowakgood&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;videoId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;v595442451&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;출발&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2020-04-18T09:46:20Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;game&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Just Chatting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;length&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21636&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;comments&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;78&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;69&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;221&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            			&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            			&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;165&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;164&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
			&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;counting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;271&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
		&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
	&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt; GET /video/save/:videoId&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt; {videoId}인 비디오를 DB에 저장하도록 합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;73-난관---채팅-받아오기&quot;&gt;7.3. 난관 - 채팅 받아오기&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; API 서버 개발에 우여곡절이 있었지만 대부분 금방 해결되었습니다. 하지만, 해결 하는 데 꽤 오랜 시간이 걸린 이슈가 있었습니다. 모든 채팅을 받아오는 속도를 줄이는 것입니다.&lt;/li&gt;
  &lt;li&gt; 위에서 언급한 채팅을 받아오는 트위치 API는 채팅 전체를 주지 않습니다. 한 번 요청에 60개 정도의 채팅과 다음 채팅 60개의 cursor 파라미터를 넘겨줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/comment_api.png&quot; alt=&quot;comment_api.png&quot; /&gt;&lt;small&gt;채팅 요청을 보내면 commets와 _prev, _next 커서를 돌려준다.&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 처음엔 60개의 채팅을 받고, 다음 60개를 받아오고… 동기식으로 채팅을 가져왔습니다.
    &lt;ul&gt;
      &lt;li&gt; 채팅이 60,000개 일때, 1,000번의 API 호출이 필요했고 한 번 API를 주고 받는 시간을 짧게 잡아 0.3초라고 봐도 총 300초(==5분)가 걸렸습니다. 유저가 DB에 없는 비디오를 검색 했을 때, 채팅을 새로 받아와야 하는데, 받아오는 5분을 유저가 기다릴리 만무합니다.&lt;/li&gt;
      &lt;li&gt; 물론, 이 경우는 채팅이 60,000개로 비교적 적은 편이고 API를 주고 받는 시간도  긍정적으로 계산한 것입니다. (방송 시간이 길거나, 평균 채팅속도가 빠른 방송의 경우 채팅 100,000개는 가볍게 넘어갑니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/synchronous_call.png&quot; alt=&quot;synchronous_call.png&quot; width=&quot;70%&quot; height=&quot;70%&quot; class=&quot;center&quot; /&gt;&lt;small&gt;동기식 채팅 호출&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 트위치에 다시보기가 올라오는지 모니터링 하면서 유저들이 TCA에서 검색하기 전에 미리 채팅을 받아오는 방법을 제외하면 답이 없어보였습니다.
    &lt;ul&gt;
      &lt;li&gt; 하지만 이 방법도 문제가 있습니다. 대상으로 할 스트리머를 어디까지 할 지 정하는 것이었습니다. 트위치의 모든 스트리머를 대상으로 한다면, 저의 빈약한 PC로는 버틸 수 없습니다.&lt;/li&gt;
      &lt;li&gt; 유명 스트리머만 하자니 너무 제한적인 서비스가 될 것 같았습니다.&lt;/li&gt;
      &lt;li&gt; 적당히 한국 스트리머만 제한하고, 유저들이 TCA에서 검색하기 전에 트위치에서 미리 채팅을 가져오는 게 최선인 것 같았습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;74-돌파구의-마련---비동기-api-호출&quot;&gt;7.4. 돌파구의 마련 - 비동기 API 호출&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 돌파구는 우연히 찾아왔습니다. 웹 브라우저 콘솔창에서 자바스크립트를 가지고 놀던 중 다음과 같은 현상을 발견합니다.
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;response = callAPI();
console.log(response); --&amp;gt; undefined
	:
	:
	:
console.log(response); --&amp;gt; 'something'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt; response에 API 호출 결과를 담아 바로 console.log를 찍었을 땐 분명 아무것도 안 나왔는데, 나중에 다시 console.log를 찍으니 결과가 나왔습니다.&lt;/li&gt;
  &lt;li&gt; 프로그래밍을 시작한지 얼마 되지 않았고 Java를 주로 다루던 저는 비동기에 대해 잘 모르고 있었습니다. 위 현상을 발견하고 구글링을 해본 결과 자바스크립트의 비동기에 대해 알게 되었고 채팅을 받아오는 속도를 줄이는 방법이 번뜩하고 떠올랐습니다.&lt;/li&gt;
  &lt;li&gt; 방법은 &lt;del&gt;지금보면&lt;/del&gt; 간단합니다.
    &lt;ul&gt;
      &lt;li&gt; &lt;strong&gt;다시보기를 여러 개의 구간으로 쪼갭니다.&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt; 한 구간의 API를 보내고 &lt;strong&gt;기다리는 동안 다른 구간의 API를 보냅니다.&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt; 한 구간에선 API응답을 받으면 다음 cursor를 담아 다시 API를 보냅니다.&lt;/li&gt;
      &lt;li&gt; 즉, &lt;strong&gt;한 구간 안에선 동기적으로, 구간끼린 비동기적으로 처리하는 것입니다.&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/asynchronous_call.png&quot; alt=&quot;asynchronous_call.png&quot; /&gt;&lt;small&gt;한 구간안에선 동기적으로, 각 구간은 비동기적으로!&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 위 방법을 구현하기 위해 async, await, Promise와 찐한 일주일을 보냈습니다. &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/async_function&quot;&gt;MDN의 Document&lt;/a&gt;를 많이 참고했습니다.
    &lt;ul&gt;
      &lt;li&gt; 나눈 구간에서 최종적으로 하나의 Promise를 리턴 받고, 여러 구간의 Promise들을 배열에 담습니다.
        &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bundlePromiseArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
    
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;divideSec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;startSec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;divideSec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// getCommentsBundle(videoId, second) =&amp;gt; {return 한 구간의 Promise}&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;bundlePromiseArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getCommentsBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;videoId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;startSec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt; 배열 안의 모든 Promise들이 Fulfilled 되면 다음 작업을 수행 했습니다.
        &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bundleArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bundlePromiseArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~~~&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 비동기식으로 채팅을 받아오니 5분 걸리던 채팅 저장이 10초 밑으로 떨어졌습니다. 20~30분 걸리던 채팅이 많은 다시보기도 30초 전후하여 받아왔습니다. 😭&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;8-클라이언트&quot;&gt;8. 클라이언트&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; React를 이용해 클라이언트를 구현 했습니다.&lt;/li&gt;
  &lt;li&gt; 디자인 자체가 단순했기 때문에 디자인한대로 퍼블리싱 하는 것은 어렵지 않았고, 사실 클라이언트단은 큰 관심사가 아니었기 때문에 가벼운 마음으로 시작했습니다.&lt;/li&gt;
  &lt;li&gt; 메인페이지와 에러페이지들을 띄우는 데 성공했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/main_real.png&quot; alt=&quot;main_real.png&quot; /&gt;&lt;small&gt;메인 페이지&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/nostreamer_real.png&quot; alt=&quot;nostreamer_real.png&quot; /&gt;&lt;small&gt;트위치에 없는 스트리머를 찾았을 때&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/novideo_real.png&quot; alt=&quot;novideo_real.png&quot; /&gt;&lt;small&gt;트위치에 없는 비디오를 찾았을 때&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/not_analyzed_video_real.png&quot; alt=&quot;not_analyzed_video_real.png&quot; /&gt;&lt;small&gt;트위치에 있지만 DB에 없는 비디오를 요청 했을때. 채팅을 모두 받아온 후에 자동으로 분석 비디오 화면으로 넘어갑니다. 화면에 few minute을 few seconds로 바꿔도 될 것 같습니다.&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 스트리머 페이지를 띄우는데도 성공했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/streamer_found_real.png&quot; alt=&quot;streamer_found_real.png&quot; /&gt;&lt;small&gt;스트리머 정보 페이지. 스트리머의 정보와 분석된 비디오들이 보여집니다.&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 이제 가장 핵심인 비디오 페이지를 만들어야 했습니다. 비디오 페이지에서 chart js와 열심히 싸우고 있던 와중에… 취업을 해버려서…&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Twitch_Chat_Analysis/found_video_real.png&quot; alt=&quot;found_video_real.png&quot; /&gt;&lt;small&gt;분석 비디오 페이지. chart js와 씨름하다 취업이 되버렸습니다. 그래프를 누르면 해당 지점으로 비디오가 넘어가야 되는데 그 부분을 다루다..&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 여기까지가 2019년 8월에 완성한 Twitch Chat Analysis 입니다.&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>기존 Sagyo 프로젝트 알아보기.</title>
   <link href="http://localhost:4000/posts/projects/sagyo_reboot/Sagyo1/"/>
   <updated>2020-04-05T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/projects/sagyo_reboot/Sagyo1</id>
   <content type="html">
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#1-개요-및-사용기술&quot;&gt;개요 및 사용기술&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-기획-및-기능&quot;&gt;기획 및 기능&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-db-설계&quot;&gt;DB 설계&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-웹-디자인&quot;&gt;웹 디자인&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-역할-분담&quot;&gt;역할 분담&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-개발1---퍼블리싱&quot;&gt;개발1 - 퍼블리싱&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-개발2---샘플-데이터-생성&quot;&gt;개발2 - 샘플 데이터 생성&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8-개발3---모임-추천기능필터링-배점&quot;&gt;개발3 - 모임 추천기능&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#9-개발4---메인페이지&quot;&gt;개발4 - 메인페이지&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#10-개발5---모임-조회&quot;&gt;개발5 - 모임 조회&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;1-개요-및-사용기술&quot;&gt;1. 개요 및 사용기술&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; Sagyo 프로젝트는 2019년 5월 29일 ~ 2019년 7월 19일에 진행된 6인 프로젝트입니다.
    &lt;ul&gt;
      &lt;li&gt;기획 - 4주&lt;/li&gt;
      &lt;li&gt;DB설계 및 개발 - 1주&lt;/li&gt;
      &lt;li&gt;웹 개발 - 3주&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/plan.png&quot; alt=&quot;plan.png&quot; /&gt;&lt;small&gt;프로젝트 일정표&lt;/small&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt; 기존 소셜다이닝 웹 서비스들이 좋은 취지에도 불구하고 크게 성공하지 못한건 유저간 신뢰도 확보의 부족이라고 진단했습니다. Sagyo는 기존 소셜다이닝 웹 서비스들의 기능을 구현하면서, 유저들 간의 신뢰 확보 수단을 강화한 웹 어플리케이션입니다.&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt; 위와 같은 거창한 포부를 갖고 시작했으나, 기존 소셜다이닝 웹 서비스들의 기능을 구현하는 데에도 급급했던 프로젝트입니다.&lt;/li&gt;
  &lt;li&gt; 프로젝트를 지도한 강사님의 지도 아래 &lt;del&gt;당시엔 정말 귀찮았던&lt;/del&gt; 문서 작업을 철저히 했뒀는데, 지금 다시 보니 남기길 잘 했다는 생각이 듭니다. (강사님 감사합니다. 😥)&lt;/li&gt;
  &lt;li&gt; 사용 기술은 전형적인 국비교육과정 코스인 Spring, JSP, Oracle 스택입니다.
    &lt;ul&gt;
      &lt;li&gt;HTML / CSS / JS&lt;/li&gt;
      &lt;li&gt;Java / Spring&lt;/li&gt;
      &lt;li&gt;Oracle / Mybatis&lt;/li&gt;
      &lt;li&gt;Apache / Tomcat&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-기획-및-기능&quot;&gt;2. 기획 및 기능&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 상세 요구분석서는 &lt;a href=&quot;/public/document/sagyo_require.pdf&quot;&gt;여기&lt;/a&gt;를 참조해주세요. 아래는 간략히 기술하겠습니다.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 기능별 분류&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;분야&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;회원관련&lt;/td&gt;
          &lt;td&gt;회원 가입·탈퇴, 회원정보 조회·수정, 로그인, 로그아웃, 쪽지, 팔로우 등&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;검색 및 필터 기능(모임 조회)&lt;/td&gt;
          &lt;td&gt;카테고리 검색, 통합검색, 검색 필터링 등&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;모임 개설 및 참가 관련&lt;/td&gt;
          &lt;td&gt;모임개설, 참여신청·수락·거절, 댓글 등&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;사용자간 평가&lt;/td&gt;
          &lt;td&gt;평점, 뱃지, 코멘트 등&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;신고 및 관리 기능&lt;/td&gt;
          &lt;td&gt;게시글 및 댓글 신고, 공지사항, FAQ, 1:1문의 등&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt; 위 기능들을 바탕으로 &lt;a href=&quot;/public/document/sagyo_storyboard.pdf&quot;&gt;스토리보드&lt;/a&gt;를 완성했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-db-설계&quot;&gt;3. DB 설계&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 참여 인원 모두 웹 서비스 전반을 배우는 중이었기 때문에 DB설계는 모두 같이 진행했습니다.&lt;/li&gt;
  &lt;li&gt; 프로젝트를 이끌어 주신 강사님이 DB에 일가견이 있다는 소문이 있었는데, DB 만큼은 정말 여느 전공자들 못지 않게 견고히 만든 것 같습니다.&lt;/li&gt;
  &lt;li&gt; 설계 결과 총 41개의 테이블이 나왔습니다.&lt;/li&gt;
  &lt;li&gt; DB에 대한 명세서는 &lt;a href=&quot;/public/document/sagyo_DBspecification.pdf&quot;&gt;여기&lt;/a&gt;, ER다이어그램은 &lt;a href=&quot;/public/document/sagyo_ERdiagram.pdf&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-웹-디자인&quot;&gt;4. 웹 디자인&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 개발자들만의 웹 프로젝트가 그렇듯이 저희 팀도 웹 디자인에 일가견 있는 사람은 없었습니다.&lt;/li&gt;
  &lt;li&gt; 제 전공인 조경학에서 익혀온 디자인 &lt;del&gt;베끼기&lt;/del&gt; 실력으로 제가 진행하게 됐습니다.&lt;/li&gt;
  &lt;li&gt; 제작툴은 Adobe XD를 사용했고, 처음 해본 웹 디자인이었지만 생각보다 잘 나온것 같아 흡족했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/main.png&quot; alt=&quot;main.png&quot; /&gt;&lt;small&gt;메인 페이지 - 주황색 색감이 소셜다이닝에 잘 맞는것 같았습니다.&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/postlist.png&quot; alt=&quot;postlist.png&quot; /&gt;&lt;small&gt;글 목록 조회 및 필터링 &lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/post.png&quot; alt=&quot;post.png&quot; /&gt;&lt;small&gt;소셜다이닝 모집글&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/badge.png&quot; alt=&quot;badge.png&quot; /&gt;&lt;small&gt;팀원 K가 제작해준 뱃지들 - 처음엔 당황스러웠지만 보다 보니 정들었다.&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/follow.png&quot; alt=&quot;follow.png&quot; /&gt;&lt;small&gt;팔로우/팔로워 목록&lt;/small&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-역할-분담&quot;&gt;5. 역할 분담&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 6명이 역할을 나누었고 제가 맡은 것은 다음과 같습니다.
    &lt;ol&gt;
      &lt;li&gt;일정 관리 및 팀원 간 개발 범위 조율, 개발 지원 - 팀장의 역할&lt;/li&gt;
      &lt;li&gt;퍼블리싱 - 원래 계획은 각자 하는 것이었지만 일정상 제가 모두 처리하게 됐습니다.&lt;/li&gt;
      &lt;li&gt;샘플 데이터 생성 - PL/SQL, java로 샘플 데이터를 생성했습니다.&lt;/li&gt;
      &lt;li&gt;모임 추천기능 - 모임 목록 검색 방식(검색, 카테고리, 필터링)에 따른 모임 추천&lt;/li&gt;
      &lt;li&gt;메인페이지&lt;/li&gt;
      &lt;li&gt;모임 목록 페이지&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt; 팀장으로 참여해 ‘1. 개발 범위 조율 및 지원’에 할애한 시간이 커, 실질적인 개발 양은 많지 않았습니다. 퍼블리싱이 끝난 후 본격적인 개발 기간의 절반은 돌아다니며 기능 구현 방법에 대한 질문을 받고, 에러를 잡아주는데 사용했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;6-개발1---퍼블리싱&quot;&gt;6. 개발1 - 퍼블리싱&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;61-처음-계획&quot;&gt;6.1. 처음 계획&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 프로젝트를 진행하는 6명 모두 웹을 처음 배우는 것이라 원래 계획은 ‘모두 HTML, CSS 를 익혀야 하니, 각자 맡은 부분의 퍼블리싱은 각자 하자’였습니다.&lt;/li&gt;
  &lt;li&gt; 각자 퍼블리싱을 맡기고 한 주간 지켜봤습니다.
    &lt;ul&gt;
      &lt;li&gt; 우선 진행률이 예상의 1/4도 되지 않았습니다.&lt;/li&gt;
      &lt;li&gt; 같은 페이지인데 서로 다른 결과물이 나왔습니다.&lt;/li&gt;
      &lt;li&gt; ‘조금 다른거니 나중에 내가 수합하면서 맞춰보자’ 생각하며 소스를 열어봤더니 div 가운데 정렬에 그렇게 많은 방법이 있는줄 몰랐습니다. 😱 6명의 HTML, CSS를 합치는 것보다 처음부터 만드는게 더 빠를 것 같았습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;62-특단의-조치&quot;&gt;6.2. 특단의 조치&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt; 퍼블리싱을 다음주까지 넘기면 프로젝트 전체가 위태로운 상황이었습니다. 특단의 조치를 내려야 했습니다.&lt;/li&gt;
  &lt;li&gt; ‘내가 주말에 다 해올테니, 월요일부터 진행할 Spring MVC 패턴 개발 연습을 더 해왔으면 좋겠다.’ 라고 일단 선언 했습니다. 저도 HTML, CSS를 처음 배운거라 자신 없었지만, 이 속도라면 퍼블리싱하다가 프로젝트가 끝날 것 같았습니다.&lt;/li&gt;
  &lt;li&gt; 금요일 밤부터 시작해 토요일, 일요일, 월요일 아침까지 하루종일 HTML, CSS와 씨름한 결과 총 27개의 페이지를 모두 끝낼 수 있었습니다.
    &lt;ul&gt;
      &lt;li&gt; 아쉬운 점이 있다면, 반응형 웹을 완벽히 구현해 내진 못했습니다. 폰트들도 px단위로 맞춰져 있고 꽤 많은 div들이 px 단위로 맞춰져 있었습니다.&lt;/li&gt;
      &lt;li&gt; 또, 당시엔 HTML, CSS 작업만 해서 주었는데 모달 팝업, 아코디언 목록 같이 JS가 많이 들어가는 페이지를 맡은 팀원들은 그 부분을 처리하느라 시간이 많이 지체되었습니다.
        &lt;ul&gt;
          &lt;li&gt; 이 부분은 팀원들이 각자 다른 버전의 JS 라이브러리를 긁어와 나중에 심각한 충돌이 발생했던 지점이기도 합니다. 이럴줄 알았더라면 JS를 이용한 팝업 퍼블리싱도 마무리 했어야 했는데 아쉽습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt; &lt;a href=&quot;https://d2.naver.com/helloworld/8540176&quot;&gt;https://d2.naver.com/helloworld/8540176&lt;/a&gt;를 정말 많이 참고했습니다. 아마 이 포스트가 없었다면 퍼블리싱 완성하지 못했을 것입니다. 엄청난 감사를… ㅜㅜ&lt;/li&gt;
      &lt;li&gt; 그래도 디자인 한대로 퍼블리싱이 잘 나와 만족스러웠습니다. :grinning:&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/register.png&quot; alt=&quot;register.png&quot; /&gt;&lt;small&gt;회원가입 디자인(좌), 퍼블리싱(우)&lt;/small&gt;&lt;/p&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/faq.png&quot; alt=&quot;faq.png&quot; /&gt;&lt;small&gt;자주묻는 질문 디자인(좌), 퍼블리싱(우)&lt;/small&gt;&lt;/p&gt;

&lt;h2 id=&quot;7-개발2---샘플-데이터-생성&quot;&gt;7. 개발2 - 샘플 데이터 생성&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 학원에서 각 과목을 배울때 마다 미니 프로젝트를 진행했습니다. 그때 마다 제가 다른 팀들과 다르게 해오던게 있습니다. 바로 샘플 데이터를 자동 생성하는 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 물론, 테스트 샘플 데이터를 만드는 영역도 파고들어가면 끝도 없어서 제가한 방법이 초라해지지만, 그래도 다른 팀이 인력을 갈아넣어 2~300개 만든 데이터로 테스트 할 때 10,000개 이상의 데이터로 테스트 한 걸 굉장히 뿌듯하게 여기고 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 샘플 데이터 생성은 PL/SQL과 java를 이용했습니다. 다음은 샘플 생성 구문 중 모임 후기 샘플 데이터를 생성하는 프로시저입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-plsql&quot;&gt;create or replace PROCEDURE INSERT_REVIEW_SUB(V_REVIEWID VARCHAR2, V_BADGEPOINTID VARCHAR2, V_CONTETNS VARCHAR2)
IS
    V_TAKEUSERID            USER_ESSENTIAL.USERID%TYPE;
    V_EXPIRATIONREVIEWID    REVIEW.REVIEWID%TYPE;
    V_COUNT                 NUMBER;
BEGIN
    DBMS_OUTPUT.PUT_LINE('프로시저 시작');
    INSERT INTO REVIEW_SUB(ID, REVIEWID, BADGEPOINTID, CONTENTS) 
    VALUES(REVIEW_SUB_SEQ.NEXTVAL, V_REVIEWID, V_BADGEPOINTID, V_CONTETNS);

    SELECT TAKEUSERID INTO V_TAKEUSERID
    FROM REVIEW
    WHERE REVIEWID=V_REVIEWID;

    SELECT COUNT(*) INTO V_COUNT
    FROM REVIEW_SUB RS JOIN REVIEW R ON RS.REVIEWID=R.REVIEWID
    WHERE TAKEUSERID = V_TAKEUSERID
      AND ADD_MONTHS(REVIEWDATE,12)&amp;gt;=SYSDATE
      AND BADGEPOINTID=V_BADGEPOINTID;

    IF V_COUNT&amp;gt;=3
        THEN    SELECT REVIEWID INTO V_EXPIRATIONREVIEWID
                FROM
                (
                SELECT RS.REVIEWID, RS.BADGEPOINTID, R.REVIEWDATE, ROW_NUMBER() OVER(ORDER BY R.REVIEWDATE DESC) AS NUM
                FROM REVIEW_SUB RS JOIN REVIEW R ON RS.REVIEWID=R.REVIEWID
                WHERE TAKEUSERID = V_TAKEUSERID
                  AND ADD_MONTHS(REVIEWDATE,12)&amp;gt;=SYSDATE
                  AND BADGEPOINTID=V_BADGEPOINTID
                )
                WHERE NUM=3;

                DBMS_OUTPUT.PUT_LINE('USER_BADGE_LOG 기록남김');

                INSERT INTO USER_BADGE_LOG(BADGELOGID, USERID, BADGEPOINTID, GETREVIEWID, EXPIRATIONREVIEWID)
                VALUES(ADD_ID('USER_BADGE_LOG','BADGELOGID', 'BL'), V_TAKEUSERID, V_BADGEPOINTID, V_REVIEWID, V_EXPIRATIONREVIEWID); 
    END IF;
     DBMS_OUTPUT.PUT_LINE('프로시저 종료');
END;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;8-개발3---모임-추천기능필터링-배점&quot;&gt;8. 개발3 - 모임 추천기능(필터링, 배점)&lt;/h2&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;81-게시글의-속성&quot;&gt;8.1. 게시글의 속성&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 모임 추천은 크게 필터링 요소, 배점 요소로 이루어집니다. 필터링 요소는 선택사항이며, 필터링 요소로 게시글을 거른 후 배점 요소로 각 사용자 당 게시글들의 배점을 매겨 나열합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 게시글엔 다음과 같은 속성들이 있습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;속성&lt;/th&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;필터링 여부&lt;/th&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;배점 여부&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;동성여부(동성만, 무관)&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;음주여부(O, X)&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;분위기(무관, 진지, 가벼운)&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;만남일&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;관심사 카테고리&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;만남 장소&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;개설자 평점(0.0~5.0)&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;제목&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;관심사 상세기입&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;본문&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;O&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;82-사용자의-속성&quot;&gt;8.2. 사용자의 속성&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 사용자는 카테고리로 집입해 글 목록을 조회할 수도 있고(카테고리를 기본적으로 필터링), 통합 검색을 통해 글 목록을 조회할 수도 있습니다. 또한, 어느 방향으로 조회해도 결과들을 필터링 할 수 있습니다. 상황에 따라 사용자가 갖는 속성은 다음과 같습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;속성&lt;/th&gt;
          &lt;th&gt;필터링&lt;/th&gt;
          &lt;th&gt;배점&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;관심사 카테고리(필터링)&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;관심사 카테고리(유저 정보)&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;만남일&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;분위기&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;음주여부&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;동성여부&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;만남장소(필터링)&lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;만남장소(유저 정보)&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;검색어&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;O&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;ul&gt;
      &lt;li&gt; 사용자가 &lt;strong&gt;통합 검색으로 글 목록을 조회했을 시&lt;/strong&gt;, 검색어, 사전에 등록해 놓은 유저의 관심사, 만남장소를 토대로 각 게시글들 과의 매칭 점수를 구해 순서대로 보여줍니다. 이후 필터링을 하면 필터링을 먼저 한 뒤 다시 매칭 점수를 계산합니다.&lt;/li&gt;
      &lt;li&gt; &lt;strong&gt;관심사 카테고리로 진입하면&lt;/strong&gt;, 관심사 카테고리로 우선 필터링 한 뒤, 유저의 관심사와 만남장소를 토대로 매칭 점수를 계산을 하여 순서대로 게시글을 보여줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;83-배점-산정-방식&quot;&gt;8.3. 배점 산정 방식&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt; 게시글의 속성과 유저의 속성은 다음과 같이 매칭되어 점수가 계산 됩니다. 총 배점은 팀원 간 회의로 결정되었습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;게시글 속성&lt;/th&gt;
          &lt;th&gt;유저 속성&lt;/th&gt;
          &lt;th&gt;총 배점&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;만남 장소&lt;/td&gt;
          &lt;td&gt;유저 등록 만남장소(구 단위)&lt;/td&gt;
          &lt;td&gt;40&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;개설자 평점&lt;/td&gt;
          &lt;td&gt;-&lt;/td&gt;
          &lt;td&gt;10&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;제목&lt;/td&gt;
          &lt;td&gt;검색어&lt;/td&gt;
          &lt;td&gt;25&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;관심사 상세기입&lt;/td&gt;
          &lt;td&gt;검색어&lt;/td&gt;
          &lt;td&gt;15&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;본문&lt;/td&gt;
          &lt;td&gt;검색어&lt;/td&gt;
          &lt;td&gt;10&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt; 만남 장소 점수 산정&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt; 만남 장소는 게시글의 만남장소와 유저가 등록한 만남장소가 (구 단위로) 일치하면 40점, 인접한 구일 경우 25점, 아니라면 0점 입니다.&lt;/li&gt;
      &lt;li&gt; 점 단위의 거리에 따른 점수산정을 하고 싶었지만, 그 모듈을 개발하는 데만 해도 몇 개월이라는 강사님의 만류에 구 단위에 그쳤습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/location_matching.png&quot; alt=&quot;location_matching.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 개설자 평점 점수 산정
    &lt;ul&gt;
      &lt;li&gt; 개설자 평점은 0~5점으로 이루어져 있습니다. 이를 0~10점으로 환산해 총점에 더합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt; 제목, 관심사 상세기입, 본문 점수 산정
    &lt;ul&gt;
      &lt;li&gt; 세 요소는 모두 검색어를 토대로 점수가 구해집니다.&lt;/li&gt;
      &lt;li&gt; 검색어를 형태소 분석해줍니다. 형태소 분석기는 &lt;a href=&quot;https://iostream.tistory.com/144&quot;&gt;무료 형태소 분석기 비교 글&lt;/a&gt;을 참고해 &lt;a href=&quot;https://www.shineware.co.kr/products/komoran/&quot;&gt;KOMORAN 형태소 분석기&lt;/a&gt;를 사용했습니다.&lt;/li&gt;
      &lt;li&gt; 형태소 분석을 수행해 n개의 의미 있는 명사가 나왔다면, 제목, 관심사 상세기입, 본문에서 n개 중 몇 개의 명사가 포함 됐는지 비율을 각각 구해 25점, 15점, 10점으로 환산합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/morpheme.png&quot; alt=&quot;morpheme.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;9-개발4---메인페이지&quot;&gt;9. 개발4 - 메인페이지&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 메인 페이지엔 활동 지수(기간 내 조회 및 참가 신청 횟수)가 높은 모임, 마감 임박 모임(날짜가 임박했거나 인원수가 임박했거나)이 띄워집니다.&lt;/li&gt;
  &lt;li&gt; 각 모임 추출은 모두 sql 쿼리문으로 수행했습니다.&lt;/li&gt;
  &lt;li&gt; 뱃지(웹 서비스 내 사용자 평가 수단)에 대한 안내가 메인 페이지에 2개씩 랜덤하게 나옵니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p_img&quot;&gt;&lt;img src=&quot;/public/image/Sagyo_Reboot/main_real.png&quot; alt=&quot;main_real.png&quot; /&gt;&lt;small&gt;메인 페이지&lt;/small&gt;&lt;/p&gt;

&lt;h2 id=&quot;10-개발5---모임-조회&quot;&gt;10. 개발5 - 모임 조회&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt; 모임 조회는 크게 통합 검색, 카테고리 검색으로 나뉩니다.&lt;/li&gt;
  &lt;li&gt; 통합 검색, 카테고리 검색 이후에 결과들을 필터링 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt; 통합 검색의 경우 ‘유저 정보와 검색어를 통한 모임 추천(배점 기반)’ -&amp;gt; ‘유저 수동 필터링’ 순으로 이루어집니다.&lt;/li&gt;
  &lt;li&gt; 카테고리 검색의 경우 ‘카테고리 필터링’ -&amp;gt; ‘유저 정보를 기반으로 모임 추천(배점 기반)’ -&amp;gt; ‘유저 수동 필터링’ 순으로 이루어 집니다.&lt;/li&gt;
  &lt;li&gt; 무한 스크롤 방식을 사용하였습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>오라클, sqldeveloper 연결시 SID 관련 (ORA-12505) 에러</title>
   <link href="http://localhost:4000/posts/googling/etc/%EC%98%A4%EB%9D%BC%ED%81%B4-SID-%EA%B4%80%EB%A0%A8%EC%97%90%EB%9F%AC/"/>
   <updated>2020-04-05T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/오라클 SID 관련에러</id>
   <content type="html">
&lt;h2 id=&quot;오라클-설치-및-sqldeveloper-연결시-에러발생&quot;&gt;오라클 설치 및 sqldeveloper 연결시 에러발생!&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;새 컴퓨터에서 프로젝트 셋팅하던 와중에 발생한 에러입니다. 오라클 11g를 설치하고 sqldeveloper를 설치했습니다. sqldeveloper에서 Oracle 연결하려고 테스트를 눌렀는데…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/etc/sqldeveloper_error.png&quot; alt=&quot;sqldeveloper_error.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;위와 같은 에러가 났습니다.&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;상태: 실패 -테스트 실패: Listener refused the connection with the following error:
ORA-12505, TNS:&lt;strong&gt;listener does not currently know of SID given&lt;/strong&gt; in connect descriptor&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Oracle 리스너가 주어진 SID를 모른다는데 SID가 뭔지 찾아봤습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;공식 명세에 따르면 SID란 &lt;em&gt;The &lt;strong&gt;system identifier (SID)&lt;/strong&gt; is a &lt;strong&gt;unique name for an Oracle database instance&lt;/strong&gt; on a specific host.&lt;/em&gt; 입니다. 오라클 DB의 인스턴스 이름!&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;JVM에 여러 자바 인스턴스들이 만들어지고 각자 이름이 있는 것 처럼 오라클도 하나의 오라클 서버에 여러 DB인스턴스가 생성될 수 있습니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그리고 ORA-12505 에러에 대한 &lt;a href=&quot;https://docs.oracle.com/cd/E11882_01/server.112/e17766/net12500.htm&quot;&gt;공식 명세&lt;/a&gt; 역시 찾아봤습니다. 명세중 중요한 내용을 뽑아봤습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;em&gt;리스너가 연결 요청을 받았다.&lt;/em&gt;&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;connect descriptor가 리스너로부터 SID를 받았는데, SID가 &lt;strong&gt;동적으로 등록&lt;/strong&gt;되지 않았거나 &lt;strong&gt;정적으로 configured&lt;/strong&gt;되지 않았다.&lt;/em&gt;&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;리스너가 시작된지 얼마 안돼 DB 인스턴스가 리스너에 등록되지 않았을 수 있다.&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;blockquote&gt;
      &lt;p&gt;&lt;strong&gt;ORA-12505: TNS:listener does not currently know of SID given in connect descriptor&lt;/strong&gt;&lt;/p&gt;

      &lt;p&gt;&lt;strong&gt;Cause:&lt;/strong&gt; The listener received a request to establish a connection to a database or other service. The connect descriptor received by the listener specified a SID for an instance (usually a database instance) that either has not yet dynamically registered with the listener or has not been statically configured for the listener. This may be a temporary condition such as after the listener has started, but before the database instance has registered with the listener.&lt;/p&gt;

      &lt;p&gt;&lt;strong&gt;Action:&lt;/strong&gt;&lt;/p&gt;

      &lt;p&gt;- Wait a moment and try to connect a second time.&lt;/p&gt;

      &lt;p&gt;- Check which instances are currently known by the listener by executing: lsnrctl services &lt;listener name=&quot;&quot;&gt;&lt;/listener&gt;&lt;/p&gt;

      &lt;p&gt;- Check that the SID parameter in the connect descriptor specifies an instance known by the listener.&lt;/p&gt;

      &lt;p&gt;- Check for an event in the listener.log file.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;오라클을 켠지는 꽤 되었으니 리스너가 시작된지 얼마 되지 않아 SID를 못찾는건 아닌것 같아서 일단 현재 SID를 확인 하는 방법을 찾아봤습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;우선 SQL Plus를 켠 다음 sysdba로 접속합니다.&lt;/p&gt;

        &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;사용자명&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;입력&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sysdba&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;비밀번호&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;입력&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    
&lt;span class=&quot;err&quot;&gt;다음에&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;접속됨&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Oracle&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Database&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Enterprise&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Edition&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Release&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Production&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;With&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Partitioning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OLAP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mining&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Real&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Testing&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;options&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;다음 아래의 쿼리로 SID를 알아냅니다.&lt;/p&gt;

        &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SQL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
&lt;span class=&quot;n&quot;&gt;INSTANCE&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;--------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;orcl&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;변경하면 아래와 같이 접속에 성공합니다!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/etc/sqldeveloper_success.png&quot; alt=&quot;sqldeveloper_success.png&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>L사 코딩테스트 후기</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/L-Company-CodingTest/"/>
   <updated>2020-04-05T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/L-Company-CodingTest</id>
   <content type="html">&lt;h2 id=&quot;l사-코딩테스트&quot;&gt;L사 코딩테스트&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 4월 5일 L사 코딩테스트를 봤다. 자세한 사항은 남길 수 없으나 전체적인 총평, 후기를 기록해둔다.&lt;/p&gt;

&lt;p&gt; 처음 6문제 150분인걸 들었을 때 난이도를 대충 그려봤다. 2문제 정도는 10분 내로 바로 풀리는게 나오고, 2문제 정도는 30~45분 정도 걸리는 중간 난이도, 나머지 2문제는 정답을 맞춘다기 보단 최선을 다하는데 목표를 둘만한 문제가 나오지 않을까 생각했다.&lt;/p&gt;

&lt;p&gt; 그런데 문제를 받고 슥 훑어보니 보자마자 코드가 쓱 그려지는 문제가 없어서 당황했다. 6문제 나왔으면 몸풀기 문제가 1~2문제는 있을 법 한데, 어떻게 풀어야 할 지 대강 감은 왔지만 코드까지 바로 그려지는 문제는 없었다.&lt;/p&gt;

&lt;p&gt; 그런데 더 이상한건, ‘야~ 이건 힘들겠는데’하는 문제도 없었다. 6문제면 1~2문제는 한숨부터 나오는 문제들이 있어야 하는데 딱히 그 정도 난이도는 보이지 않았다.&lt;/p&gt;

&lt;p&gt;  풀이를 시작하니 술술 풀리진 않지만 그렇다고 꽉 막힌 것도 아닌, 20~30분에 한 문제씩 풀려나갔다. 결국 6문제 중 5문제는 다 풀었고 (물론 더 좋은 풀이들이 있을것 같았지만), 마지막 한 문제는 완성은 못했어도 꽤 많이 채운걸로 기억한다.&lt;/p&gt;

&lt;p&gt; 결과는 나와봐야 알겠지만 나름 만족스러운 코딩테스트였다.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>HTTP 21 - 로깅과 사용 추적</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C21/"/>
   <updated>2020-04-02T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드21</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 살펴본 거의 모든 서버, 프록시 등은 처리한 HTTP 트랜잭션을 요약해 기록해 놓습니다.&lt;/li&gt;
  &lt;li&gt;이번 장에선 기록을 남기는 기술, 로깅에 대해 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;211-로그란-무엇인가&quot;&gt;21.1. 로그란 무엇인가?&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;로깅을 하는 이유는 크게 두 가지 입니다.
    &lt;ul&gt;
      &lt;li&gt;서버나 프록시가 장애를 일으킬 시 문제와 원인을 찾을 수 있습니다.&lt;/li&gt;
      &lt;li&gt;웹 사이트에 대한 통계를 내기 위해 사용할 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;HTTP메세지를 모조리 로깅할 수도 있지만 이런 방식은 쓸모 없는 데이터까지 저장하게 되어 매우 비효율 적입니다.&lt;/li&gt;
  &lt;li&gt;일반적으로 로깅하는 항목들은 아래와 같습니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP 메서드&lt;/li&gt;
      &lt;li&gt;클라이언트와 서버의 HTTP 버전&lt;/li&gt;
      &lt;li&gt;요청받은 URL&lt;/li&gt;
      &lt;li&gt;응답의 HTTP 상태 코드&lt;/li&gt;
      &lt;li&gt;요청과 응답 메세지의 크기&lt;/li&gt;
      &lt;li&gt;트랜잭션이 일어난 시간&lt;/li&gt;
      &lt;li&gt;Referer 헤더, User-Agent 헤더&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;212-로그-포맷&quot;&gt;21.2. 로그 포맷&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;로그를 남기는 방식에 표준을 만들어 놓으면 다음과 같은 이점이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;로그를 다루는 툴을 만들 수 있습니다.&lt;/li&gt;
      &lt;li&gt;로그를 보기 쉬워집니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;따라서 다양한 로그 포맷 표준들이 존재합니다.&lt;/li&gt;
  &lt;li&gt;대부분의 HTTP 애플리케이션은 한 개 이상의 로그 포맷을 지원합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2121-일반-로그-포맷common-log-format&quot;&gt;21.2.1. 일반 로그 포맷(Common Log Format)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;많이 사용되는 로그 포맷중 하나는 말 그대로 ‘일반 로그 포맷’입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;NCSA(National Center for Supercomputing Applications)에서 처음 정의한 포맷입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;대부분의 사용 소프트 웨어는 일반 로그 포맷을 지원합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래는 일반 로그 포맷의 필드들입니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;remotehost&lt;/td&gt;
          &lt;td&gt;요청한 컴퓨터의 호스트 명 혹은 IP&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;username&lt;/td&gt;
          &lt;td&gt;ident 검색을 수행했다면, 인증된 요청자의 이름이 존재&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;auth-username&lt;/td&gt;
          &lt;td&gt;인증을 수행 했다면, 인증된 요청자의 이름이 존재&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;timestamp&lt;/td&gt;
          &lt;td&gt;요청 날짜와 시간&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;request-line&lt;/td&gt;
          &lt;td&gt;HTTP 요청의 첫 행을 그대로 기술.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;response-code&lt;/td&gt;
          &lt;td&gt;응답의 HTTP 상태코드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;response-size&lt;/td&gt;
          &lt;td&gt;응답 엔터티의 Content-Length&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같은 로그가 남을 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;209.1.32.44 - - [03/Oct/1999:14:16:00 -0400] &quot;GET / HTTP/1.0&quot; 200 1024 
http-guide.com - dg [03/Oct/1999:14:16:32 -0400] &quot;GET / HTTP/1.0&quot; 200 477
http-guide.com - dg [03/Oct/1999:14:16:32 -0400] &quot;GET /foo HTTP/1.0&quot; 404 0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 로그를 파싱하면 아래와 같이 나뉘어 집니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;로그1&lt;/th&gt;
          &lt;th&gt;로그2&lt;/th&gt;
          &lt;th&gt;로그3&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;remotehost&lt;/td&gt;
          &lt;td&gt;209.1.32.44&lt;/td&gt;
          &lt;td&gt;http-guide.com&lt;/td&gt;
          &lt;td&gt;http-guide.com&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;username&lt;/td&gt;
          &lt;td&gt;&lt;비어있음&gt;&lt;/비어있음&gt;&lt;/td&gt;
          &lt;td&gt;&lt;비어있음&gt;&lt;/비어있음&gt;&lt;/td&gt;
          &lt;td&gt;&lt;비어있음&gt;&lt;/비어있음&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;auth-username&lt;/td&gt;
          &lt;td&gt;&lt;비어있음&gt;&lt;/비어있음&gt;&lt;/td&gt;
          &lt;td&gt;dg&lt;/td&gt;
          &lt;td&gt;dg&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;timestamp&lt;/td&gt;
          &lt;td&gt;03/Oct/1999:14:16:00 -0400&lt;/td&gt;
          &lt;td&gt;03/Oct/1999:14:16:32 -0400&lt;/td&gt;
          &lt;td&gt;03/Oct/1999:14:16:32 -0400&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;request-line&lt;/td&gt;
          &lt;td&gt;GET / HTTP/1.0&lt;/td&gt;
          &lt;td&gt;GET / HTTP/1.0&lt;/td&gt;
          &lt;td&gt;GET /foo HTTP/1.0&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;response-code&lt;/td&gt;
          &lt;td&gt;200&lt;/td&gt;
          &lt;td&gt;200&lt;/td&gt;
          &lt;td&gt;404&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;response-size&lt;/td&gt;
          &lt;td&gt;1024&lt;/td&gt;
          &lt;td&gt;477&lt;/td&gt;
          &lt;td&gt;0&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2122-혼합-로그-포맷combined-log-format&quot;&gt;21.2.2. 혼합 로그 포맷(Combined Log Format)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;혼합 로그 포맷 역시 자주 사용되는 로그 포맷입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;일반 로그 포맷과 매우 유사하며 필드 2개가 추가된 것이 전부입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래는 추가된 2개의 필드입니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Referer&lt;/td&gt;
          &lt;td&gt;Referer HTTP 헤더의 값&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;User-Agent&lt;/td&gt;
          &lt;td&gt;User-Agent Referer HTTP 헤더의 값&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같은 로그가 남을 수 있습니다.(한 줄의 로그 입니다.)&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;209.1.32.44 - - [03/Oct/1999:14:16:00 -0400] &quot;GET / HTTP/1.0&quot; 200 1024 &quot;http://www.joeshardware.com/&quot; &quot;5.0: Mozilla/4.0 (compatible; MSIE 5.0; Windows 98)&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이 로그에서 Referer와 User-Agent는 다음에 해당합니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;로그1&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Referer&lt;/td&gt;
          &lt;td&gt;http://www.joeshardware.com/&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;User-Agent&lt;/td&gt;
          &lt;td&gt;5.0: Mozilla/4.0 (compatible; MSIE 5.0; Windows 98)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2123-넷스케이프-확장-로그-포맷&quot;&gt;21.2.3. 넷스케이프 확장 로그 포맷&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;넷스케이프 확장 로그 포맷은 일반 로그 포맷에서 시작해 &lt;strong&gt;프록시나 웹 캐시 같은 HTTP 애플리케이션을 지원하기 위해&lt;/strong&gt; 확장되었습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;일반 로그 포맷의 7개 필드를 제외하고 확장된 필드들은 다음과 같습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-code&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 서버에서 프록시로의 HTTP 응답 코드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-size&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 서버에서 프록시로의 응답 엔터티 Content-Length&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-request-size&lt;/td&gt;
          &lt;td&gt;클라이언트가 프록시로 보내는 요청의 본문이나 엔터티의 Content-Length&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-request-size&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 프록시가 서버로 보내는 요청의 본문이나 엔터티의 Content-Length&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-request-hdr-size&lt;/td&gt;
          &lt;td&gt;클라이언트의 요청 헤더의 바이트 길이&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-hdr-size&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 프록시가 요청자에게 보내는 응답 헤더의 바이트 길이&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-request-hdr-size&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 프록시가 서버로 전송하는 요청 헤더의 바이트 길이&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;server-response-hdr-size&lt;/td&gt;
          &lt;td&gt;서버 응답 헤더의 바이트 길이&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-timestamp&lt;/td&gt;
          &lt;td&gt;트랜잭션이 프록시를 거칠 경우, 요청과 응답이 프록시를 통해 오가는 총 시간(초)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같은 로그가 남을 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;209.1.32.44 - - [03/Oct/1999:14:16:00-0400] &quot;GET / HTTP/1.0&quot; 200 1024 200 1024 0 0 215 260 279 254 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 로그를 파싱하면 확장된 필드들은 아래와 같은 값을 갖습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;로그1&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-code&lt;/td&gt;
          &lt;td&gt;200&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-size&lt;/td&gt;
          &lt;td&gt;1024&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-request-size&lt;/td&gt;
          &lt;td&gt;0&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-request-size&lt;/td&gt;
          &lt;td&gt;0&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-request-hdr-size&lt;/td&gt;
          &lt;td&gt;215&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-response-hdr-size&lt;/td&gt;
          &lt;td&gt;260&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-request-hdr-size&lt;/td&gt;
          &lt;td&gt;279&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;server-response-hdr-size&lt;/td&gt;
          &lt;td&gt;254&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-timestamp&lt;/td&gt;
          &lt;td&gt;3&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2124-넷스케이프-확장-2-로그-포맷&quot;&gt;21.2.4. 넷스케이프 확장 2 로그 포맷&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;넷스케이프 확장 2 로그 포맷은 넷스케이프 확장 로그 포맷을 확장한 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;넷스케이프 확장 로그 포맷에 있는 필드를 제외하고 새로 확장된 필드들은 다음과 같습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;route&lt;/td&gt;
          &lt;td&gt;프록시가 클라이언트에 요청을 만드는데 사용하는 경로&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-finish-status-code&lt;/td&gt;
          &lt;td&gt;넷스케이프 확장 2 로그 포맷에서 정의한 클라이언트의 종료 상태 코드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-finish-status-code&lt;/td&gt;
          &lt;td&gt;넷스케이프 확장 2 로그 포맷에서 정의한 프록시의 종료 상태 코드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;cache-result-code&lt;/td&gt;
          &lt;td&gt;넷스케이프 확장 2 로그 포맷에서 정의한 캐시 결과 코드&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;route 엔 다음과 같은 값이 가능합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;DIRECT : 리소스를 서버에서 바로 가져옴&lt;/li&gt;
      &lt;li&gt;PROXY(host:port) : 리소스를 host 라는 프록시를 통해 가져옴&lt;/li&gt;
      &lt;li&gt;SOCKS(socks:port) : 리소스를 host라는 SOCKS 서버를 통해 가져옴&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;client-finish-status-code, proxy-finish-status-code 엔 다음과 같은 코드가 존재합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;- : 요청이 시작되지 않음&lt;/li&gt;
      &lt;li&gt;FIN : 요청이 성공적으로 완료됨&lt;/li&gt;
      &lt;li&gt;INTR : 요청이 클라이언트에 의해 중단 되었거나 프록시/서버에 의해 종료됨&lt;/li&gt;
      &lt;li&gt;TIMEOUT : 요청이 프로시/서버의 타임아웃에 걸림&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;cache-result-code엔 다음과 같은 코드가 쓰입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;- : 캐시할 수 없는 리소스&lt;/li&gt;
      &lt;li&gt;WRITTEN : 리소스를 캐시에 저장함&lt;/li&gt;
      &lt;li&gt;REFRESHED : 리소스를 캐시했고 갱신함&lt;/li&gt;
      &lt;li&gt;NO-CHECK : 캐시된 리소스를 반환했고 신선도 검사를 하지 않음&lt;/li&gt;
      &lt;li&gt;UP-TO-DATE : 캐시된 리소스를 반환했고 신선도 검사를 완료함&lt;/li&gt;
      &lt;li&gt;HOST-NOT-AVAILABLE : 캐시된 리소스를 반환했으며, 원격 서버가 사용할 수 있는 상태가 아니었기 때문에 신서도 검사를 하지 않음&lt;/li&gt;
      &lt;li&gt;CL-MISMATCH : 리소스를 캐시에 저장하지 않았다. Content-Length가 리소스의 크기와 맞지 않았기 때문에 쓰기를 중단함.&lt;/li&gt;
      &lt;li&gt;ERROR : 어떤 에러 때문에 리소스를 캐시에 저장하지 못했다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같은 로그를 남길 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;209.1.32.44 - - [03/Oct/1999:14:16:00-0400] &quot;GET / HTTP/1.0&quot; 200 1024 200 1024 0 0 215 260 279 254 3 DIRECT FIN FIN WRITTEN 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;확장된 필드들은 다음과 같이 파싱됩니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;route&lt;/td&gt;
          &lt;td&gt;DIRECT&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;client-finish-status-code&lt;/td&gt;
          &lt;td&gt;FIN&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;proxy-finish-status-code&lt;/td&gt;
          &lt;td&gt;FIN&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;cache-result-code&lt;/td&gt;
          &lt;td&gt;WRITTEN&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2125-스퀴드squid-프록시-로그-포맷&quot;&gt;21.2.5. 스퀴드(Squid) 프록시 로그 포맷&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;스퀴드 프록시 캐시(&lt;a href=&quot;http://www.squid-cache.org/&quot;&gt;http://www.squid-cache.org/&lt;/a&gt;)는 유명한 오픈소스 프록시 캐시 프로젝트입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;스퀴드 프록시 로그 포맷은 스퀴드 프록시 캐시에서 사용되는 로그 포맷입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;앞서 살펴본 일반 로그 포맷을 원류로한 로그들과는 필드의 구성과 순서가 좀 다릅니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음과 같은 필드가 존재합니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;timestamp&lt;/td&gt;
          &lt;td&gt;GMT 기준 1970년 1월 1일 부터 요청이 도착한 시간까지의 시간을 초 단위로 기술&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;time-elapsed&lt;/td&gt;
          &lt;td&gt;요청과 응답이 프록시를 통해 오고간 총 시간을 밀리초 단위로 기술&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;host-ip&lt;/td&gt;
          &lt;td&gt;클라이언트의 호스트 장비 IP 주소&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;result-code/status&lt;/td&gt;
          &lt;td&gt;result code는 요청에 대해 어떤 일을 했는지를 squid result code로 기술. status는 HTTP 응답 코드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;size&lt;/td&gt;
          &lt;td&gt;프록시가 클라이언트에게 보낸 HTTP 응답 헤더와 본문을 포함한 응답 길이가 바이트 단위로 기술됨&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;method&lt;/td&gt;
          &lt;td&gt;클라이언트 요청의 HTTP 메서드&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;url&lt;/td&gt;
          &lt;td&gt;클라이언트 요청의 URL&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;rfc931-ident&lt;/td&gt;
          &lt;td&gt;클라이언트에 인증된 사용자 이름&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;hierarchy/from&lt;/td&gt;
          &lt;td&gt;프록시가 클라이언트로 요청을 봬며 거친 경로를 기술.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;content-type&lt;/td&gt;
          &lt;td&gt;프록시 응답 엔터티의 Content-Type&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;squid result code는 꽤나 많기 때문에 링크를 남기겠습니다. &lt;a href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_result_codes&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_result_codes&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;스퀴드 로그 포맷을 사용한다고 해서 위 링크의 모든 result code를 구현하는 것은 아닙니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;스퀴드 로그 포맷은 다음과 같은 로그를 남길 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;99823414 3001 209.1.32.44 TCP_MISS/200 4087 GET http://www.joes-hardware.com - DIRECT/proxy.com text/html 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 로그를 파싱하면 각 필드는 다음과 같은 값을 갖습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;필드&lt;/th&gt;
          &lt;th&gt;로그1&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;timestamp&lt;/td&gt;
          &lt;td&gt;99823414&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;time-elapsed&lt;/td&gt;
          &lt;td&gt;3001&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;host-ip&lt;/td&gt;
          &lt;td&gt;209.1.32.44&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;result-code/status&lt;/td&gt;
          &lt;td&gt;TCP_MISS/200&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;size&lt;/td&gt;
          &lt;td&gt;4087&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;method&lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;url&lt;/td&gt;
          &lt;td&gt;http://www.joes-hardware.com&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;rfc931-ident&lt;/td&gt;
          &lt;td&gt;-&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;hierarchy/from&lt;/td&gt;
          &lt;td&gt;DIRECT/proxy.com&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;content-type&lt;/td&gt;
          &lt;td&gt;text/html&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;213-적중-계량하기&quot;&gt;21.3. 적중 계량하기&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 말했듯이 로그는 에러를 진단하거나, 웹 사이트에 대한 통계를 내어 여러 용도로 사용하기 위해 남겨집니다.&lt;/li&gt;
  &lt;li&gt;하지만 캐시가 사용된다면 클라이언트의 요청은 서버까지 오지 못하고 캐시에서 처리 됩니다.&lt;/li&gt;
  &lt;li&gt;그렇다면 정확한 통계가 이루어지지 않습니다. 이와 같은 상황은 어떻게 해결할까요?&lt;/li&gt;
  &lt;li&gt;중요한 문서들에 대해 캐시를 하지 않아 버릴 수도 있습니다. 모든 요청은 서버로 가게되고 정확한 통계를 낼 수 있습니다. 하지만 이렇게 되면 응답시간이 길어지고 서버의 부하가 증가합니다.&lt;/li&gt;
  &lt;li&gt;대신 캐시에도 로그가 쌓일테니 캐시의 로그를 주기적으로 원 서버에 보내면 어떨까요? 이런 방법을 적중 계량(Hit Metering) 이라고 합니다.&lt;/li&gt;
  &lt;li&gt;적중 계량은 HTTP의 확장으로 RFC 2227에서 정의되었습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2131-개요&quot;&gt;21.3.1. 개요&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;적중 계량 규약은 캐시와 서버가 접근 정보를 공유하고 캐시의 리소스 양을 제어할 수 있는 몇가지 기능을 정의합니다.&lt;/li&gt;
  &lt;li&gt;적중 계량은 캐시에서 요청이 끝남으로서 발생되는 문제를 완벽히 해결해주진 않지만 어느정도로 서버가 원하는 정보를 제공해 줄 순 있습니다.&lt;/li&gt;
  &lt;li&gt;적중 계량을 사용하면 캐시를 이용해 성능을 높이면서도 서버에서 정확한 접근 통계를 낼 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2132-meter-헤더&quot;&gt;21.3.2. Meter 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;적중 계량을 위해선 Meter 라는 헤더가 사용됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Meter 헤더에 다양한 지시자와 값들을 통해 적중 계량을 구현할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음은 Meter 헤더에 사용 될 수 있는 지시자들 입니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;지시자&lt;/th&gt;
          &lt;th&gt;약어&lt;/th&gt;
          &lt;th&gt;주체&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;will-report-and-limit&lt;/td&gt;
          &lt;td&gt;w&lt;/td&gt;
          &lt;td&gt;캐시&lt;/td&gt;
          &lt;td&gt;캐시는 사용량을 보고하고 서버가 기술한 사용제한에 복종함&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;wont-report&lt;/td&gt;
          &lt;td&gt;x&lt;/td&gt;
          &lt;td&gt;캐시&lt;/td&gt;
          &lt;td&gt;캐시는 사용 제한에 복종하지만, 사용량 보고는 하지 않음&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;wont-limit&lt;/td&gt;
          &lt;td&gt;y&lt;/td&gt;
          &lt;td&gt;캐시&lt;/td&gt;
          &lt;td&gt;캐시는 사용량 보고를 하지만 사용 제한은 없음&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;count&lt;/td&gt;
          &lt;td&gt;c&lt;/td&gt;
          &lt;td&gt;캐시&lt;/td&gt;
          &lt;td&gt;“사용횟수/재사용횟수” 로 기술되는 보고 지시자. “:count=2/4”와 같이 쓰인다.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;max-uses&lt;/td&gt;
          &lt;td&gt;u&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버가 캐시를 사용해 응답할 수 있는 최대 횟수를 기술. “max-uses=100” 과 같이 쓰임&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;max-reuses&lt;/td&gt;
          &lt;td&gt;r&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버가 캐시를 재사용해 응답할 수 있는 최대 횟수를 기술. “max-reuses=100”과 같이 쓰임&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;do-report&lt;/td&gt;
          &lt;td&gt;d&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버가 프록시에게 사용량 보고를 요구함&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;dont-report&lt;/td&gt;
          &lt;td&gt;e&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버가 사용량 보고를 원하지 않음&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;timeout&lt;/td&gt;
          &lt;td&gt;t&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버가 리소스를 계량할 때 시간제한을 거는데 사용. 캐시는 해당 타임아웃 정각이나 1분 전후로 보고를 해야함. “timeout=60”과 같이 쓰임&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;wont-ask&lt;/td&gt;
          &lt;td&gt;n&lt;/td&gt;
          &lt;td&gt;서버&lt;/td&gt;
          &lt;td&gt;서버는 계량 정보를 원하지 않음.&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래 그림은 Meter 헤더가 사용되는 과정을 나타냅니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/meter_example.png&quot; alt=&quot;meter_example.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트 입장에선 변하는게 없습니다. 프록시가 서버로 요청을 보낼때 ‘will-report-and-limit’을 보내 사용량을 보고하며 사용 제한에 복종한다고 말합니다.&lt;/li&gt;
  &lt;li&gt;서버는 프록시에게 리소스를 건네주며 ‘do-report’를 지시했습니다.&lt;/li&gt;
  &lt;li&gt;프록시는 클라이언트에게 리소스를 건네줍니다.&lt;/li&gt;
  &lt;li&gt;이후 시간이 흘러 프록시가 갖은 리소스가 신선하지 않아 재검사를 보낼때 Meter에 적중 횟수를 보고 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;214-개인-정보-보호에-대해&quot;&gt;21.4. 개인 정보 보호에 대해&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;한편, 로깅은 본래 선의의 목적으로 사용되지만 악용 될 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;웹 사이트의 사용 기록을 몰래 매매할 수도 있고 수집한 로그로 개인의 사생활을 엿볼 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;로그를 다루는 개발자라면 항상 이 점을 염두해 두어야 할 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;웹 프로젝트를 할 때 로그는 프레임워크가 해주는대로 ‘알아서 잘 남겠거니’하고 지나쳤었습니다.&lt;/li&gt;
  &lt;li&gt;이번 장을 학습한 이후로는 좀 더 적극적으로 로그를 남기고 사용할 수 있을 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 20 - 리다이렉션과 부하 균형</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C20/"/>
   <updated>2020-04-01T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드20</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장에선 리다이렉션에 대해 알아보겠습니다.&lt;/li&gt;
  &lt;li&gt;다음과 같은 것들에 대해 배웁니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP 리다이렉션&lt;/li&gt;
      &lt;li&gt;DNS 리다이렉션&lt;/li&gt;
      &lt;li&gt;임의 캐스트 라우팅&lt;/li&gt;
      &lt;li&gt;정책 라우팅&lt;/li&gt;
      &lt;li&gt;아이피 맥 포워딩&lt;/li&gt;
      &lt;li&gt;아이피 주소 포워딩&lt;/li&gt;
      &lt;li&gt;웹 캐시 조직 프로토콜(WCCP)&lt;/li&gt;
      &lt;li&gt;인터캐시 커뮤니케이션 프로토콜(ICP)&lt;/li&gt;
      &lt;li&gt;하이퍼텍스트 캐싱 프로토콜(HTCP)&lt;/li&gt;
      &lt;li&gt;네트워크 요소 제어 프로토콜(NECP)&lt;/li&gt;
      &lt;li&gt;캐시 배열 라우팅 프로토콜(CARP)&lt;/li&gt;
      &lt;li&gt;웹 프록시 자동발견 프로토콜(WPAD)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;201-왜-리다이렉트인가&quot;&gt;20.1. 왜 리다이렉트인가?&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;현대의 웹은 항상 다음과 같은 사항들을 요구합니다.
    &lt;ul&gt;
      &lt;li&gt;신뢰할 수 있는 HTTP 트랜잭션&lt;/li&gt;
      &lt;li&gt;지연 최소화&lt;/li&gt;
      &lt;li&gt;네트워크 대역폭 절약&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;위 사항들을 만족시키려면 콘텐츠의 분산이 필수적입니다. 그리고 그에 따라 리다이렉션도 현대 웹의 필수 사항이 됐습니다.&lt;/li&gt;
  &lt;li&gt;이런 리다이렉션을 구현하기 위해선 부하균형(Load Balancing, 앞으로 로드밸런싱이라 부름)에 관한 문제를 고민해봐야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;202-리다이렉트-할-곳&quot;&gt;20.2. 리다이렉트 할 곳&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;서버, 프록시, 캐시, 게이트웨이 모두 리다이렉션을 할수 있고, 리다이렉션의 대상이 될 수 있습니다.&lt;/li&gt;
  &lt;li&gt;웹 서버로의 리다이렉션은 보통 한 요청에 대해 가장 빠르게 응답할 수 있는 곳으로 보낼때 사용합니다.&lt;/li&gt;
  &lt;li&gt;프록시에서의 리다이렉션은 보통 트래픽의 주 진입로 중간에 끼어 빠른 길을 찾아주고자 할때(캐시 처럼)사용합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;203-리다이렉션-프로토콜의-개요&quot;&gt;20.3. 리다이렉션 프로토콜의 개요&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;리다이렉션의 궁극적인 목표는 HTTP 트랜잭션을 빠르게 만드는 것입니다.&lt;/li&gt;
  &lt;li&gt;리다이렉션되는 HTTP 메세지들은 많은 HTTP 애플리케이션(서버, 프록시 등)과 네트워크 장치(스위치, 라우터 등)에 영향을 받습니다.&lt;/li&gt;
  &lt;li&gt;대부분의 리다이렉션 기법들이 어떤 서버, 프록시에서든 가능하지만 몇몇 리다이렉션 기법(브라우저에서 프록시 설정하는 것 등)은 프록시로 향하는 리다이렉션에서만 작동합니다.
    &lt;ul&gt;
      &lt;li&gt;20.4에선 일반적인 리다이렉션 방법을 알아보고&lt;/li&gt;
      &lt;li&gt;20.5에선 프록시에서만 사용되는 리다이렉션을 알아보겠습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;204-일반적인-리다이렉션-방법&quot;&gt;20.4. 일반적인 리다이렉션 방법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이 절에선 서버, 프록시 양쪽에서 모두 쓰일 수 있는 일반적인 리다이렉션 방법을 알아볼 것입니다.&lt;/li&gt;
  &lt;li&gt;다음과 같은 방법을 알아봅니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP 리다이렉션&lt;/li&gt;
      &lt;li&gt;DNS 리다이렉션&lt;/li&gt;
      &lt;li&gt;애니캐스트 어드레싱 (책엔 ‘임의 캐스트(Anycast)’라고 되어 있으나 애니캐스트라고 부르겠습니다.)&lt;/li&gt;
      &lt;li&gt;아이피 맥 포워딩&lt;/li&gt;
      &lt;li&gt;아이피 주소 포워딩&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2041-http-리다이렉션&quot;&gt;20.4.1. HTTP 리다이렉션&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP 리다이렉션이란 한 요청에 대해 302 Redirect 코드와 Location헤더 응답으로 리다이렉션 시키는 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음은 HTTP 리다이렉션의 예입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;A가 B에게 요청을 보냅니다. Host 헤더는 도메인명입니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /hammers.html HTTP/1.0
Host: www.joes-hardware.com
User-Agent: Mozilla/4.51 [en] (X11; U; IRIX 6.2 IP22) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;B(www.joes-hardware.com)는 분산된 서버중에 가장 빠른 서버를 찾아주는 서버였고 다음과 같은 응답을 돌려 줍니다. 응답은 C서버(161.58.228.45)로 리다이렉션 시키는 응답입니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.0 302 Redirect
Server: Stronghold/2.4.2 Apache/1.3.6
Location: http://161.58.228.45/hammers.html 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;A는 B의 응답의 Location 헤더를 읽고 Location 헤더에 있는 ip 주소를 요청의 Host 헤더에 넣습니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /hammers.html HTTP/1.0
Host: 161.58.228.45
User-Agent: Mozilla/4.51 [en] (X11; U; IRIX 6.2 IP22) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;C서버(161.58.228.45)는 A의 요청에 대해 맞는 리소스를 돌려주게 됩니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP 리다이렉션의 장점은 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;리다이렉션을 시키는 서버가 클라이언트의 IP 주소등의 정보를 알고 있습니다.&lt;/li&gt;
      &lt;li&gt;클라이언트의 정보에 근거해 최적의 서버를 찾아줄 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP 리다이렉션의 단점은 다음과 같습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;리다이렉션을 해주는 서버에 많은 부하가 걸립니다.&lt;/li&gt;
      &lt;li&gt;요청할 때마다 두 번의 왕복이 필요합니다.&lt;/li&gt;
      &lt;li&gt;리다이렉션을 해주는 서버가 고장나면 다른 서버를 이용할 수 없습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;단점도 많기 때문에 보통 다른 리다이렉션 기법과 같이 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2042-dns-리다이렉션&quot;&gt;20.4.2. DNS 리다이렉션&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;www.joes-hardware.com 같은 도메인을 받으면 이를 IP로 변환해주는 작업이 필요합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이를 수행해주는 것이 DNS Resolver 입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DNS Resolver는 클라이언트의 운영체제, 클라이언트의 DNS 서버, 원격의 DNS 서버 등 다양합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;한편, 하나의 도메인은 여러 IP를 갖을 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;이때 DNS Resolver는 IP의 목록을 보여줍니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;아래는 윈도우 콘솔을 이용해 www.youtube.com의 IP 목록을 찾은 것입니다.&lt;/p&gt;

        &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;C:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Kiseung&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nslookup&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;youtube&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;서버&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;bns1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hananet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;net&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;210&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;220&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;163&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;82&lt;/span&gt;
    
&lt;span class=&quot;err&quot;&gt;권한&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;없는&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;응답&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;이름&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;youtube&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ui&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;google&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;2404&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4004&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;81&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;78&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;174&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;216&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;197&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;142&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;175&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;46&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;78&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;216&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;220&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;142&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;46&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;174&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;161&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;78&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;216&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;197&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;238&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;161&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;46&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;142&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;206&lt;/span&gt;
          &lt;span class=&quot;mi&quot;&gt;172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;217&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;142&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Aliases&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;youtube&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;위에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;서버:    bns1.hananet.net&lt;/code&gt; 는 제가 사용하고 있는 DNS 서버입니다.  DNS 서버가 다르다면 조회한 IP 목록이 다를 수 있습니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이런 여러 IP중 하나를 선택하는 방법은 매우 다양합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;여러 IP들이 부하를 골고루 받도록 하는 방법을 로드 밸런싱이라고 합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;DNS 라운드 로빈&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;라운드 로빈은 로드밸런싱의 가장 간단한 방법입니다.&lt;/li&gt;
  &lt;li&gt;라운드 로빈은 여러 개의 서버에 순서대로 부하를 주는 방법입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;다중 주소와 라운드 로빈 주소 순환&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;대부분 DNS 클라이언트는 받아온 IP 목록 중 첫번째 IP를 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이때, DNS 서버는 로드밸런싱을 위해 DNS 클라이언트에게 IP 목록을 돌려주고나서 IP목록을 순환시켜 줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같이 www.youtube.com의 IP 목록을 조회할 때 마다 IP들의 순서가 바뀌는 것을 볼수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;이름:    youtube-ui.l.google.com
Addresses:  2404:6800:4004:81f::200e
          172.217.27.78
          172.217.26.14
          :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;이름:    youtube-ui.l.google.com
Addresses:  2404:6800:4004:813::200e
          172.217.25.110
          172.217.175.110
          :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;이름:    youtube-ui.l.google.com
Addresses:  2404:6800:4004:81d::200e
          172.217.175.14
          216.58.197.142
          :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;DNS 캐싱의 효과&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;라운드 로빈은 합리적인 것 같지만 DNS 캐시를 생각해보면 얘기가 달라집니다.&lt;/li&gt;
  &lt;li&gt;콘텐츠들을 캐싱하는 것 처럼 DNS 조회 결과 역시 캐시할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;이때 캐시된 DNS를 사용한다면, 한 클라이언트는 계속 같은 IP를 사용할 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;다른 DNS 기반 리다이렉션 알고리즘&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;단순한 라운드 로빈 방식이 아닌 다른 방식으로 여러 IP중 하나를 고르기도 합니다.
    &lt;ul&gt;
      &lt;li&gt;로드 밸런싱 알고리즘 : DNS 서버가 대상 웹 서버들의 로드를 추적해 가장 로드가 적은 서버를 IP목록의 제일 위에 놓습니다.&lt;/li&gt;
      &lt;li&gt;근접 라우팅(Proximity-routing) 알고리즘 : 대상 웹 서버들이 지리적으로 분산되어 있는 경우, 클라이언트와 지리적으로 인접한 웹 서버를 찾습니다.&lt;/li&gt;
      &lt;li&gt;결함 마스킹 알고리즘(Fault-masking) : DNS 서버가 네트워크의 상태를 모니터링하며 장애가 없고 빠른 네트워크로 라우팅 시킵니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2043-임의캐스트anycast-어드레싱&quot;&gt;20.4.3. 임의캐스트(Anycast) 어드레싱&lt;/h4&gt;

&lt;h4 id=&quot;2044-아이피-맥-포워딩&quot;&gt;20.4.4. 아이피 맥 포워딩&lt;/h4&gt;

&lt;h4 id=&quot;2045-아이피-주소-포워딩&quot;&gt;20.4.5. 아이피 주소 포워딩&lt;/h4&gt;

&lt;h4 id=&quot;2046-네트워크-구성요소-제어-프로토콜&quot;&gt;20.4.6. 네트워크 구성요소 제어 프로토콜&lt;/h4&gt;

&lt;h3 id=&quot;205-프록시-리다이렉션-방법&quot;&gt;20.5. 프록시 리다이렉션 방법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 본 것은 일반적인 리다이렉션 방법이었습니다.&lt;/li&gt;
  &lt;li&gt;한편, 프록시에서만 사용되는 리다이렉션 방법들이 있는데 그 대표적인 예가 브라우저에서 프록시를 설정하는  것입니다.&lt;/li&gt;
  &lt;li&gt;브라우저에서 프록시를 설정하는 방법은 크게 세 가지가 있습니다.
    &lt;ul&gt;
      &lt;li&gt;명시적 설정&lt;/li&gt;
      &lt;li&gt;동적 설정&lt;/li&gt;
      &lt;li&gt;웹 프록시 자동발견&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2051-명시적-브라우저-설정&quot;&gt;20.5.1. 명시적 브라우저 설정&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;대부분의 브라우저에선 수동으로 프록시를 설정할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/proxy1.png&quot; alt=&quot;proxy1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/proxy2.png&quot; alt=&quot;proxy2.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;수동으로 프록시를 설정하는 방법은 다음과 같은 한계가 있습니다.
    &lt;ul&gt;
      &lt;li&gt;설정한 프록시에 장애가 생기면 통신이 불가능합니다.&lt;/li&gt;
      &lt;li&gt;네트워크 아키텍처가 변경되면 모든 사용자에게 전파해야 하고, 모든 사용자들은 재설정을 해야합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2052-프록시-자동-설정&quot;&gt;20.5.2. 프록시 자동 설정&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;명시적으로 프록시의 주소를 설정하는 것보다 좋은 방법은 프록시의 정보를 갖고있는 URL을 지정하는 것입니다.&lt;/li&gt;
  &lt;li&gt;이런 방법을 프록시 자동설정(Proxy Auto-configuration, PAC) 프로토콜이라고 합니다.&lt;/li&gt;
  &lt;li&gt;이 방법은 PAC 파일이라는 불리는 특별한 파일의 URL을 각 브라우저에 설정하는 것입니다.
    &lt;ul&gt;
      &lt;li&gt;PAC 파일은 &lt;code class=&quot;highlighter-rouge&quot;&gt;function FindProxyForURL(url ,host)&lt;/code&gt; 를 구현하는 js 파일입니다.&lt;/li&gt;
      &lt;li&gt;PAC 파일은 요청 URL 별로 접촉해야할 프록시를 맵핑해둔 파일입니다.&lt;/li&gt;
      &lt;li&gt;PAC 파일에 대한 자세한 사항은 &lt;a href=&quot;http://findproxyforurl.com/&quot;&gt;http://findproxyforurl.com/&lt;/a&gt; 를 참조해주세요.&lt;/li&gt;
      &lt;li&gt;PAC 파일을 찾은 브라우저는 &lt;code class=&quot;highlighter-rouge&quot;&gt;FindProxyForURL&lt;/code&gt; 함수를 호출해 프록시의 주소를 받아옵니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;브라우저가 시작될 때 PAC 파일을 찾아옵니다.&lt;/li&gt;
  &lt;li&gt;네트워크 아키텍처의 변경시엔 PAC 파일을 수정하면 사용자들은 자동으로 수정된 프록시의 주소를 찾아갈 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/proxy3.png&quot; alt=&quot;proxy3.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;PAC 파일의 URL을 위의 스크립트 주소에 입력하면 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2053-웹-프록시-자동발견-프로토콜web-proxy-autodiscovery-protocol&quot;&gt;20.5.3. 웹 프록시 자동발견 프로토콜(Web Proxy Autodiscovery Protocol)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;한편, 이 PAC 주소조차 설정 안해도 되는 방법이 있습니다.&lt;/li&gt;
  &lt;li&gt;웹 프록시 자동발견 프로토콜(Web Proxy AutoDiscovery, WPAD)이 이를 가능하게 해줍니다.&lt;/li&gt;
  &lt;li&gt;WPAD는 웹 브라우저가 근처의 프록시를 찾도록 도와줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;PAC 파일 자동 발견&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;WPAD는 우선 PAC 파일을 자동으로 찾아줍니다.(어떻게 찾는 지는 뒤에서 소개합니다.)&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;PAC 파일자체를 가져오는건 아니고 PAC 파일의 CURL (Client URL) 을 찾습니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;WPAD가 직접 프록시의 주소를 찾진 않습니다.&lt;/li&gt;
      &lt;li&gt;WPAD가 직접 프록시의 주소를 찾으면 PAC파일이 제공하는 부가기능(로드밸런싱, 장애 대처 등)을 사용할 수 없기 때문입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;브라우저에서 PAC 파일의 URL을 통해 PAC 파일을 가져옵니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;PAC 파일을 실행해 요청할 URL에 맞는 프록시 주소를 가져옵니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;WPAD 알고리즘&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;그렇다면 WPAD는 어떻게 PAC 파일의 URL을 알아올까요?&lt;/li&gt;
  &lt;li&gt;WPAD는 아래의 방법으로 PAC파일의 URL을 가져올 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;DHCP(Dynamic Host Configuration Protocol, 동적 호스팅 설정 프로토콜)&lt;/li&gt;
      &lt;li&gt;SLP(Service Location Protocol, 서비스 위치 프로토콜)&lt;/li&gt;
      &lt;li&gt;DNS A(Alias) 레코드 룩업(== DNS에게 잘 알려진 호스트명)&lt;/li&gt;
      &lt;li&gt;DNS SRV(Service) 레코드 룩업&lt;/li&gt;
      &lt;li&gt;DNS TXT 레코드 룩업(TXT 레코드의 DNS 서비스 URL들)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;WPAD는 위 방법들중 DHCP, SLP를 순서대로 먼저 수행합니다.&lt;/li&gt;
  &lt;li&gt;DHCP, SLP로 PAC 파일의 URL을 찾지 못했다면 아래 3가지 룩업을 여러 차례 순환합니다.&lt;/li&gt;
  &lt;li&gt;그래도 PAC 파일 URL을 찾지 못했다면 프록시를 사용하지 않고 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;WPAD의 더 자세한 사항은 &lt;a href=&quot;https://tools.ietf.org/html/draft-ietf-wrec-wpad-01&quot;&gt;명세&lt;/a&gt;를 참고해주세요.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;DHCP를 이용한 CURL 발견&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;DHCP로 PAC 파일의 URL을 찾는 과정은 아래와 같습니다.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/wpad_dhcp.png&quot; alt=&quot;wpad_dhcp.png&quot; title=&quot;https://findproxyforurl.com/wpad-introduction/&quot; /&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;WPAD 클라이언트가 DHCP 서버로 DHCPINFORM 메세지를 보내 PAC 파일의 CURL을 물어봅니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;DHCP 서버가 PAC 파일의 CURL을 발견했다면 DHCP ACK 메시지로 응답합니다.&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;
            &lt;p&gt;DHCP ACK 메세지엔 ‘252’라는 옵션이 있는데 찾은 CURL이 252 옵션에 들어 있습니다.&lt;/p&gt;

            &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;252=&quot;http://company.com/proxy.pac&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;DNS A(alias) 룩업&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;DNS A 룩업은 ‘DNS에게 잘 알려진 호스트 명’이라고도 합니다.&lt;/li&gt;
  &lt;li&gt;입력받은 도메인과 정확히 일치하지 않더라도 DNS가 가지고 있는 호스트의 별칭을 통해 PAC 파일의 CURL을 찾는 과정입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;PAC 파일 가져오기&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;WPAD가 PAC 파일의 CURL을 갖게된다면, 그 CURL로 GET 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;요청의 결과가 리다이렉트라면, 리다이렉트의 주소가 클라이언트가 가야할 최종목적지 입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;언제 WPAD를 실행하는가&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;WPAD는 다음과 같은 상황에서 실행될 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;웹 클라이언트가 시작될 때 WPAD가 실행될 수 있습니다.&lt;/li&gt;
      &lt;li&gt;갖고 있는 PAC 파일이 만료됐을때 WPAD 프로세스가 다시 진행될 수도 있습니다.
        &lt;ul&gt;
          &lt;li&gt;단, If-Modified-Since 같은 조건부 요청은 지원하지 않습니다.(캐시의 신선도 검사와 다름 주의)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;현재 PAC 파일로 얻어온 프록시에 장애가 있고 현재 PAC 파일이 다른 대안을 제시해주지 않을때 WPAD로 다른 PAC 파일을 찾을 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;WPAD 스푸핑(spoofing, 속이다)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;WPAD 알고리즘은 다음과 같이 작동합니다.
    &lt;ul&gt;
      &lt;li&gt;요청 도메인 : a.b.microsoft.com&lt;/li&gt;
      &lt;li&gt;도메인에 ‘wpad’ 를 붙여 WPAD 서버를 찾아봅니다 : wpad.a.b.microsoft.com&lt;/li&gt;
      &lt;li&gt;3차 도메인에 도달할 때 까지 서브 도메인을 지우고 WPAD 서버를 찾는걸 반복합니다.
        &lt;ul&gt;
          &lt;li&gt;1) wpad.b.microsoft.com&lt;/li&gt;
          &lt;li&gt;2) wpad.microsoft.com&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이런 알고리즘은 보안에 취약할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;악의적인 사용자가 서브 도메인이 지워질걸 예상하고 wpad.b.microsoft.com을 선점해 악의적인 프록시를 설치할 수 있기 때문입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;타임아웃&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;WPAD가 거치는 각 단계엔 타임아웃이 존재합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;관리자를 위한 고려사항&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;추후 기술&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;206-캐시-리다이렉션-방법&quot;&gt;20.6. 캐시 리다이렉션 방법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;프록시 중 캐시 프록시를 위해 사용되는 리다이렉션은 더욱 복잡합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2061-wccp-리다이렉션&quot;&gt;20.6.1. WCCP 리다이렉션&lt;/h4&gt;

&lt;h3 id=&quot;207-인터넷-캐시-프로토콜&quot;&gt;20.7. 인터넷 캐시 프로토콜&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;208-캐시-배열-라우팅-프로토콜&quot;&gt;20.8. 캐시 배열 라우팅 프로토콜&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;209-하이퍼텍스트-캐싱-프로토콜&quot;&gt;20.9. 하이퍼텍스트 캐싱 프로토콜&lt;/h3&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;2091-htcp-인증&quot;&gt;20.9.1. HTCP 인증&lt;/h4&gt;

&lt;h4 id=&quot;2092-캐싱-정책-설정&quot;&gt;20.9.2. 캐싱 정책 설정&lt;/h4&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;목차에 있는 키워드들은 어느정도 익숙한 키워드가 많아 어렵지 않게 읽을 수 있을 것 같았는데 세부적으로 생소한 개념들이 많이 고전중입니다.. 씁..&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 19 - 배포 시스템</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C19/"/>
   <updated>2020-03-31T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드19</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장에선 웹의 배포 및 협업에 대해 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;191-배포-지원을-위한-frontpage-서버-확장&quot;&gt;19.1. 배포 지원을 위한 FrontPage 서버 확장&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;FrontPage는 마이크로스프트의 개발 및 배포 프로그램입니다.&lt;/li&gt;
  &lt;li&gt;1994년 Vermeer Technologies사에서 처음 개발했고 마이크로소프트가 인수하였습니다.&lt;/li&gt;
  &lt;li&gt;2003년 마지막 버전을 끝으로 현재는 FrontPage의 개발이 중단됐습니다.&lt;/li&gt;
  &lt;li&gt;현재는 사용되지 않는 프로그램이나 한 때 많이 사용되었고, 프로그램이 작동하는 과정을 이해하면 다른 기술들을 이해하는데 도움이 될 것 같아 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1911-frontpage-서버-확장&quot;&gt;19.1.1. FrontPage 서버 확장&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;FrontPage는 쉽게 말해 RPC(Remote Procedure Call) 프로토콜 통신으로 서버에게 명령을 내릴 수 있는 프로그램 입니다. 배포를 위해 사용됩니다.&lt;/li&gt;
  &lt;li&gt;이를 위해 서버는 FPSE(FrontPage Server Extension)을 구현하고 있어야 합니다.&lt;/li&gt;
  &lt;li&gt;아래 그림을 보시겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/frontpage.png&quot; alt=&quot;frontpage.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;FrontPage 클라이언트에서 서버로 ①요청을 보냅니다.
    &lt;ul&gt;
      &lt;li&gt;①요청은 HTTP POST 요청 위에 RPC 계층을 구현합니다. 19.1.3.에서 더 자세히 알아봅니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서버는 ①요청을 읽고 ②로 보내 요청받은 메서드를 수행합니다.
    &lt;ul&gt;
      &lt;li&gt;서버와 FPSE는 CGI(Common Gateway Interface) 혹은 ISAPI(Internet Server Application Program Interface, 마이크로소프트 IIS서버에서 사용)와 같은 API로 통신합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;그 후 ③응답 결과를 돌려줍니다.&lt;/li&gt;
  &lt;li&gt;위 과정은 FrontPage 클라이언트와 서버사이에 방화벽, 프록시 등이 있더라도 HTTP POST 메서드 통신만 가능하다면 가능합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1912-frontpage-용어&quot;&gt;19.1.2. FrontPage 용어&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;FrontPage를 이해하기 위한 몇 가지 용어를 알고 갑시다.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;가상 서버&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;가상 서버는 한 웹 서버에서 여러 사이트를 호스팅할때, 클라이언트 입장에선 각자의 전용 서버처럼 보이는 가상의 서버를 말합니다.&lt;/li&gt;
      &lt;li&gt;가상 서버를 지원하는 웹 서버를 ‘다중 호스팅(multi-hosting)’ 웹 서버라고 부릅니다.&lt;/li&gt;
      &lt;li&gt;여러 개의 IP 주소를 갖는 장비를 ‘다중 홈(multi-homed)’ 서버라고 부릅니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;루트 웹&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;루트 웹이란 한 웹 서버의 최상위 콘텐츠 디렉터리를 말합니다.(Spring 프레임워크의 WebContents 폴더)&lt;/li&gt;
      &lt;li&gt;다중 호스팅 환경이라면, 가상 서버의 최상위 콘텐츠 디렉토리를 말합니다.&lt;/li&gt;
      &lt;li&gt;루트 웹에 접근하기 위해선 서버의 URL만 기술하면 됩니다.&lt;/li&gt;
      &lt;li&gt;한 웹 서버엔 한 개의 루트 웹만 있습니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;서브 웹&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;서브 웹은 루트 웹의 하위 디렉토리, 혹은 한 서버의 FPSE 확장 웹인 다른 서브 웹의 하위 디렉토리 입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1913-frontpage-rpc-프로토콜&quot;&gt;19.1.3. FrontPage RPC 프로토콜&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;FrontPage 클라이언트와 FPSE는 자체 RPC 프로토콜을 통해 통신합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;해당 프로토콜은 HTTP POST 요청의 본문에 RPC 메서드와 변수들을 담는 방식으로 구현됩니다. 아래는 RPC 프로토콜을 사용한 요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;POST /_vti_bin/_vti_aut/author.dll HTTP/1.1
Date: Sat, 12 Aug 2000 20:32:54 GMT
User-Agent: MSFrontPage/4.0
  
&amp;lt;BODY&amp;gt;
method=list+documents%3a4%2e0%2e2%2e3717&amp;amp;service%5fname=&amp;amp;listH
iddenDocs=false&amp;amp;listExp
lorerDocs=false&amp;amp;listRecurse=false&amp;amp;listFiles=true&amp;amp;listFolders=t
rue&amp;amp;listLinkInfo=true&amp;amp;l
istIncludeParent=true&amp;amp;listDerived=false
&amp;amp;listBorders=false&amp;amp;listChildWebs=true&amp;amp;initialUrl=&amp;amp;folderList=%
5b%3bTW%7c12+Aug+2000+2
0%3a33%3a04+%2d0000%5d 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;한편, FrontPage 클라이언트에서 서버로 RPC 요청을 하기 위해선 실행 시킬 프로그램이 어디 있는지 알아야 합니다.(위 예시에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;/_vti_bin/_vti_aut/author.dll&lt;/code&gt; 와 같은 경로 )&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;이를 위해 FrontPage 클라이언트는 프로그램들의 위치를 묻는 GET 요청을 보냅니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /_vti_inf.html HTTP/1.1
Date: Sat, 12 Aug 2020 20:31:32 GMT
User-agent: Mozilla/2.0 (compatiable;Ms FrontPage 4.0)
Host: taskserver:80
Accept: auth/sicily
Content-length: 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;위와 같은 요청엔 아래와 같은 목록을 가진 응답이 옵니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;FPShtmlScriptUrl=&quot;_vti_bin/_vti_rpc/shtml.dll&quot;
FPAuthorScriptUrl=&quot;_vti_bin/_vti_aut/author.dll&quot;
FPAdminScriptUrl=&quot;_vti_bin/_vti_adm/admin.dll&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;FPShtmlScriptUrl는 ‘탐색 시간(browse time)’에 대한 명령을 보낼 위치입니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;FPAuthorScriptUrl는 ‘저작 시간(authoring time)’에 대한 명령을 보낼 위치입니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;FPAdminScriptUrl는 ‘관리 동작’에 대한 명령을 보낼 위치입니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;요청&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;요청에서 사용 가능한 FPSE의 메서드는 &lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/office/developer/sharepoint-2010/ms454298(v=office.14)&quot;&gt;링크&lt;/a&gt;를 남기겠습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;요청의 본문은 &lt;code class=&quot;highlighter-rouge&quot;&gt;method=&amp;lt;command&amp;gt;&lt;/code&gt; 형식으로 이루어져 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위의 요청 예시를 보면 &lt;command /&gt; 부분이 복잡해 보입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;커맨드 부분의 빈칸은 ‘+’로 인코딩 되며 알파벳 외의 문자는 퍼센트인코딩(%XX) 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 요청 예시를 보기 좋게 파싱하면 아래와 같습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;method=list+documents:4.0.1.3717
&amp;amp;service_name=
&amp;amp;listHiddenDocs=false
&amp;amp;listExplorerDocs=false
		:
		:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;각 파라미터들이 어떤걸 나타내는지는 &lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/office/developer/sharepoint-2010/ms442283(v%3Doffice.14)#parameters&quot;&gt;링크&lt;/a&gt;를 남기겠습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;응답&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;요청에 대한 응답은 일반적인 응답과 같이 성공 혹은 에러입니다.&lt;/li&gt;
  &lt;li&gt;간혹 “Sample Retrun Code”를 응답으로 받는 메서드도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1914-frontpage-보안-모델&quot;&gt;19.1.4. FrontPage 보안 모델&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;대부분의 경우 FPSE의 보안은 웹 서버에게 의존합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;FPSE에서 마련한 보안 모델은 사용자를 ‘관리자’, ‘저작자’, ‘일반 사용자’ 와 같은 세 그룹으로 나눕니다.&lt;/li&gt;
  &lt;li&gt;IIS(Internet Information Services, 마이크로소프트의 서버)가 아닌 웹 서버라면,
    &lt;ul&gt;
      &lt;li&gt;모든 FPSE 프로그램(~~.dll)이 ‘executable’ 표시가 된 디렉토리에 저장되어야 합니다.&lt;/li&gt;
      &lt;li&gt;그리고 각 프로그램에 접근 허가된 사용자들을 따로 기술합니다. 이를 기술한 파일을 ‘접근 명세 파일’이라고 합니다.
        &lt;ul&gt;
          &lt;li&gt;아파치, NCSA 웹 서버에선 .htaccess 파일에 기술합니다.&lt;/li&gt;
          &lt;li&gt;넷스케이프 웹 서버에선 .nsconfig 파일에 기술합니다.&lt;/li&gt;
          &lt;li&gt;기술 내용은 권한 등급별 사용자, 그룹, IP 주소입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;IIS 서버라면,
    &lt;ul&gt;
      &lt;li&gt;윈도우 보안 모델이 우선 적용됩니다.&lt;/li&gt;
      &lt;li&gt;권한 검사는 주어진 루트나 서브노트에 대한 ACL(access control list, 접근 제어 목록)을 보고 검사합니다.&lt;/li&gt;
      &lt;li&gt;IIS가 FrontPage클라이언트의 요청을 받는다면, 우선 요청의 정보로 로그인해 사용자로 가장합니다.&lt;/li&gt;
      &lt;li&gt;그 후, 요청온 DLL에 접근합니다.&lt;/li&gt;
      &lt;li&gt;dll은 ACL을 기준으로 접근한 사용자가 권한이 있는지 검사합니다.&lt;/li&gt;
      &lt;li&gt;성공하면 dll이 실행되고, 실패한다면 ‘승인 거부(permission denied)’ 메세지를 보냅니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;192-webdav와-공동-저작&quot;&gt;19.2. WebDAV와 공동 저작&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;WebDAV = Web Distributed Authoring(분산 저작) and Versioning(버전관리)&lt;/li&gt;
  &lt;li&gt;책엔 WebDAV에 대해 꽤 많은 부분을 할당했습니다.&lt;/li&gt;
  &lt;li&gt;책이 쓰여지던 때엔 WebDAV를 협업을 위한 툴로 사용했습니다.
    &lt;ul&gt;
      &lt;li&gt;당시엔 git, svn 같은 형상관리도구의 수준이 낮았다고 합니다.&lt;/li&gt;
      &lt;li&gt;당시엔 이메일로 파일을 주고받거나 공유 폴더에 파일을 업로드 하기도 했다고 합니다.(선배 개발자님들 존경스럽습니다… :pray:)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;하지만 지금은 WebDAV가 개발자들의 협업을 위해 쓰이진 않고 네트워크 드라이브를 만들때 사용하는 것 같습니다.&lt;/li&gt;
  &lt;li&gt;책에 내용은 많으나 적당히 추려 요약하겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1921-webdav-메서드&quot;&gt;19.2.1. WebDAV 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;WebDAV에선 HTTP에 없는 아래와 같은 메서드를 추가했습니다.
    &lt;ul&gt;
      &lt;li&gt;PROPFIND : 리소스의 속성을 읽습니다. properties find&lt;/li&gt;
      &lt;li&gt;PROPPATCH : 한 개 이상의 리소스에 대해 한 개 이상의 속성을 설정합니다. properties patch&lt;/li&gt;
      &lt;li&gt;MKCOL : 콜렉션(collection)을 생성합니다. make collection&lt;/li&gt;
      &lt;li&gt;COPY : 리소스나 리소스의 집합을 복사합니다.&lt;/li&gt;
      &lt;li&gt;MOVE : 리소스나 리소스의 집합을 이동시킵니다.&lt;/li&gt;
      &lt;li&gt;LOCK : 하나 이상의 리소스를 잠급니다.&lt;/li&gt;
      &lt;li&gt;UNLOCK : 잠겨 있는 리소스를 잠금 해제 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;또, HTTP에서 아래와 같은 메서드를 수정했습니다.
    &lt;ul&gt;
      &lt;li&gt;DELETE, PUT, OPTIONS&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1922-webdav와-xml&quot;&gt;19.2.2. WebDAV와 XML&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;WebDAV에서 요청 및 응답을 할 시 많은 정보를 주고 받아야 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;몇몇 정보는 HTTP 헤더를 통해 전달할 수 있지만 헤더에 전송하는 것은 한계가 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;때문에, WebDAV에선 아래와 같이 본문에 XML을 보낼 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LOCK /ch-publish.fm HTTP/1.1
Host: minstar
Content-Type: text/xml
User-Agent: Mozilla/4.0 (compatible; MSIE 5.0; Windows NT)
Content-Length: 201
  
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockinfo&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockscope&amp;gt;&amp;lt;a:exclusive/&amp;gt;&amp;lt;/a:lockscope&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:locktype&amp;gt;&amp;lt;a:write/&amp;gt;&amp;lt;/a:locktype&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:owner&amp;gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;AuthorA&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&amp;lt;/a:owner&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:lockinfo&amp;gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;WebDAV에서 사용하는 XML의 스킴은 &lt;a href=&quot;http://www.webdav.org/specs/rfc4918.xml#xml.element.definitions&quot;&gt;링크&lt;/a&gt;를 남깁니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1923-webdav-헤더&quot;&gt;19.2.3. WebDAV 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;WebDAV에선 아래와 같은 7개의 HTTP 헤더를 추가했습니다.
    &lt;ul&gt;
      &lt;li&gt;DAV : WevDAV를 제공하는 서버와 통신시 사용.&lt;/li&gt;
      &lt;li&gt;Depth : 계층 구조로 분류된 리소스에 사용&lt;/li&gt;
      &lt;li&gt;Destination : COPY, MOVE 메서드에서 목적지 URI를 지정할때 사용&lt;/li&gt;
      &lt;li&gt;If : COPY, PUT, LOCK과 같은 메서드에서 조건부 요청을 할 때 사용&lt;/li&gt;
      &lt;li&gt;Lock-Token : 해제 해야할 잠금을 명시. UNLOCK 메서드에서 사용&lt;/li&gt;
      &lt;li&gt;Overwrite : COPY, MOVE 메서드에서 사용&lt;/li&gt;
      &lt;li&gt;Timeout : 클라이언트가 필요한 잠금 타임아웃 값을 기술&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;각 헤더에 대한 상세 사항은 &lt;a href=&quot;http://www.webdav.org/specs/rfc4918.xml#http.headers.for.distributed.authoring&quot;&gt;링크&lt;/a&gt;를 남깁니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1924-webdav-잠금과-덮어쓰기-방지&quot;&gt;19.2.4. WebDAV 잠금과 덮어쓰기 방지&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;하나의 파일을 여러 명이 같이 작업할 땐 항상 충돌의 우려가 있습니다.&lt;/li&gt;
  &lt;li&gt;충돌에 관한 문제를 해결하기 위해선 형상관리 툴의 도움을 받아야 합니다.&lt;/li&gt;
  &lt;li&gt;하지만 초기 웹 개발에선 단순히 한 사용자가 파일을 사용할 때 파일을 잠그고, 사용이 끝나면 잠금을 푸는 방식으로 충돌을 막았습니다.&lt;/li&gt;
  &lt;li&gt;잠금의 방법엔 두가지가 있습니다.
    &lt;ul&gt;
      &lt;li&gt;배타적 쓰기 잠금 : 파일을 잠근 한 사용자만 파일을 쓸 수 있습니다.&lt;/li&gt;
      &lt;li&gt;공유된 쓰기 잠금 : 한 그룹만이 하나의 파일을 쓸 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;잠금을 구현하기 위해선 LOCK, UNLOCK 메서드와 저자 식별 알고리즘이 필요합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1925-lock-메서드&quot;&gt;19.2.5. LOCK 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;하나의 LOCK 요청으로 하나 이상의 리소스를 잠글 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;LOCK 요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LOCK /ch-publish.fm HTTP/1.1
Host: minstar
Content-Type: text/xml
User-Agent: Mozilla/4.0 (compatible; MSIE 5.0; Windows NT)
Content-Length: 201
  
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockinfo&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockscope&amp;gt;&amp;lt;a:exclusive/&amp;gt;&amp;lt;/a:lockscope&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:locktype&amp;gt;&amp;lt;a:write/&amp;gt;&amp;lt;/a:locktype&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:owner&amp;gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;AuthorA&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&amp;lt;/a:owner&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:lockinfo&amp;gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;각 xml 태그가 무얼 의미하는 지는 &lt;a href=&quot;http://www.webdav.org/specs/rfc4918.xml#xml.element.definitions&quot;&gt;여기&lt;/a&gt;를 참고해주세요.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 요청이 성공하면 아래와 같은 응답을 볼 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Server: Microsoft-IIS/5.0
Date: Fri, 10 May 2002 20:56:18 GMT
Content-Type: text/xml
Content-Length: 419
  
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:prop&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockdiscovery&amp;gt;&amp;lt;a:activelock&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:locktype&amp;gt;&amp;lt;a:write/&amp;gt;&amp;lt;/a:locktype&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:lockscope&amp;gt;&amp;lt;a:exclusive/&amp;gt;&amp;lt;/a:lockscope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:owner&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;AutherA&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&amp;lt;/a:owner&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:locktoken&amp;gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;opaquelocktoken:*****&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&amp;lt;/a:locktoken&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:depth&amp;gt;&lt;/span&gt;0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:depth&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:timeout&amp;gt;&lt;/span&gt;Second-180&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:timeout&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:activelock&amp;gt;&amp;lt;/a:lockdiscovery&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:prop&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위의 각 xml 태그가 의미하는 바는 위의 링크를 참고해주시고, 중요한 건 &lt;strong&gt;opaquelocktoken&lt;/strong&gt; 값입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;opaquelocktoken 스킴&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;잠금이 성공하면 서버는 opaquelocktoken값을 돌려줍니다.&lt;/li&gt;
  &lt;li&gt;opaquelocktoken는 모든 리소스에 대해 유일한 토큰 값을 가집니다.&lt;/li&gt;
  &lt;li&gt;UUID(universal unique identifier) 메커니즘을 통해 만들어지는 값입니다.&lt;/li&gt;
  &lt;li&gt;해당 값을 이용해 잠금한 사용자만이 UNLOCK을 하고 수정한 파일을 저장하게 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1926-unlock-메서드&quot;&gt;19.2.6. UNLOCK 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;UNLOCK 메서드는 잠긴 하나 이상의 리소스의 잠금을 해제 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;UNLOCK을 하기 위해선 다이제스트 인증에 성공해야 하고, Lock-Token 헤더에 보낸 opaquelocktoken 가 맞아야 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래는 UNLOCK 요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;UNLOCK /ch-publish.fm HTTP/1.1
Host: minstar.inktomi.com
User-Agent: Mozilla/4.0 (compatible; MSIE 5.0; Windows NT)
Lock-Token:
opaquelocktoken:*********
  
HTTP/1.1 204 OK
Server: Microsoft-IIS/5.0
Date: Fri, 10 May 2002 20:56:18 GMT 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;UNLOCK이 성공했다면 204 No Content 상태 코드를 받게 됩니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1927-속성과-meta-데이터&quot;&gt;19.2.7. 속성과 META 데이터&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;하나의 리소스에는 많은 속성이 있습니다.&lt;/li&gt;
  &lt;li&gt;그 중, 문서가 편집될 때 마다 자주 변하는 속성을 live 속성이라고 하고, Content-Type같이 거의 변하지 않는 속성을 dead 속성이라고 합니다.&lt;/li&gt;
  &lt;li&gt;WebDAV에선 리소스의 속성을 다루기 위해 PROPFIND 메서드와 PROPPATCH 메서드를 지원합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1928-propfind-메서드&quot;&gt;19.2.8. PROPFIND 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;PROPFIND는 파일이나 파일 그룹(주로 디렉토리)의 속성을 읽는 데 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;PROPFIND는 아래 세 가지 동작을 지원합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;모든 속성과 그 값을 요청합니다.&lt;/li&gt;
      &lt;li&gt;선택된 속성과 그 값의 집합을 요청합니다.&lt;/li&gt;
      &lt;li&gt;모든 속성의 이름을 요청합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래는 모든 속성과 값을 요청하는 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PROPFIND /ch-publish.fm HTTP/1.1
Host: minstar.inktomi.com
User-Agent: Mozilla/4.0 (compatible; MSIE 5.0; Windows NT)
Depth: 0
Cache-Control: no-cache
Connection: Keep-Alive
Content-Length: 0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 요청에 대해선 아래와 같은 응답이 올 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 207 Multi-Status
Server: Microsoft-IIS/5.0
  
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:multistatusxmlns:b&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;urn:uuid:********&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:c=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xml:&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:response&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;http://minstar/ch-publish.fm &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:propstat&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:status&amp;gt;&lt;/span&gt;HTTP/1.1 200OK&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:status&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:prop&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:getcontentlength&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;b:dt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;int&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;1155&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:getcontentlength&amp;gt;&lt;/span&gt;
     					:
     					:
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:ishidden&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;b:dt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;boolean&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:ishidden&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;a:iscollection&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;b:dt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;boolean&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:iscollection&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:prop&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:propstat&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:response&amp;gt;&amp;lt;/a:multistatus&amp;gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1929-proppatch-메서드&quot;&gt;19.2.9. PROPPATCH 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;PROPPATCH 메서드는 속성을 설정하거나 제거하는데 사용됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음은 ‘owner’라는 속성을 설정(set)하고 제거(remove)하기 위한 xml 본문입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;d:propertyupdate&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:d=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:o=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://namespace/scheme/&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;d:set&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;d:prop&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;o:owner&amp;gt;&lt;/span&gt;Author A&lt;span class=&quot;nt&quot;&gt;&amp;lt;/o:owner&amp;gt;&lt;/span&gt; 
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/d:prop&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/d:set&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;d:remove&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;d:prop&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;o:owner/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/d:prop&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/d:remove&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/d:propertyupdate&amp;gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19210-콜렉션과-이름공간-관리&quot;&gt;19.2.10. 콜렉션과 이름공간 관리&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;콜렉션은 리소스들의 논리적 혹은 물리적 그룹입니다.&lt;/li&gt;
  &lt;li&gt;디렉토리가 콜렉션의 한 예라고 볼 수 있습니다.&lt;/li&gt;
  &lt;li&gt;WebDAV의 XML 스킴에선 namespace를 제공합니다.
    &lt;ul&gt;
      &lt;li&gt;namespace를 통해 콜렉션간 충돌이 생기지 않게 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;WebDAV에선 namespace를 제어하는 다섯 가지 메서드를 제공합니다.
    &lt;ul&gt;
      &lt;li&gt;DELETE, MKCOL, COPY, MOVE, PROPFIND&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19211-mkcol-메서드&quot;&gt;19.2.11. MKCOL 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;MKCOL은 지정된 URL에 해당하는 콜렉션을 서버에 생성합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;콜렉션을 생성하는 일은 PUT이나 POST 메서드를 통해서도 가능하지만, 아래와 같은 이유로 MKCOL메서드가 새로 정의되었습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;PUT, POST를 사용하려면 요청안에 추가적인 정보를 더하는 식으로 요청해야 합니다. 이렇게 매 요청마다 즉석으로 프로토콜을 수정하는건 번거롭고 오류를 내기 쉽습니다.&lt;/li&gt;
      &lt;li&gt;대부분의 접근 제어 메커니즘은 메서드 타입에 기반합니다. 다른 메서드들을 본래 용도와 다르게 사용하면 접근 제어 메커니즘은 잘 동작하지 않습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MKCOL /publishing HTTP/1.1
Host: minstar
Content-Length: 0
Connection: Keep-Alive 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;응답의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 201 Created
Server: Microsoft-IIS/5.0
Date: Fri, 10 May 2002 23:20:36 GMT
Location: http://minstar/publishing/
Content-Length: 0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19212-delete-메서드&quot;&gt;19.2.12. DELETE 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;DELETE 메서드는 기존 HTTP의 DELETE 메서드에 Depth 헤더를 추가했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Depth 헤더를 추가한 이유는 디렉토리를 삭제하기 위해서 입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DELETE /publishing HTTP/1.0
Host: minstar 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;성공시 응답의 예시 입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Server: Microsoft-IIS/5.0
Date: Tue, 14 May 2002 16:41:44 GMT
Content-Location: http://minstar/publishing/
Content-Type: text/xml
Content-Length: 0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;제거를 시도할 때, 해당 리소스가 잠겨있다면 아래와 같은 응답을 받게 됩니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 207 Multi-Status
Server: Microsoft-IIS/5.0
Content-Location: http://minstar/publishing/
  
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:multistatus&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:a=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DAV:&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:response&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:href&amp;gt;&lt;/span&gt;http://minstar/index3/ch-publish.fm&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:href&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a:status&amp;gt;&lt;/span&gt; HTTP/1.1 423 Locked &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:status&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:response&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a:multistatus&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;400대의 에러코드가 아닌 207 Multi-status 임을 주의합시다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;xml status 태그 아래 423 Locked 라는 상태 정보가 주어졌습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19213-copy와-move-메서드&quot;&gt;19.2.13. COPY와 MOVE 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;COPY 메서드와 MOVE 메서드 역시 MKCOL 메서드 처럼 GET과 POST를 조합해 구현할 수 있지만 그렇게 하지 않습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;COPY, MOVE 메서드는 요청 URL을 원본의 위치, Destination 헤더를 목적지 URL로 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;MOVE 메서드는 COPY 후 새로 생성된 URI 무결성 검사, 원본 삭제가 이루어집니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;요청의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{COPY,MOVE} /publishing HTTP/1.1
Destination: http://minstar/pub-new
Depth: infinity
Overwrite: T
Host: minstar 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;응답의 예시입니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 201 Created
Server: Microsoft-IIS/5.0
Date: Wed, 15 May 2002 18:29:53 GMT
Location: http://minstar.inktomi.com/pub-new/
Content-Type: text/xml
Content-Length: 0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Depth 헤더를 지정하지 않을시 infinity로 간주합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Overwrite 헤더는 T, F가 가능합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;잠겨있는 리소스는 COPY, MOVE가 금지됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;잠겨있는 콜렉션 아래로 COPY, MOVE가 되면 COPY, MOVE된 리소스도 잠기게 됩니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19214-향상된-http11-메서드&quot;&gt;19.2.14. 향상된 HTTP/1.1 메서드&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 WebDAV에선 HTTP 메서드중 DELETE, PUT, OPTIONS을 수정했다고 했습니다.&lt;/li&gt;
  &lt;li&gt;DELETE는 콜렉션을 하면서 살펴보았고, PUT과 OPTIONS에 대해 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;PUT 메서드&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;WebDAV에서 저작자가 파일을 서버에 전송하는 유일한 방법은 PUT 메서드를 사용하는 것입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;WebDAV에선 잠금을 지원하기 위해 PUT 메서드를 수정했습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;If 헤더를 추가했습니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PUT /ch-publish.fm HTTP/1.1
Accept: */*
If:&lt;span class=&quot;nt&quot;&gt;&amp;lt;http:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;minstar&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;htm&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;(&lt;span class=&quot;nt&quot;&gt;&amp;lt;opaquelocktoken:&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;********&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;)
User-Agent: DAV Client (C)
Host: minstar.inktomi.com
Connection: Keep-Alive
Cache-Control: no-cache 
Content-Length: 1155 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;OPTIONS 메서드&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP의 OPTIONS는 서버에서 가능한 메서드를 알려달라는 요청입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;WebDAV에서의 OPTIONS는 해당 리소스에 대해 어떤 메서드가 가능한지 알려달라는 요청입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같이 요청합니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;OPTIONS /ch-publish.fm HTTP/1.1
Accept: */*
Host: minstar.inktomi.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같은 응답을 받습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Server: Microsoft-IIS/5.0
MS-Author-Via: DAV
DASL: &amp;lt;DAV:sql&amp;gt;
DAV: 1, 2
Public: OPTIONS, TRACE, GET, HEAD, DELETE, PUT, POST, COPY, MOVE, MKCOL,PROPFIND, PROPPATCH, LOCK, UNLOCK, SEARCH
Allow: OPTIONS, TRACE, GET, HEAD, DELETE, PUT, COPY, MOVE, PROPFIND,PROPPATCH,SEARCH, LOCK, UNLOCK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DAV 헤더는 Class 1, 2, 3을 지원하는지 알려줍니다. 위 예시에선 Class 1, Class 2를 지원합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Class 1 : &lt;a href=&quot;http://www.webdav.org/specs/rfc4918.xml&quot;&gt;명세&lt;/a&gt;에 기록된 모든 MUST 요구사항을 지원해야 합니다.&lt;/li&gt;
      &lt;li&gt;Class 2 : Class 1의 요구사항에 더해 LOCK 메서드를 지원합니다. LOCK 메서드를 지원하기 위해선 Timeout 헤더, Lock-Token헤더, &amp;lt;supportedlock&amp;gt; xml 태그, &amp;lt;lockdiscovery&amp;gt; xml 태그를 지원해야 합니다.&lt;/li&gt;
      &lt;li&gt;Class 3 : 명세의 모든 요구사항들을 지원합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Public 헤더 : 서버가 지원하는 모든 메서드가 기술되어 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Allow 헤더 : 요청한 리소스에 허락된 메서드들이 기술되어 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DASL 헤더 : SEARCH 메서드에서 사용하는 질의 문법 형식이 기술되어 있습니다. 위 예시에선 sql을 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19215-webdav의-버전-관리&quot;&gt;19.2.15. WebDAV의 버전 관리&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;지금까진 WebDAV의 DAV중 DA(Distributed Authoring)에 대해 알아봤습니다.&lt;/li&gt;
  &lt;li&gt;V(Versioning)은 WevDAV가 처음 생길때 부터 있던건 아닙니다.&lt;/li&gt;
  &lt;li&gt;Versioning은 RFC 3253에서 추가됐는데… 거의 쓰이지 않는 것 같습니다.(책에도 이 내용이 전부입니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;19216-webdav의-미래&quot;&gt;19.2.16. WebDAV의 미래&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;책에서 본 WebDAV의 미래는 밝았지만… :cry:&lt;/li&gt;
  &lt;li&gt;WebDAV의 공식 홈페이지(&lt;a href=&quot;http://www.webdav.org/&quot;&gt;http://www.webdav.org/&lt;/a&gt;) 조차 2009년에 멈춘것 같습니다..&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;지금까지 모든 장들이 어깨너머 적어도 한 두번은 들어본 내용이었다면 이번 장의 FrontPage와 WebDAV는 정말 처음 보는 주제였습니다.&lt;/li&gt;
  &lt;li&gt;그만큼 요즘엔 잘 쓰이지 않는 기술들이라 의욕이 조금 떨어졌지만, 과거의 기술을 알아야 그 기술의 한계와 문제를 해결하기 위해 나온 신기술을 이해할 수 있다고 생각하기에 열심히 알아보았습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 18 - 웹 호스팅</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C18/"/>
   <updated>2020-03-30T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드18</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;웹 호스팅이란 콘텐츠 리소스를 저장, 중개, 관리하는 일을 통틀어 이르는 말입니다.&lt;/li&gt;
  &lt;li&gt;웹 리소스를 직접 호스팅 할 수도 있지만 호스팅에 필요한 하드웨어, 소프트웨어를 관리해주는 호스팅 업체를 이용할 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;이번 장에선 웹 호스팅 서비스와 관련한 사항들을 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;181-호스팅-서비스&quot;&gt;18.1. 호스팅 서비스&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;웹의 초기엔 대부분 각 회사가 직접 하드웨어와 소프트웨어를 구비해 자체 웹 서버를 구축했습니다.&lt;/li&gt;
  &lt;li&gt;하지만 웹이 발전하며 이를 대신해주는 웹 호스팅 업체들이 등장했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1811-간단한-예--전용-호스팅&quot;&gt;18.1.1. 간단한 예 : 전용 호스팅&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;전용 호스팅이란 말 그대로 한 호스팅 의뢰자에게 하나의 서버를 전용으로 배정해주는 것입니다.&lt;/li&gt;
  &lt;li&gt;호스팅업체 A에 호스팅 의뢰인 A, B가 호스팅을 맡겼다면, 의뢰인 A와 B에게 각각 서버와 IP가 할당됩니다.&lt;/li&gt;
  &lt;li&gt;의뢰인 A의 도메인은 의뢰인 A의 IP로 연결이 되고 의뢰인 B의 도메인은 의뢰인 B의 IP로 연결이 됩니다.&lt;/li&gt;
  &lt;li&gt;웹이 점점 커지며 이런 전용 호스팅 방식은 단점을 많이 보였습니다.
    &lt;ul&gt;
      &lt;li&gt;우선 의뢰인들에게 각각 하드웨어와 서버를 배정하니 비용이 높습니다.&lt;/li&gt;
      &lt;li&gt;그리고 각 웹 사이트들은 항상 운용되는게 아니기 때문에 의뢰인들의 서버들은 놀고 있는 시간이 많이 생깁니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이를 해결하기 위해 하나의 서버에 여러 사이트를 제공하는 가상 호스팅이 등장합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;182-가상-호스팅&quot;&gt;18.2. 가상 호스팅&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;가상 호스팅은 하나의 서버에서 여러 사이트를 호스팅 하는 것입니다.
    &lt;ul&gt;
      &lt;li&gt;쉽게 말해, 다른 도메인을 가지고 있는 두 사이트가 실제로 같은 IP를 갖고 있는 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;가상 호스팅된 여러 웹 사이트들은 각각 다른 서버에서 호스팅 되는 것 처럼 보이지만 사실 물리적으로 같은 서버에서 호스팅 되고 있습니다.&lt;/li&gt;
  &lt;li&gt;클라이언트의 입장에선 이용중인 사이트가 가상 호스팅된 사이트인지 느낄 수 없습니다.&lt;/li&gt;
  &lt;li&gt;가상 호스팅은 업체들은 한 서버에 수백, 수천개의 웹 사이트를 호스팅 합니다.
    &lt;ul&gt;
      &lt;li&gt;실제 한 PC에 수천대를 호스팅하는건 아니고 서버 팜을 만들어 각 서버에 부하를 분산시킵니다.(20장에서 자세히 알아봅니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1821-호스트-정보가-없는-가상-서버-요청&quot;&gt;18.2.1. 호스트 정보가 없는 가상 서버 요청&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;이런 가상 호스팅은 HTTP/1.0 환경에선 문제가 많았습니다.&lt;/li&gt;
  &lt;li&gt;본 책의 초반부분에서 설명했듯이 HTTP/1.0은 URL의 호스트명을 보내지 않고 경로 컴포넌트만 전송합니다.
    &lt;ul&gt;
      &lt;li&gt;http://www.joes-hardware.com/index.html 을 HTTP/1.0으로 전송하면 브라우저는 www.joes-hardware.com과 커넥션을 맺지만 실제로 가는 요청은 “GET /index.html”이 전부입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이와 같은 상황에서 만약 한 호스팅 업체에 www.joes-hardware.com과 www.marys-antiques.com이 호스팅 되어 있다고 가정합시다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 http://www.joes-hardware.com/index.html 를 브라우저에 입력해 브라우저가  www.joes-hardware.com에 커넥션을 맺고 “GET /index.html”을 보냈지만 호스팅하고 있는 서버의 입장에선 /index.html이  www.joes-hardware.com의 것인지, www.marys-antiques.com의 것인지 판별할 수 없습니다.&lt;/li&gt;
  &lt;li&gt;위와 같은 상황이 발생한건 HTTP의 설계자들이 가상 호스팅이 일어날 것이라고 생각하지 못했기 때문입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1822-가상-호스팅-동작하게-하기&quot;&gt;18.2.2. 가상 호스팅 동작하게 하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;위 상황을 해결하기 위해 차선책과 새로운 컨벤션을 개발해야 했습니다.&lt;/li&gt;
  &lt;li&gt;이 문제를 간단히 해결하기 위해선 HTTP 요청에 경로 컴포넌트만이 아니라 완전한 URL을 보내도록 하면 됩니다.
    &lt;ul&gt;
      &lt;li&gt;따라서 HTTP/1.1을 지원하는 서버는 완전한 URL을 처리할 수 있어야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;하지만 이런 새로운 HTTP명세를 따르지 않는 기존의 어플리케이션들을 위해 아래 네 가지 방법 차선책들이 고안됐습니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;URL 경로를 통한 가상 호스팅&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;이 방법은 어떤 사이트를 요청하는것인지 알수 있게 URL에 특별한 경로 컴포넌트를 추가하는 것입니다.&lt;/li&gt;
          &lt;li&gt;예를들어, http://www.joes-hardware.com/index.html 를 http://www.joes-hardware.com/&lt;strong&gt;joe&lt;/strong&gt;/index.html로,  http://www.marys-antiques.com/index.html 를 http://www.marys-antiques.com/&lt;strong&gt;mary&lt;/strong&gt;/index.html로 바꾸는 것입니다.&lt;/li&gt;
          &lt;li&gt;하지만 이 방법은 우리가 생각하는 일반적인 URL과 맞지 않는 좋지 않은 방법입니다. 거의 사용되지 않습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;포트 번호를 통한 가상 호스팅&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;호스팅 하고 있는 각 웹 사이트에 다른 포트 번호를 할당하면 해당 문제를 해결할 수 있습니다.&lt;/li&gt;
          &lt;li&gt;하지만, 그렇다면 사용자가 항상 URL에 포트번호를 표기해야 하기 때문에 이 역시 잘 사용되지 않습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;IP 주소를 통한 가상 호스팅&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;가장 많이 사용되는 방법은 각 사이트에 가상 IP를 할당하는 것입니다.&lt;/li&gt;
          &lt;li&gt;www.joes-hardware.com와 www.marys-antiques.com가 실제로 가리키는 IP를 구분하는 것입니다.&lt;/li&gt;
          &lt;li&gt;각 가상 IP들은 사이트들을 호스팅하고 있는 실제 서버로 연결됩니다.&lt;/li&gt;
          &lt;li&gt;이렇게 가상 IP를 사용하는 방법은 규모가 커지면 다음과 같은 문제가 발생할 수 있습니다.
            &lt;ul&gt;
              &lt;li&gt;한 장비에 연결할 수 있는 IP갯수엔 제한이 있습니다.&lt;/li&gt;
              &lt;li&gt;한 장비를 떠나 IP주소는 희소 상품이기 때문에 가상 IP주소를 충분히 확보하지 못할 수 있습니다.&lt;/li&gt;
              &lt;li&gt;서버를 복제할 시엔 각 복제된 서버에 새로운 IP 주소를 부여해야하기 때문에 일이 더 커집니다.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;이런 문제들이 있지만 가장 많이 사용되는 방법입니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Host 헤더를 통한 가상 호스팅&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;같은 IP주소를 사용하더라도 각 사이트들을 구분할 수 있는 정보를 전달할 수 있다면 가상 호스팅을 사용할 수 있습니다.&lt;/li&gt;
          &lt;li&gt;이를 위해 HTTP를 확장해 HTTP/1.0+ 에서 Host 헤더가 도입되었습니다.&lt;/li&gt;
          &lt;li&gt;또한 HTTP/1.1을 따르는 애플리케이션이라면 Host헤더를 반드시 기술해야 합니다.&lt;/li&gt;
          &lt;li&gt;Host 헤더는 말 그대로 호스트 명을 기술합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1823-http11-host-헤더&quot;&gt;18.2.3. HTTP/1.1 Host 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;현대의 웹에선 가상 호스팅이 매우 흔하기 때문에 모든 HTTP 클라이언트는 Host 헤더를 구현해야 합니다.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;문법과 사용 방법&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Host 헤더엔 호스트와 포트번호를 기술합니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Host : www.joes-hardware.com
Host : www.joes-hardware.com:80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Host헤더에 포트 번호가 없으명 해당 스킴의 기본 포트를 사용합니다.(http의 경우 80, https의 경우 443)&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;URL에 IP주소가 있으면 Host 헤더엔 해당 IP주소를 포함해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;URL에 호스트명이 있으면 Host 헤더엔 해당 호스트명을 포함해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;URL에 호스트명이 있다면, Host 헤더에 해당 호스트명에 할당된 IP주소가 있으면 &lt;strong&gt;안됩니다.&lt;/strong&gt;가상 호스팅의 경우 한 IP가 여러 호스트명을 호스팅하고 있을 수 있기 때문입니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;클라이언트가 프록시 서버를 사용한다면, Host 헤더엔 프록시 서버가 아닌 원 목적지 서버의 호스트명과 포트번호를 기술해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;클라이언트는 모든 요청에 Host 헤더를 기술해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;웹 프록시는 요청을 서버에 전달하기 전에 받았던 Host 헤더를 추가해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;HTTP/1.1 웹 서버는 Host 명이 없는 요청 메세지를 받으면 400 상태코드로 응답해야 합니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;Host 헤더의 누락&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;만약 브라우저가 Host 헤더를 보내지 않는다면 서버는 기본 웹 페이지로 보내거나 브라우저를 업그레이드 하라는 에러 페이지를 반환합니다.&lt;/li&gt;
      &lt;li&gt;이 포스팅이 쓰여지는 현재엔 거의 모든 브라우저가 Host 헤더를 전송합니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;Host 헤더 해석하기&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;가상호스팅을 하지 않는 서버는 Host 헤더를 무시하면 되지만, 가상 호스팅을 하는 서버는 아래와 같은 과정을 거칩니다.
        &lt;ul&gt;
          &lt;li&gt;요청 URL이 완전한 URL이라면 Host 헤더 값은 무시하고 URL에 있는 호스트명을 사용합니다.&lt;/li&gt;
          &lt;li&gt;요청 URL에 호스트명이 없고 Host 헤더가 있다면 Host 헤더를 사용합니다.&lt;/li&gt;
          &lt;li&gt;요청 URL에 호스트명이 없고 Host 헤더도 없다면 400 Bad Request 응답을 반환합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;Host 헤더와 프록시&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;정말 오래됐거나 잘못 만들어진 웹 클라이언트는 가끔 프록시의 주소를 Host 헤더에 담기도 하니 주의해야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;183-안정적인-웹-사이트-만들기&quot;&gt;18.3. 안정적인 웹 사이트 만들기&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;서버는 다운 될 수도 있고 느려질 수도 있으며 서버를 구성하는 네트워크에 장애가 올 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;이번 절에선 이에 대응하는 방법들을 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1831-미러링-된-서버-팜&quot;&gt;18.3.1. 미러링 된 서버 팜&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;서버 팜(서버 클러스터)은 서로를 대신할 수 있는 웹 서버들의 집합입니다.&lt;/li&gt;
  &lt;li&gt;서버 팜에 있는 콘텐츠들은 한 서버에서 문제가 생기면 다른 서버에서 대신 전달할수 있도록 미러링 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;원본 콘텐츠를 가지고 있는 서버를 master origin server 라고 부릅니다.&lt;/li&gt;
  &lt;li&gt;master origin server로 부터 콘텐츠를 받은 미러링된 서버를 replica origin server라고 부릅니다.&lt;/li&gt;
  &lt;li&gt;서버 팜을 이용한다면 다음 그림과 같은 구조를 띄게 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/server_farm.png&quot; alt=&quot;server_farm.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;복제 서버는 스위치를 통해 마스터 서버로 부터 콘텐츠를 미러링 합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 컨텐츠를 요청할때 가리키는 IP는 스위치의 IP 주소입니다.&lt;/li&gt;
  &lt;li&gt;클라이언트의 요청이 서버 팜 안의 여러 서버 중 하나로 가는 방법은 아래와 같습니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP 리다이렉션 : 요청이 마스터 서버로 간뒤 마스터 서버에서 적절한 곳의 복제 서버로 리다이렉트 시킵니다.&lt;/li&gt;
      &lt;li&gt;DNS 리다이렉션 : URL이 4개의 IP주소를 가리킬 수 있고 DNS 서버가 그 중 적절한 IP를 선택해줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;더 자세한 내용은 20 장에서 이어집니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/mirror.png&quot; alt=&quot;mirror.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;이클립스를 다운받을때 가능한 mirror입니다. 가장 가까운 곳을 선택하면 (보통) 더 빠르게 다운 받을 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1832-콘텐츠-분산-네트워크&quot;&gt;18.3.2. 콘텐츠 분산 네트워크&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;콘텐츠 분산 네트워크(CDN)은 콘텐츠의 분산을 목적으로 하는 네트워크 입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1833-cdn의-대리-캐시&quot;&gt;18.3.3. CDN의 대리 캐시&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;대리 캐시는 위에서 살펴본 replica origin server를 대신해 사용될 수 있습니다.&lt;/li&gt;
  &lt;li&gt;대리 캐시는 리버스 프록시라고도 불립니다.&lt;/li&gt;
  &lt;li&gt;대리 캐시와 미러링 된 서버의 차이는 콘텐츠 전체를 가지고 있느냐 입니다. 대리 캐시는 콘텐츠 전체를 가지고 있진 않습니다. 수요에 따라 가지고 있을 컨텐츠를 선택합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1834-cdn의-프록시-캐시&quot;&gt;18.3.4. CDN의 프록시 캐시&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;추후 보강&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;184-웹-사이트-빠르게-만들기&quot;&gt;18.4. 웹 사이트 빠르게 만들기&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 장에서 살펴본 내용들은 모두 웹 사이트를 빠르게 만들기 위한 방법들입니다.&lt;/li&gt;
  &lt;li&gt;서버 팜이나 프록시 캐시, 대리 서버를 사용해 서버의 부하를 낮춰줍니다.&lt;/li&gt;
  &lt;li&gt;콘텐츠를 분산 시켜 콘텐츠를 요청한 사용자에게 더 가까운 곳에서 콘텐츠를 제공해줍니다.&lt;/li&gt;
  &lt;li&gt;앞서 살펴본 방법들 말고도 웹 사이트를 빠르게 하기 위해 콘텐츠를 인코딩 할 수도 있습니다.
    &lt;ul&gt;
      &lt;li&gt;클라이언트가 디코딩 할 수 있다는 가정하에, 콘텐츠를 인코딩해 전송할 용량 자체를 줄일 수도 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;미러링과 CDN 부분은 아직 이해가 좀 부족한 것 같습니다. 조금 더 검토해봐야 할 것 같습니다.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 17 - 내용 협상과 트랜스코딩</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C17/"/>
   <updated>2020-03-27T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드17</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;사용 언어 별로 다른 문서를 주거나, 브라우저별로 다른 자바스크립트를 주어야 하는 등 하나의 URL이 여러 리소스에 대응되야 할 때가 있습니다.&lt;/li&gt;
  &lt;li&gt;이때, 어떤 리소스를 받을 지 클라이언트와 서버가 협상할 수 있습니다. 이를 내용 협상이라고 합니다.&lt;/li&gt;
  &lt;li&gt;한편, 내용 협상 결과로 주어야할 리소스가 이미 존재하는 경우도 있지만 동적으로 생성해야 할 때도 있습니다. 이를 트랜스 코딩이라고 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;171-내용-협상-기법&quot;&gt;17.1. 내용 협상 기법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;내용 협상이란 하나의 URL이 여러 리소스에 대응될 때, 어떤 리소스가 적절한 리소스인지 클라이언트와 서버가 정하는 방법입니다.&lt;/li&gt;
  &lt;li&gt;내용 협상엔 크게 세 가지 방법이 존재 합니다.
    &lt;ul&gt;
      &lt;li&gt;클라이언트 주도 : 서버가 클라이언트에게 선택지를 제공하면 클라이언트가 선택합니다. 서버에서 구현이 쉽고 클라이언트가 가장 원하는 선택을 할 수 있지만 리소스를 얻기위한 대기시간(단계)가 증가합니다.&lt;/li&gt;
      &lt;li&gt;서버 주도 : 클라이언트의 요청헤더를 바탕으로 서버가 리소스를 결정합니다. 클라이언트 주도 협상보다 빠르지만 클라이언트가 원하는 리소스가 없다면 서버가 추측을 해야 하는 상황이 발생합니다.&lt;/li&gt;
      &lt;li&gt;투명 : 투명한 중간 장치(주로 프록시 캐시)가 서버를 대신해 협상합니다. 서버의 부하가 줄어드는게 장점이지만 투명 협상에 대한 명세가 없습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;172-클라이언트-주도-협상&quot;&gt;17.2. 클라이언트 주도 협상&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;서버가 선택 가능한 선택지들을 클라이언트에게 돌려주고 사용자가 직접 선택합니다. 그 방법엔 두 가지가 있습니다.
    &lt;ul&gt;
      &lt;li&gt;여러 버전에 대한 링크와 설명이 담긴 HTML 페이지를 돌려줄 수 있습니다.&lt;/li&gt;
      &lt;li&gt;300 Multiple Choices 응답 코드로 HTTP/1.1 응답을 돌려줍니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서버 입장에선 가장 구현하기 쉽습니다.&lt;/li&gt;
  &lt;li&gt;클라이언트는 가능한 선택지 안에서 최선의 선택을 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;단점은 목록을 보여주고 요청을 다시 받기 때문에 리소스를 받는 과정이 길어집니다.&lt;/li&gt;
  &lt;li&gt;또 다른 단점으론 리소스당 여러 url이 필요합니다.
    &lt;ul&gt;
      &lt;li&gt;영어페이지, 프랑스어 페이지가 존재하는 www.joes-hardware.com를 요청하면 www.joes-hardware.com/english와 www.joes-hardware.com/french 둘을 준비해야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;173-서버-주도-협상&quot;&gt;17.3. 서버 주도 협상&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;서버 주도 협상은 클라이언트가 선호하는 옵션을 같이 요청합니다.
    &lt;ul&gt;
      &lt;li&gt;Accept 관련 헤더인 내용 협상 헤더를 사용합니다.&lt;/li&gt;
      &lt;li&gt;User-Agent와 같은 내용 협상 헤더 외 다른 헤더를 사용합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서버는 위 헤더들을 파악해 클라이언트가 원하는 리소스를 돌려줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1731-내용-협상-헤더&quot;&gt;17.3.1. 내용 협상 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;내용 협상 헤더엔 아래와 같은 것들이 있습니다.&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;헤더&lt;/th&gt;
          &lt;th&gt;설명&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Accept&lt;/td&gt;
          &lt;td&gt;서버가 어떤 미디어 타입으로 보내도 되는지 알려줍니다.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Accept-Language&lt;/td&gt;
          &lt;td&gt;서버가 어떤 언어로 보내도 되는지 알려줍니다.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Accept-Charset&lt;/td&gt;
          &lt;td&gt;서버가 어떤 charset으로 보내도 되는지 알려줍니다.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Accept-Encoding&lt;/td&gt;
          &lt;td&gt;서버가 어떤 인코딩으로 보내도 되는지 알려줍니다.&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;앞 장들에서 살펴본 Content로 시작하는 엔터티 헤더와 각각 대응됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 매 요청마다 선호 정보를 다시 보내야 합니다.(HTTP는 Stateless 하기 때문입니다.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;각 헤더엔 1개의 선호가 아니라 여러 선호를 담을 수 있습니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Accept-Language : ko, en, fr&lt;/li&gt;
      &lt;li&gt;이때, 각 선호에 quality value (앞으로 q값이라 칭함)를 주어 선호의 정도를 나타낼 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1732-내용-협상-헤더의-품질값quality-value-q값&quot;&gt;17.3.2. 내용 협상 헤더의 품질값(quality value, q값)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Language : en;q=0.5, fr;q=0.0, nl;q=1.0, tr;q=0.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;0.0은 선호하지 않음, 1.0은 가장 선호함입니다.&lt;/li&gt;
  &lt;li&gt;위 헤더는 프랑스어(fr), 터키어(tr)는 원하지 않고 영어(en)는 받아들일 수 있으며 네더란드어(nl)를 가장 선호한다는 뜻입니다.&lt;/li&gt;
  &lt;li&gt;한편, 서버에 클라이언트가 선호하는 버전이 없을 수 있습니다. 이 때 서버는 기본 문서를 주거나 클라이언트의 선호에 맞추기 위해 트랜스코딩을 할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1733-그-외의-헤더들에-의해-결정&quot;&gt;17.3.3. 그 외의 헤더들에 의해 결정&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;브라우저의 종류와 같이 리소스별로 따로 관리해야 하지만 내용 협상 헤더엔 담길 수 없는 것들이 있습니다.&lt;/li&gt;
  &lt;li&gt;이땐 User-Agent와 같은 내용 협상 헤더 외의 헤더를 사용할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;이 헤더들에선 q값을 사용할 수 없습니다.&lt;/li&gt;
  &lt;li&gt;한편, 캐시를 이용하기 위해 Vary 헤더를 이용하기도 합니다.
    &lt;ul&gt;
      &lt;li&gt;Vary 헤더는 서버가 응답시에 추가하는 헤더입니다.&lt;/li&gt;
      &lt;li&gt;Vary 헤더는 서버가 어떤 요청 헤더를 참고하고 해당 리소스를 응답해줬는지 말해줍니다.&lt;/li&gt;
      &lt;li&gt;캐시가 요청을 받는 상황이라면 Vary헤더를 통해 클라이언트의 요청에 맞춰 캐시된 리소스를 돌려줄 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1734-아파치의-내용-협상&quot;&gt;17.3.4. 아파치의 내용 협상&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;많이 사용되는 웹 서버인 아파치에서 내용 협상을 구현하기 위해선 각 버전에 해당하는 파일을 적절한 디렉터리에 넣어줘야 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;그 후 아래 둘 중 하나의 방법으로 내용 협상을 진행할 수 있습니다.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;type-map 파일 사용하기&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;type-map 파일은 내용 협상 헤더의 내용과 협상 결과 돌려줘야할 리소스를 맵핑해줍니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;type-map 파일을 사용하기 위해선 우선 서버 설정 파일에 type-map 파일들을 위한 설정을 해야 합니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddHandler type-map .var
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;위 설정은 .var 확장자를 가진 파일들이 type-map임을 뜻합니다.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;type-map 파일은 다음과 같이 이루어져 있습니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;URI: joes-hardware.html
    
URI: joes-hardware.en.html
Content-type: text/html
Content-language: en
    
URI: joes-hardware.fr.de.html
Content-type: text/html;charset=iso-8859-2
Content-language: fr, de 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;위와 같이 구성하면 아파치가 내용 협상 헤더를 읽어 적절한 콘텐츠로 맵핑해줍니다.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;MultiViews 사용하기&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;MultiViews는 아파치에서 사용자가 설정해 놓은 디렉터리 구조에 맞게 type-map 파일을 생성하도록 하는 지시어입니다.&lt;/li&gt;
      &lt;li&gt;MultiViews를 사용하기 위해선 access.conf 파일에서 Options 지시어를 이용해 설정해 놓은 디렉터리에 MultiViews 옵션을 활성화시켜야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아파치서버의 내용 협상에 대한 더 자세한 사항은 &lt;a href=&quot;https://httpd.apache.org/docs/2.4/content-negotiation.html&quot;&gt;https://httpd.apache.org/docs/2.4/content-negotiation.html&lt;/a&gt;를 참고하면 좋을 것 같습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1735-서버-측-확장&quot;&gt;17.3.5. 서버 측 확장&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;서버 주도 협상의 다른 방법으로 ASP 와 같은 서버 측 확장을 하는 방법도 있습니다.&lt;/li&gt;
  &lt;li&gt;이는 8장에서 다뤄보았었습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;174-투명-협상&quot;&gt;17.4. 투명 협상&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;투명 협상은 캐시 프록시에서 진행되는 협상입니다.&lt;/li&gt;
  &lt;li&gt;투명 협상을 이용하면 클라이언트와 메세지 교환 횟수(클라이언트 측 협상의 단점)를 줄이는 동시에 서버의 부하(서버 측 협상의 단점)를 막을 수 있습니다.&lt;/li&gt;
  &lt;li&gt;프록시가 내용 협상을 하기 위해선 클라이언트의 요청 중 어느 헤더를 살펴봐야하는 지를 알아야 합니다.&lt;/li&gt;
  &lt;li&gt;이를 위해 서버는 캐시 프록시에게 Vary 헤더를 포함시킨 응답을 줍니다. 프록시는 Vary헤더를 통해 어떤 헤더를 검사해야 하는 지 알 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1741-캐시와-얼터네이트alternate&quot;&gt;17.4.1. 캐시와 얼터네이트(alternate)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;캐시 안 같은 문서에 대해 영어버전 문서, 프랑스어 버전 문서가 있다고 가정합시다.&lt;/li&gt;
  &lt;li&gt;이 다른 버전을 배리언트(variant) 혹은 얼터네이트(alternate)라고 부릅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1742-vary-헤더&quot;&gt;17.4.2. Vary 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;캐시는 여러 얼터네이트중 올바른 문서를 클라이언트에게 돌려주어야 합니다.&lt;/li&gt;
  &lt;li&gt;올바른 문서를 찾기 위해선 어떤 조건에서(어떤 헤더를 보고) 서버가 해당 문서를 돌려주었는지 알아야 합니다.&lt;/li&gt;
  &lt;li&gt;이를 알려주는게 Vary 헤더입니다. 서버는 내용 협상결과 문서를 돌려줄때 Vary 헤더에 자신이 검사한 헤더를 나열해줍니다.&lt;/li&gt;
  &lt;li&gt;캐시는 클라이언트의 요청이 왔을때 Vary 헤더에 있는 헤더들을 검사해 맞는 얼터네이트를 찾습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/vary_header.png&quot; alt=&quot;vary_header.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;위 그림은 캐시된 아파치 문서를 가져올때 어떤 헤더들을 고려했는지를 보여줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;175-트랜스코딩&quot;&gt;17.5. 트랜스코딩&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;지금까지의 내용 협상은 방법이 어찌됐든 협상 결과 돌려줄 문서가 이미 존재해야 했습니다.&lt;/li&gt;
  &lt;li&gt;하지만 모든 웹 페이지들이 한국어 버전을 준비해놓지는 않는 것 처럼, 클라이언트가 요청한 버전의 문서가 없을 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;이럴땐 기존의 문서를 클라이언트의 요청에 맞게 바꾸는 트랜스코딩 과정을 거칠 수 있습니다.&lt;/li&gt;
  &lt;li&gt;아래는 트랜스코딩의 예시입니다.
    &lt;ul&gt;
      &lt;li&gt;HTML문서 → WML문서&lt;/li&gt;
      &lt;li&gt;고해상도 이미지 → 저해상도 이미지&lt;/li&gt;
      &lt;li&gt;64K색 이미지 → 흑백 이미지&lt;/li&gt;
      &lt;li&gt;프레임, 이미지 등을 포함한 복잡한 페이지 → 프레임, 이미지 등이 없는 단순 텍스트 페이지&lt;/li&gt;
      &lt;li&gt;자바 애플릿이 있는 HTML 페이지 → 자바 애플릿이 없는 페이지&lt;/li&gt;
      &lt;li&gt;광고가 있는 페이지 → 광고가 없는 페이지&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;트랜스코딩엔 크게 아래 세 가지가 있습니다.
    &lt;ul&gt;
      &lt;li&gt;포맷 변환&lt;/li&gt;
      &lt;li&gt;정보 합성&lt;/li&gt;
      &lt;li&gt;콘텐츠 주입&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1751-포맷-변환&quot;&gt;17.5.1. 포맷 변환&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;포맷 변환은 말 그대로 컨텐츠의 포맷을 바꾸어주는 것입니다.&lt;/li&gt;
  &lt;li&gt;HTML 페이지를 WML 페이지로 바꾸는 것 등이 포맷 변환 트랜스 코딩의 예시 입니다.&lt;/li&gt;
  &lt;li&gt;포맷 변환은 주로 내용 협상 헤더에 의해 주도됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1752-정보-합성information-synthesis&quot;&gt;17.5.2. 정보 합성(information synthesis)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;정보 합성은 한 문서에서 정보의 요점들을 추출하는 것을 말합니다.&lt;/li&gt;
  &lt;li&gt;문서에서 각 절의 제목에 기반해 요약된 문서를 만드는 등이 그 예시입니다.&lt;/li&gt;
  &lt;li&gt;각 문서들의 주요 키워드를 뽑아 페이지들을 분류하는 등 포털 사이드에서도 종종 쓰입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1753-콘텐츠-주입&quot;&gt;17.5.3. 콘텐츠 주입&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;광고가 없는 페이지에 광고를 삽입하는 등의 콘텐츠 주입 역시 트랜스 코딩의 한 예시입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1754-트랜스코딩-vs-정적으로-미리-생성해놓기&quot;&gt;17.5.4. 트랜스코딩 vs 정적으로 미리 생성해놓기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;그렇다면 한 가지 의문이 생길 수 있습니다.&lt;/li&gt;
  &lt;li&gt;트랜스코딩으로 만들어 질 수 있는 콘텐츠들을 미리 생성해 두면 응답 시간을 더 줄일 수 있지 않을까 하는 의문입니다.&lt;/li&gt;
  &lt;li&gt;물론, 서버가 넉넉하다면 그럴 수 있겠지만 모든 서버에는 비용에 제약이 있습니다.&lt;/li&gt;
  &lt;li&gt;트랜스코딩이 될 수 있는 모든 콘텐츠를 미리 생성해 놓는 것은 서버의 공간을 낭비하게 됩니다.(특히 자주 안쓰이는 콘텐츠라면 더욱더)&lt;/li&gt;
  &lt;li&gt;또한 미리 생성해 놓는 방식은 원본 콘텐츠가 조금이라도 변경되면 모든 얼터네이트들을 다시 생성해야 합니다.&lt;/li&gt;
  &lt;li&gt;한편, 트랜스코딩은 서버 외부의 프록시 등에서도 이루어질 수 있기 때문에 자주 요청되는 문서가 아니라면 트랜스 코딩을 통해 서버의 부하를 줄이고 서버를 효율적으로 운용할 수 있게 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

</content>
 </entry>
 
 <entry>
   <title>HTTP 16 - 국제화</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C16/"/>
   <updated>2020-03-25T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드16</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP가 전세계적으로 사용되기 위해선 여러 이슈들이 존재하지만 그중 주요한 두 가지가 ‘문자집합 인코딩’과 ‘언어 태그’입니다.&lt;/li&gt;
  &lt;li&gt;이번 장에선 다음과 같은 내용을 알아볼 것입니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP가 어떻게 여러 언어 문자 체계 및 표준과 상호작용 하는지&lt;/li&gt;
      &lt;li&gt;문자 인코딩에 관련한 용어, 기술, 표준&lt;/li&gt;
      &lt;li&gt;언어를 위한 표준 명명 체계 및 표준화된 언어 태그가 어떻게 콘텐츠를 서술하는 지&lt;/li&gt;
      &lt;li&gt;국제화된 URI의 규칙과 주의사항&lt;/li&gt;
      &lt;li&gt;날짜 및 그외 국제화 관련 이슈&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;161-국제적인-콘텐츠를-다루기-위해-필요한-http-지원&quot;&gt;16.1. 국제적인 콘텐츠를 다루기 위해 필요한 HTTP 지원&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP의 엔터티 본문은 사실 0, 1로 가득찬 덩어리에 불과합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이 0,1의 덩어리들이 각 클라이언트들가 원하는 문자와 언어를 통해 보여지도록 만들어야 합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;서버는 클라이언트 프로그램에게 보낸 문서의 문자와 언어를 Content-Type charset 매개변수와 Content-Language 헤더를 통해 알려줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 서버에게 자신이 어떤 언어를 이해할 수 있고 선호하는 지 Accept-Charset과 Accept-Language 헤더를 통해 알려줍니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Language: fr, en;q=0.8
Accept-Charset: iso-8859-1, utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;위 예시는 프랑스어와 영어를 이해할 수 있으며 각 선호도는 1.0(기본값), 0.8이고, 문자집합은 iso-8859-1과 utf-8을 이해할 수 있다는 뜻입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;162-문자집합과-http&quot;&gt;16.2. 문자집합과 HTTP&lt;/h3&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;1621-charset은-글자를-비트로-변환하는-인코딩이다&quot;&gt;16.2.1. Charset은 글자를 비트로 변환하는 인코딩이다.&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Charset은 특정 문자 체계의 문자 &amp;lt;-&amp;gt; 비트 둘을 연결해주는 것입니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;11101010 10110000 10000000 &amp;lt;-&amp;gt; 가
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;비트 11101010 10110000 10000000를 utf-8로 변환하면 한글 ‘가’가 됩니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Charset 태그는 MIME 문자집합에 표준화되어 있고, IANA가 관리합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Charset은 Content-Type 헤더에 매개변수로 들어갑니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type: text/html; charset=utf8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1622-문자집합과-인코딩은-어떻게-동작하는가&quot;&gt;16.2.2. 문자집합과 인코딩은 어떻게 동작하는가&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;비트가 특정 문자체계의 문자로 디코딩 되는 과정은 다음과 같습니다.&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;비트를 인코딩된 문자집합에 따라 일정 단위로 끊어 문자 코드로 변환합니다.(문자집합에 따라 1글자를 몇 바이트로 계산하는지가 달라지며, 일부 문자집합은 가변적으로 계산하기도 합니다.)&lt;/p&gt;

        &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... 11100001 ... -[iso-8859-6]-&amp;gt; 225
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;문자 집합에서 해당 문자 코드가 어떤 문자를 갖는지 찾습니다.&lt;/p&gt;

        &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;225 -[iso-8859-6]-&amp;gt; ف
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP는 해당 문자가 어떻게 표현되는지 관심이 없습니다. 단지 비트 데이터와 어떻게 읽혔으면 좋겠는지를 나타내는 헤더를 전송할 뿐입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;비트를 풀어 글자를 표현하는 것은 사용자의 작업 환경(클라이언트 프로그램 및 운영체제)입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1623-잘못된-charset은-잘못된-글자를-낳는다&quot;&gt;16.2.3. 잘못된 charset은 잘못된 글자를 낳는다.&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;PC를 사용하면서 알수 없는 특수문자들로 가득한 깨진 문서들을 본 적이 있을 것입니다. charset이 잘못되면 클라이언트는 이해할 수 없는 이상한 글자를 보게 됩니다.&lt;/li&gt;
  &lt;li&gt;문자 코드 225는 어떤 문잡집합에서 쓰이느냐에 따라 다양하게 바뀔 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;iso-8859-1 서유럽 문자코드에선 á, iso-8859-6 아랍 코드에선 ف , iso-8859-7 그리스어에선 α, iso-8859-8 히브리어에선 ב 를 보여주게 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1624-표준화된-mime-charset-값&quot;&gt;16.2.4. 표준화된 MIME charset 값&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;특정 문자 인코딩과 특정 코딩된 문자집합의 결합을 MIME charset 이라고 합니다.&lt;/li&gt;
  &lt;li&gt;Content-Type 헤더, Accept-Charset 헤더에서 MIME charset을 사용합니다.&lt;/li&gt;
  &lt;li&gt;MIME charset은 IANA에서 관리합니다.&lt;/li&gt;
  &lt;li&gt;자세한 목록은 &lt;a href=&quot;https://www.iana.org/assignments/character-sets/character-sets.xhtml&quot;&gt;IANA 링크&lt;/a&gt;를 소개해드리겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1625-content-type-charset-헤더와-meta-태그&quot;&gt;16.2.5. Content-Type charset 헤더와 META 태그&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;웹 서버는 클라이언트에게 MIME charset 태그를 Content-Type 헤더에 담아 보냅니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type : text/html; charset=iso-2022-jp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;만약 Content-Type에 명시되지 않았을 경우 HTML 문서라면 HEAD에서 메타태그를 찾습니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;HEAD&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;META&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;HTTP-EQUIV=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;CONTENT=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/html; charset=iso-2022-jp&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;META&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;LANG=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;jp&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;TITLE&amp;gt;&lt;/span&gt;Japanese Document&lt;span class=&quot;nt&quot;&gt;&amp;lt;/TITLE&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/HEAD&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;BODY&amp;gt;&lt;/span&gt;
    ...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/BODY&amp;gt;&lt;/span&gt;        
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;만약 HTML문서에 해당 메타태그가 없거나 HTML 문서가 아니라면 텍스트를 스캔하며 문자 인코딩을 추측합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;문자 인코딩 추측에 실패했다면 가장 기본인 iso-8859-1로 간주합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1626-accept-charset-헤더&quot;&gt;16.2.6. Accept-Charset 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 모든 문자집합을 지원하진 않습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;따라서 클라이언트는 서버에게 자신은 어떤 문자집합을 지원하는지 알려줄 필요가 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Accept-Charset 헤더를 통해 그 목록과 선호도를 알려줄 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Charset: iso-8859-1, utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Content-Charset 이라는 응답헤더는 없다는 것에 주의합시다. 응답헤더는 Content-Type의 charset 매개변수가 이미 존재합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;163-다중언어-문자-인코딩에-대한-지침&quot;&gt;16.3. 다중언어 문자 인코딩에 대한 지침&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;문자 체계에 관련한 용어들은 복잡하고 일관성이 없어 배우기 쉽지 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1631-문자집합-용어&quot;&gt;16.3.1. 문자집합 용어&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;문자&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;알파벳 각 글자, 숫자, 구두점 등 글쓰기의 최소 단위. Unicode에서 각각의 문자마다 유일한 이름을 부여했습니다. 모든 Unicode 는 &lt;a href=&quot;https://www.unicode.org/charts/&quot;&gt;여기&lt;/a&gt;에서 확인 가능합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;글리프(glyph)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;하나의 글자를 표현하기 위한 여러 형태. 한 문자라도 다양한 글리프가 가능합니다.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/glyph.png&quot; alt=&quot;glyph.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;코딩된 문자(coded character)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;각 글자에 할당된 유일한 숫자(문자 코드). 앞서 살펴본 á의 coded character는 225입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;코드 공간(coding space)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;문자 코드 값으로 사용하려고 계획해 둔 정수의 범위. 1바이트 문자라면 0~255&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;코드 너비(code width)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;각 문자 코드의 (고정된 크기의) 비트 개수&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;사용 가능 문자집합(character repertoire)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;말 그대로 사용 가능한 문자들의 집합.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;코딩된 문자집합(coded character set)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;사용 가능 문자집합들의 코딩된 문자 집합&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;문자 인코딩 구조(Character Encoding Schemes)&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;숫자로된 문자코드를 비트단위로 인코딩/디코딩 하는 알고리즘.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1632-charset은-형편없는-이름이다&quot;&gt;16.3.2. ‘Charset’은 형편없는 이름이다.&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;MIME Charset 태그는 사실 문자 집합자체를 의미하는 것이 아닙니다. 비트를 고유한 문자 코드로 맵핑하는 알고리즘의 이름입니다. charset태그에 쓰인 utf8은 utf8 문자 집합자체를 뜻하는게 아니라 비트를 utf8 문자코드로 맵핑하는 알고리즘의 이름입니다.&lt;/li&gt;
  &lt;li&gt;MIME Charset 태그는 ‘문자 인코딩 구조’와 ‘코딩된 문자집합’ 개념을 합친것인데 사실 용어가 애매해지기 시작합니다.&lt;/li&gt;
  &lt;li&gt;이미 ‘문자 인코딩 구조’와 ‘코딩된 문자집합’ 두 개념에 대한 표준이 각각 존재합니다.&lt;/li&gt;
  &lt;li&gt;charset과 관련해선 각 용어들의 의미가 애매하니 charset 관련 문서를 심도있게 다뤄야 한다면 주의해야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1633-문자&quot;&gt;16.3.3. 문자&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;문자는 쓰기의 기본 단위입니다.&lt;/li&gt;
  &lt;li&gt;여기서 말하는 문자는 글꼴이나 스타일에 독립적인 유니크하고 추상화된 의미의 문자입니다.&lt;/li&gt;
  &lt;li&gt;사람의 필기체에 따라, 운영체제의 글꼴에 따라 한 문자가 다양한 형태로 표현되지만 모두 같은 문자입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1634-글리프glyphs-연자ligatures-그리고-표현-형태&quot;&gt;16.3.4. 글리프(glyphs), 연자(ligatures) 그리고 표현 형태&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;글리프란 한 문자를 표현하는 다양한 형태입니다. 필기체에 따라, 글꼴에 따라 한 문자에 대해 다양한 글리프가 존재합니다.&lt;/li&gt;
  &lt;li&gt;연자(ligatures)는 쉽게말해 흘려쓰기입니다. 연속된 두 글자를 한 글자처럼 흘려서 쓰는 그런 형태를 연자(ligatures)라고 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1635-코딩된-문자집합coded-character-set&quot;&gt;16.3.5. 코딩된 문자집합(Coded Character Set)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;코딩된 문자집합은 각 정수 값들을 하나의 문자에 대응시킵니다.&lt;/li&gt;
  &lt;li&gt;몇몇 코딩된 문자집합들을 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;US-ASCII: 모든 문자집합의 어머니&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1968년 ‘정보교환을 위한 미국 표준 코드’로 표준화된 문자집합입니다.&lt;/li&gt;
  &lt;li&gt;0~127까지만 사용해 코드 공간 전체를 표현하는데 7비트뿐이면 되는 문자집합입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;iso-8859&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;유럽의 글자를 표현하기 위한 US-ASCII 의 8비트 확대집합들입니다.&lt;/li&gt;
  &lt;li&gt;8비트 만으론 모든 유럽의 글자를 표현할 수 없어 지역에따라 다른 iso-8859를 제공합니다.
    &lt;ul&gt;
      &lt;li&gt;iso-8859-1 : 서유럽어&lt;/li&gt;
      &lt;li&gt;iso-8859-2 : 중앙 및 동유럽어&lt;/li&gt;
      &lt;li&gt;iso-8859-3 : 남유럽어&lt;/li&gt;
      &lt;li&gt;iso-8859-4 : 북유럽어&lt;/li&gt;
      &lt;li&gt;iso-8859-5 : 키릴어&lt;/li&gt;
      &lt;li&gt;iso-8859-6 : 아랍어&lt;/li&gt;
      &lt;li&gt;iso-8859-7 : 그리스어&lt;/li&gt;
      &lt;li&gt;iso-8859-8 : 히브리어&lt;/li&gt;
      &lt;li&gt;iso-8859-9 : 터키어&lt;/li&gt;
      &lt;li&gt;iso-8859-10 : 노르딕어&lt;/li&gt;
      &lt;li&gt;iso-8859-15 : 새로운 유로 통화 문자를 포함하기 위한 iso-8859-1의 변형&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;JIS X 0201&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ASCII를 일본어 가타카나 반각문자로 확장한 문자집합입니다.&lt;/li&gt;
  &lt;li&gt;JIS Roman 이라고도 불립니다.&lt;/li&gt;
  &lt;li&gt;JIs = Japanese Industrial Standard&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;JIS X 0208 과 JIS X 0212&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;JIS X 0201 에서 확장한 가타카나 반각문자는 63개의 표음문자 뿐이었습니다.&lt;/li&gt;
  &lt;li&gt;하지만 일본엔 훨씬 많은 표의문자들이 존재합니다.&lt;/li&gt;
  &lt;li&gt;JIS X 0208은 일본식 한자 6,879개를 추가한 최초의 멀티 바이트 문자집합입니다.&lt;/li&gt;
  &lt;li&gt;JIS X 0212는 6,607개의 문자를 추가했습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;UCS&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UCS(Universal Character Set)은 전 세계의 모든 글자를 하나의 문자집합으로 통합하려는 표준입니다.&lt;/li&gt;
  &lt;li&gt;UCS는 iso-10646 으로 정의되며&lt;/li&gt;
  &lt;li&gt;우리가 잘 알고있는 Unicode는 UCS 표준을 따르는 상업적인 컨소시엄입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1636-문자-인코딩-구조character-encoding-schemes&quot;&gt;16.3.6. 문자 인코딩 구조(Character Encoding Schemes)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;문자 인코딩 구조란 문자 코드를 비트로, 비트를 문자 코드로 바꾸는 알고리즘입니다.&lt;/li&gt;
  &lt;li&gt;문자 인코딩 구조는 아래 세 종류로 구분할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;고정폭 : 각 문자를 고정된 길이의 비트로 표현합니다. 빠르지만 공간을 낭비할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;가변폭(비모달) : 문자 코드번호 마다 다른 길이의 비트를 사용합니다. 자주 사용되는 문자의 비트를 줄일 수 있고 추가적인 국제 문자들을 여러 바이트로 표현해 1바이트로만 표현하던 문자집합과의 호환성을 유지할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;가변폭(모달) : 모달 인코딩은 여러 가지 문자집합간의 전환을 위해 사용되는 인코딩입니다. 다른 모드로 전환하기 위해 ‘escape’ 패턴을 사용합니다. 복잡한 만큼 처리하는데엔 가장 많은 시간이 걸립니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;몇 가지 인코딩 scheme을 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;8비트&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;각 문자코드를 8비트 값으로 인코딩 합니다. 256개 문자 범위 안에서만 가능합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;UTF-8&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;utf-8은 UCS를 위해 설계된 문자 인코딩 scheme 입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;비모달 가변길이 인코딩을 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;UTF-8에선 1~3바이트로 문자들이 표현됩니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;인코딩된 첫 바이트의 첫 비트가 0이면 1바이트의 문자입니다. 반대로 1바이트 문자는 첫 비트가 0으로 인코딩 됩니다. 첫 비트가 0이고 나머지 7비트로 문자가 표현되기 때문에 US-ASCII와 호환됩니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0xxxxxxx 
01100001 -&amp;gt; 61 -&amp;gt; a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;인코딩된 첫 바이트가 110으로 시작하면 2바이트 문자입니다. 이후 바이트는 10으로 시작합니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;110xxxxx 10xxxxxx
11000010 10100101 -&amp;gt; 194 165 -&amp;gt; ¥
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;인코딩된 첫 바이트가 1110이면 3바이트 문자입니다. 이후 바이트는 10으로 시작합니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1110xxxx 10xxxxxx 10xxxxxx
11101010 10110000 10000000 -&amp;gt; 234 176 128 -&amp;gt; 가
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;iso-2022-jp&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;iso-2022-jp는 일본어 인터넷 문서를 위해 널리 사용되는 인코딩입니다.&lt;/li&gt;
  &lt;li&gt;128보다 작은 값으로만 이루어진 가변길이 모달 인코딩입니다.&lt;/li&gt;
  &lt;li&gt;자세한 설명은 생략합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;euc-jp&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;또 하나의 인기있는 일본어 인코딩 입니다.&lt;/li&gt;
  &lt;li&gt;euc는 Extended Unix Code의 약자로, 유닉스에서 아시아 문자를 지원하기 위해 처음 만들어진 문자 인코딩입니다.&lt;/li&gt;
  &lt;li&gt;euc-jp는 비모달 가변 인코딩입니다.&lt;/li&gt;
  &lt;li&gt;역시 자세한 설명은 생략합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;euc-kr&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;euc-kr은 한글 인터넷 문서를 위해 사용되는 가변길이 인코딩입니다.&lt;/li&gt;
  &lt;li&gt;KS X 1003, KS X 1001 두가지 문자 집합을 지원합니다.
    &lt;ul&gt;
      &lt;li&gt;KS X 1003은 US-ASCII의 백슬래쉬를 원화 기호로 치환한 것일 뿐입니다.&lt;/li&gt;
      &lt;li&gt;KS X 1001은 2바이트로 인코딩된 한글, 한자 및 특수문자 집합입니다.&lt;/li&gt;
      &lt;li&gt;KS X 1001은 2,350자를 구현하고 있어 사실 모든 한글을 표현하기에 부족합니다.&lt;/li&gt;
      &lt;li&gt;때문에 한글 ‘채움 문자(fill code, 0xA4 와 0xD4)’를 이용해 초성, 중성, 종성을 합쳐 한 단어를 표현가능하게 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;164-언어-태그와-http&quot;&gt;16.4. 언어 태그와 HTTP&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;언어 태그란 각 언어에 이름을 붙인 짧고 표준화된 문자열 입니다. (영어 - en, 한국어 - ko, 프랑스어 - fr)&lt;/li&gt;
  &lt;li&gt;언어 태그는 표준 언어 뿐 아니라 지역에 따른 언어나(en-US, en-GB) 안 국가내 방언(zh-xiang)을 표현할 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1641-content-language-헤더&quot;&gt;16.4.1. Content-Language 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Content-Language 헤더는 언어 태그를 이용해 해당 콘텐츠가 어떤 언어 사용자를 대상으로 하는지 서술합니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Language: ko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Content-Language 헤더는 텍스트 문서뿐 아니라 오디오, 동영상 등 특정 언어 사용자를 구분해야 하는 곳이면 어디든 사용할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Content-Language에 여러 언어를 지정할 수도 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Launguage: ko, en
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1642-accept-language-헤더&quot;&gt;16.4.2. Accept-Language 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트는 Accept-Launguage 헤더를 통해 서버에게 자신이 어떤 언어를 선호하는 지 알려줄 수 있습니다.&lt;/li&gt;
  &lt;li&gt;서버가 언어별로 다른 리소스를 제공해줄 수 있을 때 유용합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1643-언어-태그의-종류&quot;&gt;16.4.3. 언어 태그의 종류&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;언어 태그는 일반적인 언어 뿐 아니라 아래와 같이 다양한 언어에 사용될 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;일반적인 언어 : ko, en, fr, es&lt;/li&gt;
      &lt;li&gt;특정 국가의 언어 : en-GB, en-US&lt;/li&gt;
      &lt;li&gt;방언 : no-bok (노르웨이의 book language)&lt;/li&gt;
      &lt;li&gt;지방어 : sgn-US-MA (마서스 비니어드 섬의 수화)&lt;/li&gt;
      &lt;li&gt;그외 다른 언어의 변형이 아닌 표준 언어 : i-navajo (미국 인디언 중 나바호족)&lt;/li&gt;
      &lt;li&gt;비표준 언어 : x-snowboarder-slang (스노우 보드 타는 사람들 슬랭)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1644-서브태그&quot;&gt;16.4.4. 서브태그&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;언어 태그는 ‘ - ‘으로 분리된 하나 이상의 서브태그로 이루어집니다.&lt;/p&gt;

    &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sgn-US-MA (마서스 버니어드 섬의 수화)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;ul&gt;
      &lt;li&gt;첫 번째 서브태그는 ‘주 서브태그’라고 불리며 표준화 되어 있습니다. a~z 글자만 포함합니다.&lt;/li&gt;
      &lt;li&gt;두 번째 서브태그는 선택적이며 자신만의 이름 표준을 따릅니다. 알파벳, 숫자를 포함하며 최대 8자입니다.&lt;/li&gt;
      &lt;li&gt;세 번째부터의 서브 태그는 따로 표준이 등록되어있지 않습니다. 알파벳, 숫자를 포함하며 최대 8자입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1645-대소문자의-구분-및-표현&quot;&gt;16.4.5. 대소문자의 구분 및 표현&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;모든 태그는 대소문자를 구분하지 않습니다.&lt;/li&gt;
  &lt;li&gt;다만 관용적으로 언어를 나타낼땐 소문자, 국가를 나타낼땐 대문자를 사용합니다.
    &lt;ul&gt;
      &lt;li&gt;‘fr’은 프랑스어로 분류되는 모든 언어를 의미하고, ‘FR’은 국가 프랑스를 의미합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1646-iana-언어-태그-등록&quot;&gt;16.4.6. IANA 언어 태그 등록&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;첫 번째와 두 번째 서브 태그는 여러 표준 문서와 조직에 의해 정의됩니다.&lt;/li&gt;
  &lt;li&gt;IANA에선 RFC 3066 규칙에 따라 표준 언어 태그의 목록을 관리합니다. (&lt;a href=&quot;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&quot;&gt;https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;다음 3개의 절에선 RFC 3066의 언어태그 규칙을 소개해 드리겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1647-첫-번째-서브태그--이름공간&quot;&gt;16.4.7. 첫 번째 서브태그 : 이름공간&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;첫 번째 서브태그엔 다음과 같은 규칙이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;두 글자라면, ISO-639와 ISO-639-1의 표준 언어 코드입니다.&lt;/li&gt;
      &lt;li&gt;세 글자라면, ISO-639-2 표준과 확장의 표준 언어 코드입니다.&lt;/li&gt;
      &lt;li&gt;‘i’ 라면, IANA에 등록된 언어 코드 입니다.&lt;/li&gt;
      &lt;li&gt;‘x’라면, 특정 개인이나 집단 전용의 비표준 확장 서브태그 입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes&quot;&gt;https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes&lt;/a&gt;에서 ISO-639-1, 2의 목록을 확인할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1648-두-번째-서브태그--이름공간&quot;&gt;16.4.8. 두 번째 서브태그 : 이름공간&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;두 번째 서브태그엔 다음과 같은 규칙이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;두 글자라면, ISO-3166에 정의된 국가/지역입니다.&lt;/li&gt;
      &lt;li&gt;3~8 글자라면, IANA에 등록된 것입니다.&lt;/li&gt;
      &lt;li&gt;한 글자라면, 뭔가 잘못된 것입니다.(??? 서양식 조크인가 봅니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes&quot;&gt;https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes&lt;/a&gt;에서 ISO-3166 목록을 확인할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1649-나머지-서브태그--이름공간&quot;&gt;16.4.9. 나머지 서브태그 : 이름공간&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;세 번째와 그 이후의 서브태그는 8자 이하의 알파벳, 숫자로만 이루어져야 한다는것을 제외하면 다른 규칙은 없습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;16410-선호-언어-설정하기&quot;&gt;16.4.10. 선호 언어 설정하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;브라우저에서 선호 언어를 설정할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;165-국제화된-uri&quot;&gt;16.5. 국제화된 URI&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;책이 작성되던 때의 URI는 오직 US-ASCII만 가능했습니다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;하지만 현재는 RFC 3986에서 UTF-8 문자를 URI에 이용하는 방법을 명시해 다양한 문자를 문제없이 사용할 수 있습니다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1651-국제적-가독성-vs-의미-있는-문자들&quot;&gt;16.5.1. 국제적 가독성 vs 의미 있는 문자들&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;과거의 URI 설계자들은 URI가 어떤 환경에서도 조작하고 공유하기 쉬웠으면 했고, 동시에 모두가 사용하기 쉽고 기억하기 쉬웠으면 했습니다.&lt;/li&gt;
  &lt;li&gt;하지만 둘은 충돌을 일으켰습니다.&lt;/li&gt;
  &lt;li&gt;조작하고 공유하기 쉽게 하기 위해 US-ASCII 문자셋만을 URI에 허용했는데 이는 비영어권 사람들에겐 매우 불편한 URI가 되었습니다.&lt;/li&gt;
  &lt;li&gt;하지만 URI 설계자들은 모든 문자를 포함해 의미있는 URI를 만드는 것 보다 가독성과 공유 가능성에 더 무게를 두어 US-ASCII 문자셋만 허용하게 됐었습니다.(과거 얘기입니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1652-uri에서-사용될-수-있는-문자들&quot;&gt;16.5.2. URI에서 사용될 수 있는 문자들&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;URI에서 사용될 수 있는 문자들은 US-ASCII의 문자들 중 아래와 같은 것들입니다.
    &lt;ul&gt;
      &lt;li&gt;예약되지 않은 문자 : [  A~Z  a~z  0~9  -  _  .   !  ~  *  ‘  (  )  ]&lt;/li&gt;
      &lt;li&gt;예약된 문자 : [  ;  /  ?  :  @  &amp;amp;  =  +  $  ,  ]&lt;/li&gt;
      &lt;li&gt;이스케이프 : [  % &lt;HEX&gt; &lt;HEX&gt;  ]&lt;/HEX&gt;&lt;/HEX&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1653-이스케이핑과-역이스케이핑unescaping&quot;&gt;16.5.3. 이스케이핑과 역이스케이핑(unescaping)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;URI에선 예약된 문자나 지원하지 않는 문자들을 표현하기위해 ‘이스케이핑’을 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이스케이핑은 %뒤에 해당 문자의 16진수를 붙여 표현하는 것입니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;' ' (공백) -&amp;gt; 32 (US-ASCII) -&amp;gt; %20 (Escaping)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이런 이스케이핑을 퍼센트 인코딩이라고도 부릅니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이스케이핑된 URI를 받으면 반대로 언이스케이핑을 할 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;%20 (Escaping) -&amp;gt; 32 (US-ASCII) -&amp;gt; ' ' (공백)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;언이스케이핑을 두 번 하지 않도록 주의합시다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1654-국제-문자들을-이스케이핑-하기&quot;&gt;16.5.4. 국제 문자들을 이스케이핑 하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;US-ASCII에 없는 국제 문자들을 위와 같은 방법으로 이스케이핑 할 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;책이 쓰여질 시점엔 이스케이핑 값이 US-ASCII인 0~127에 들어야 했지만 지금은 아닙니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;UTF-8 인코딩 체계를 통해 모든 문자를 이스케이핑 할 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;%EA%B0%80 -&amp;gt; 234 176 128 (UTF-8) -&amp;gt; 가
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;166-기타-고려사항&quot;&gt;16.6. 기타 고려사항&lt;/h3&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;1661-헤더와-명세에-맞지-않는-데이터&quot;&gt;16.6.1. 헤더와 명세에 맞지 않는 데이터&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP 헤더는 반드시 US-ASCII 문자집합으로 이루어져야 합니다.&lt;/li&gt;
  &lt;li&gt;간혹 US-ASCII 문자집합을 벗어나는 문자로 헤더를 구성하는 애플리케이션이 있으니 주의해야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1662-날짜&quot;&gt;16.6.2. 날짜&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP 명세에선 GMT 날짜 형식을 명확히 정의하고 있습니다.&lt;/li&gt;
  &lt;li&gt;하지만 역시 날자 형식을 지키지 않는 애플리케이션이 있으니 주의해야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1663-도메인-이름&quot;&gt;16.6.3. 도메인 이름&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Internationalizing Domain Name 을 이용해 다양한 문자를 도메인 이름에 포함 시킬 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이는 웹브라우저들이 지원하는 punycode를 통해 가능합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;punycode란 유니코드 문자열을 호스트명에서 사용가능한 문자로 바꾸는 방법으로 RFC 3492에 정의되어 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;한글.com -&amp;gt; xn--bj0bj06e.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;간단한 내용이라 어렵지 않게 읽은 것 같습니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 15 - 엔터티와 인코딩</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C15/"/>
   <updated>2020-03-24T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드15</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP는 다음과 같은 것들을 보장해줍니다.
    &lt;ul&gt;
      &lt;li&gt;객체가 올바르게 식별되어(콘텐츠의 타입이나 언어 등..) 클라이언트가 콘텐츠를 올바르게 처리할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;객체는 올바르게 압축이 풀릴 것입니다.&lt;/li&gt;
      &lt;li&gt;객체는 항상 최신을 유지할 것입니다.&lt;/li&gt;
      &lt;li&gt;사용자의 요구를 만족시킬 것입니다.&lt;/li&gt;
      &lt;li&gt;네트워크 사이를 빠르고 효율적으로 이동할 것입니다.&lt;/li&gt;
      &lt;li&gt;조작되지 않고 온전히 도착할 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;위와 같은 사항들을 보장하기 위해 엔터티와 엔터티 헤더들이 사용됩니다.&lt;/li&gt;
  &lt;li&gt;이번장에서 배울 내용은 위의 사항을 보장하기 위해 사용되는 것들입니다.
    &lt;ul&gt;
      &lt;li&gt;HTTP 메세지 엔터티의 포맷 및 동작방식&lt;/li&gt;
      &lt;li&gt;HTTP가 엔터티 본문크기를 기술하는 방법&lt;/li&gt;
      &lt;li&gt;크기를 줄여주는 콘텐츠 인코딩&lt;/li&gt;
      &lt;li&gt;컨텐츠의 송수신을 위해 수행되는 전송 인코딩(그 중 청크 인코딩)&lt;/li&gt;
      &lt;li&gt;최신 버전을 유지해주기 위한 태그, 라벨, 시간, 체크섬, 검사기, 기타 헤더 필드&lt;/li&gt;
      &lt;li&gt;중단된 다운로드를 중간부터 재개할 수 있게 해주는 범위 요청&lt;/li&gt;
      &lt;li&gt;전에 본 웹페이지를 열때 변경 있는 부분만 요청 할 수 있는 HTTP 델타 인코딩 확장&lt;/li&gt;
      &lt;li&gt;엔터티의 변조를 체크하는 엔터티 본문의 체크섬&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;151-메세지는-컨테이너-엔터티는-화물&quot;&gt;15.1. 메세지는 컨테이너, 엔터티는 화물&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP 메세지가 컨테이너라면 HTTP 엔터티는 그 안의 화물입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.0 200 OK
Server : Netscape-Enterprise/3.6
Date : Sun, 17 Sep 2000 00:01:05 GMT
Content-type : text/plain		-- Entity Header
Content-length : 18			-- Entity Header
					-- CRLF : 엔터티 본문 시작 알림
Hi I'm a message			-- Entity Body
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP/1.1 에선 10가지 주요 엔터티 헤더 필드를 정의했습니다.
    &lt;ul&gt;
      &lt;li&gt;Content-Type : 전달된 객체의 종류, 타입&lt;/li&gt;
      &lt;li&gt;Content-Length : 전달되는 메세지의 길이나 크기&lt;/li&gt;
      &lt;li&gt;Content-Language : 전달되는 객체와 가장 잘 대응되는 자연어&lt;/li&gt;
      &lt;li&gt;Content-Encoding : 객체 데이터의 인코딩 방법&lt;/li&gt;
      &lt;li&gt;Content-Location : 요청 시점 기준 객체의 위치&lt;/li&gt;
      &lt;li&gt;Content-Range : 해다 엔터티가 부분 엔터티라면 전체의 어느 부분인지&lt;/li&gt;
      &lt;li&gt;Content-MD5 : 엔터티 본문 콘텐츠에 대한 체크섬&lt;/li&gt;
      &lt;li&gt;Last-Modified : 서버에서 이 콘텐츠가 생성 및 수정된 날&lt;/li&gt;
      &lt;li&gt;Expires : 엔터티 데이터가 신선하지 않은 것으로 간주되는 날짜&lt;/li&gt;
      &lt;li&gt;Allow : 이 리소스에 어느 요청 메서드가 허용되는지&lt;/li&gt;
      &lt;li&gt;ETag : 해당 인스턴스에 대한 고유한 검사기. (엄밀히 말하자면 엔터티 헤더는 아니지만 엔터티와 관련한 중요한 헤더입니다.)&lt;/li&gt;
      &lt;li&gt;Cache-Control : 이 문서가 어떻게 캐시되어야 하는지 (역시 엄밀히 말하자면 엔터티 헤더는 아닙니다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1511-엔터티-본문&quot;&gt;15.1.1. 엔터티 본문&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;엔터티 본문은 가공되지 않은 raw 데이터입니다. 이를 설명해주기 위해 엔터티 헤더가 필요합니다.&lt;/li&gt;
  &lt;li&gt;엔터티 본문은 헤더 필드의 끝을 뜻하는 CRLF 줄 바로 다음부터 시작합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;152-content-length-엔터티의-길이&quot;&gt;15.2. Content-Length: 엔터티의 길이&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Content-Length는 엔터티 본문의 크기를 바이트 단위로 나타냅니다.&lt;/li&gt;
  &lt;li&gt;청크 인코딩으로 전송하지 않는 이상 항상 있어야 합니다.&lt;/li&gt;
  &lt;li&gt;메세지가 중간에 잘렸는지 감지할 때, 지속 커넥션 상황에서 메세지 사이를 올바르게 분할하기 위해 필요합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1521-잘림-검출&quot;&gt;15.2.1. 잘림 검출&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;과거의 HTTP는 커넥션이 닫힌 걸로 메세지가 끝난걸 확인했습니다.&lt;/li&gt;
  &lt;li&gt;Content-Length가 없다면 메세지를 모두 수신하고 정상적으로 커넥션이 닫혔는지, 비정상적으로 닫혀 메세지가 중간에 끊겼는지 알 수 없습니다.&lt;/li&gt;
  &lt;li&gt;캐시가 개입한 상황이라면 캐시는 중간에 잘린 메세지를 캐싱해놓고 계속 클라이언트에게 제공할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1522-잘못된-content-length&quot;&gt;15.2.2. 잘못된 Content-Length&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;잘못된 Content-Length를 가지고 있는건 아예 Content-Length가 없는 것보다 심각한 문제를 야기합니다.&lt;/li&gt;
  &lt;li&gt;HTTP/1.1 에선 클라이언트 프로그램이 잘못된 Content-Length를 받은 사실을 알게되면 사용자에게 알려주도록 되어 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1523-content-length와-지속-커넥션persistent-connection&quot;&gt;15.2.3. Content-Length와 지속 커넥션(Persistent Connection)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;지속커넥션이 기본이된 현재는 Content-Length가 더욱 필수적입니다.&lt;/li&gt;
  &lt;li&gt;한 커넥션으로 여러 메세지가 오가기 때문에 해당 메세지가 언제 끝나는지 알아야 하기 때문입니다.&lt;/li&gt;
  &lt;li&gt;다만, 청크 인코딩을 사용할 시엔 Content-Length가 없을 수 있습니다. 청크 인코딩은 15.6.에서 알아볼 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1524-콘텐츠-인코딩&quot;&gt;15.2.4. 콘텐츠 인코딩&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;콘텐츠가 인코딩 되어 있다면 Content-Length는 인코딩 된 길이를 나타냅니다.&lt;/li&gt;
  &lt;li&gt;간혹 인코딩 전의 Content-Length를 보내는 잘못된 서버도 있으니 주의해야 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1525-엔터티-본문-길이-판별을-위한-규칙&quot;&gt;15.2.5. 엔터티 본문 길이 판별을 위한 규칙&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;다음은 엔터티 본문의 길이와 끝나는 위치를 판별하는 규칙들입니다. 순서대로 적용되어야 합니다.
    &lt;ol&gt;
      &lt;li&gt;HEAD응답과 같이 본문을 갖는게 금지된 특정 HTTP 메세지에선 Content-Length 헤더가 무시됩니다.&lt;/li&gt;
      &lt;li&gt;메세지가 Transfer-Encoding 헤더를 포함한다면, 엔터티는 ‘0 바이트 청크’라고 불리는 특별한 패턴으로 끝나야 하고 Content-Length는 무시해야 합니다.&lt;/li&gt;
      &lt;li&gt;메세지에 Transfer-Encoding 헤더가 없고 Content-Length 헤더가 있다면 Content-Length헤더는 본문의 길이를 담습니다.&lt;/li&gt;
      &lt;li&gt;메세지가 ‘multipart/byteranges’ 미디어 타입을 사용하고 Content-Length가 없다면 해당 메세지는 각자 스스로 크기를 정의할 것입니다. byterages라는 멀티파트 유형은 자신의 크기를 스스로 정하는 유일한 유형입니다. (수신자가 이를 받아들일 수 있는 능력이 있는지 검증한 후 보내야 합니다.)&lt;/li&gt;
      &lt;li&gt;위의 어느 것에도 해당되지 않으면 엔터티는 커넥션이 닫힐 때 끝납니다.&lt;/li&gt;
      &lt;li&gt;HTTP/1.0과의 호환을 위해, 엔터티 본문을 갖고 있는 HTTP/1.1 &lt;strong&gt;요청&lt;/strong&gt;은 반드시 Content-Length도 갖고 있어야 합니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;153-엔터티-요약&quot;&gt;15.3. 엔터티 요약&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;메세지가 전송중 변조 되는 경우를 감지하기 위해 송신자가 메세지 본문에 대한 체크섬을 만들어 보냅니다.&lt;/li&gt;
  &lt;li&gt;수신자는 자신이 받은 본문으로 체크섬을 만들어 송신자가 보낸 체크섬과 비교해 메세지의 변조 여부를 알아냅니다.&lt;/li&gt;
  &lt;li&gt;해당 방법은 엔터티의 본문과 엔터티 요약 헤더를 모두 교체하는 악의적인 공격은 막을 수 없지만 의도치 않게 메세지가 변경되는 것을 감지할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;엔터티는 ‘원문 -&amp;gt; 콘텐츠 인코딩 -&amp;gt; 전송 인코딩’ 순으로 인코딩 되는데 체크섬을 위한 요약은 콘텐츠 인코딩이 된 다음, 전송 인코딩이 되기 전에 일어납니다.&lt;/li&gt;
  &lt;li&gt;Content-MD5 헤더는 엔터티 본문에 MD5 알고리즘을 적용해 얻은 요약을 보여줍니다. (하지만 MD5 요약은 잘 쓰이지 않습니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;154-미디어-타입과-차셋charset&quot;&gt;15.4. 미디어 타입과 차셋(Charset)&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Content-Type 헤더엔 엔터티 본문의 MIME 타입이 기술됩니다.&lt;/li&gt;
  &lt;li&gt;MIME 타입은 Internet Assigned Numbers Authority, IANA 에서 관리합니다.&lt;/li&gt;
  &lt;li&gt;MIME 타입은 원본 엔터티 본문의 타입을 명시하기 때문에 콘텐츠 인코딩을 거치더라도 인코딩 전의 타입을 명시해야 합니다.&lt;/li&gt;
  &lt;li&gt;MIME 타입은 ‘maintype/subtype’으로 나타내지며 자주 쓰이는 MIME 타입들은 아래와 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;미디어 타입&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;text/html&lt;/td&gt;
      &lt;td&gt;HTML문서&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;text/plain&lt;/td&gt;
      &lt;td&gt;플레인 텍스트 문서&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;image/gif&lt;/td&gt;
      &lt;td&gt;GIF 이미지&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;image/jpeg&lt;/td&gt;
      &lt;td&gt;JPEG 이미지&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;audio/x-wav&lt;/td&gt;
      &lt;td&gt;WAV 음향 데이터를 포함&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;model/vrml&lt;/td&gt;
      &lt;td&gt;3차원 VRML 모델&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;application/vnd.ms-powerpoint&lt;/td&gt;
      &lt;td&gt;MS 파워포인트&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;multipart/byteranges&lt;/td&gt;
      &lt;td&gt;여러 부분으로 나뉜 엔터티 본문 중 특정 범위(바이트 단위)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;message/http&lt;/td&gt;
      &lt;td&gt;완전한 HTTP 메세지 (TRACE 메서드에서 사용)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;1541-텍스트-매체를-위한-문자-인코딩&quot;&gt;15.4.1. 텍스트 매체를 위한 문자 인코딩&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;하나의 타입 안에서도 더 자세히 기술하기 위해 매개변수를 사용할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;아래와 같이 charset으로 html의 인코딩 타입을 알려줄 수 있습니다. charset에 대해선 16장에서 더 자세히 다룹니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type: text/html; charset=iso-8859-4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;1542-멀티파트-미디어-타입&quot;&gt;15.4.2. 멀티파트 미디어 타입&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;멀티파트 타입은 여러 메세지가 하나의 복합 메세지로 보내지는 것입니다. 각 메세지는 자신을 서술하는 헤더를 갖습니다.&lt;/li&gt;
  &lt;li&gt;멀티파트 본문은 주로 HTML form 제출이나 문서의 일부분을 전송하는 경우에만 쓰입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1543-멀티파트-폼-제출&quot;&gt;15.4.3. 멀티파트 폼 제출&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP form 을 이용해 텍스트 및 파일 등을 같이 전송 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;HTTP form에 2개의 input 태그가 있고 1개엔 텍스트 ‘Sally’가, 1개엔 ‘imagefile.gif’라는 이미지 파일을 담아 전송하는 상황을 가정합시다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type: multipart/form-data; boundary=AaB03x
--AaB03x
Content-Disposition: form-data; name=&quot;submit-name&quot;
Sally
--AaB03x
Content-Disposition: form-data; name=&quot;files&quot;
Content-Type: multipart/mixed; boundary=BbC04y
--BbC04y
Content-Disposition: file; filename=&quot;essayfile.txt&quot;
Content-Type: text/plain
...contents of essayfile.txt...
--BbC04y
Content-Disposition: file; filename=&quot;imagefile.gif&quot;
Content-Type: image/gif
Content-Transfer-Encoding: binary
...contents of imagefile.gif...
--BbC04y--
--AaB03x-- 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;위와 같은 메세지를 보내게 되는데 위의 Content-Type헤더의 boundary가 각 메세지들의 구분자로 사용됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1544-멀티파트-범위-응답&quot;&gt;15.4.4. 멀티파트 범위 응답&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;멀티파트로 응답이 올 수도 있습니다. 이 경우 요청에 따라 각각 다른 범위의 응답이 올 수 있는데 15.9.에서 자세히 다루겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;155-콘텐츠-인코딩&quot;&gt;15.5. 콘텐츠 인코딩&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;전송 시간을 줄이기 위해, 콘텐츠를 암호화 하기 위해 등 여러 이유로 콘텐츠를 보내기전 인코딩을 수행할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1551-콘텐츠-인코딩-과정&quot;&gt;15.5.1. 콘텐츠 인코딩 과정&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;콘텐츠 인코딩의 개략적인 과정은 다음과 같습니다
    &lt;ol&gt;
      &lt;li&gt;웹 서버가 Content-Type과 Content-Length를 포함해 원본 응답 메세지를 만듭니다.&lt;/li&gt;
      &lt;li&gt;콘텐츠 인코딩 서버(원 서버가 될 수도 있고 프록시가 될 수도 있습니다.)에서 인코딩된 메세지를 만듭니다. Content-Type은 같지만 Content-Length는 다를 수 있습니다. Content-Encoding 헤더에 인코딩 방식을 추가해 알려줍니다.&lt;/li&gt;
      &lt;li&gt;인코딩된 콘텐츠를 전송합니다.&lt;/li&gt;
      &lt;li&gt;수신한 클라이언트는 Content-Encoding에서 적절한 디코딩 방법을 찾아 디코딩합니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1552-콘텐츠-인코딩-유형&quot;&gt;15.5.2. 콘텐츠 인코딩 유형&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP에선 몇 가지 표준 인코딩 유형을 정하고 있고, 확장 인코딩으로 추가하는 것도 가능합니다.&lt;/li&gt;
  &lt;li&gt;각 인코딩 유형은 IANA에서 관리하고 있습니다.&lt;/li&gt;
  &lt;li&gt;주로 쓰이는 콘텐츠 인코딩은 다음과 같습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;콘텐츠 인코딩&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;gzip&lt;/td&gt;
      &lt;td&gt;GNU zip 인코딩. 특히 많이 쓰이는 압축 알고리즘&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;compress&lt;/td&gt;
      &lt;td&gt;유닉스 파일 압축 프로그램인 ‘compress’가 실행됨&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;deflate&lt;/td&gt;
      &lt;td&gt;zlib 포맷으로 압축&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;identity&lt;/td&gt;
      &lt;td&gt;엔터티에 어떤 인코딩도 수행되지 않음. Content-Encoding 헤더가 없다면 이 값으로 간주&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;1553-accept-encoding-헤더&quot;&gt;15.5.3. Accept-Encoding 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Accept-Encoding 헤더를 통해 클라이언트가 자신이 선호하는 인코딩 방법을 서버에게 알려줄 수 있습니다.&lt;/li&gt;
  &lt;li&gt;Accept-Encoding 헤더가 없다면 어떤 인코딩이든 받을 수 있는 것으로 간주합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Encoding : compress, gzip
Accept-Encoding : 
Accept-Encoding : *
Accept-Encoding : compress;q=0.5, gzip;q=1.0
Accept-Encoding : gzip;q=1.0, identity;q=0.5, *;q=0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;각 인코딩 방법은 ‘, ‘ 로 구분되며 ‘ * ‘는 ‘그외 모두’를 의미합니다.&lt;/li&gt;
  &lt;li&gt;인코딩 방법에 ‘ ; ‘를 구분자로 두고 설정한 q값은 선호도를 나타냅니다. 0은 선호하지 않음, 1은 선호함을 뜻합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;156-전송-인코딩과-청크-인코딩&quot;&gt;15.6. 전송 인코딩과 청크 인코딩&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 알아본 콘텐츠 인코딩은 콘텐츠의 포맷과 연관되어 있으며 엔터티 본문을 인코딩 합니다.&lt;/li&gt;
  &lt;li&gt;지금 알아볼 전송 인코딩은 콘텐츠의 포맷과는 무관하며 네트워크를 통해 전송되기 위해 본문만이 아니라 메세지 전체에 구조적인 변경을 하는 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1561-안전한-전송&quot;&gt;15.6.1. 안전한 전송&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;모든 프로토콜에서 전송 인코딩은 ‘안전한 전송’을 위해 존재했습니다.&lt;/li&gt;
  &lt;li&gt;HTTP에선 ‘안전한 전송’의 초점을 다른데에 맞추고 있습니다. HTTP에서 메세지의 본문이 문제를 일으키는 경우는 몇가지 밖에 없는데 그중 두가지는 아래와 같습니다. (책 원문을 읽어봐도 뭔가 내용이 매끄럽지가 않습니다.)
    &lt;ul&gt;
      &lt;li&gt;알 수 없는 크기 : 몇몇 인코더는 콘텐츠를 생성하기 전에 메세지 본문의 최종 크기를 판단 할 수 없습니다. Content-Length를 정해줄 수 없기 때문에 데이터의 끝을 알리는 특별한 꼬리말을 붙이기도 하는데 지속 커넥션 상에서 문제를 일으킬 수 있습니다.&lt;/li&gt;
      &lt;li&gt;보안 : 요즘은 SSL 같이 전송계층 위에서 보안이 이루어지기 때문에 보안을 위한 전송 인코딩은 잘 이루어지지 않지만, 전송 인코딩으로 메세지를 알아보기 어렵게 뒤섞기도 했었습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1562-transfer-encoding-헤더&quot;&gt;15.6.2. Transfer-Encoding 헤더&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;전송 인코딩을 위해 사용되는 헤더는 두 개 뿐입니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Transfer-Encoding : 안전한 전송을 위해 어떤 인코딩이 사용됐는지 클라이언트에게 알려줍니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Transfer-Encoding: chunked
Server: Apache/3.0
... 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;TE : 클라이언트가 서버에게 자신이 어떤 전송 인코딩을 사용할 수 있는지 알려줍니다. Accept-Encoding 처럼 q로 표현되는 선호도를 가질 수 있습니다. 다만 HTTP/1.1에선 chucked 인코딩엔 0.0의 q를 갖는걸 허용하지 않습니다.&lt;/p&gt;

        &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /new_products.html HTTP/1.1
Host: www.joes-hardware.com
User-Agent: Mozilla/4.61 [en] (WinNT; I)
TE: trailers;q=0.5, chunked;q=1.0
... 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1563-청크-인코딩&quot;&gt;15.6.3. 청크 인코딩&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;청크 인코딩이란 한 메세지를 일정 크기의 청크로 쪼개 순차적으로 전송하는 방법입니다.&lt;/li&gt;
  &lt;li&gt;일정 크기로 쪼개 보내기 때문에 메세지 전체 크기를 알 필요가 없습니다.&lt;/li&gt;
  &lt;li&gt;동적 생성되는 컨텐츠에 유용하게 사용됩니다.&lt;/li&gt;
  &lt;li&gt;메세지 전체를 다루는 전송 인코딩의 하나이며, 본문만 다뤘던 멀티파트 인코딩과 헷갈리면 안됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;청크와 지속 커넥션&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;지속 커넥션은 메세지간의 구분 지점을 알아야 하기 때문에 Content-Length를 반드시 알아야 했습니다.&lt;/li&gt;
  &lt;li&gt;하지만 콘텐츠가 동적으로 생성되면 보내기 전에 Content-Length를 알아내기 힘듭니다.&lt;/li&gt;
  &lt;li&gt;청크 인코딩은 동적으로 생성되는 본문의 일부를 버퍼에 담다가 모인 덩어리를 보냅니다.&lt;/li&gt;
  &lt;li&gt;생성되는 모든 본문을 전송할때까지 반복하며 크기가 0인 청크로 본문이 끝났음을 알립니다.&lt;/li&gt;
  &lt;li&gt;각 청크는 아래와 같이 16진수로 표현된 바이트 길이와 CRLF, 데이터로 이루어져 있습니다.&lt;/li&gt;
  &lt;li&gt;마지막엔 길이가 0인 청크를 보내 전송이 끝났음을 알려야 합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 청크 인코딩된 데이터를 서버로 보낼 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/chuncked.png&quot; alt=&quot;chuncked.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;청크 인코딩된 메세지의 트레일러&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;트레일러란 메세지가 만들어지기 시작할 땐 값을 알수 없는 헤더들을 담는 곳입니다.(Contetn-MD5 헤더의 경우 문서가 생성되어야 요약을 계산할 수 있습니다.)&lt;/li&gt;
  &lt;li&gt;트레일러는 청크 메세지 끝에 따라올 수 있습니다.&lt;/li&gt;
  &lt;li&gt;아래 두 조건 중 하나를 만족하면 트레일러를 추가할 수 있습니다.
    &lt;ul&gt;
      &lt;li&gt;클라이언트의 TE 헤더에 트레일러를 받아들일 수 있음이 명시된 경우&lt;/li&gt;
      &lt;li&gt;트레일러에 있는 정보들이 클라이언트가 무시하고 버려도 되는 경우(선택적인 메타데이터들)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1564-콘텐츠와-전송-인코딩의-조합&quot;&gt;15.6.4. 콘텐츠와 전송 인코딩의 조합&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;콘텐츠 인코딩과 전송 인코딩은 함께 사용될 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/contents_transfer_encoding.png&quot; alt=&quot;contents_transfer_encoding.png&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;1565-전송-인코딩-규칙&quot;&gt;15.6.5. 전송 인코딩 규칙&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;전송 인코딩을 사용할 때 아래와 같은 규칙을 지켜야 합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;메세지가 커넥션 종료로 끝나는 경우를 제외하면, 전송 인코딩엔 반드시 ‘chunked’가 포함되어야 합니다.&lt;/li&gt;
      &lt;li&gt;청크 전송 인코딩을 사용할 때, 반드시 마지막 청크 전송 인코딩이 있어야 합니다.&lt;/li&gt;
      &lt;li&gt;청크 전송 인코딩은 메세지 본문에 한 번 이상 적용 되어야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;전송 인코딩은 HTTP/1.1에서 등장한 인코딩이기 때문에 이전 버전의 어플리케이선과 통신해야 할 땐 주의해야 합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;157-시간에-따라-바뀌는-인스턴스&quot;&gt;15.7. 시간에 따라 바뀌는 인스턴스&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;우리가 요청하는 많은 웹 객체(web object)들은 동적입니다.&lt;/li&gt;
  &lt;li&gt;요청을 받을 때 마다 한 웹 객체에서 만들어지는 리소스를 각각 다른 인스턴스라고 생각한다면 매번 바뀌는 인스턴스를 다루기 위한 방법이 필요합니다.&lt;/li&gt;
  &lt;li&gt;이런 방법들을 ‘인스턴스 조작(instance manipulation)’이라 부르며 대표적인 예가 ‘범위 요청’과 ‘델타 인코딩’입니다.&lt;/li&gt;
  &lt;li&gt;두 방법 모두 클라이언트가 갖고 있는 리소스 사본이 서버가 가진 것과 같은지 판단하고 다르다면 새 인스턴스를 요청하는 방법입니다. 각각 15.9, 15.10에서 알아보겠습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;158-검사기validator와-신선도&quot;&gt;15.8. 검사기(Validator)와 신선도&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트는 리소스를 받으면 해당 리소스를 캐시에 저장하고 다음 요청은 캐시에서 받아옵니다.&lt;/li&gt;
  &lt;li&gt;캐시한 문서가 만료되면 서버에 다시 요구해야 합니다. 문서가 변경되었다면 새로 받을 것이고, 변경되지 않았다면 다시 받지 않을 것입니다.&lt;/li&gt;
  &lt;li&gt;위 과정을 수행하기 위해 ‘조건부 요청’이라는 요청을 사용합니다.&lt;/li&gt;
  &lt;li&gt;조건부 요청은 클라이언트가 서버에게 자신이 갖고 있는 리소스의 버전을 말해주고 Validator를 통해 자신의 사본이 유효하지 않으면 서버에게 리소스를 요청합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1581-신선도&quot;&gt;15.8.1. 신선도&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;신선도에 대해선 7장에서 많이 알아봤습니다.&lt;/li&gt;
  &lt;li&gt;받은 리소스 사본이 신선한 기간을 알려주기 위해 Expires 헤더와 Cache-Control 헤더를 사용합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Expires&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Expires 헤더는 문서가 만료되는 절대 시간을 나타냅니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Expires : Sun Mar 18 23:59:12 GMT 2001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Expires 헤더를 사용하기 위해 NTP(Network Time Protocol)등의 방법으로 클라이언트와 서버의 시간을 동기화 시켜야 하기 때문에 상대시간을 사용하는 Cache-Control을 더 많이 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Cache-Control&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Cache-Control 헤더는 문서의 최대 수명을 초단위로 나타냅니다.&lt;/li&gt;
  &lt;li&gt;또한 Cache-Control과 함께 사용되는 파라미터들이 많기 때문에 더 자세히 신선도를 다룰 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;지시자&lt;/th&gt;
      &lt;th&gt;메세지 타입&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;no-cache&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;no-store&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;max-age&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;max-stale&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;min-fresh&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;no-transform&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;only-if-cached&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;public&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;private&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;no-cache&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;no-store&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;no-transform&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;must-revalidate&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;proxy-revalidate&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;max-age&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;s-max-age&lt;/td&gt;
      &lt;td&gt;응답&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;1582-조건부-요청과-검사기&quot;&gt;15.8.2. 조건부 요청과 검사기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;신선도가 만료됐을 뿐 아직 리소스가 바뀌지 않았을수도 있기 때문에 신선도가 만료되었을 때마다 항상 서버에서 새로 리소스를 받아오는건 비효율적입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;조건부 요청을 통해 실제로 리소스가 바뀐 경우에만 사본을 받아올 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;조건부 요청은 주로 ‘If-‘로 시작되는 헤더를 통해 구현됩니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /announce.html HTTP/1.0
If-Modified-Since: Sat, 29 Jun 2002, 14:30:00 GMT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;조건부 요청은 쓰인 헤더에 따라 특정 검사기(Validator)를 통해 검사됩니다. (검사기는 아래 표 외에도 유연하게 선택될 수 있습니다.)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;요청 유형&lt;/th&gt;
      &lt;th&gt;검사기&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Modified-Since&lt;/td&gt;
      &lt;td&gt;Last-Modified&lt;/td&gt;
      &lt;td&gt;지난번 Last-Modified 응답 헤더에 있던 시각에 마지막으로 수정된 버전이 아니라면 리소스의 사본을 보내라&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Unmodified-Since&lt;/td&gt;
      &lt;td&gt;Last-Modified&lt;/td&gt;
      &lt;td&gt;지난번 Last-Modified 응답 헤더에 있던 시각에 마지막으로 수정된 버전에서 변한 것이 없다면 리소스의 사본을 보내라&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Match&lt;/td&gt;
      &lt;td&gt;ETag&lt;/td&gt;
      &lt;td&gt;지난번 ETag 응답 헤더에 들어있었던 것과 엔터티 태그가 같다면, 리소스의 사본을 보내라&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-None-Match&lt;/td&gt;
      &lt;td&gt;ETag&lt;/td&gt;
      &lt;td&gt;지난번 ETag 응답 헤더에 들어이썽ㅆ던 것과 엔터티 태그가 다르다면, 그 리소스의 사본을 보내라.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP는 검사기를 약한 검사기와 강한 검사기로 나눕니다.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;약한 검사기&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;약한 검사기는 인스턴스를 식별하지 못할 수도 있습니다.&lt;/li&gt;
      &lt;li&gt;예시로는 바이트 크기가 있습니다. 실제로 내용이 변경 되었지만 바이트 크기는 변하지 않을 수도 있습니다.&lt;/li&gt;
      &lt;li&gt;Last-Modified는 가장 작은 단위가 1초이기 때문에 약한 검사기에 속합니다.(1초 안에도 여러번 바뀔 수 있기 때문에)&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;강한 검사기&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;강한 검사기는 항상 인스턴스를 식별할 수 있습니다.&lt;/li&gt;
      &lt;li&gt;예시로는 리소스에 대한 암호 체크섬, 버전번호 등이 있습니다.&lt;/li&gt;
      &lt;li&gt;ETag엔 주로 매 변경마다 구분되는 값을 넣기 때문에 강한 검사기에 속합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;한편, 사소한 변경이라 모든 클라이언트가 굳이 안받아도 되는 경우가 있습니다. 이땐 서버에서 ‘W/’를 붙여 ‘약한’ 엔터티임을 알려줍니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /annouce.html HTTP/1.1
If-None-Match: W/&quot;v4.0&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;159-범위-요청&quot;&gt;15.9. 범위 요청&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트는 문서의 일부분이나 특정 범위만 요청할 수도 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;중간에 실패한 다운로드를 중간 지점부터 받을때, P2P 프로그램에서 여러 사용자로부터 파일의 조각들을 가져올때 사용합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래와 같이 Range 헤더를 통해 받을 범위를 명시해 요청합니다.(클라이언트의 입장에선 문서의 총 크기를 모르기 때문에 끝나는 바이트는 생략해도 됩니다.)&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /bigfile.html HTTP/1.1
Host: www.joes-hardware.com
Range: bytes=4000-
User-Agent: Mozilla/4.61 [en] (WinNT; I)
... 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;많은 서버가 범위 요청을 받아들일 수 있지만 아닌 곳도 있습니다. 서버가 자신이 범위 요청을 받을 수 있는 지 명시하고 싶다면 아래와 같이 Accept-Range 헤더를 통해 알려줄 수 있습니다.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK
Date: Fri, 05 Nov 1999 22:35:15 GMT 
Server: Apache/1.2.4
Accept-Ranges: bytes
... 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;범위 요청은 객체의 특정 인스턴스중 일부를 주고받는 것이기 때문에 인스턴스 조작의 일종입니다.&lt;/li&gt;
  &lt;li&gt;또한, 인스턴스 조작이기 때문에 클라이언트와 서버가 같은 버전의 문서를 가지고 있을 때만 의미가 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1510-델타-인코딩&quot;&gt;15.10. 델타 인코딩&lt;/h3&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;15101-인스턴스-조작-델타-생성기-그리고-델타-적용기&quot;&gt;15.10.1. 인스턴스 조작, 델타 생성기 그리고 델타 적용기&lt;/h4&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 14 - 보안 HTTP</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C14/"/>
   <updated>2020-03-23T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드14</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이전 11, 12, 13 장에서 사용자 식별을 위해 필요한 HTTP의 기본 기능을 살펴보았습니다.&lt;/li&gt;
  &lt;li&gt;이번 장에선 디지털 암호화를 이용한 더 적극적인 HTTP 트랜잭션 보안 기술을 알아볼 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;141-http를-안전하게-만들기&quot;&gt;14.1. HTTP를 안전하게 만들기&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;보다 안전한 HTTP 트랜잭션을 위해 다음과 같은 기능을 갖춘 HTTP 보안기술이 필요합니다.
    &lt;ul&gt;
      &lt;li&gt;서버 인증 - 클라이언트는 자신이 대화하고 있는 서버가 위조된 서버가 아닌 진짜 서버임을 알 수 있어야 합니다.&lt;/li&gt;
      &lt;li&gt;클라이언트 인증 - 서버는 자신이 진짜 사용자와 대화하고 있음을 알 수 있어야 합니다.&lt;/li&gt;
      &lt;li&gt;무결성 - 클라이언트와 서버가 주고받는 데이터는 위·변조 되지 않아야 합니다.&lt;/li&gt;
      &lt;li&gt;암호화 - 클라이언트와 서버는 도청에 대한 걱정 없이 대화할 수 있어야 합니다.&lt;/li&gt;
      &lt;li&gt;효율 - 성능이 떨어지는 클라이언트, 서버도 사용할 수 있도록 알고리즘은 효율적이어야 합니다.&lt;/li&gt;
      &lt;li&gt;편재성(Ubiquity) - 거의 모든 클라이언트, 서버에서 지원되어야 합니다.&lt;/li&gt;
      &lt;li&gt;관리상 확장성 - 누구든 어디든지 즉각적인 보안 통신을 할 수 있어야 합니다.&lt;/li&gt;
      &lt;li&gt;적응성 - 현재 알려진 최선의 방법을 지원해야 합니다.&lt;/li&gt;
      &lt;li&gt;사회적 생존성 - 사회의 문화적, 정치적 요구를 만족시켜야 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1411-https&quot;&gt;14.1.1. HTTPS&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS는 위의 조건을 만족하는 가장 인기있는 보안기술입니다.&lt;/li&gt;
  &lt;li&gt;넷스케이프에서 만들었으며 거의 모든 주류 브라우저와 서버에서 지원합니다.&lt;/li&gt;
  &lt;li&gt;HTTPS는 아래 그림과 같이 HTTP 하부레벨에 보안계층(SSL, Secure Sockets Layer 또는 TLS, Transport Layer Security)을 추가하는 방식으로 동작합니다.&lt;/li&gt;
  &lt;li&gt;TCP네트워크로 전송되기 전에 암호화 되므로 중간에 가로채 악용하는걸 방지할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/https_layer.png&quot; alt=&quot;https_layer.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;실제 보안 작업은 SSL 라이브러리 안에서 이루어지기 때문에 개발자는 TCP 입력/호출을 SSL 호출로 대체하고 몇몇 보안 정보 설정만 하면 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;142-디지털-암호화&quot;&gt;14.2. 디지털 암호화&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;이번 절에선 HTTPS를 이해하기 위해 암호학에 관련한 개념들은 간단히 짚고 넘어갈 것입니다.&lt;/li&gt;
  &lt;li&gt;우선 아래 개념들을 숙지합시다.
    &lt;ul&gt;
      &lt;li&gt;암호 - 텍스트를 아무나 읽지 못하도록 인코딩하는 알고리즘&lt;/li&gt;
      &lt;li&gt;키 - 암호의 동작을 변경하는 매개변수 (숫자로 되어있습니다.)&lt;/li&gt;
      &lt;li&gt;대칭키 암호 체계 - 인코딩과 디코딩에 다른 키를 사용하는 알고리즘&lt;/li&gt;
      &lt;li&gt;공개키 암호법 - 비밀 메세지를 전달하는 수백만 개의 컴퓨터를 쉽게 만들 수 있는 시스템&lt;/li&gt;
      &lt;li&gt;디지털 서명 - 메세지가 위·변조 되지 않았음을 확인하기 위한 체크섬&lt;/li&gt;
      &lt;li&gt;디지털 인증서 - 신뢰할 만한 조직에 의해 서명되고 검증된 신원 확인 정보&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1421-비밀-코드의-기술과-과학&quot;&gt;14.2.1. 비밀 코드의 기술과 과학&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;역사적으로 암호법(cryptography)는 아래와 같은 목적으로 사용되었습니다.
    &lt;ul&gt;
      &lt;li&gt;주고 받는 사람 외에 다른 사람이 볼 수 없도록 하기 위해&lt;/li&gt;
      &lt;li&gt;메세지의 변조를 방지하기 위해&lt;/li&gt;
      &lt;li&gt;누군가가 정말로 메세지나 트랜잭션의 저자임을 증명하기 위해&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1422-암호cipher&quot;&gt;14.2.2. 암호(cipher)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;암호(cipher) - 메세지를 인코딩/디코딩 하는 방법&lt;/li&gt;
  &lt;li&gt;텍스트 or 평문 - 인코딩 되기 전의 원본 메세지&lt;/li&gt;
  &lt;li&gt;암호문 - 암호가 적용되 인코딩된 메세지&lt;/li&gt;
  &lt;li&gt;율리우스 카이사르가 사용했다는 알파벳 순환 암호(알파벳을 순서대로 n글자씩 미루는것)도 암호의 한 종류입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1423-암호-기계&quot;&gt;14.2.3. 암호 기계&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;초기 암호는 사람이 직접 인코딩하고 디코딩했기 때문이 간단했습니다.&lt;/li&gt;
  &lt;li&gt;기술이 발전하며 복잡한 암호를 빠르게 인코딩/디코딩 하는 기계가 만들어졌습니다.&lt;/li&gt;
  &lt;li&gt;2차 세계대전 당시 독일군의 에니그마 암호 기계가 대표적인 암호 기계 입니다.(컴퓨터가 아닌 실제 물리적 기계)&lt;/li&gt;
  &lt;li&gt;앤런 튜링은 초기 컴퓨터를 이용해 에니그마 암호를 해독했습니다. (영화 이미테이션 게임을 한 번 더 봅시다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1424-키가-있는-암호&quot;&gt;14.2.4. 키가 있는 암호&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 말한 율리우스 카이사르의 알파벳 순환 암호는 알파벳을 몇글자씩 미루느냐에 따라 암호가 달라집니다.
    &lt;ul&gt;
      &lt;li&gt;2개씩 미룬다면 ‘Hello’ -&amp;gt; ‘Jgnnq’, 4개씩 미룬다면 ‘Hello’ -&amp;gt; ‘Lipps’가 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;에니그마 암호 기계도 설정에 따라 암호들이 다르게 인코딩/디코딩 될 수 있습니다.&lt;/li&gt;
  &lt;li&gt;이와 같이 같은 암호 알고리즘을 다르게 동작하게 만드는 매개변수를 ‘키’라고 합니다.&lt;/li&gt;
  &lt;li&gt;키를 이용하면 하나의 암호 기계를 여러 암호 기계로 만들 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1425-디지털-암호&quot;&gt;14.2.5. 디지털 암호&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;에니그마 같은 초기 기계식 암호와 달리 현대의 암호는 디지털 암호입니다.&lt;/li&gt;
  &lt;li&gt;디지털 암호는 기계식 암호와 달리 다음과 같은 특징이 있습니다.
    &lt;ul&gt;
      &lt;li&gt;속도 및 기능에 대한 기계 장치의 한계를 벗어나 복잡한 인코딩/디코딩이 가능해 졌습니다.&lt;/li&gt;
      &lt;li&gt;매우 큰 값의 키를 사용할 수 있어 하나의 암호 알고리즘으로 다른 수 조개의 알고리즘을 만들 수 있습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;디지털 암호들은 C = E(P, e),  P = D(C, d) 를 따릅니다.
    &lt;ul&gt;
      &lt;li&gt;E : 인코딩 함수, D : 디코딩 함수&lt;/li&gt;
      &lt;li&gt;P : 평문, C : 암호문&lt;/li&gt;
      &lt;li&gt;e : 인코딩 키, d : 디코딩 키&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;143-대칭키-암호법&quot;&gt;14.3. 대칭키 암호법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;현대의 많은 암호법이 대칭키 암호법을 따릅니다.&lt;/li&gt;
  &lt;li&gt;대칭키 암호법이란 인코딩 시 사용하는 키(e)와 디코딩 시 사용하는 키(d)가 값은 암호법입니다. 앞으로 대칭키를 k라고 부르겠습니다.&lt;/li&gt;
  &lt;li&gt;발신자가 k로 평문을 암호화해 암호문을 전송하면 수신자는 공유 하고 있는 k로 암호문을 디코딩합니다.&lt;/li&gt;
  &lt;li&gt;DES, Triple-DES, RC2, RC4 등이 잘 알려진 대칭키 암호 알고리즘입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1431-키-길이와-열거-공격enumeration-attack&quot;&gt;14.3.1. 키 길이와 열거 공격(Enumeration Attack)&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;대부분 암호 알고리즘은 소스코드까지 공개되어 있습니다.&lt;/li&gt;
  &lt;li&gt;그렇기 때문에 키가 누설되지 않는 것이 중요합니다.&lt;/li&gt;
  &lt;li&gt;무차별적으로 모든 키 값을 시도해 보는 것을 ‘열거 공격(Enumeration Attack)’이라고 합니다.&lt;/li&gt;
  &lt;li&gt;가능한 키의 갯수가 적다면 열거 공격은 쉽게 성공하지만 키의 길이가 길어질수록 열거 공격에 걸리는 시간은 기하급수적으로 늘어납니다.&lt;/li&gt;
  &lt;li&gt;모든 숫자가 키로 쓰일 수 있을때, 키가 n비트라면 가능한 키의 갯수는 2^n 개가 됩니다.
    &lt;ul&gt;
      &lt;li&gt;40비트라면 2^40(약 1조)&lt;/li&gt;
      &lt;li&gt;128비트라면 약 340,000,0….0,000 (3.4*10^38)개 입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;아래는 1995년 프로세서 기준으로 각 키의 길이마다 얼마의 비용이면 얼마만에 DES 암호를 깨뜨릴수 있는지를 보여줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;공격비용&lt;/th&gt;
      &lt;th&gt;40비트&lt;/th&gt;
      &lt;th&gt;56비트&lt;/th&gt;
      &lt;th&gt;64비트&lt;/th&gt;
      &lt;th&gt;80비트&lt;/th&gt;
      &lt;th&gt;128비트&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 100,000&lt;/td&gt;
      &lt;td&gt;2초&lt;/td&gt;
      &lt;td&gt;35시간&lt;/td&gt;
      &lt;td&gt;1년&lt;/td&gt;
      &lt;td&gt;7만년&lt;/td&gt;
      &lt;td&gt;10^19년&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 1,000,000&lt;/td&gt;
      &lt;td&gt;200밀리초&lt;/td&gt;
      &lt;td&gt;3.5시간&lt;/td&gt;
      &lt;td&gt;37일&lt;/td&gt;
      &lt;td&gt;7,000년&lt;/td&gt;
      &lt;td&gt;10^18년&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 10,000,000&lt;/td&gt;
      &lt;td&gt;20밀리초&lt;/td&gt;
      &lt;td&gt;21분&lt;/td&gt;
      &lt;td&gt;4일&lt;/td&gt;
      &lt;td&gt;700년&lt;/td&gt;
      &lt;td&gt;10^17년&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 100,000,000&lt;/td&gt;
      &lt;td&gt;2밀리초&lt;/td&gt;
      &lt;td&gt;2분&lt;/td&gt;
      &lt;td&gt;9시간&lt;/td&gt;
      &lt;td&gt;70년&lt;/td&gt;
      &lt;td&gt;10^16년&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$ 1,000,000,000&lt;/td&gt;
      &lt;td&gt;200마이크로초&lt;/td&gt;
      &lt;td&gt;13초&lt;/td&gt;
      &lt;td&gt;1시간&lt;/td&gt;
      &lt;td&gt;7년&lt;/td&gt;
      &lt;td&gt;10^15년&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.singularity.com/charts/page61.html&quot;&gt;http://www.singularity.com/charts/page61.html&lt;/a&gt;에 따르면 1995년 프로세서의 클록 스피드가 78,040,000 Hz 였고 2016년에 28,751,000,000 Hz로 약 400배 증가했으나 400배 증가로 10^15라는 숫자를 뚫긴 힘들어 보입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1432-공유키-발급하기&quot;&gt;14.3.2. 공유키 발급하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;대칭키 암호의 단점은 한 쌍의 발신자, 수신자가 유니크한 키를 가지고 있어야 한다는 것입니다.
    &lt;ul&gt;
      &lt;li&gt;한 네트워크 안 N개의 노드가 서로 대화하기 위해선 1개 노드당 N-1개의 키를 가지고 있어야 되고 전체적으로 N^2-N개의 키가 필요합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;144-공개키-암호법&quot;&gt;14.4. 공개키 암호법&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;공개키 암호법은 위와 같은 문제를 해결하기 위한 것입니다.&lt;/li&gt;
  &lt;li&gt;공개키 암호법은 인코딩 키는 공개하되, 디코딩 키는 소유자만 갖는 방법입니다.
    &lt;ul&gt;
      &lt;li&gt;N개의 노드중 1개의 노드가 N-1개의 노드와 대화하기 위해선, N-1개의 노드들이 쓸 1개의 인코딩 키(공개키)와 1개의 노드가 쓸 1개의 디코딩 키(개인키)만 있으면 됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;공개키 암호화 기술 덕분에 보안 프로토콜이 빠르게 전 세계 모든 컴퓨터에 보급 되었습니다.&lt;/li&gt;
  &lt;li&gt;공개키 인프라(Public-Key Infrastructure, PKI) 표준화 작업이 계속되고 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1441-rsa&quot;&gt;14.4.1. RSA&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;RSA는 유명한 공개키 암호 알고리즘중 하나입니다.&lt;/li&gt;
  &lt;li&gt;평문의 일부, 암호문, 공개키, RSA 소스코드가 주어져도 개인키를 알아내 평문을 얻는 것은 매우 힘든 일입니다.
    &lt;ul&gt;
      &lt;li&gt;RSA는 매우 큰 소수들에 기반하는데 이를 계산하는게 어렵기 때문입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;기본적인 RSA의 키 생성 방법과 암호화, 복호화 방법은 간단합니다. &lt;a href=&quot;https://ko.wikipedia.org/wiki/RSA_%EC%95%94%ED%98%B8&quot;&gt;https://ko.wikipedia.org/wiki/RSA_암호&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1442-혼성-암호-체계와-세션-키&quot;&gt;14.4.2. 혼성 암호 체계와 세션 키&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;공개키 암호 방식은 수많은 키를 다뤄야 한다는 부담을 줄여주지만 알고리즘 자체가 느리다는 단점이 있습니다.&lt;/li&gt;
  &lt;li&gt;따라서 실제론 대칭키 암호와 비대칭키 암호(공개키 암호)를 같이 사용합니다.
    &lt;ul&gt;
      &lt;li&gt;노드 간 안전한 소통 채널을 만들땐 공개키를 사용하고, 만들어진 안전한 채널에서 임시 대칭키를 생성해 나머지 데이터를 주고 받습니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;145-디지털-서명&quot;&gt;14.5. 디지털 서명&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;앞서 말했듯이 암호는 다른 사람의 탈취를 방지할 뿐 아니라 작성한 저자가 누구인지 알려주고 메세지의 위조를 방지할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;이를 가능하게 해주는 것이 디지털 서명입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1451-서명은-암호-체크섬이다&quot;&gt;14.5.1. 서명은 암호 체크섬이다.&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;디지털 서명은 메세지에 붙어있는 암호 체크섬입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;디지털 서명으로 발신자 확인이나 메세지 위조 확인을 하는 방법은 아래와 같습니다.&lt;/p&gt;
    &lt;ol&gt;
      &lt;li&gt;A가 B에게 요청받아 응답을 주려는 상황입니다.&lt;/li&gt;
      &lt;li&gt;A가 메세지의 요약(digest)과 개인키를 ‘서명함수’에 넣어 서명을 만듭니다.&lt;/li&gt;
      &lt;li&gt;서명을 메세지에 붙여 B에게 보냅니다.&lt;/li&gt;
      &lt;li&gt;B는 가지고 있는 공개키와 서명함수의 역함수로 서명을 풀어 A가 만든 메세지의 요약을 얻습니다.&lt;/li&gt;
      &lt;li&gt;그리고 B 스스로 A와 공유중인 방법으로 메세지의 요약을 만들어냅니다.&lt;/li&gt;
      &lt;li&gt;A로 부터 받은 요약과 B가 만든 요약이 일치하지 않는다면 중간에 메세지가 위조되었거나 메세지의 저자가 A가 아닌 것입니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;146-디지털-인증서&quot;&gt;14.6. 디지털 인증서&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;주민등록증은 국가에서 인증한 국민에 대한 정보가 들어있고 운전면허증은 각 도에서 인증한 운전자의 정보를 담고 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;디지털 인증서란 마찬가지로 신뢰할수 있는 기관으로부터 보증 받은 사용자나 회사에 대한 정보를 담고 있습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1461-인증서의-내부&quot;&gt;14.6.1. 인증서의 내부&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;인증서 내부는 보통 대상의 이름, 유효기간, 발급자와 같은 기본정보와 ‘발급자의 디지털 서명’이 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1462-x509-v3-인증서&quot;&gt;14.6.2. X.509 v3 인증서&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;주민등록증, 여권, 운전면허증 등이 모두 담고 있는 정보가 다르듯이 디지털 인증서도 모두 다른 정보를 갖고 있으며 세계적인 단일 표준은 없는 상황입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아직 단일 표준은 없지만 많은 인증서들이 X.509라는 표준화된 서식을 따라 만들어지고 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;아래가 X.509를 이루는 필드들이며, 각 디지털 인증서들이 모든 필드를 갖진 않습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;필드&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;버전&lt;/td&gt;
      &lt;td&gt;이 인증서가 따라는 X.509 인증서 버전의 번호. 요즘은 보통 v3버전&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;일련번호&lt;/td&gt;
      &lt;td&gt;인증기관에 의해 생성된 고유한 정수. CA(Certificate Authority)로부터의 각 인증서는 반드시 고유한 일련 번호를 가져야함.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;서명 알고리즘 ID&lt;/td&gt;
      &lt;td&gt;서명을 위해 사용된 암호 알고리즘.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;인증서 발급자&lt;/td&gt;
      &lt;td&gt;인증서를 발급하고 서명한 기관의 이름. X.500 포맷으로 기록되어 있음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;유효 기간&lt;/td&gt;
      &lt;td&gt;시작일과 종료일로 정의됨&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;대상의 이름&lt;/td&gt;
      &lt;td&gt;인증서에 기술된 사람이나 조직과 같은 엔터티. X.500 포맷으로 기록되어 있음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;대상의 공개키 정보&lt;/td&gt;
      &lt;td&gt;인증 대상의 공개키, 공개키에 사용된 알고리즘, 추가 매개변수&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;발급자의 고유 ID (선택적)&lt;/td&gt;
      &lt;td&gt;발급자의 이름이 겹치는 경우를 대비한, 인증서 발급자에 대한 선택적인 고유한 식별자&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;대상의 고유 ID (선택적)&lt;/td&gt;
      &lt;td&gt;대상의 이름이 겹치는 경우를 대비한, 인증 대상에 대한 선택적인 고유한 식별자&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;확장&lt;/td&gt;
      &lt;td&gt;선택적인 확장 필드. v3이상에서 지원. 각 확장 필드는 중요한 것인지 아닌지가 표시되어야 하고 만약 사용자가 중요한 확장 필드를 이해하지 못한다면 해당 인증서는 거절해야 함.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;인증기관 서명&lt;/td&gt;
      &lt;td&gt;위의 모든 필드에 대한 인증 기관의 디지털 서명.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;X.509 기반 인증서엔 웹 서버 인증서, 클라이언트 이메일 인증서, 소프트웨어 코드사인 인증서 등이 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1463-서버-인증을-위해-인증서-사용하기&quot;&gt;14.6.3. 서버 인증을 위해 인증서 사용하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;사용자가 웹 브라우저를 이용해 HTTPS로 웹 사이트에 접근할 때 브라우저는 웹 서버에서 디지털 인증서를 가져 옵니다. 디지털 인증서가 없다면 보안 커넥션은 실패합니다.&lt;/li&gt;
  &lt;li&gt;인증서를 받았다면 서명 기관을 검사합니다. 브라우저들은 여러 기관의 인증서가 설치된 채로 배포되기 때문에 서명 기관을 검사할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;서명 기관이 모르는 곳이라면 브라우저는 보통 해당 기관을 신뢰할 수 있는지 사용자에게 물어봅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;147-https의-세부사항&quot;&gt;14.7. HTTPS의 세부사항&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS는 가장 널리 사용되는 HTTP의 보안 버전입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1471-https-개요&quot;&gt;14.7.1. HTTPS 개요&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS는 일반 HTTP 메세지가 TCP 계층으로 가기 전에 암호화 하는 보안 계층입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/https_layer.png&quot; alt=&quot;https_layer.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS는 SSL과 SSL의 상위호환인 TLS로 이루어져 있으나 SSL과 TLS를 모두 이를땐 관행적으로 ‘SSL’이라고 부릅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1472-https-스킴&quot;&gt;14.7.2. HTTPS 스킴&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;웹 서버에게 HTTPS를 사용한다고 말해주기 위해선 URL에 http 스킴이 아닌 https를 사용하면 됩니다.
    &lt;ul&gt;
      &lt;li&gt;http://www.naver.com -&amp;gt; http&lt;strong&gt;s&lt;/strong&gt;://www.naver.com&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;URL이 http 스킴을 갖고 있으면 기본 포트로는 80 포트를 쓰며, https 스킴을 갖고 있다면 443번 포트를 기본값으로 사용합니다.&lt;/li&gt;
  &lt;li&gt;HTTPS에서 보안을 위해 사용하는 SSL 트래픽은 바이너리 트래픽이기 때문에 HTTP와는 완전히 다릅니다.
    &lt;ul&gt;
      &lt;li&gt;SSL 트래픽과 HTTP 트래픽이 모두 80번 포트로 도착하면 대부분의 브라우저는 SSL트래픽을 잘못된 HTTP로 해석하고 커넥션을 닫을 것입니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1473-보안-전송-셋업&quot;&gt;14.7.3. 보안 전송 셋업&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS가 동작하는 과정은 다음과 같습니다.
    &lt;ol&gt;
      &lt;li&gt;클라이언트가 서버의 443 포트로 연결합니다.(TCP 커넥션 연결)&lt;/li&gt;
      &lt;li&gt;암호 매개변수와 교환키를 협상하며 SSL 계층을 초기화 합니다.(SSL 핸드셰이크)&lt;/li&gt;
      &lt;li&gt;요청을 보낼 때 TCP로 전송되기전 암호화됩니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1474-ssl-핸드셰이크&quot;&gt;14.7.4. SSL 핸드셰이크&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPS가 동작하는 과정중 하나인 SSL 핸드셰이크에선 아래와 같은 일이 일어납니다.
    &lt;ul&gt;
      &lt;li&gt;프로토콜 버전 번호 교환&lt;/li&gt;
      &lt;li&gt;양쪽이 알고있는 암호 선택&lt;/li&gt;
      &lt;li&gt;양쪽의 신원을 입증&lt;/li&gt;
      &lt;li&gt;채널을 암호화 하기 위한 임시 세션 키 생성&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SSL 핸드셰이크를 위해선 상당한 양의 데이터를 주고 받아야 하며 꽤나 복잡한 과정이지만 단순화 하면 아래와 같습니다.
    &lt;ol&gt;
      &lt;li&gt;클라이언트가 서버에게 암호 후보들을 보내고 인증서를 요구합니다.&lt;/li&gt;
      &lt;li&gt;서버는 선택된 암호와 인증서를 돌려줍니다.&lt;/li&gt;
      &lt;li&gt;클라이언트가 비밀정보를 보냅니다.&lt;/li&gt;
      &lt;li&gt;클라이언트와 서버는 키를 만듭니다.&lt;/li&gt;
      &lt;li&gt;서로에게 암호화를 시작한다고 말해줍니다.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1475-서버-인증서&quot;&gt;14.7.5. 서버 인증서&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;SSL은 상호 인증을 지원하지만 클라이언트 인증서는 인트라넷을 제외하면 거의 쓰이지 않습니다.&lt;/li&gt;
  &lt;li&gt;반면 HTTPS는 항상 서버 인증서를 요구합니다.&lt;/li&gt;
  &lt;li&gt;서버 인증서를 받은 클라이언트 소프트웨어는 이 인증서를 검사합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1476-사이트-인증서-검사&quot;&gt;14.7.6. 사이트 인증서 검사&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;많은 웹 브라우저들이 넷스케이프가 제안한 서버 인증서 검사 알고리즘을 기초로해 서버 인증서를 검사합니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;과정은 다음과 같습니다.&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;날짜 검사
        &lt;ul&gt;
          &lt;li&gt;인증서가 유효함을 검사하기 위해 시작 및 종료일을 검사합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;서명자 신뢰도 검사
        &lt;ul&gt;
          &lt;li&gt;모든 인증서는 해당 서버를 보증하는 인증 기관에 의해 서명되어 있습니다. 브라우저는 사이트 인증서의 서명자가 신뢰할만한지 검사합니다.&lt;/li&gt;
          &lt;li&gt;브라우저는 배포시에 신뢰할만한 인증 기관의 리스트를 갖고 있습니다. 모르는 서명기관이라면 경고를 띄워줍니다.&lt;/li&gt;
          &lt;li&gt;브라우저는 A가 B를 인증하고, B가 C를 인증했다면 A가 신뢰할 기관일 경우 C도 신뢰할 수 있다고 생각합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;서명 검사
        &lt;ul&gt;
          &lt;li&gt;서명 기관이 신뢰할만 하다면 브라우저는 서명 기관의 공개키를 서명에 적용해 인증서의 무결성을 검사합니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;사이트 신원 검사
        &lt;ul&gt;
          &lt;li&gt;다른 이의 인증서를 복사하거나 트래픽을 가로채는걸 방지하기 위해 브라우저는 인증서의 도메인 이름과 대화중인 서버의 도메인 이름이 맞는지 검사합니다.&lt;/li&gt;
          &lt;li&gt;서버 인증서엔 보통 단일 도메인 이름이 들어 있지만 종종 서버의 목록이나 와일드카드를 이용한 표현이 들어있는 경우도 있습니다.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1477-가상-호스팅과-인증서&quot;&gt;14.7.7. 가상 호스팅과 인증서&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;가상 호스팅은 한 서버에 여러 도메인 이름을 쓰는 것입니다.&lt;/li&gt;
  &lt;li&gt;하지만 위에서 봤듯이 서버 인증서는 도메인 이름을 검사하기도 합니다.&lt;/li&gt;
  &lt;li&gt;몇몇 웹 서버 프로그램은 서버당 하나의 인증서만 지원하는데 이런 경우 문제가 발생할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;이렇게 가상 호스팅으로 도메인A, 도메인B를 운영하는데 인증서엔 도메인A만 있는 경우 도메인B로 들어오는 보안 트랜잭션을 도메인A로 리다이렉트 시키는 방법이 있습니다.&lt;/li&gt;
  &lt;li&gt;이 문제 외에도 가상 호스팅 사이트에서 인증서 관리는 까다로울 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;148-진짜-https-클라이언트&quot;&gt;14.8. 진짜 HTTPS 클라이언트&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;SSL은 복잡한 프로토콜입니다. 하지만 SSL을 쉽게 사용할 수 있도록 해주는 오픈 소스 라이브러리들이 존재합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1481-openssl&quot;&gt;14.8.1. OpenSSL&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;OpenSSL은 SSL의 가장 인기있는 오픈 소스 라이브러리입니다.&lt;/li&gt;
  &lt;li&gt;OpenSSL은 SSLeay라는 라이브러리를 계승하였습니다.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.openssl.org/&quot;&gt;https://www.openssl.org/&lt;/a&gt; 에서 받을 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1482-간단한-https-클라이언트&quot;&gt;14.8.2. 간단한 HTTPS 클라이언트&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;아래는 OpenSSL을 이용한 간단한 HTTPS 클라이언트 프로그램입니다.&lt;/li&gt;
  &lt;li&gt;서버와 SSL 커넥션을 맺고, 서버의 정보를 출력하고, GET 요청을 보낸뒤 응답을 받아 출력할 것입니다.&lt;/li&gt;
  &lt;li&gt;예외 및 에러 처리가 안되었기 때문에 학습용으로만 사용합시다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;책에 있는 소스를 그대로 가져왔지만 아직 직접 테스트해보진 못했습니다.(c언어, 유닉스 둘 다 익숙지 않아서 입니다. :cry:)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/*
 * https_client.c --- very simple HTTPS client with no error checking
 * usage: https_client servername
 */&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;memory.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
#include &amp;lt;netdb.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;openssl/crypto.h&amp;gt;
#include &amp;lt;openssl/x509.h&amp;gt;
#include &amp;lt;openssl/pem.h&amp;gt;
#include &amp;lt;openssl/ssl.h&amp;gt;
#include &amp;lt;openssl/err.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_CTX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_METHOD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
 &lt;span class=&quot;n&quot;&gt;X509&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_cert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hostent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in_addr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*========================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (1) SSL 라이브러리 초기화 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*========================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;SSLeay_add_ssl_algorithms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;client_method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSLv2_client_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_load_error_strings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_CTX_new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 로컬 SSL 컨텍스트 생성&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(1) SSL context initialized&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*=============================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (2) 서버의 호스트명을 IP 주소로 변환 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*=============================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gethostbyname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 유닉스 gethostbyname 함수. 호스트명을 IP로 변환&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;bcopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(2) '%s' has IP address '%s'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inet_ntoa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*=================================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (3) 서버의 443 포트로 TCP 커넥션 연결 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*=================================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 소켓 생성&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;memset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;'\0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin_family&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin_port&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;htons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;443&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;memcpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host_entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sockaddr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;perror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;can't connect to server port&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(3) TCP connection open to host '%s', port %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_socket_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin_port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*========================================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (4) TCP 커넥션을 통해 SSL 핸드셰이크 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*========================================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* SSL 스택 종점 생성 */&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_set_fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* SSL 스택을 소켓에 붙임 */&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* SSL 핸드셰이크 시작 */&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(4) SSL endpoint created &amp;amp; handshake completed&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*============================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (5) 협상을 통해 선택된 암호(받아온 암호) 출력 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*============================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(5) SSL connected with cipher: %s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_get_cipher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/*========================================*/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (6) 서버 인증서 출력 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*========================================*/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;server_cert&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_get_peer_certificate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(6) server's certificate was received:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X509_NAME_oneline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X509_get_subject_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_cert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; subject: %s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X509_NAME_oneline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X509_get_issuer_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_cert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; issuer: %s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/* certificate verification would happen here */&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;X509_free&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_cert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
        
 &lt;span class=&quot;cm&quot;&gt;/*********************************************************/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (7) 핸드셰이크 완료 -&amp;gt; SSL을 통해 HTTP 요청을 보냄 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/*********************************************************/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;sprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Host: %s:443&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;strcpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;GET / HTTP/1.0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;strcat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;strcat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Connection: close&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;strcat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;shutdown&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* send EOF to server */&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(7) sent HTTP request over encrypted channel:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/**************************************************/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (8) SSL스택에서 HTTP 응답을 읽어옴. */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/**************************************************/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SSL_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;inbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;'\0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(8) got back %d bytes of HTTP response:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;cm&quot;&gt;/************************************************/&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* (9) 커넥션 닫고 정리 */&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/************************************************/&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;SSL_shutdown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_free&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;SSL_CTX_free&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;(9) all done, cleaned up and closed connection&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;         
    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;1483-우리의-단순한-openssl-클라이언트-실행하기&quot;&gt;14.8.3. 우리의 단순한 OpenSSL 클라이언트 실행하기&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;추후 c와 유닉스에 친해진 뒤 테스트해보고 추가하겠습니다. :sweat_smile:&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;149-프록시를-통한-보안-트래픽-터널링&quot;&gt;14.9. 프록시를 통한 보안 트래픽 터널링&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트의 요청은 많은 프록시를 거칩니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 데이터를 암호화 하기 시작했다면 프록시는 HTTP 헤더들을 읽을 수 없고 다음 홉을 찾을 수 없게 됩니다.&lt;/li&gt;
  &lt;li&gt;이를 위해 사용하는 방법이 HTTPS SSL 터널링입니다.&lt;/li&gt;
  &lt;li&gt;8장에서 살펴본 터널과 내용은 동일합니다.
    &lt;ul&gt;
      &lt;li&gt;클라이언트는 CONNECT 메서드로 프록시에게 터널연결을 요청합니다.&lt;/li&gt;
      &lt;li&gt;프록시가 클라이언트를 검사한 뒤 터널을 수락합니다.&lt;/li&gt;
      &lt;li&gt;클라이언트의 데이터는 목적지 서버로 바로 전송됩니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;앞선 모든 장들이 그랬지만 이번 장도 한 절 하나하나마다 한 권의 책이 나올 수 있을 내용이었지만 전체적인 개요와 흐름만 알아본 것 같습니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 13 - 다이제스트 인증</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C13/"/>
   <updated>2020-03-21T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드13</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;다이제스트 인증은 이전 12장에서 살펴본 기본 인증과 호환되는 기본 인증의 대체재입니다.&lt;/p&gt;

&lt;p&gt;기본 인증에서 사용한 base-64 인코딩은 쉽게 디코딩 되는 단점이 있었습니다. 다이제스트 인증은 비밀번호를 인코딩 하는 과정이 비가역적입니다. 다시 디코딩 할 수 없죠.&lt;/p&gt;

&lt;p&gt;그리고 기본 인증에선 인코딩된 비밀번호 자체를 중간에 가로채 악용할 수 있었는데, 다이제스트 인증에선 nonce라는 기술을 사용해 이런 상황을 방지합니다.&lt;/p&gt;

&lt;p&gt;하지만 다이제스트 인증 역시 현재는 거의 쓰이지 않습니다. 다이제스트 인증의 한계 역시 알아보겠습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;131-다이제스트-인증의-개선점&quot;&gt;13.1. 다이제스트 인증의 개선점&lt;/h3&gt;

&lt;p&gt;기본인증에 비해 발전된 다이제스트 인증의 특징은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;비밀번호를 평문으로 전송하지 않습니다.&lt;/li&gt;
  &lt;li&gt;메세지를 중간에 가로채 재현하려는 악의적인 공격을 차단합니다.&lt;/li&gt;
  &lt;li&gt;구현 방법에 따라 메세지 내용 위,변조를 막을 수 있습니다.&lt;/li&gt;
  &lt;li&gt;그 외 몇몇 잘 알려진 형태의 공격을 막습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1311-비밀번호를-안전하게-지키기-위해-요약digest-사용하기&quot;&gt;13.1.1. 비밀번호를 안전하게 지키기 위해 요약(digest) 사용하기&lt;/h4&gt;

&lt;p&gt;다이제스트 인증은 비밀번호를 평문으로 보내지 않고 비밀번호에 대한 지문(fingerprint) 혹은 요약(digest)를 보냅니다. 이 요약(digest)는 비가역적으로 생성되기 때문에 base-64와 같이 디코드 할 수 없습니다.&lt;/p&gt;

&lt;p&gt;다이제스트 인증의 기본적인 동작 과정은 다음과 같습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 보호된 리소스를 요청합니다.&lt;/li&gt;
  &lt;li&gt;서버는 401 Unauthorized와 함께 이름과 비밀번호를 요구합니다.&lt;/li&gt;
  &lt;li&gt;사용자가 이름과 비밀번호를 입력하면 클라이언트 프로그램은 비밀번호에 대한 요약을 만들어 서버에게 보냅니다.&lt;/li&gt;
  &lt;li&gt;서버는 요청 받은 요약과 서버가 가지고 있는 비밀번호로 만든 요약을 비교합니다.(서버는 평문 비밀번호가 아닌 다이제스트만 가지고 있을 수도 있습니다.)&lt;/li&gt;
  &lt;li&gt;요약이 맞다면 요청받은 리소스를 제공해줍니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;1312-단방향-요약&quot;&gt;13.1.2. 단방향 요약&lt;/h4&gt;

&lt;p&gt;다이제스트 인증에서 사용하는 요약(digest)방법은 비가역적인 단방향 함수이고 어느 길이의 입력이든 일정한 길이의 압축으로 변환합니다.(무한한 경우의 수를 일정 길이로 요약하기 때문에 다른 입력같이 같은 요약을 나타내는 충돌이 발생할 수도 있지만, 이런 충돌이 일어날 확률은 무시할 수 있을 정도로 작습니다.)&lt;/p&gt;

&lt;p&gt;많이 사용되는 요약함수인 MD5 (Message Digest #5)는 임의의 바이트 배열을 128비트로 요약합니다. 128비트는 약 2^128=1,000,000,000,000,000,000,000,000,000,000,000,000,000 가지의 요약을 만들 수 있기 때문에 충돌의 확률은 무시할수 있습니다.&lt;/p&gt;

&lt;p&gt;MD5 출력은 4비트씩 끊어 32자의 16진수 문자로 표현되기도 합니다. 다음은 MD5의 예시입니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;입력&lt;/th&gt;
      &lt;th&gt;MD5 요약&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;“Hi”&lt;/td&gt;
      &lt;td&gt;C1A5298F939E87E8F962A5EDFC206918&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“bri:Ow!”&lt;/td&gt;
      &lt;td&gt;BEAAA0E34EBDB072F8627C038AB211F8&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“3.1415926535897”&lt;/td&gt;
      &lt;td&gt;475B977E19ECEE70835BC6DF46F4F6DE&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“http://www.http-guide.com/index.htm”&lt;/td&gt;
      &lt;td&gt;C617C0C7D1D05F66F595E22A4B0EAAA5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“WE hold these Truths to be self-evident, that all Men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the Pursuit of Happiness—That to secure these Rights, Governments are instituted among Men, deriving their just Powers from the Consent of the Governed, that whenever any Form of Government becomes destructive of these Ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its Foundation on such Principles, and organizing its Powers in such Form, as to them shall seem most likely to effect their Safety and Happiness.”&lt;/td&gt;
      &lt;td&gt;66C4EF58DA7CB956BD04233FBB64E0A4&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;요약 함수는 보통 ‘암호 체크섬(cryptographic checksums)’ 이라고 불리며, 단방향 해시함수 이거나 지문 함수(fingerprint function) 입니다.&lt;/p&gt;

&lt;h4 id=&quot;1313-재전송-방지를-위한-난스nonce-사용&quot;&gt;13.1.3. 재전송 방지를 위한 난스(nonce) 사용&lt;/h4&gt;

&lt;p&gt;하지만 요약만 가지고는 기본 인증에서 나타난 취약점을 해결하지 못합니다. 중간에 요약을 가로챈다면 그 요약으로 서버에게 요청을 보낼 수 있기 때문입니다. 이런 종류의 공격을 ‘재전송 공격’이라고 합니다.&lt;/p&gt;

&lt;p&gt;재전송 공격을 방지하기 위해 사용되는게 난스(nonce) 입니다. 서버는 클라이언트에게 매 요청마다 바뀌는 값인 난스를 WWW-Authenticate 헤더에 담아 보냅니다.(클라이언트 쪽에서 요약을 만들때 사용한 난스를 보내기도 합니다.)&lt;/p&gt;

&lt;p&gt;난스는 요약이 만들어지기 전 비밀번호에 섞이게 됩니다. 난스를 섞은 비밀번호를 요약으로 만들면 재전송 공격을 방지할 수 있습니다.&lt;/p&gt;

&lt;p&gt;난스를 사용하지 않은 다이제스트 인증은 기본 인증 만큼 보안에 취약합니다.&lt;/p&gt;

&lt;h4 id=&quot;1314-다이제스트-인증-핸드셰이크&quot;&gt;13.1.4. 다이제스트 인증 핸드셰이크&lt;/h4&gt;

&lt;p&gt;다음은 다이제스트 인증과정의 예시입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/digest.png&quot; alt=&quot;digest.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;132-요약-계산&quot;&gt;13.2. 요약 계산&lt;/h3&gt;

&lt;p&gt;다이제스트 인증의 핵심은 공개 정보, 비밀 정보, 난스 값을 조합해 비가역적인 요약(digest)를 만드는 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;1321-요약-알고리즘-입력-데이터&quot;&gt;13.2.1. 요약 알고리즘 입력 데이터&lt;/h4&gt;

&lt;p&gt;요약 알고리즘엔 아래의 요소들이 필요합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;해시 함수 H(d) : d는 데이터입니다.&lt;/li&gt;
  &lt;li&gt;요약 함수 KD(s, d) : s는 비밀(secret), d는 데이터입니다.&lt;/li&gt;
  &lt;li&gt;보안 정보를 담고 있는 데이터 : 앞으로 A1이라 부릅니다.&lt;/li&gt;
  &lt;li&gt;요청 메세지의 보안 정보가 아닌 데이터 : A2라 부릅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;H와 KD를 사용해 A1과 A2의 요약을 만들어 냅니다.&lt;/p&gt;

&lt;h4 id=&quot;1322-hd와-kdsd-알고리즘&quot;&gt;13.2.2. H(d)와 KD(s,d) 알고리즘&lt;/h4&gt;

&lt;p&gt;해시 함수에 사용되는 알고리즘은 여러가지가 있지만 RFC2617에선 MD5와 MD5-sess(‘sess’=세션)를 사용하며 알고리즘을 명시하지 않았다면 MD5가 기본으로 사용됩니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;H(d) = MD5(d)&lt;/li&gt;
  &lt;li&gt;KD(s, d) = H(‘s:d’) = MD(‘s:d’)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;요약 함수 KD는 입력받은 비밀정보와 데이터를 콜론으로 연결해 해시 함수 H로 보냅니다. 해시함수 H는 해시 값을 만들기 위해 설정된 알고리즘으로 데이터를 보냅니다.&lt;/p&gt;

&lt;h4 id=&quot;1323-보안-관련-데이터a1&quot;&gt;13.2.3. 보안 관련 데이터(A1)&lt;/h4&gt;

&lt;p&gt;A1이라 불리는 데이터 덩어리는 사용자 이름, 비밀번호, 보호 영역, 난스와 같은 비밀 정보로 이루어져 있습니다. A1을 계산하는 방법 중엔 다음과 같은 방법이 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MD5&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;모든 요청마다 단방향 해시를 실행함. 사용자이름, 영역, 비밀번호를 콜론으로 연결한 것.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MD5&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사용자이름, 영역, 비밀번호에 대한 해시를 계산한 뒤에 서버로 부터 받은 난스와 클라이언트 난스(c난스)를 콜론으로 붙인 것입니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;알고리즘&lt;/th&gt;
      &lt;th&gt;A1&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;MD5&lt;/td&gt;
      &lt;td&gt;A1 = &lt;사용자이름&gt;:&lt;영역&gt;:&lt;비밀번호&gt;&lt;/비밀번호&gt;&lt;/영역&gt;&lt;/사용자이름&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MD5-sess&lt;/td&gt;
      &lt;td&gt;A1 = MD5(&lt;사용자이름&gt;:&lt;영역&gt;:&lt;비밀번호&gt;):&lt;난스&gt;:&lt;c난스&gt;&lt;/c난스&gt;&lt;/난스&gt;&lt;/비밀번호&gt;&lt;/영역&gt;&lt;/사용자이름&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;1324-메세지-관련-데이터a2&quot;&gt;13.2.4. 메세지 관련 데이터(A2)&lt;/h4&gt;

&lt;p&gt;A2데이터는 URL, 요청 메서드, 엔터티 본문 같은 보안 관련 정보가 아닌 정보들입니다. A2 역시 요약을 만들어 내기 위해 사용됩니다. RFC2617에선 보호 수준(quality of protection, qop)에 따라 A2의 사용법을 정의하고 있습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;qop&lt;/th&gt;
      &lt;th&gt;A2&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;정의되지 않음&lt;/td&gt;
      &lt;td&gt;&lt;요청 메서드=&quot;&quot;&gt;:&lt;uri 지시자=&quot;&quot; 값=&quot;&quot;&gt;&lt;/uri&gt;&lt;/요청&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;auth&lt;/td&gt;
      &lt;td&gt;&lt;요청 메서드=&quot;&quot;&gt;:&lt;uri 지시자=&quot;&quot; 값=&quot;&quot;&gt;&lt;/uri&gt;&lt;/요청&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;auth-int&lt;/td&gt;
      &lt;td&gt;&lt;요청 메서드=&quot;&quot;&gt;:&lt;uri 지시자=&quot;&quot; 값=&quot;&quot;&gt;:H(&lt;요청 엔터티=&quot;&quot; 본문=&quot;&quot;&gt;)&lt;/요청&gt;&lt;/uri&gt;&lt;/요청&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;uri 지시자 값은 요청줄에서 가져온 요청 URI 입니다.&lt;/p&gt;

&lt;h4 id=&quot;1325-요약-알고리즘-전반&quot;&gt;13.2.5. 요약 알고리즘 전반&lt;/h4&gt;

&lt;p&gt;RFC 2617에선 qop에 따라 두가지 요약 계산 알고리즘을 제시하고 있습니다.&lt;/p&gt;

&lt;p&gt;앞선 13.2.1.~13.2.4. 의 종합이라고 볼 수 있습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;qop&lt;/th&gt;
      &lt;th&gt;요약 알고리즘&lt;/th&gt;
      &lt;th&gt;비고&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;정의되지 않음&lt;/td&gt;
      &lt;td&gt;KD( H(A1) , &lt;난스&gt;:H(A2) )&lt;/난스&gt;&lt;/td&gt;
      &lt;td&gt;deprecated. RFC2069와의 호환을 위해 남김&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;auth 혹은 auth-int&lt;/td&gt;
      &lt;td&gt;KD( H(A1) , &lt;난스&gt;:&lt;nc&gt;:&lt;c난스&gt;:&lt;poq&gt;:H(A2) )&lt;/poq&gt;&lt;/c난스&gt;&lt;/nc&gt;&lt;/난스&gt;&lt;/td&gt;
      &lt;td&gt;(책이 쓰여질 당시) 선호되는 방법&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;1326-다이제스트-인증-세션&quot;&gt;13.2.6. 다이제스트 인증 세션&lt;/h4&gt;

&lt;p&gt;인증 세션이란 말 그대로 한 번의 인증이 유효한 단위입니다.&lt;/p&gt;

&lt;p&gt;서버가 WWW-Authenticate를 인증요구를 하고 클라이언트가 이에 응답을 했다면 인증 세션이 시작됩니다.&lt;/p&gt;

&lt;p&gt;인증 세션은 다른 WWW-Authenticate 인증요구를 받을 때까지 지속됩니다. 클라이언트는 그동안 이름, 비밀번호, 난스, 난스횟수 등 현재 인증 세션에 대한 값들을 기억해야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;1327-사전preemptive-인가&quot;&gt;13.2.7. 사전(preemptive) 인가&lt;/h4&gt;

&lt;p&gt;일반적인 인증은 [요청 -&amp;gt; 인증요청(난스 포함 전송) -&amp;gt; 인증요청에 대한 응답 -&amp;gt; 인증 성공 및 원 요청에 대한 응답] 와 같은 사이클이 반복됩니다.&lt;/p&gt;

&lt;p&gt;사전 인가는 이와 같은 사이클이 반복 될 것임을 예상하고 요청에 대한 응답을 보낼때 다음 요청에 쓰일 난스를 같이 전송 합니다.&lt;/p&gt;

&lt;p&gt;아래의 그림을 보는게 훨씬 도움이 될 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/preemptive_authorization.png&quot; alt=&quot;preemptive_authorization.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이 사전 인가는 HTTP의 기본인증에선 매우 당연한 것입니다. 서버에게 받을 난스가 없기 때문이죠. 하지만 다이제스트 인증에선 난스를 주고받아야 합니다.&lt;/p&gt;

&lt;p&gt;이를 위해 서버는 다음 난스를 아래와 같은 방법으로 다룰 수 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;다음 난스 미리 생성
    &lt;ul&gt;
      &lt;li&gt;Authentication-Info : nextnonce=”&lt;난스값&gt;&quot; 와 같이 다음 난스를 미리 생성해 전해줍니다. 다만 이 방법은 앞장에서 본 회전 지연(latency)을 방지하기 위한 기술은 파이프라이닝과 상충하기 때문에 단점이 더 큽니다.&lt;/난스값&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;제한된 난스 재사용
    &lt;ul&gt;
      &lt;li&gt;한 난스를 정해진 횟수, 혹은 짧은 시간 동안 재사용하도록 허락합니다. 이 경우 파이프라이닝과 함께 사용할 수 있습니다. 횟수를 다쓰거나, 시간이 지나면 다시 난스를 받아와야 합니다.&lt;/li&gt;
      &lt;li&gt;다만 이 방법에서 횟수나 시간이 길어진다면 성능은 올라가지만 재사용하고 있는 난스를 중간에 탈취해 사용하는 재전송 공격에 취약해집니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;동기화된 난스 생성
    &lt;ul&gt;
      &lt;li&gt;클라이언트와 서버가 공유하고 있는 비밀키를 이용해 클라이언트와 서버가 순차적으로 각자 같은 난스를 생성하도록 합니다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;1328-난스-선택&quot;&gt;13.2.8. 난스 선택&lt;/h4&gt;

&lt;p&gt;RFC 2617에선 다음과 같은 가상의 나스 공식을 제안했습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;BASE64(타임스탬프 H(타임스탬프 : Etag : 개인키))&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;타임 스탬프는 서버에서 생성된 시간 혹은 반복 불가능한 임의의 값이면 됩니다. Etag는 엔터티 태그이며 개인키는 서버만 알고 있는 값입니다.&lt;/p&gt;

&lt;h4 id=&quot;1329-상호-인증&quot;&gt;13.2.9. 상호 인증&lt;/h4&gt;

&lt;p&gt;웹이 발전하며 요청은 여러 프록시를 거치게 되고 그 중 악의적인 프록시의 공격이 있을 수도 있기 때문에 클라이언트가 서버를 인증할 수 있는 방법도 고안되었습니다. 이 방법은 상호 인증이라 부르며 RFC 2617에 포함되었습니다.&lt;/p&gt;

&lt;p&gt;상호 인증은 서버가 클라이언트에게 클라이언트 난스(c난스)를 전송하므로 이루어집니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;133-보호-수준quality-of-protection-향상&quot;&gt;13.3. 보호 수준(Quality of Protection) 향상&lt;/h3&gt;

&lt;h4 id=&quot;1331-메세지-무결성-보호&quot;&gt;13.3.1. 메세지 무결성 보호&lt;/h4&gt;

&lt;h4 id=&quot;1332-다이제스트-인증-헤더&quot;&gt;13.3.2. 다이제스트 인증 헤더&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;134-실제-상황에-대한-고려&quot;&gt;13.4. 실제 상황에 대한 고려&lt;/h3&gt;

&lt;h4 id=&quot;1341-다중-인증요구&quot;&gt;13.4.1. 다중 인증요구&lt;/h4&gt;

&lt;h4 id=&quot;1342-오류-처리&quot;&gt;13.4.2. 오류 처리&lt;/h4&gt;

&lt;h4 id=&quot;1343-보호-공간protection-space&quot;&gt;13.4.3. 보호 공간(Protection Space)&lt;/h4&gt;

&lt;h4 id=&quot;1344-uri-다시-쓰기&quot;&gt;13.4.4. URI 다시 쓰기&lt;/h4&gt;

&lt;h4 id=&quot;1345-캐시&quot;&gt;13.4.5. 캐시&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;135-보안에-대한-고려사항&quot;&gt;13.5. 보안에 대한 고려사항&lt;/h3&gt;

&lt;h4 id=&quot;1351-헤더-부당-변경&quot;&gt;13.5.1. 헤더 부당 변경&lt;/h4&gt;

&lt;h4 id=&quot;1352-재전송-공격&quot;&gt;13.5.2. 재전송 공격&lt;/h4&gt;

&lt;h4 id=&quot;1353-다중-인증-메커니즘&quot;&gt;13.5.3. 다중 인증 메커니즘&lt;/h4&gt;

&lt;h4 id=&quot;1354-사전dictionary-공격&quot;&gt;13.5.4. 사전(dictionary) 공격&lt;/h4&gt;

&lt;h4 id=&quot;1355-악의적인-프록시와-중간자-공격man-in-the-middle-attack&quot;&gt;13.5.5. 악의적인 프록시와 중간자 공격(Man-in-the-Middle Attack)&lt;/h4&gt;

&lt;h4 id=&quot;1356-선택-평문-공격&quot;&gt;13.5.6. 선택 평문 공격&lt;/h4&gt;

&lt;h4 id=&quot;1357-비밀번호-저장&quot;&gt;13.5.7. 비밀번호 저장&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 12 - 기본 인증</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C12/"/>
   <updated>2020-03-21T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드12</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;웹 상의 개인정보 보호를 위해 서버는 각 사용자를 식별하고 그 사용자만 볼 수 있거나, 그 사용자에게 허가된 콘텐츠만 보여줍니다.&lt;/p&gt;

&lt;p&gt;이와 같은 일을 하기위해 필요한건 사용자들을 식별하는 일이고 이를 인증이라고 부릅니다. HTTP에선 기본적인 인증 방법을 제공합니다. 이 포스팅이 쓰여지고 있는 요즘엔 HTTP ‘기본 인증’은 거의 안쓰이지만 간단하게 알아보고 가겠습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;121-인증&quot;&gt;12.1 인증&lt;/h3&gt;

&lt;h4 id=&quot;1211-http의-인증요구응답-프레임워크&quot;&gt;12.1.1. HTTP의 인증요구/응답 프레임워크&lt;/h4&gt;

&lt;p&gt;HTTP는 인증에 필요한 인증요구/응답 프레임워크를 제공합니다. 프레임워크의 동작 과정은 단순합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 인증이 필요한 리소스를 요청&lt;/li&gt;
  &lt;li&gt;서버가 개인 정보를 요구하는 ‘인증요구’로 응답&lt;/li&gt;
  &lt;li&gt;클라이언트 프로그램이 사용자에게 이름, 비밀번호를 물어봄
&lt;img src=&quot;/public/image/Http The Definitive Guide/authentication2.png&quot; alt=&quot;authentication2.png&quot; /&gt;
(크롬에선 이런 식으로 물어봅니다.)&lt;/li&gt;
  &lt;li&gt;사용자가 이름, 비밀번호를 입력하면 서버에게 인증 정보를 담아 다시 요청&lt;/li&gt;
  &lt;li&gt;이름, 비밀번호가 맞다면 서버가 리소스를 전해줌&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;1212-인증-프로토콜과-헤더&quot;&gt;12.1.2. 인증 프로토콜과 헤더&lt;/h4&gt;

&lt;p&gt;위 과정에서 쓰이는 헤더들을 알아보겠습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단계&lt;/th&gt;
      &lt;th&gt;헤더&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt;메서드/상태&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;첫 번째 요청에는 인증 정보가 없다.&lt;/td&gt;
      &lt;td&gt;GET&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;인증요구&lt;/td&gt;
      &lt;td&gt;WWW-Authenticate&lt;/td&gt;
      &lt;td&gt;401 상태코드와 같이 사용되어 인증 정보를 요구함. WWW-Authenticate 헤더에는 접근하고 있는 보안 영역에 대해 설명함.&lt;/td&gt;
      &lt;td&gt;401 Unauthorized&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;인증&lt;/td&gt;
      &lt;td&gt;Authorization&lt;/td&gt;
      &lt;td&gt;이름, 비밀번호를 기술해 다시 요청을 보냄&lt;/td&gt;
      &lt;td&gt;GET&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;성공&lt;/td&gt;
      &lt;td&gt;Authentication-Info&lt;/td&gt;
      &lt;td&gt;인증 정보가 맞다면 요청한 리소스와 함께 응답. Authentication-Info는 선택적인 헤더인데 여기에 인증 세션에 관한 정보를 넣어 보내는 서버도 있음.&lt;/td&gt;
      &lt;td&gt;200 OK&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/authentication.png&quot; alt=&quot;authentication.png&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;1213-보안-영역&quot;&gt;12.1.3. 보안 영역&lt;/h4&gt;

&lt;p&gt;위에서 WWW-Authenticate헤더는 접근하고 있는 ‘보안 영역’에 대해 설명한다고 했습니다. 웹 서버는 보안이 필요한 문서들을 보안 영역(realm)별로 나눕니다. 회사 내부에서 재무팀이 있고 기술팀이 있다면 해당 리소스들은 해당 팀원들에게만 공개되야 하므로 ‘finance’ realm과 ‘tech’ realm이 있을 수 있습니다. realm에 ‘executive-commitee@company.com’ 처럼 호스트 명을 넣어 사용하기도 합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/security_realm.png&quot; alt=&quot;security_realm.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;122-기본-인증&quot;&gt;12.2. 기본 인증&lt;/h3&gt;

&lt;p&gt;HTTP에서 지원하는 인증엔 ‘기본 인증’과 ‘다이제스트 인증’이 있습니다. 그중 기본 인증은 매우 간편합니다.&lt;/p&gt;

&lt;h4 id=&quot;1221-기본-인증의-예&quot;&gt;12.2.1. 기본 인증의 예&lt;/h4&gt;

&lt;p&gt;기본 인증의 과정을 예시와 함께 다시 짚어봅니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;사용자가 가족 사진인 /family/jeff.jpg를 요청&lt;/li&gt;
  &lt;li&gt;서버가 이름과 비밀번호를 요구하는 401 Authorization Required 응답을 WWW-Authenticate: Basic realm=’family’와 함께 보냄&lt;/li&gt;
  &lt;li&gt;401 응답을 받은 브라우저는 사용자 이름, 비밀번호를 요구하는 대화상자를 띄우고 입력받음
&lt;img src=&quot;/public/image/Http The Definitive Guide/authentication2.png&quot; alt=&quot;authentication2.png&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;브라우저는 받은 이름과 비밀번호를 ‘:’ 으로 이어 붙이고 base-64 방식으로 인코딩해 Authorization 헤더에 담아 다시 요청 보냄&lt;/li&gt;
  &lt;li&gt;다시 요청 받은 서버는 이를 디코딩해 이름과 비밀번호가 맞는지 확인함. 문제 없다면 200 OK와 함께 요청 받은 문서를 돌려줌&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;기본 인증에선 위에서 살펴본 헤더중 ‘Authentication-Info’ 헤더는 사용되지 않습니다.&lt;/p&gt;

&lt;h4 id=&quot;1222-base-64-사용자-이름비밀번호-인코딩&quot;&gt;12.2.2. Base-64 사용자 이름/비밀번호 인코딩&lt;/h4&gt;

&lt;p&gt;사용자가 이름, 비밀번호를 입력하면 브라우저는 ‘이름:비밀번호’ 를 base-64방식으로 인코딩해 보냅니다. base-64 인코딩은 8비트 이진데이터를 그에 해당하는 64진법 수로 바꾸는 인코딩입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/base64.png&quot; alt=&quot;base64.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;0010 1100 -&amp;gt; 44 -&amp;gt; s&lt;/code&gt; 처럼 작동합니다. 이 base64인코딩을 사용하면 이진 데이터, 텍스트, Unicode 문자 등의 데이터를 전송가능한 알파벳 및 숫자로 변환 할 수 있습니다. HTTP 헤더에 사용할 수 없는 특수문자들도 사용할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;1223-프록시-인증&quot;&gt;12.2.3. 프록시 인증&lt;/h4&gt;

&lt;p&gt;이 같은 인증과정을 프록시에서 수행할 수도 있습니다. 프록시에서의 인증은 상태코드와 헤더명만 다르고 절차는 같습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;웹 서버&lt;/th&gt;
      &lt;th&gt;프록시 서버&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;비인증 상태 코드 : 401&lt;/td&gt;
      &lt;td&gt;비인증 상태 코드 : 407&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;WWW-Authenticate&lt;/td&gt;
      &lt;td&gt;Proxy-Authenticate&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Authorization&lt;/td&gt;
      &lt;td&gt;Proxy-Authorization&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Authentication-Info&lt;/td&gt;
      &lt;td&gt;Proxy-Authentication-Info&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;123-기본-인증의-보안-결함&quot;&gt;12.3. 기본 인증의 보안 결함&lt;/h3&gt;

&lt;p&gt;기본 인증은 사용하기 쉽지만 보안상 문제가 많습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;base-64만으로 인코딩 하는건 너무 취약합니다. base-64 인코딩은 애초에 보안 자체가 목적이 아니기 때문에 누구나 쉽게 디코딩 할 수 있습니다.(&lt;a href=&quot;https://www.base64decode.org/&quot;&gt;https://www.base64decode.org/&lt;/a&gt;) 디코딩 해주는 웹 사이트도 많고 시간만 있다면 종이와 펜으로도 디코딩 할 수 있습니다. base-64인코딩은 그저 읽기 힘들게 만들어줄 뿐입니다.&lt;/li&gt;
  &lt;li&gt;base-64가 디코딩 되기도 쉽지만 디코딩을 안하고 인코딩 된 그대로를 가져와 악의적으로 사용할 수도 있습니다. 인코딩된 상태로 가져와 그 문자로 서버에 접속을 시도할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;매 사이트마다 이름과 비밀번호를 다르게 쓰고 기억하는건 매우 번거롭기 때문에 대부분의 사람은 같은 이름, 비밀번호를 많은 사이트에서 같게 사용합니다. 온라인 쇼핑몰에서 탈취한 이름, 비밀번호로 은행 사이트에 접속 시도할 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;프록시가 개입하는 경우 정상적으로 작동하지 않을 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;가짜 위장 서버에 취약합니다. 가짜 서버에서 이름과 비밀번호를 요구하고 탈취해갈 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;기본 인증 방법을 실제 웹사이트에서 사용 못해본 사람들도 많을 것입니다.(제가 그렇습니다.) 기본 인증 방법 자체만으론 문제가 많기 때문에 HTTP에서도 다음장에서 살펴볼 ‘다이제스트 인증’을 만들었고, 14장에서 살펴볼 보안 암호화 기술도 등장하였습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;매우 간단한 장이었습니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 11 - 클라이언트 식별과 쿠키</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C11/"/>
   <updated>2020-03-20T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드11</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;이번 장에선 사용자를 식별하여 콘텐츠를 개인화하는 기술들을 알아볼 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;111-개별-접촉&quot;&gt;11.1. 개별 접촉&lt;/h3&gt;

&lt;p&gt;HTTP는 익명으로 사용하며 Stateless합니다.(Stateless : 연결 자체에 대한 정보를 가지지 않고, 매 요청은 일회성이고 독립적임) 하지만 웹 서버는 사용자를 식별하고 싶기 때문에 관련 기술들이 개발되었습니다.&lt;/p&gt;

&lt;p&gt;우리가 사용하는 거의 모든 웹 사이트는 사용자를 식별해 사용자에게 맞는 정보를 제공합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;개별 인사&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;온라인 쇼핑몰 등이 각 사용자들을 위해 특화된 페이지를 만듭니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;사용자 맞춤 추천&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;온라인 쇼핑몰은 고객이 방문한 페이지, 구매 내역들을 추적해 고객이 원할 것이라 예상되는 상품을 추천해줍니다. 생일과 같이 특별한 날엔 그에 맞는 상품을 제시합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;저장된 사용자 정보&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;인터넷으로 상품을 주문시에 매번 주소와 신용카드 정보를 입력하는건 매우 귀찮은 일입니다. 이런 정보를 각 개인별로 저장해 더 편리하게 이용할 수 있게 해줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;세션 추적&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;HTTP트랜잭션은 기본적으로 Stateless 합니다. 따라서 사용자를 식별하고 추적하기 위해선 다른 방법이 필요합니다. 뒤로는 그 아래와 같은 사용자를 식별하기 위한 방법들을 알아보겠습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;사용자 식별 관련 정보를 전달하는 HTTP 헤더&lt;/li&gt;
  &lt;li&gt;클라이언트 IP 주소 추적&lt;/li&gt;
  &lt;li&gt;사용자 로그인 인증&lt;/li&gt;
  &lt;li&gt;URL에 식별자를 포함하는 fat URL&lt;/li&gt;
  &lt;li&gt;식별 정보를 지속해서 유지하는 쿠키&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;112-http-헤더&quot;&gt;11.2. HTTP 헤더&lt;/h3&gt;

&lt;p&gt;아래 7가지 HTTP 헤더는 사용자에 대한 ‘정보’를 전달하는 헤더들입니다. 각 헤더들은 사용자에 대한 ‘정보’를 전달할 뿐 각 헤더 하나만 가지고 사용자를 식별할 순 없습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;헤더이름&lt;/th&gt;
      &lt;th&gt;헤더타입&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;From&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt;사용자의 이메일 주소&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;User-Agent&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt;사용자의 브라우저&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Referer&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt;사용자가 현재 링크를타고 온 근원 페이지&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Authorization&lt;/td&gt;
      &lt;td&gt;요청&lt;/td&gt;
      &lt;td&gt;사용자의 이름과 비밀번호&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Client-ip&lt;/td&gt;
      &lt;td&gt;확장(요청)&lt;/td&gt;
      &lt;td&gt;클라이언트의 IP주소&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;X-Forwarded-For&lt;/td&gt;
      &lt;td&gt;확장(요청)&lt;/td&gt;
      &lt;td&gt;클라이언트의 IP주소&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Cookie&lt;/td&gt;
      &lt;td&gt;확장(요청)&lt;/td&gt;
      &lt;td&gt;서버가 생성한 ID 라벨&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;이번 절에선 위 3개를 알아보고 밑에 4개는 뒤의 각 절에서 알아볼 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;From 헤더&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사용자의 이메일 주소를 나타냅니다. 이메일로는 각 개인 혹은 단체를 식별해낼 수 있지만 서버가 이를 모아 스팸 메일 등 악의적인 목적으로 사용할 수 있기 때문에 자주 사용되진 않습니다. 웹 로봇같은 경우 로봇이 서버에 문제를 일으킬 경우 메일을 보내라는 뜻에서 From 헤더에 문의메일 주소를 남기기도 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;User-Agent&lt;/strong&gt; 헤더&lt;/p&gt;

&lt;p&gt;사용자가 쓰고 있는 브라우저의 이름과 버전정보, 간혹 운영체제에 대한 정보까지 보내줍니다. 사용자를 식별할 순 없지만 사용자가 사용하는 환경에 대한 정보를 받아 그 환경에 맞는 최적의 콘텐츠를 제공할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Referer&lt;/strong&gt; 헤더&lt;/p&gt;

&lt;p&gt;현재 페이지로 유입하게한 URL을 가리킵니다. 이 역시 이 헤더 자체로는 사용자를 식별할 수 없지만 사용자의 행동에 대한 정보를 알려줍니다. Referer 헤더의 정보로 통계를 내어 본인 사이트에 사람들이 어떤 경로로 많이 들어오는지, 어떤 주제의 사이트에서 유입이 되는지 등을 파악할 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;113-클라이언-트-ip-주소&quot;&gt;11.3. 클라이언 트 IP 주소&lt;/h3&gt;

&lt;p&gt;웹이 막 시작할 시절엔 사용자들이 각자 바뀌지 않는 IP 주소를 가지고 있었습니다. 그래서 초기엔 이런 IP를 이용해 사용자를 식별하려고 했습니다. 기본적으로 HTTP 메세지 자체엔 IP 주소가 없습니다.(IP주소를 담는 Client-ip 같은 헤더는 HTTP 표준이 아닙니다.) 하지만 연결된 TCP 커넥션을 찾아보면 반대쪽의 IP를 알 수 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 이렇게 IP로 식별하는 방법은 다음과 같은 약점을 갖고 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;IP주소는 사용자가 아니라 컴퓨터를 가리킵니다. 가정에서도 여러명이 같은 PC를 사용하며, 공용 PC는 여러 사람이 사용하게 됩니다.&lt;/li&gt;
  &lt;li&gt;현대의 많은 ISP(Internet Service Provider)에선 동적으로 IP주소를 할당합니다. 로그인한 시간에 따라 사용자는 매번 다른 IP를 받습니다.&lt;/li&gt;
  &lt;li&gt;보안 강화를 위해 NAT(Network Address Translation) 방화벽을 사용하는 경우가 많습니다. 이 경우 서버가 TCP 커넥션을 살펴 알아낸 IP는 사용자의 IP가 아니라 방화벽의 IP입니다.&lt;/li&gt;
  &lt;li&gt;현대의 웹에선 클라이언트의 요청이 바로 서버로 가는 경우는 거의 없습니다. 많은 프록시와 게이트웨이를 통과합니다. 이 경우에도 서버는 프록시와 게이트웨이의 IP만 볼 수 있습니다. (이를 해결하려 Client-ip나 X-Forwarded-For HTTP 같은 헤더에 클라이언트의 ip를 담는 프록시도 있으나 표준도 아니고 모든 프록시들이 그렇지도 않습니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 이유로 IP는 사용자를 식별하기위해 쓰이지 못합니다. 인트라넷 같은 경우엔 보안 기능을 위해 특정 IP에서 오는 사용자에게만 문서를 전달하기도 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;114-사용자-로그인&quot;&gt;11.4. 사용자 로그인&lt;/h3&gt;

&lt;p&gt;사용자에게 로그인을 요구하는 건 더 직접적이고 명확한 식별 방법입니다. HTTP는 로그인을 위해 ‘WWW-Authenticate’헤더와 ‘Authorization’ 헤더를 가지고 있습니다. 한번 로그인 해두면 브라우저는 같은 호스트에게 하는 모든 요청은 이 헤더를 함께 보낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;사용자가 로그인이 필요한 리소스를 요청한다면, 서버는 401 Login Required 응답 코드를 브라우저에게 보낼 수 있습니다. 브라우저는 이 응답을 받으면 로그인 대화상자를 띄워 로그인 정보를 받고 다음 요청부터 Authorization 헤더에 그 정보를 담아 보냅니다.&lt;/p&gt;

&lt;p&gt;하지만 매 사이트들 옮겨 다닐 때마다 아이디와 비밀번호를 기억해 로그인하는건 귀찮은 일입니다. 사용자가 주로 사용하는 아이디를 선점 당할 수도 있습니다. 다음 절?장?에서 이에 대한 대안을 제시합니다.(로그인 유지 말하는건가?)&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;115-뚱뚱한-url&quot;&gt;11.5. 뚱뚱한 URL&lt;/h3&gt;

&lt;p&gt;사용자의 URL마다 사용자를 식별할 수 있는 정보를 부여해 계속 추적할 수 있습니다. 이를 fat URL이라고 부릅니다. 보통 식별 정보로는 HTTP 트랜잭션이 쓰입니다. 하나의 HTTP 트랜잭션을 ‘세션’, ‘방문’으로 보고 해당 트랜잭션에 대한 id를 부여합니다.&lt;/p&gt;

&lt;p&gt;그리고 응답을 줄때 사이트 내에 걸려있는 모든 링크들의 마지막에 그 id를 붙여 추적합니다. 예를들어 한 트랜잭션의 정보로 &lt;strong&gt;‘002-1145265-898332’&lt;/strong&gt;라는 id를 만들었다면 응답을 줄때 걸리는 모든 링크 뒤에 &lt;strong&gt;‘http://www….com/…/002-1145265-898332’&lt;/strong&gt;와 같이 id를 붙여 사용자를 계속 추적합니다.&lt;/p&gt;

&lt;p&gt;하지만 fat URL엔 다음과 같은 단점이 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;못생긴 URL&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;긴 id가 생성되어 URL에 붙으므로 사용자에게 혼란을 줄 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;공유하지 못하는 URL&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;fat URL엔 사용자의 세션과 같은 개인정보가 들어 있어 해당 URL을 다른사람에게 공유한다면 자신의 개인정보를 유출하게 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;캐시를 사용할 수 없음&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사용자마다, 같은 사용자도 브라우저를 닫고 다시 켤때마다 URL이 달라지므로 캐싱할 수 없습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;서버 부하 가중&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버는 fat url에 해당하는 HTML을 계속 다시 그려야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;이탈&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사용자 의도치 않게 다른 사이트로 이동하거나 닫아버리면 지속되고 있던 fat URL이 끊기게 됩니다. 쇼핑몰에서 이런 상황이 일어날 경우 담아 놓은 장바구니가 모두 비워질 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;세션 간 지속성의 부재&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;fat URL을 북마킹 하지 않는 이상 로그아웃하면 모든 정보를 잃게 됩니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;116-쿠키&quot;&gt;11.6. 쿠키&lt;/h3&gt;

&lt;p&gt;쿠키는 사용자를 식별하고 세션을 유지하는데 가장 널리 사용되는 방식입니다. 넷스케이프에서 최초로 제작했으며 현재는 모든 브라우저에서 지원합니다.&lt;/p&gt;

&lt;p&gt;쿠키는 캐시와 충돌할 수 있기때문에 대부분의 캐시나 브라우저에선 쿠키에 있는 내용을 캐싱하지 않습니다.&lt;/p&gt;

&lt;h4 id=&quot;1161-쿠키의-타입&quot;&gt;11.6.1. 쿠키의 타입&lt;/h4&gt;

&lt;p&gt;쿠키는 세션 쿠키와 지속 쿠키로 나뉩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;세션 쿠키(session cookie)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사이트 관련 설정과 선호사항을 저장하는 임시 쿠키입니다. 브라우저를 닫으면 삭제됩니다. 쿠키의 파키에 대한 파라미터들 중 Discard가 설정되어 있거나, Expires 혹은 Max-Age 파라미터가 없으면 세션쿠키입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;지속 쿠키(persistent cookie)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;브라우저를 닫아도 삭제되지 않습니다. 하드 디스크에 직접 저장되어 다음에 브라우저를 켤때에도 사용됩니다. 주기적으로 방문 하는 사이트의 설정 정보나 로그인 정보가 들어 있습니다. 파기되기까지의 시간을 가리키는 Expires, Max-Age 파라미터가 설정될 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;1162-쿠키는-어떻게-동작하는가&quot;&gt;11.6.2. 쿠키는 어떻게 동작하는가&lt;/h4&gt;

&lt;p&gt;사용자가 어느 웹 사이트에 처음 방문하면 웹 서버는 사용자를 식별하기 위한 id를 쿠키에 할당합니다. 쿠키는 {이름=값, 이름=값, … , 이름=값} 와 같이 표현되며 응답헤더인 Set-Cookie에 담겨 전송됩니다. Set-Cookie를 받은 브라우저는 쿠키를 저장합니다.&lt;/p&gt;

&lt;p&gt;쿠키는 사용자가 정의한 ‘이름=값’의 리스트이기 때문에 id뿐 아니라 어떤 정보든 포함할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;1163-쿠키-상자--클라이언트-측-상태&quot;&gt;11.6.3. 쿠키 상자 : 클라이언트 측 상태&lt;/h4&gt;

&lt;p&gt;쿠키는 서버 관련 정보를 클라이언트에 저장되고, 사용자가 해당 서버에 접근할때 마다 그 정보를 같이 전송됩니다. 브라우저는 이런 쿠키 정보를 저장하고 관리할 책임이 있습니다. 이를 ‘클라이언트 측 상태(State)’ 라고 합니다. HTTP명세에서의 공식 명칭은 HTTP State Management Mechanism입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;구글 크롬 쿠키&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;구글의 크롬 브라우저는 ‘Cookies’ 라는 이름의 SQLite 파일에 쿠키를 저장합니다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;C:\Users\{Username}\AppData\Local\Google\Chrome\User Data\Default\Cookies&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;따로 설정하지 않았다면 위의 위치에서 파일을 찾을 수 있고, 크롬 브라우저에선 F12를 눌러 나오는 개발자 도구에서 직접 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/cookies.png&quot; alt=&quot;cookies.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;저의 https://www.github.com/에 대한 쿠키입니다. 전체가 한 쿠키인 것이 아니라 각 행 1개씩이 쿠키 1개입니다.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Domain&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Expires/Max-Age&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;HttpOnly&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Secure&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;SameSite&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위의 형식을 갖는 1개의 쿠키가 12개가 있는 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;1164-사이트마다-각기-다른-쿠키들&quot;&gt;11.6.4. 사이트마다 각기 다른 쿠키들&lt;/h4&gt;

&lt;p&gt;브라우저는 수백, 수천개의 쿠키를 가지고 있지만 이걸 각 사이트마다 모두 보내진 않습니다. 당연히 각 사이트에 필요한 쿠키만 보내게 됩니다. 그럼 어떻게 쿠키들이 다른 사이트를 구분하게 될까요&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;쿠키 Domain 속성&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;위 쿠키 사진을 보시면 ‘Domain’ 컬럼에 ‘github.com’이 보이실 겁니다. 서버에서 쿠키를 생성할때 Set-Cookie 헤더에 Domain 속성을 기술합니다. 위 사진에선 깃허브 서버에서 쿠키를 만들때 ‘github.com’을 넣어 생성한 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;쿠키 Path 속성&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;웹 사이트가 크거나 크지 않더라도 성능을 중요시 하는 웹 사이트라면 쿠키에 path를 설정해 사이트의 일부에만 쿠키가 전달되게 할 수 있습니다. 브라우저는 Domain과 path를 조합해 맞는 URL에만 쿠키를 보내게 됩니다.&lt;/p&gt;

&lt;h4 id=&quot;1165-쿠키-구성요소&quot;&gt;11.6.5. 쿠키 구성요소&lt;/h4&gt;

&lt;h4 id=&quot;1166-version-0-넷스케이프-쿠키&quot;&gt;11.6.6. Version 0 (넷스케이프) 쿠키&lt;/h4&gt;

&lt;h4 id=&quot;1167-version-1-rfc-2965-쿠키&quot;&gt;11.6.7. Version 1 (RFC 2965) 쿠키&lt;/h4&gt;

&lt;p&gt;쿠키의 변천은 ‘Version 0(넷스케이프 쿠키)’ -&amp;gt; ‘RFC2109 쿠키’ -&amp;gt; ‘Version 1(RFC 2965) 쿠키’ -&amp;gt; ‘RFC 6265 쿠키’ 와 같이 진행됐습니다. 위의 세 절에선 이 변천중 Version 0와 Version 1을 다루고 있는데 Version 1에 지면을 많이 할애했습니다.&lt;/p&gt;

&lt;p&gt;하지만 RFC 6265 쿠키가 나오며 RFC 2109 쿠키와 RFC 2965 쿠키는 폐기되었습니다. 변천 내용이 쿠키의 이해에 중요한 부분이면 따로 포스팅해 남기겠지만 작동 방식자체가 바뀌었다기 보단 문법과 속성들이 바뀐것 뿐이라 따라 남기지 않겠습니다.&lt;/p&gt;

&lt;p&gt;대신 버전들에 대해 구글링하다가 쿠키에 대해 심도있고 깔끔하게 정리된 글을 찾았습니다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://meetup.toast.com/posts/172&quot;&gt;https://meetup.toast.com/posts/172&lt;/a&gt;  이곳을 찾고하면 좋을 것 같습니다.(저도 언젠간 저런 수준의 포스팅을 할 수 있겠죠..?)&lt;/p&gt;

&lt;p&gt;위 포스팅 자체를 정리해 이 포스팅에 포함시킬가도 했으나 이 포스팅에서 포함하기엔 배보다 배꼽이 더 큰 상황인것 같습니다.&lt;/p&gt;

&lt;h4 id=&quot;1168-쿠키와-세션-추적&quot;&gt;11.6.8. 쿠키와 세션 추적&lt;/h4&gt;

&lt;p&gt;쿠키를 이용해 세션을 추적하는 과정을 예시를 들어 설명하고 있지만 앞에서 이미 많이 서술되었으므로 생략합니다.&lt;/p&gt;

&lt;h4 id=&quot;1169-쿠키와-캐싱&quot;&gt;11.6.9. 쿠키와 캐싱&lt;/h4&gt;

&lt;p&gt;이번장에서 배운 쿠키의 내용을 캐싱에 그대로 적용하게되면 심각한 문제를 발생할 수 있습니다. 쿠키는 개인정보를 다루는데 이를 캐싱해 다른 사람에게도 그 개인정보를 줄 수 있기 때문입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;캐시되지 말아야 할 문서가 있다면 표시하라&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;해당 문서를 캐시해도 될 지 말 지는 문서의 생산자, 소유자가 가장잘 압니다. 만약 응답할 문서에서 ‘Set-Cookie’헤더만 제외하면 캐싱해도 되는 문서라면 &lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control : no-cache=&quot;Set-Cookie&quot;&lt;/code&gt;헤더를 포함시키면 됩니다. 쿠키와 상관 없이 그냥 캐싱해도 된다면 &lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control : public&lt;/code&gt;헤더를 추가합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Set-Cookie 헤더를 캐시 하는 것에 유의하라&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;캐시는 Set-Cookie헤더를 가진 응답을 캐싱할땐 조심해야 합니다. 응답헤더인 Set-Cookie 헤더는 보내는 정보를 쿠키에 저장하라는 것을 뜻하는데 Set-Cookie헤더를 캐싱해버리면 다른 사람들의 PC에 타인의 개인정보가 저장되기 때문입니다. 또한, Set-Cookie에 있는 사용자를 식별할 id를 여러 사람이 가져가면 서버 입장에서도 사람들을 식별할 수 없게 됩니다.&lt;/p&gt;

&lt;p&gt;반대로, 어떤 캐시는 Set-Cookie 헤더를 모두 지우고 저장하기도 합니다. 개인정보를 보호할 수 있을 것 같지만, Set-Cookie를 받아야할 사용자 조차 못받게 될 수 있습니다.&lt;/p&gt;

&lt;p&gt;이런 문제에선 캐시가 요청을 받고 서버에 재검사를 보내 Set-Cookie를 받아오는 방법으로 개선할 수 있습니다. 서버가 &lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control : must-revalidate, max-age=0&lt;/code&gt;를 썼다는건 캐시에서 보내기 전에 서버를 다시 다녀오라는 뜻입니다.&lt;/p&gt;

&lt;p&gt;또 어떤 보수적인 캐시는 서버측에서 캐시해도 된다고 헤더에 기술해도 Set-Cookie가 있으면 캐시하지 않을 수도 있습니다.&lt;/p&gt;

&lt;p&gt;어떤 캐시는 Set-Cookie가 있는 이미지는 캐시하지만 텍스트는 캐시하지 않기도 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Cookie 헤더를 가지고 있는 요청을 주의하라&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Cookie 헤더를 가진 요청에 대한 응답은 개인정보를 포함하고 있을수도 있습니다. 따라서 캐시는 Cookie헤더를 가진 요청에 대한 응답을 캐싱할땐 조심해야 합니다.&lt;/p&gt;

&lt;p&gt;보수적인 캐시는 마찬가지로 Cookie 헤더를 가진 요청에 대한 응답은 모두 캐시하지 않을 수도 있습니다. 앞서 말한것 처럼 이미지는 캐시하고, 텍스트는 캐시하지 않을 수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;11610-쿠키-보안-그리고-개인정보&quot;&gt;11.6.10. 쿠키, 보안 그리고 개인정보&lt;/h4&gt;

&lt;p&gt;쿠키가 보안에 취약하다는 얘기도 있으나 과장된 말이라고 생각합니다. 개인정보는 DB에 저장해두고 쿠키로는 DB에 있는 개인정보를 특정할 수 있는 키값만 보내면 중요한 개인정보를 숨길 수 있습니다.&lt;/p&gt;

&lt;p&gt;다만 요 근래 사용자의 활동 정보를 무단으로 수집하려는 마케팅 회사등이 더 문제라고 생각합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;예전에 이론적으로 배운 쿠키나 실제 개발할때 사용해본 쿠키를 떠올려봤을때 이번 장은 가볍게 넘어갈 수 있을 것이라 생각했습니다. 하지만 캐시와 함께 엮이니 꽤나 머리가 아프기 시작했습니다. 그리고 앞서 소개해드린 &lt;a href=&quot;https://meetup.toast.com/posts/172&quot;&gt;https://meetup.toast.com/posts/172&lt;/a&gt; 이 포스팅을 읽고나니 이정도의 수준으로 알아야 안다고 할 수 있겠구나라고 생각했습니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 10 - HTTP/2.0</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C10/"/>
   <updated>2020-03-20T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드10</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;HTTP는 계속 발전합니다. HTTP/1.1의 성능 문제를 개선하기 위해 HTTP/2.0이 만들어졌습니다. HTTP/1.1은 1997년 공식적으로 등장했습니다. HTTP/2는 2014년 12월 표준으로 제안되어 2015년 2월 17일 IESG에서 승인됐습니다. 그리고 &lt;strong&gt;2015년 5월 RFC 7540으로 공식적으로 공개&lt;/strong&gt;됐습니다.&lt;/p&gt;

&lt;p&gt;하지만 이 &lt;strong&gt;책이 서술하는 시점은 2013년 11월으로 HTTP/2.0의 8번째 초안에 대한 내용&lt;/strong&gt;입니다.(이전 장에서 책이 처음 서술된건 2002년이라고 했는데, HTTP/2부분은 개정하면서 수정된 것 같습니다.) 따라서 책의 내용과 현재가 다를 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;101-http20의-등장배경&quot;&gt;10.1. HTTP/2.0의 등장배경&lt;/h3&gt;

&lt;p&gt;HTTP의 역사에 대해 알아봤을때 HTTP/1.1은 급하게 기능을 추가한 HTTP/1.0을 정리하는 역할이 컸다고 했습니다. 이렇게 HTTP/1.1은 구현의 단순성과 접근성에 주안점을 두었기 때문에 성능을 희생시킬 수 밖에 없었습니다.&lt;/p&gt;

&lt;p&gt;HTTP/1.1에선 요청을 보냈을때 그에 대한 응답을 받아야만 그 다음 요청을 보낼 수 있기 때문에 회전 지연(latency)를 피할 수 없었습니다. 이를 해결하기 위해 병렬 커넥션이나 파이프라인 커넥션을 사용했지만 이는 미봉책이었을 뿐, 근본적인 해답은 되지 못했습니다.&lt;/p&gt;

&lt;p&gt;이런 HTTP/1.1의 근본적인 한계를 알고있었는지, HTTP 작업 그룹은 HTTP/1.1이 발표되기도 전인 1997년 7월부터 이미 HTTP/1.1의 이후 버전을 위한 HTTP-NG 프로젝트를 시작했습니다. 그리고 HTTP/1.1의 개발자 중 하나인 로이 필딩(Roy Fielding)은 WAKA라는 프로토콜을 개발했습니다. 또, 마이크로소프트는 S+M(Speed+Mobility)라는 프로토콜을 개발하기 시작했습니다.&lt;/p&gt;

&lt;p&gt;구글도 빠질 수 없겠죠. 구글은 2009년에 SPDY(speedy) 프로토콜을 개발해 발표했습니다. HTTP 속도를 개선하기 위해 헤더를 압축해 대역폭을 절약하고, 한 TCP 커넥션에서 응답을 받기 전에 여러 요청을 동시에 보내기도 하고, 요청이 없어도 서버쪽에서 능동적으로 리소스를 푸시할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;구글의 SPDY는 회전 지연(latency)를 줄이는데 효과적이었고, 2012년 10월 3일, HTTP 작업 그룹은 SPDY를 기반으로 HTTP/2.0을 공식적으로 설계하기 시작했습니다. HTTP작업 그룹은 SPDY 초안을 그대로 가져와 HTTP/2.0작업에 착수하기 시작했습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;102-개요&quot;&gt;10.2. 개요&lt;/h3&gt;

&lt;p&gt;HTTP/2.0 요청과 응답은 길이가 정의된(최대 16383 Byte) 한 개 이상의 프레임에 담깁니다.&lt;/p&gt;

&lt;p&gt;프레임에 담긴 요청과 응답은 스트림을 통해 보내지는데, 한 개의 스트림은 한 쌍의 요청과 응답을 처리합니다. 그리고 하나의 TCP 커넥션 위에 여러개의 스트림이 동시에 만들어질 수 있습니다. 즉, 여러 스트림을 사용하면 요청과 응답을 동시에 처리할 수 있게 됩니다.&lt;/p&gt;

&lt;p&gt;또한 HTTP/2.0은 이 스트림들에 대한 흐름제어, 우선순위 부여가 가능합니다.&lt;/p&gt;

&lt;p&gt;HTTP/2.0엔 기존의 요청-응답이 아닌 ‘서버 푸시’라는 새로운 모델이 등장합니다. 하나의 요청이 있었다면 다음 요청이 없더라도 서버가 추가적으로 리소스를 푸시할 수 있습니다.&lt;/p&gt;

&lt;p&gt;물론 HTTP/2.0은 HTTP/1.1과 호환이 될 수 있도록 노력하고 있습니다. 다만, 헤더들의 표현 문법이 조금 달라졌습니다. (ex - Content-Length -&amp;gt; :content-length)&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;103-http11과의-차이점&quot;&gt;10.3. HTTP/1.1과의 차이점&lt;/h3&gt;

&lt;h4 id=&quot;1031-프레임&quot;&gt;10.3.1. 프레임&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/http2_frame.png&quot; alt=&quot;http2_frame.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;https://queue.acm.org/detail.cfm?id=2555617&lt;/p&gt;

&lt;p&gt;HTTP/2.0에서 모든 메세지는 위와 같은 프레임에 담겨 전송됩니다. 8바이트 크기의 헤더로 시작해 뒤에 최대 16838 바이트 크기의 페이로드가 옵니다. 프레임 헤더의 각 필드는 다음과 같습니다.(&lt;strong&gt;이 부분이 책과 조금 다른데, 이미지를 찾다 보니 책보다 이후에 업데이트 된 내용인것 같아 위 출처에서 구글링한 내용으로 대체합니다.&lt;/strong&gt;)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;길이 : 페이로드를 나타내는 16비트 unsigned integer. 이 길이에 프레임 헤더는 포함되지 않습니다.&lt;/li&gt;
  &lt;li&gt;종류 : 길이 다음 오는 8비트로 표현된 프레임의 종류입니다.&lt;/li&gt;
  &lt;li&gt;플래그 : 프레임의 종류에 따랑 의미가 달라지는 8비트의 플래그입니다.&lt;/li&gt;
  &lt;li&gt;R : 예약된 1비트이며 의미가 정의되어있지 않습니다. 항상 0이어야 합니다.&lt;/li&gt;
  &lt;li&gt;스트림 식별자 : 31비트의 스트림 식별자입니다. 0일 경우 커넥션 전체와 연관된 프레임임을 의미합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;HTTP/2.0은 DATA, HEADERS, PRIORITY, RST_STREAM, SETTINGS, PUSH_PROMISE, PING, GOAWAY, WINDOW_UPDATE, CONTINUATION의 10가지 프레임을 정의하고 있습니다. 각 페이로드 형식이나 내용은 프레임에 따라 다릅니다.&lt;/p&gt;

&lt;h4 id=&quot;1032-스트림과-멀티플렉싱&quot;&gt;10.3.2. 스트림과 멀티플렉싱&lt;/h4&gt;

&lt;p&gt;스트림이란 HTTP/2.0 커넥션을 통해 클라이언트와 서버 사이에 교환되는 프레임들의 양방향 흐름입니다.&lt;/p&gt;

&lt;p&gt;한 쌍의 HTTP 요청과 응답은 하나의 스트림을 통해 이루어집니다. 요청시 새 스트림을 만들어 HTTP 요청을 보내며, 서버는 같은 스트림으로 응답을 보냅니다. 이후 해당 스트림은 닫히게 됩니다.&lt;/p&gt;

&lt;p&gt;HTTP/1.1에선 기본적으로 한 TCP커넥션에선 요청을 보낸 후 응답을 받아야 다음 요청을 보낼 수 있었습니다. 한 웹 페이지를 띄우는데 요청이 많이 필요하지 않았던 과거엔 괜찮았습니다. 하지만 현대의 웹 페이지는 한 페이지를 띄우는 데만 해도 적게는 수십, 많게는 수백번의 요청을 주고받아야 합니다. 이는 심각한 회전  지연을 만듭니다.&lt;/p&gt;

&lt;p&gt;HTTP/2.0에선 하나의 커넥션에 여러개의 스트림이 동시에 열릴 수 있습니다. 한 페이지를 띄우는데 필요한 여러개의 요청을 응답을 기다릴 필요 없이 동시에 여러 스트림을 열어 보낼 수 있는 것입니니다.&lt;/p&gt;

&lt;p&gt;스트림은 우선순위를 가질 수 있습니다. 프레임의 전송이 느릴때, 웹 브라우저는 중요한 리소스를 요청하는 스트림에 우선순위를 부여해 요청할 수 있습니다. (물론, 이 우선순위대로 응답이 올거란 보장은 없습니다.)&lt;/p&gt;

&lt;p&gt;모든 스트림은 위에서 몬것과 같이 31비트 고유한 식별자를 갖습니다. 클라이언트에 의해 초기화된 스트림은 이 식별자가 홀수여야 하며, 서버가 초기화한 스트림은 짝수여야 합니다. 그리고 새로 만들어진 스트림의 식별자는 해당 커넥션 안에서 이전에 만들어졌거나 예약된 스트림의 식별자보다 커야 합니다. 이 규칙을 어기는 식별자를 받았다면 PROTOCOL_ERROR 를 돌려줘야 합니다.&lt;/p&gt;

&lt;p&gt;서버, 클라이언트 모두 이 스트림은 상대방의 동의 없이 일방적으로 만들 수 있습니다. TCP 커넥션을 여러개 만들때 연결 신호를 주고받느라 소비했던 지연들을 없앨 수 있습니다.&lt;/p&gt;

&lt;p&gt;HTTP/2.0 커넥션에서 한 번 사용한 스트림 식별자는 다시 사용할 수 없습니다. 커넥션을 오래 유지하면 스트림의 31비트의 식별자를 모두 사용할 수 있는데, 이땐 커넥션을 다시 맺습니다.&lt;/p&gt;

&lt;p&gt;여러개의 스트림을 사용시 스트림이 블록될 우려가 있는데, HTTP/2.0에선 WINDOW_UPDATE 프레임을 이요한 흐름 제어를 통해 스트림들이 서로 간섭해 망가지는 것을 막아줍니다.&lt;/p&gt;

&lt;h4 id=&quot;1033-헤더-압축&quot;&gt;10.3.3. 헤더 압축&lt;/h4&gt;

&lt;p&gt;HTTP/1.1은 헤더를 압축 없이 그냥 보냅니다. 따라서 실제 본문보다 헤더의 크기가 더 큰 경우도 허다합니다.&lt;/p&gt;

&lt;p&gt;이를 개선하기 위해 HTTP/2.0에선 HTTP 헤더를 압축해 전송합니다. 헤더는 HPACK 명세에 정의된 방법으로 압축된 뒤, ‘헤더 블록 조각’으로 쪼개져 전송됩니다. 받는 쪽은 이 조각들을 이어 압축을 풉니다.&lt;/p&gt;

&lt;p&gt;HPACK은 헤더를 압축하고 해제할 때 ‘압축 콘텍스트(compression context)’를 사용합니다. 그런데 이 압축 콘텐스트는 하나의 압축을 풀면 이에 영향을 받아 바뀝니다. 송신측은 메세지를 보낸뒤, 수신측이 이 메세지를 받고 압축을 풀어 압축 콘텍스트가 변경되었을 것이라 추측합니다. 따라서 원활한 통신을 위해선 받은 헤더를 쓰지 않더라도 반드시 합축을 풀어 상호간의 압축 콘텍스트를 유지해야 합니다. 그럴 수 없는 경우라면 COMPREESION_ERROR와 함께 커넥션을 끊어야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;1034-서버-푸시&quot;&gt;10.3.4. 서버 푸시&lt;/h4&gt;

&lt;p&gt;HTTP/2.0에선 하나의 요청에 대한 응답으로 여러개의 리소스를 보낼 수 있습니다.(추가 요청이 없어도 일방적으로 응답을 보낼 수 있습니다.) 요청과 응답이 1:1로 대응해야 했던 HTTP/1.1과 달라진 점입니다.&lt;/p&gt;

&lt;p&gt;이 방법은 클라이언트에서 어떤 리소스를 추가 요구할 것인지 예측할 수 있는 상황에서 요구합니다. HTTP/1.1에선 하나의 웹페이지를 띄울때 클라이언트가 응답받은 HTML에서 이미지, 파일들의 URL를 얻어내 다시 요청합니다. 하지만 HTTP/2.0에선 서버쪽에서 HTML을 보내기 전에 미리 추가로 필요한 리소스들을 파악해 같이 전송할 수 있습니다.&lt;/p&gt;

&lt;p&gt;리소스를 푸시하려는 서버는 클라이언트에게 자원을 푸시할 것임을 PUSH_PROMISE 프레임을 보내 미리 알려주어야 합니다. 클라이언트가 PUSH_PROMISE 프레임을 받게 되면 해당 프레임의 스트림은 클라이언트 입장에선 ‘예약됨(원격)’ 상태가 됩니다. 만약 클라이언트가 거절하고 싶다면 RST_STREAM 프레임을 보내면 됩니다.&lt;/p&gt;

&lt;p&gt;이 PUSH_PROMISE 프레임을 먼저 주는 이유는 서버가 줄 리소스를 클라이언트가 모르고 요청하는 일을 막기 위해서 입니다.&lt;/p&gt;

&lt;p&gt;서버 푸시를 사용할때 주의할 점은 아래와 같습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;중간의 프록시가 추가 리소스를 전달하지 않을 수도 있습니다.(서버 푸시가 구현 안됐거나, 정책적으로 막거나) 그리고 프록시 자체적으로도 클라이언트에게 서버 푸시를 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;서버는 안전하고, 캐시가능하고, 본문을 포함하지 않는 요청에 대해서만 푸시할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;푸시할 리소스는 클라이언트의 본 요청과 연관되어야 합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트는 서버가 푸시한 리소스를 ‘동일 출처 정책’에 따라 검사해야 합니다.&lt;/li&gt;
  &lt;li&gt;서버 푸시를 끄고 싶다면 SETTINGS_ENABLE_PUSH를 0으로 설정하면 됩니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;104-알려진-보안-이슈&quot;&gt;10.4. 알려진 보안 이슈&lt;/h3&gt;

&lt;h4 id=&quot;1041-중개자-캡슐화-공격intermediary-encapsulation-attacks&quot;&gt;10.4.1. 중개자 캡슐화 공격(Intermediary Encapsulation Attacks)&lt;/h4&gt;

&lt;p&gt;HTTP/2.0 메세지를 프록시가 HTTP/1.1로 변환할때 메세지의 의미가 바뀔 수 있습니다. HTTP/2.0에선 헤더필드의 이름과 값을 바이너리로 인코딩하기 때문에 헤더 필드에 어떤 문자열도 사용할 수 있습니다. 때문에 번역하는 프록시가 의도적으로 헤더를 바꿀 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;1042-긴-커넥션-유지로-인한-개인정보-누출-우려&quot;&gt;10.4.2. 긴 커넥션 유지로 인한 개인정보 누출 우려&lt;/h4&gt;

&lt;p&gt;HTTP/2.0에선 기본적으로 클라이언트와 서버의 커넥션이 오래 유지될 것이라고 가정합니다. 이 경우에 개인정보 유출의 위험이 있습니다. 예를들어, 사용자가 브라우저를 사용할때 이전 사용자가 무엇을 주고 받았는지 알아낼 수도 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;추가저으로 좋은 링크 (https://developers.google.com/web/fundamentals/performance/http2)[https://developers.google.com/web/fundamentals/performance/http2]&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 9 - 웹 로봇</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C9/"/>
   <updated>2020-03-19T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드9</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;크롤러는 프로그래밍을 직업으로 하지 않더라도 사회 과학 및 통계를 공부하다 보면 만나게 되는 주제입니다. 많은 학부생 졸업논문의 재료가 되기도 합니다.&lt;/p&gt;

&lt;p&gt;크롤러, 스파이더, 웜, 봇 등 다양한 이름으로 불리는 이런 것들을 통칭해 ‘웹 로봇’이라고 부릅니다.&lt;/p&gt;

&lt;p&gt;웹 로봇은 사람과 상호작용 없이 연속된 웹 트랜잭션들을 자동으로 수행하는 프로그램들을 말합니다. 이번 장에선 이 웹 로봇에 대해 알아봅니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;91-크롤러와-크롤링&quot;&gt;9.1. 크롤러와 크롤링&lt;/h3&gt;

&lt;p&gt;대표적인 웹 로봇인 웹 크롤러는 웹 페이지 하나를 가져오고, 그 페이지에서 가리키는 모든 웹 페이지를 가져오고, 다시 재귀적으로 반복해서 가져오며 웹을 순회하는 로봇입니다.&lt;/p&gt;

&lt;p&gt;다양한 웹 크롤러가 있지만 검색 엔진의 DB에 저장하기 위해 웹을 돌아다니는 검색 엔진 스파이더들이 가장 복잡한 웹 로봇중 하나입니다.&lt;/p&gt;

&lt;p&gt;크롤러들이 어떻게 동작하는지 알아보겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;911-어디에서-시작하는가-루트-집합&quot;&gt;9.1.1. 어디에서 시작하는가: ‘루트 집합’&lt;/h4&gt;

&lt;p&gt;크롤러를 풀어 놓기위해선 출발지점을 주어야 합니다. 크롤러가 방문을 시작하는 출발지점의 URL들을 모아놓은 집합을 루트 집합(root set)이라고 부릅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/root_set.png&quot; alt=&quot;root_set.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이 root set을 설정하는 것은 매우 중요합니다. 웹에 있는 모든 문서를 탐색가능하게 하는 하나의 문서는 없기 때문이죠.&lt;/p&gt;

&lt;p&gt;위 사진의 예를 보겠습니다. A에서 시작한 크롤러는 G, H, I, L, N, S, T, U엔 도달하지 못합니다. 그리고 S, T, U 문서 집합은 왼편의 문서들과 연결점이 없어 고립되어 있습니다. 이런 상황에서 root set을 적절히 설정하지 못하면 놓치는 문서가 발생할 수 있습니다. 위 상황에선 A, G, S이 모든 문서를 탐색 가능하게 하는 최소의 root set 입니다.&lt;/p&gt;

&lt;p&gt;좋은 root set은 아래와 같이 이루어져 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;크고 인기있는 웹 사이트&lt;/li&gt;
  &lt;li&gt;새로 생성된 페이지들의 목록&lt;/li&gt;
  &lt;li&gt;자주 링크되지 않는 잘 알려지지 않은 페이지들의 목록&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이런 root set은 고정되어 있지 않고 항상 갱신되며 새로운 크롤링과 크롤러를 위한 시드 목록이 됩니다.&lt;/p&gt;

&lt;h4 id=&quot;912-링크-추출과-상대-링크-정상화&quot;&gt;9.1.2. 링크 추출과 상대 링크 정상화&lt;/h4&gt;

&lt;p&gt;크롤러가 다음 문서로 넘어가기 위해선 현재 문서에 있는 URL 링크들을 알아와야 합니다. 이때 2장에서 알아본 것 처럼 절대 URL과 상대 URL이 있는데, 크롤러는 HTML문서 파싱시 상대 URL을 절대 URL로 변환해야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;913-순환-피하기&quot;&gt;9.1.3. 순환 피하기&lt;/h4&gt;

&lt;p&gt;크롤러를 사용할때 주의해야 할 점은 크롤러가 순환에 빠지지 않도록 하는 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/crawler_loop.png&quot; alt=&quot;crawler_loop.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위 상황에선 크롤러가 &lt;code class=&quot;highlighter-rouge&quot;&gt;A - B - C - A - B ...&lt;/code&gt; 순환에 빠져버렸습니다.&lt;/p&gt;

&lt;p&gt;이를 피하기 위해선 크롤러들이 어디를 방문 했는지 알아야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;914-루프와-중복&quot;&gt;9.1.4. 루프와 중복&lt;/h4&gt;

&lt;p&gt;크롤러가 순환에 빠지는 상황은 다음과 같은 문제를 야기합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;크롤러가 루프에 빠져 꼼짝 못하게 됩니다.&lt;/li&gt;
  &lt;li&gt;루프에 빠진 크롤러가 빠르다면 크롤러가 요청을 보낸 서버는 같은 사용자로부터 같은 요청을 반복적으로 받게됩니다. 이는 요청을 보낸 서버에 부담이 될 수 있고, 크롤러가 아닌 실제 사용자가 사용하지 못하는 상황이 발생할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;많은 수의 중복 페이지가 크롤러 서버에 저장됩니다. 잘못 만들어진 크롤러를 사용하면, 검색엔진에서 수백개의 같은 페이지를 보여줄 수도 있습니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;915-빵-부스러기의-흔적&quot;&gt;9.1.5. 빵 부스러기의 흔적&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/number_of_websites.png&quot; alt=&quot;number_of_websites.png&quot; /&gt;[https://news.netcraft.com/archives/2018/08/24/august-2018-web-server-survey.html]&lt;/p&gt;

&lt;p&gt;위는 netcraft에서 조사한 전 세계 hostname 갯수입니다. 본 책에서 인터넷엔 수십억 개의 서로 다른 &lt;strong&gt;웹 페이지&lt;/strong&gt;가 존재한다고 했는데 2002년 기준이기 때문에 얼마나 늘었을가 궁금해 찾아봤습니다.&lt;/p&gt;

&lt;p&gt;2002년엔 hostname이 4000만개 정도 됐는데 이때 서로다른 웹 페이지가 수십억개 였다면, 그래프의 마지막인 2018년 8워엔 hostname만 16억개 입니다. 서로다른 웹페이지수는… 수백억이 되지 않을까 합니다.&lt;/p&gt;

&lt;p&gt;이렇게 많은 각기다른 웹 페이지를 크롤링하고, 중복된 크롤링을 피하기 위해선 어느 URL을 크롤링 했는지 기억해야 합니다. 이를 위해 검색 트리나 해시 테이블과 같은 자료구조를 사용합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;트리와 해시 테이블&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;URL들을 효과적으로 관리하기 위해 검색 트리나 해시 테이블을 사용하는 방법을 사용할수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;느슨한 존재 비트맵(presence bit array)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;공간 사용을 최소화 하기 위해 몇몇 대규모 크롤러들은 presence bit array 와 같은 느슨한 자료구조를 사용합니다.&lt;/p&gt;

&lt;p&gt;URL을 해시함수로 고정된 크기의 숫자로 변환합니다. 그리고 해당 숫자 번째에 presence bit가 있는지 확인합니다. presence bit가 존재하면 해당 URL은 이미 크롤링 했다고 판별 합니다. 이 방법의 경우 URL은 무한하기 때문에 서로 다른 URL이 해시함수를 거쳤을때 같은 수로 변환 될 수도 있습니다. 이땐 페이지 하나를 놓치게 됩니다.&lt;/p&gt;

&lt;p&gt;예전에 해시 테이블을 구현하는 공부를 했었는데 같은 원리 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;체크 포인트&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;크롤러가 갑작스럽게 중단될 경우를 대비해 방문한 URL의 목록이 하드디스크에 저장되었는지 확인합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;파티셔닝&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;웹이 커지며 한 대의 컴퓨터에서 하나의 크롤러로 모든 웹을 크롤링 하는건 불가능해졌습니다. 대규모 웹 로봇은 하나의 큰 farm에 여러 컴퓨터에서 여러 크롤러들이 각자 부분을 할당받아 작업합니다.&lt;/p&gt;

&lt;h4 id=&quot;916-별칭alias과-로봇-순환&quot;&gt;9.1.6. 별칭(Alias)과 로봇 순환&lt;/h4&gt;

&lt;p&gt;URL은 별칭을 가질 수 있기 때문에 보여지는 URL은 다르지만 실질적으로 같은 웹 페이지를 가리키는 것들이 있습니다. 다음과 같은 사례들입니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;첫 번째 URL&lt;/th&gt;
      &lt;th&gt;두 번째 URL&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/bar.html&lt;/td&gt;
      &lt;td&gt;http://www.foo.com:80/bar.html&lt;/td&gt;
      &lt;td&gt;기본 포트가 80번일때&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/~fred&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/%7Fred&lt;/td&gt;
      &lt;td&gt;이스케이프 문자의 사용/미사용&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/x.html#early&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/x.htm#middle&lt;/td&gt;
      &lt;td&gt;태그가 다를때&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;d&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/readme.htm&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/README.HTM&lt;/td&gt;
      &lt;td&gt;서버가 대소문자를 구분하지 않을때&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;e&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/index.html&lt;/td&gt;
      &lt;td&gt;기본 페이지가 index.html일때&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;f&lt;/td&gt;
      &lt;td&gt;http://www.foo.com/index.html&lt;/td&gt;
      &lt;td&gt;http://209.231.87.45/index.html&lt;/td&gt;
      &lt;td&gt;아이피 주소&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;917-url-정규화하기&quot;&gt;9.1.7. URL 정규화하기&lt;/h4&gt;

&lt;p&gt;위와 같은 문제를 해결하기 위해 대부분의 웹 크롤러들은 URL을 표준 형식으로 정규화합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;포트번호가 명시되지 않았다면 호스트명에 :80을 추가합니다&lt;/li&gt;
  &lt;li&gt;PercentEncoding으로 이스케이핑된 문자들을 원래 문자로 바꿉니다(ex - %7 -&amp;gt; ~)&lt;/li&gt;
  &lt;li&gt;’#’ 태그를 제거합니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;위 방법으로 9.1.6.의 a, b, c는 해결 할 수 있습니다. 하지만 d, e, f의 경우 각 서버마다 아래와 같이 정책이 다르기 때문에 완벽하게 정규화 할 순 없습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;웹 서버가 대소문자를 구분 할 수도 있고 안할수도 있습니다.&lt;/li&gt;
  &lt;li&gt;기본 페이지를 설정 할 수도 있고 안할수도 있습니다.&lt;/li&gt;
  &lt;li&gt;가상 호스팅된 서버라면 여러 도메인네임이 같은 IP를 가리키게 됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;918-파일-시스템-링크-순환&quot;&gt;9.1.8. 파일 시스템 링크 순환&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;심볼릭 링크(Symbolic link)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;다른 파일이나 디렉터리에 대한 참조를 가지고 있는 파일입니다. 윈도우의 바로가기를 생각하면 좋을 것 같습니다.&lt;/p&gt;

&lt;p&gt;이 심볼릭 링크가 URL상에 올라가게 되면 순환을 만들어 낼 수도 있습니다. 대부분 심볼릭 링크로 인한 순환은 개발자의 실수로 일어납니다. 아래와 같은 상황을 보겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/symbolic_link.png&quot; alt=&quot;symbolic_link.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;나중에 추가&lt;/p&gt;

&lt;h4 id=&quot;919-동적-가상-웹-공간&quot;&gt;9.1.9. 동적 가상 웹 공간&lt;/h4&gt;

&lt;p&gt;웹 서버는 URL을 받아들일때 동적으로 새로운 리소스를 만들어 돌려줄 수 있습니다. 때문에 몇몇 악의적인 개발자들은 일부러 크롤러를 함정에 빠뜨리기 위해 가상의 URL을 받으면 다른 가상의 URL을 갖는 가상의 HTML문서를 만들어 돌려줄 수 있습니다.&lt;/p&gt;

&lt;p&gt;웹 크롤러가 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.trap.com/trap&lt;/code&gt; 으로 요청을 보냈을때, 악의적인 서버는 해당 URL에 따라 다음과 같은 리소스를 동적으로 만들어 돌려줄 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;HTML&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;BODY&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.trap.com/trap2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;trap2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/BODY&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/HTML&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 응답을 받은 크롤러는 응답받은 웹 페이지가 가지고 있는 링크인 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.trap.com/trap2&lt;/code&gt;로 요청을 보내게 되고 이 악의적인 사이트는 이번엔&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;HTML&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;BODY&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.trap.com/trap3&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;trap3&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/BODY&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/HTML&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이런 응답을 보내주게 될 것입니다. 이 상황이 안좋은건 크롤러가 요청하는 URL은 계속 바뀌기 때문에 크롤러가 스스로 함정에 걸린지 알아채기 어렵다는 것입니다.&lt;/p&gt;

&lt;p&gt;이런 상황은 &lt;strong&gt;악의적인 함정이 아니고서도 URL에 따라 동적인 링크를 생성하는 곳이면 발생할 수 있습니다.&lt;/strong&gt; 예를들어 어느 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.canlendar.com/2020/03&lt;/code&gt; 과 같이 &lt;strong&gt;년, 월 정보를 갖는 URL을 보내면 이전달과 이후달의 링크가 걸린 달력 웹페이지를 보여주는 웹 페이지&lt;/strong&gt;가 있다고 가정한다면, 해당 웹 페이지는 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.canlendar.com/2020/02&lt;/code&gt; 링크와 &lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.canlendar.com/2020/04&lt;/code&gt;  링크를 갖는 응답을 돌려주고 크롤러는 과거와 미래의 끝을 보려 끊임없이 달려갈 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;9110-루프와-중복-피하기&quot;&gt;9.1.10. 루프와 중복 피하기&lt;/h4&gt;

&lt;p&gt;모든 순환을 피하는 완벽한 방법은 없지만 다음과 같은 방법을 사용해 순환을 줄일 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;URL 정규화&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;앞서 살펴본 URL 정규화 입니다. 같은 리소스를 가리키는 다른 URL을 제거할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;너비 우선 크롤링&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;알고리즘 공부를 해봤다면 DFS/BFS를 아실겁니다. 크롤링도 일종의 그래프 탐색이기 때문에 DFS방식으로 할지 BFS 방식으로 할지 결정할 수 있습니다. 
 크롤러가 BFS 방식으로 작동하게 한다면 순환 함정이 있어도 다른 웹사이트들을 모두 들른 다음 함정에 빠지고, 다시 다른 웹사이트를 모두 들른 다음 함정에 빠지게 됩니다. 함정에 빠지면서도 다른 웹 페이지를 탐색할 수 있습니다.
 또한, BFS로 설계된 크롤러는 요청하는 서버들에 부담을 줄여줄 수 있습니다. DFS 방식은 한 호스트를 먼저 다 탐색하기 때문에 해당 호스트엔 많은 요청이 가게됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;스로틀링(Throttling)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;크롤러가 한 호스트에 대해 일정 시간동안 가져올 수 있는 페이지의 숫자를 제한할 수 있습니다. 순환에 빠지더라도 미리 설정해둔 페이지수 제한에 걸리면 빠져나올 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;URL 크기 제한&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;일정 길이 이상의 URL을 제한하면 앞서 살펴본 심볼릭 링크로 인한 순환을 막을 수 있습니다. 하지만 이 방법을 사용하면 의도치 않게 놓치게 되는 콘텐츠들이 생기게 됩니다. 특히 근래엔 URL 자체에 여러 정보를 포함하여 길어지는 경우가 많기 때문에 주의해야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;URL/사이트 블랙리스트&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;순환을 만들어내거나 악의적인 함정이 있는 것으로 알려진 사이트와 URL 목록을 만들어 해당 목록들을 피할 수 있습니다. 그리고 문제를 일으키는 URL을 발견하면 이 블랙리스트에 추가합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;패턴 발견&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;앞서 설명한 심벌릭 링크때문에 발생하는것 같은 순환은 일정 패턴을 따르게 됩니다. URL 안에서 일정 패턴이 발견되면 이를 거부하는 방법을 사용할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;콘텐츠 지문(fingerprint)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;콘텐츠 지문은 콘텐츠의 중복을 감지하는 더 직접적인 기술입니다. 앞선 방법들이 URL만 검사를 했다면 콘텐츠 지문은 페이지의 콘텐츠중 일부를 얻어 checksum을 계산합니다. 이 checksum은 페이지 내용에 대한 간략한 표현인데 이는 지문처럼 각 콘텐츠를 식별하는 역할을 합니다.
 이 checksum을 구하는 방법엔 여러가지가 있습니다. MD5와 같은 메세지 요약함수가 checksum을 구하는 방법입니다.
 하지만 이 방법 역시 한계가 있습니다. 해시 함수 처럼 두 페이지가 달라도 checksum이 같을 수도 있습니다. 그리고 같은 컨텐츠에 동적으로 조금씩만 바뀌지만 그 부분이 checksum 함수에 들어가 다른 콘텐츠로 인식할 수도 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;92-로봇의-http&quot;&gt;9.2. 로봇의 HTTP&lt;/h3&gt;

&lt;p&gt;웹 로봇들 역시 기본적으론 HTTP 클라이언트 프로그램입니다. 따라서 HTTP명세를 준수해야 합니다. 하지만 많은 웹 로봇들은 HTTP를 최소한으로만 구현합니다. HTTP/1.1이 있지만 요구사항이 적은 HTTP/1.0을 사용하기도 합니다.(2002년 기준입니다.)&lt;/p&gt;

&lt;h4 id=&quot;921-요청-헤더-식별하기&quot;&gt;9.2.1. 요청 헤더 식별하기&lt;/h4&gt;

&lt;p&gt;최소한으로 구현하는 HTTP 중엔 신원 식별 헤더가 있습니다. 로봇의 능력, 신원, 출신 등을 알려주는 기본적인 헤더들입니다. 기본적인 정보를 알려주면 서버는 크롤러가 식별할 수 있는 형식의 콘텐츠를 돌려줄 수 있습니다.&lt;/p&gt;

&lt;p&gt;다음과 같은 식별헤더가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;User-Agent&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버에게 요청을 만든 로봇의 이름을 말해줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;From&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;로봇의 사용자/관리자의 이메일 주소를 제공합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Accept&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버에게 어떤 미디어 타입을 원하는지 말해줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Referer&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;현재 요청 URL을 포함한 문서의 URL을 제공합니다.&lt;/p&gt;

&lt;h4 id=&quot;922-가상-호스팅&quot;&gt;9.2.2. 가상 호스팅&lt;/h4&gt;

&lt;p&gt;요즘엔 가상 호스팅 환경이 많기 때문에 웹 로봇들은 Host 헤더를 지원할 필요가 있습니다.&lt;/p&gt;

&lt;p&gt;A서버에서 www.joes-hardware.com과 www.foo.com 두 사이트를 가상호스팅 환경하에서 운영한다고 가정해봅시다. 이때 두 사이트의 실제 IP주소는 같게 됩니다.&lt;/p&gt;

&lt;p&gt;만약, 웹 로봇이 www.foo.com에서 크롤링을 하던 도중 아래와 같이 상대 URL을 사용해 Host헤더 없이 요청을 보냈다고 가정합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /index.html HTTP/1.0
User-agent : ShopBot 1.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 요청을 받은 A서버는 이 요청이 www.joes-hardware.com에게 온건지, www.foo.com 에게 온건지 확인할 수 없습니다. 따라서 A서버는 기본값으로 설정된 사이트의 /index.html을 찾아 돌려줄 것입니다.&lt;/p&gt;

&lt;p&gt;다른 예시로, 어떤 인터넷 뉴스 회사가 정치적으로 진보, 보수인 뉴스를 가르기 위해 두 개의 다른 도메인을 운영중이라고 가정합니다.&lt;/p&gt;

&lt;p&gt;이때, 진보 성향의 블로그를 운영하는 사람이 진보에 관한 뉴스를 크롤링해 당 지지자들에게 메일로 발송하려 합니다. 이때 위와 같은 상황이 발생하면 보수관련 뉴스 한 가득을 보낼 수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;923-조건부-요청&quot;&gt;9.2.3. 조건부 요청&lt;/h4&gt;

&lt;p&gt;캐시에 대해 배울때 조건부 요청을 알아본적이 있습니다. 특정 일 이후로 변경되었다면, 혹은 특정 버전이 아니라면 등 조건을 붙여 요청을 받아올 수도 있었습니다.&lt;/p&gt;

&lt;p&gt;웹 로봇에서도 이런 조건부 요청을 구현한 웹 로봇들이 있습니다. 인터넷 검색엔진용 크롤러의 경우 콘텐츠가 변경되었을때만 새로 받아오도록 할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;924-응답-다루기&quot;&gt;9.2.4. 응답 다루기&lt;/h4&gt;

&lt;p&gt;대부분의 웹 로봇의 관심사는 GET 메서드로 요청을 받아오는 것이기 때문에 응답을 자세히 다루는 로봇은 드뭅니다. 그러나 조건부 요청 등 서버와 긴밀한 상호작용이 필요한 로봇들은 HTTP의 응답역시 다뤄야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;상태코드&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;모든 로봇은 200 OK나 404 Not Found는 이해해야합니다. 로봇이 이해할 수 없는 코드라면, 그 코드의 분류에 맞춰 다뤄야 합니다. 
 또한 모든 서버가 에러 코드를 적절히 반환하진 않습니다. 에러를 기술하는 메세지를 200 OK로 답장 하는 서버도 있으니 이런 점은 항상 염두해 두어야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;엔터티&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;응답을 적절히 다루기 위해 웹 로봇들은 html head 부분에 임베딘됭 정보를 찾기도 합니다. head부분의 meta 태그는 리소스에 대해 서버가 아닌 콘텐츠 저자가 포함시긴 정보입니다.&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;HTML&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;HEAD&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Refresh&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1; URL=index.html&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/HEAD&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;BODY&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/BODY&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/HTML&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 태그는 1초후 index.html로 리다이렉트 하라는 태그입니다. 어떤 서버는 응답을 보내기 전에 html을 파싱해 html안의 meta태그를 http 헤더에 포함시키기도 하지만 어떤 서버는 그렇지 않기 때문에 웹 로봇은 이 엔터디 자체의 정보를 찾아볼수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;925-user-agent-타겟팅&quot;&gt;9.2.5. User-Agent 타겟팅&lt;/h4&gt;

&lt;p&gt;웹 서버 개발자라면 실제 사용자뿐 아니라 많은 웹 로봇들이 자신의 사이트에 방문할 것을 예상해야 합니다. 많은 웹 서버들은 콘텐츠를 온전히 보여주기 위해 요청의 브라우저 종류를 감지해 콘텐츠를 최적화해 보내줍니다.&lt;/p&gt;

&lt;p&gt;그런데 웹 로봇에 대한 대처가 잘 안되어 있다면, 브라우저를 사용안하는 웹 로봇에게 “your browser does not support frames” 같은 에러를 돌려줄 수도 있습니다.&lt;/p&gt;

&lt;p&gt;웹 서버 개발자라면 일반 사용자뿐 아니라 웹 로봇들도 서버를 이용 가능하도록 잘 대처해야 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;93-부적절하게-동작하는-로봇들&quot;&gt;9.3. 부적절하게 동작하는 로봇들&lt;/h3&gt;

&lt;p&gt;웹 로봇들은 예상과 다르게 행동할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;폭주하는 로봇&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;웹 로봇은 사람과 비교할수 없을 정도로 엄청나게 빠른 속도로 요청을 만들어 냅니다. 이런 로봇이 순환에 빠진채로 한 서버에 계속 요청을 하게 되면 서버에 과부하를 유발해 다른 사람들 역시 사용하지 못하게 될 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;오래된 URL&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;몇몇 로봇은 이미 가지고있는 URL의 목록들을 방문합니다. 이때 URL 목록이 오래되어 로봇들이 존재하지 않는 URL에 계속 요청을 보낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;길고 잘못된 URL&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;순환 및 개발상 오류로 로봇이 웹사이트에게 크고 의미없는 URL을 요청할 수 있습니다. URL이 많이 길어지면 상대 서버의 처리능력에 영향을 주고 로그를 어지럽힙니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;호기심이 지나친 로봇&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;어떤 로봇들은 사적인 데이터혹은 밖으로 드러나길 원하지 않는 컨텐츠에 대한 URL을 얻어 접근을 시도합니다. 이런 일은 개발자의 실수로 공개되면 안될 URL이 링크로 노출될때 발생합니다. 또, 직접적으로 URL을 노출하지 않더라도 디렉토리 URL로 접근시 index.html같은 기본 페이지를 내놓지 않고 해당 디렉토리 아래있는 콘텐츠들을 보여주는 경우에 발생할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/directory_url.png&quot; alt=&quot;directory_url.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;포스트를 작성하고 있는 jekyll 서버는 디렉토리 url을 요청시 index.html 파일이 없으면 위와 같은 디렉토리 구조를 노출합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/directory_url2.png&quot; alt=&quot;directory_url2.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Github page에선 index.html이 없는 디렉토리 url을 요청시 404  Not Found 페이지를 돌려줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;동적 게이트웨이 접근&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;앞 장에서 서버내 프로그램과 연결해주는 게이트웨이를 소개시켜드린바 있습니다. 웹 로봇은 이런 게이트웨이 어플리케이션이 갖는 콘텐츠에 대한 URL요청도 할 수 있습니다. 그런데 대게 이런 콘텐츠들은 특수 목적을 위한 것이어서 처리 비용이 많이드는 편입니다. 서버 개발자들은 이런 로봇들을 좋아하지 않습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;94-로봇-차단하기&quot;&gt;9.4. 로봇 차단하기&lt;/h3&gt;

&lt;h4 id=&quot;941-로봇-차단-표준&quot;&gt;9.4.1. 로봇 차단 표준&lt;/h4&gt;

&lt;h4 id=&quot;942-웹-사이트와-robotstxt-파일들&quot;&gt;9.4.2. 웹 사이트와 robots.txt 파일들&lt;/h4&gt;

&lt;h4 id=&quot;943-robotstxt-파일-포뱃&quot;&gt;9.4.3. robots.txt 파일 포뱃&lt;/h4&gt;

&lt;h4 id=&quot;944-그-외에-알아둘-점&quot;&gt;9.4.4. 그 외에 알아둘 점&lt;/h4&gt;

&lt;h4 id=&quot;945-robotstxt의-캐싱과-만료&quot;&gt;9.4.5. robots.txt의 캐싱과 만료&lt;/h4&gt;

&lt;h4 id=&quot;946-로봇-차단-펄-코드&quot;&gt;9.4.6. 로봇 차단 펄 코드&lt;/h4&gt;

&lt;h4 id=&quot;947-html-로봇-제어-meta-태그&quot;&gt;9.4.7. HTML 로봇 제어 META 태그&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;95-로봇-에티켓&quot;&gt;9.5. 로봇 에티켓&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;96-검색엔진&quot;&gt;9.6. 검색엔진&lt;/h3&gt;

&lt;h4 id=&quot;961-넓게-생각하라&quot;&gt;9.6.1. 넓게 생각하라&lt;/h4&gt;

&lt;h4 id=&quot;962-현대적인-검색엔진의-아키텍처&quot;&gt;9.6.2. 현대적인 검색엔진의 아키텍처&lt;/h4&gt;

&lt;h4 id=&quot;963-풀-텍스트-색인&quot;&gt;9.6.3. 풀 텍스트 색인&lt;/h4&gt;

&lt;h4 id=&quot;964-질의-보내기&quot;&gt;9.6.4. 질의 보내기&lt;/h4&gt;

&lt;h4 id=&quot;965-검색-결과를-정렬하고-보여주기&quot;&gt;9.6.5. 검색 결과를 정렬하고 보여주기&lt;/h4&gt;

&lt;h4 id=&quot;966-스푸핑&quot;&gt;9.6.6. 스푸핑&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 8 - 통합점 - 게이트웨이, 터널, 릴레이</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C8/"/>
   <updated>2020-03-18T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드8</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;이번 장에선 HTTP 프로토콜이 다른 프로토콜과 만나는 다음 4개의 지점들에 대해 알아볼 것입니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;게이트웨이 : 서로 다른 프로토콜과 애플리케이션간의 HTTP인터페이스. 다른 프로토콜이 HTTP로, HTTP가 다른 프로토콜로 변환되는 지점&lt;/li&gt;
  &lt;li&gt;애플리케이션 인터페이스 : 서로 다른 형식의 웹 애플리케이션이 통신하는데 사용&lt;/li&gt;
  &lt;li&gt;터널 : HTTP 커넥션을 통해 다른 프로토콜의 트래픽을 전송&lt;/li&gt;
  &lt;li&gt;릴레이 : 단순한 HTTP 프록시로, 한 번에 한 개의 홉에 데이터를 전달.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;81-게이트웨이&quot;&gt;8.1. 게이트웨이&lt;/h3&gt;

&lt;p&gt;웹은 다양하고 많은 리소스를 가지고 있어, 한개의 서버만으론 모든 리소스를 관리하기 힘들어졌습니다. 이에 따라 인터프리터와 같이 리소스를 받기위한 경로를 안내하는 역할의 게이트웨이들이 등장하기 시작했습니다.&lt;/p&gt;

&lt;p&gt;게이트웨이의 역할은 리소스와 애플리케이션을 연결하는 것입니다. 게이트웨이는 리소스를 가져올 수 있는 적합한 프로토콜을 사용해 리소스를 가져와 애플리케이션이 원하는 프로토콜로 보내줍니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP/FTP 게이트웨이 : 클라이언트의 HTTP요청이 FTP서버에 있는 파일을 가리킬때 요청은 게이트웨이를 통과해 FTP 서버에서 파일을 가져와 HTTP로 돌려줍니다.&lt;/li&gt;
  &lt;li&gt;HTTP/HTTPS 게이트웨이 : 게이트웨이가 SSL요청을 받고 해독해 HTTP 요청으로 바꿔 원 서버에게 전달합니다. 이런 보안 가속기 게이트웨이는 보통 웹 서버의 바로 앞단에 위치합니다.&lt;/li&gt;
  &lt;li&gt;HTTP/CGI 게이트웨이 : HTTP 요청을 받은 뒤 CGI를 통해 서버 안의 애플리케이션으로 보내고, 받아온 리소스를 다시 HTTP로 돌려줍니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;811-클라이언트-측-게이트웨이와-서버-측-게이트웨이&quot;&gt;8.1.1. 클라이언트 측 게이트웨이와 서버 측 게이트웨이&lt;/h4&gt;

&lt;p&gt;앞의 예에서 HTTP/FTP, HTTP/HTTPS, HTTP/CGI와 같이 표현했습니다. 이와 같이 게이트웨이가 변환하는 프로토콜은&lt;/p&gt;

&lt;blockquote&gt;
  &lt;클라이언트 프로토콜=&quot;&quot;&gt;/&lt;서버 프로토콜=&quot;&quot;&gt;
&lt;/서버&gt;&lt;/클라이언트&gt;
&lt;/blockquote&gt;

&lt;p&gt;위와 같이 표현합니다.&lt;/p&gt;

&lt;p&gt;그리고 앞으로 ‘서버 측 게이트웨이’와 ‘클라이언트 측 게이트웨이’라는 용어가 등장할 것입니다. 이는 게이트웨이가 어느쪽 역할을 하고 있는지 말해줍니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;서버 측 게이트웨이 : &lt;HTTP&gt;/&lt;기타 프로토콜=&quot;&quot;&gt;&lt;/기타&gt;&lt;/HTTP&gt;&lt;/li&gt;
  &lt;li&gt;클라이언트 측 게이트웨이 : &lt;기타 프로토콜=&quot;&quot;&gt;/&lt;HTTP&gt;&lt;/HTTP&gt;&lt;/기타&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;82-프로토콜-게이트웨이&quot;&gt;8.2. 프로토콜 게이트웨이&lt;/h3&gt;

&lt;p&gt;이번 절에선 네트워크상 클라이언트와 서버를 연결해 주는 게이트웨이를 알아볼 것입니다.(다음 절에선 서버 내에서 서버와 다른 리소스 서버를 연결하는 게이트웨이를 알아 봅니다.)&lt;/p&gt;

&lt;h4 id=&quot;821-http-서버-측-웹-게이트웨이&quot;&gt;8.2.1. HTTP/*: 서버 측 웹 게이트웨이&lt;/h4&gt;

&lt;p&gt;서버 측 웹 게이트웨이는 클라이언트의 HTTP 요청을 받아 HTTP가 아닌 다른 프로토콜을 사용하는 서버와 연결해줍니다. HTTP/FTP 게이트웨이나 HTTP/HTTPS 같은 게이트웨이 입니다.&lt;/p&gt;

&lt;p&gt;책엔 HTTP/FTP 게이트웨이에 관한 예시가 나와 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/http_ftp_gateway.png&quot; alt=&quot;http_ftp_gateway&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;822-httphttps-서버-측-보안-게이트웨이&quot;&gt;8.2.2. HTTP/HTTPS: 서버 측 보안 게이트웨이&lt;/h4&gt;

&lt;p&gt;기업 내부로 들어오는 모든 HTTP 요청을 암호화 하여 고객들의 개인정보를 보호하고 보안을 제공해주는 게이트웨이 입니다.&lt;/p&gt;

&lt;p&gt;클라이언트는 일반적인 HTTP URL을 사용하지만 게이트웨이에서 자동으로 사용자의 모든 세션을 암호화 합니다.&lt;/p&gt;

&lt;h4 id=&quot;823-httpshttp-클라이언트-측-보안-가속-게이트웨이&quot;&gt;8.2.3. HTTPS/HTTP: 클라이언트 측 보안 가속 게이트웨이&lt;/h4&gt;

&lt;p&gt;요즘은 브라우저에서 기본적으로 http:// 가 아닌 https://를 많이 사용한다는 것은 알 것입니다. 이를 HTTP 서버와 통신시키기 위해선 HTTPS/HTTP 게이트웨이가 필요합니다. 이런 게이트웨이를 ‘보안 가속기’라고 부릅니다.&lt;/p&gt;

&lt;p&gt;클라이언트의 암호화된 요청인 HTTPS 요청을 받아들여 이를 해독하고 웹 서버엔 일반 HTTP 요청을 보냅니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/https_http_gateway.png&quot; alt=&quot;https_http_gateway&quot; /&gt;&lt;/p&gt;

&lt;p&gt;하지만 옮긴이에 따르면 요즘엔 대부분 SSL 암/복호화 모듈을 서버에 내장한다고 합니다. 로드 밸런서 중에도 SSL 모듈을 내장해 보안 가속기 게이트웨이의 역할을 해준다고 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;83-리소스-게이트웨이&quot;&gt;8.3. 리소스 게이트웨이&lt;/h3&gt;

&lt;p&gt;전 절에서 소개한 게이트웨이는 클라이언트와 서버 사이를 이어주는 게이트웨이였습니다. 한편, 가장 일반적인 형태의 게이트웨이인 애플리케이션 서버는 목적지 서버와 게이트웨이를 한 개의 서버로 결합해주는 역할을 합니다.  클라이언트와 HTTP로 통신하고, 서버 내에 있는 애플리케이션 프로그램들과도 연결됩니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/application_server_gateway.png&quot; alt=&quot;application_server_gateway&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위 그림에서 하나의 서버에 두 클라이언트가 각기 다른 요청을 보내고 있습니다. 애플리케이션 서버는 게이트웨이의 API를 이용해 서버 내에 동작하고 있는 프로그램과 연결됩니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트 A의 요청을 받은 애플리케이션 서버는 API를 이용해 서버내 카메라 관련 프로그램과 통신했습니다. 프로그램이 돌려준 결과물을 클라이언트에게 HTTP로 돌려줍니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;클라이언트 B의 요청을 받은 애플리케이션 서버는 서버 내 전자상거래 어플리케이션과 통신합니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;애플리케이션 서버가 사용하는 API중 최초로 널리쓰이게된 API는 CGI(Common Gateway Interface)입니다. 전 포스팅이나 앞에서도 계속 언급됐던 기술이죠.&lt;/p&gt;

&lt;p&gt;CGI는 말 그대로 인터페이스입니다. 애플리케이션 서버와 서버내 프로그램이 서로 통신할때 필요한 행동들(프로그램 실행, 프로그램 출력 수집, HTTP응답 회신 등…)을 모아놓은 것이죠.&lt;/p&gt;

&lt;p&gt;애플리케이션 서버에 요청이 들어오면 서버는 헬퍼 애플리케이션을 생성합니다. 이때 헬퍼 애플리케이션이 CGI를 구현한 프로그램입니다. CGI 프로그램인 헬퍼 어플리케이션이 필요한 데이터를 받고 서버 내 프로그램과 통신해 결과를 받아 서버에 반환합니다.&lt;/p&gt;

&lt;h4 id=&quot;831-공용-게이트웨이-인터페이스cgi&quot;&gt;8.3.1. 공용 게이트웨이 인터페이스(CGI)&lt;/h4&gt;

&lt;p&gt;CGI가 하는 역할을 때문에 CGI를 ‘서버 확장’이라고도 합니다. CGI는 최초로 널리쓰인 서버 확장이고 아직까지도  사용됩니다.(물론 책이 쓰여진 2002년 기준이고, 2020년 현재엔 초기 CGI는 찾아보기 힘듭니다.)&lt;/p&gt;

&lt;p&gt;CGI 애플리케이션은 Perl, C, Python 등 다양한 언어로 구현할 수 있습니다. 그리고 CGI자체가 단순하여 거의 모든 HTTP 서버가 지원합니다.&lt;/p&gt;

&lt;p&gt;CGI 애플리케이션이 어떻게 요청을 처리하는지는 사용자에게 보여지지 않습니다. 진행되는 처리 단계를 감추고, 잘못된 요청 및 데이터로부터 서버를 보호해줍니다.&lt;/p&gt;

&lt;p&gt;하지만 역시 단점도 있습니다. 기본적으론 각 요청마다 CGI 프로그램의 프로세스가 하나씩 생깁니다. 요청이 많아지면 이에 따른 부하 역시 커집니다. 이를 해결하고자 새로운 CGI인 Fast CGI등이 개발됐습니다. FastCGI는 데몬(Daemon, 사용자가 직접 제어하지 않고, 백그라운드에서 돌며 여러 작업을 하는 프로그램)으로 실행되어 매 요청마다 프로세스를 생성하지 않습니다.&lt;/p&gt;

&lt;p&gt;책이 쓰여진 시점이 아닌 2020년 현재엔 요청마다 CGI 프로세스를 만드는 방식은 거의 안쓰인다고 보면 됩니다.&lt;/p&gt;

&lt;h4 id=&quot;832-서버-확장-api&quot;&gt;8.3.2. 서버 확장 API&lt;/h4&gt;

&lt;p&gt;CGI 프로토콜은 구동 중인 서버에 외부 인터프리터가 접속하는 것을 도와줍니다. 하지만 서버 자체의 동작을 바꾸거나, 서버의 처리능력을 더 끌어올리기 위해선 외부에서 서버로 직접 연결할수 있어야 합니다. 이를 위해 만들어진 것이 서버 확장 API입니다.&lt;/p&gt;

&lt;p&gt;확장 API는 개발자가 외부에서 자신이 작성한 코드를 서버에 연결하거나, 서버의 컴포넌트를 자신이 만든 것으로 교체할 수 있게 해줍니다.&lt;/p&gt;

&lt;p&gt;아파치, 마이크로소프트, 넷스케이프와 같은 대중적인 서버의 대부분은 확장 API를 한개 이상 제공합니다. 서버 확장의 한 가지 예는 마이크로소프트의 프론트페이지 서버 확장(FPSE, FrontPage Server Extension)입니다. FPSE는 클라이언트에서 전송되는 원격 프로시져 호출(RPC, Remote Procedure Call)명령을 인식할 수 있습니다. 클라이언트 쪽에서 서버에 직접 명령을 내릴 수 있는 것이죠. 이 명령이 HTTP에 편승해 옵니다. 19장에서 더 자세히 볼 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;84-애플리케이션-인터페이스와-웹-서비스&quot;&gt;8.4. 애플리케이션 인터페이스와 웹 서비스&lt;/h3&gt;

&lt;p&gt;앞서 살펴본 것 처럼 HTTP는 애플리케이션을 연결하는 도구로 사용됩니다. 이때 항상 생기는 이슈는 두 애플리케이션 사이에서 프로토콜의 인터페이스를 조율하는 일입니다.&lt;/p&gt;

&lt;p&gt;HTTP 헤더만으로 표현하기 힘든 정보를 교환해야 할때 HTTP를 확장하기도하고 HTTP위에 프로토콜을 덧씌우기도 합니다. 이는 19장에서 자세히 알아볼것입니다.&lt;/p&gt;

&lt;p&gt;인터넷 커뮤니티들에선 웹 어플리케이션들이 서로 통신하는데 사용할 표준과 프로토콜 집합을 계속 개발해오고 있습니다. 이런 기술들은 모두 HTTP같은 웹 표준 기술 위에서 개발됩니다. 이런 기술을 ‘웹 서비스’라고도 합니다.(원래 웹 서비스는 독립적인 웹 어플리케이션 자체를 뜻하지만 이런 기술 역시 웹 서비스라고 불리게 되었습니다.)&lt;/p&gt;

&lt;p&gt;대표적인 웹 서비스 기술로는 SOAP(Simple Object Access Protocol)을 통한 XML(eXtensible Markup Language)교환입니다. 애플리케이션끼리 SOAP 프로토콜을 사용해 XML 형식의 데이터를 주고받습니다. 이 방식은 근래(2020년)엔 REST(Representational State Transfer) 방식을 이용한 JSON(JavaScript Object Notation) 교환으로 많이 바뀌었습니다. 개발을 시작한지 얼마 되지 않은 저에겐 SOAP, XML보다 REST, JSON이 더 익숙합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;85-터널&quot;&gt;8.5. 터널&lt;/h3&gt;

&lt;p&gt;지금까지 게이트웨이, 웹 서비스에 대해 알아봤습니다. 지금부터 볼 웹 터널은 HTTP프로토콜과 다른 프로토콜을 연결하는 다른 방법입니다.&lt;/p&gt;

&lt;p&gt;웹 터널은 쉽게 말해 HTTP 커넥션을 통해 HTTP가 아닌 트래픽을 전송할수 있고, 다른 프로토콜을 HTTP 위에 올릴 수 있는 기술입니다. 주된 사용 이유는 HTTP가 아닌 트래픽을 전송하기 위해서입니다. 만약 HTTP 트래픽만 허용하는 방화벽이 있다면, 일반적인 방법으론 다른 트래픽이 이 방화벽을 넘을 수 없지만 터널을 사용하면 다른 트래픽도 HTTP 처럼 넘길 수 있게 됩니다.&lt;/p&gt;

&lt;h4 id=&quot;851-connect로-http-터널-커넥션-맺기&quot;&gt;8.5.1. CONNECT로 HTTP 터널 커넥션 맺기&lt;/h4&gt;

&lt;p&gt;HTTP 커넥션을 통해 다른 트래픽을 넘기기 위해서 우선 HTTP 커넥션을 맺어야 합니다. 커넥션을 맺는데는 CONNECT 메서드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;CONNECT 메서드 요청을 받은 게이트웨이는 목적지 서버와 TCP 커넥션을 맺습니다. 그리고 클라이언트와 목적지 서버가 주고받는 데이터들을 무조건 전달합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/tunnel.png&quot; alt=&quot;tunnel.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;예시 그림은 SSL 트래픽이 터널을 통해 전송되는 SSL 터널을 묘사한 것입니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트는 게이트웨이에 터널을 연결하기 위해 CONNECT 요청을 보냅니다. 요청 URL은 목적지 서버입니다.&lt;/li&gt;
  &lt;li&gt;CONNECT요청을 받은 게이트웨이가 목적지 서버와 TCP 커넥션을 맺습니다.&lt;/li&gt;
  &lt;li&gt;게이트웨이와 목적지 서버의 TCP 커넥션이 맺어지면 클라이언트에게 준비가 됐다고 메세지를 보냅니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 메세지를 받았다면 이 시점부터 터널이 연결된 것입니다. 이 HTTP 터널을 통해 전송된 데이터는 위 그림과 같이 TCP 커넥션을 통해 바로 목적지 서버에게 전달되고, 목적지 서버가 응답한 데이터도 바로 클라이언트에게 돌아옵니다.(이때, HTTP 메세지 형식으로 돌아오는게 아니라 보낸 데이터 그대로 돌아온다는걸 주의합시다.)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;CONNECT 요청&lt;/strong&gt;
 CONNECT 요청의 문법은 시작줄을 제외하곤 다른 HTTP 메서드와 같습니다. 요청 URI는 목적지 서버의 URI입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CONNECT 응답&lt;/strong&gt;
 보낸 CONNECT 요청에 대해 200 응답이 오면 터널이 맺어집니다. 이때 200 코드에 대한 사유구절은 보통 ‘Connection Established’를 많이 사용합니다. 
 일반적인 HTTP 응답과 달리 Content-Type 헤더를 포함할 필요는 없습니다. 터널이 맺어지면 HTTP 메세지를 전송하는게 아니라 바이트를 그대로 전달하기 때문입니다.&lt;/p&gt;

&lt;h4 id=&quot;852-데이터-터널링-시간-커넥션-관리&quot;&gt;8.5.2. 데이터 터널링, 시간, 커넥션 관리&lt;/h4&gt;

&lt;p&gt;터널이 맺어진뒤 터널을 통해 전달되는 데이터는 터널을 맺게 도와준 게이트웨이에선 볼 수 없습니다. 게이트웨이는 패킷의 순서나 흐름을 건드릴 수 없습니다.&lt;/p&gt;

&lt;p&gt;터널의 성능을 높이기 위해 클라이언트는 CONNECT 요청을 보내고 이에 대한 응답을 받기 전에 미리 터널 데이터를 전송하기도 합니다. 이 방법은 성공한다면 더 빠른 응답을 얻을 수 있지만, 게이트웨이도 이와 같은 방식에 대응할 수 있도록 준비가 되어 있어야 사용할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;853-ssl-터널링&quot;&gt;8.5.3. SSL 터널링&lt;/h4&gt;

&lt;p&gt;웹 터널의 본래 등장 목적은 SSL트래픽을 방화벽 너머로 전달하기 위함입니다. 많은 회사에서 보안을 이유로 모든 트래픽이 패킷들을 필터링하는 라우터 및 프록시를 지나게 해두었습니다. 그런데 SSL 프로토콜은 낡은 방식의 프록시에선 처리되지 않습니다.(요즘엔 내장되어 있습니다.) 따라서 SSL 트래픽을 낡은 방화벽 프록시 뒤로 넘기기 위해 터널이 사용되기 시작했습니다.&lt;/p&gt;

&lt;p&gt;하지만 이후 이런 터널은 만들지 않고도 SSL트래픽이 방화벽을 넘을 수 있도록 HTTP에 ‘터널링’기능이 추가 됐습니다. 터널링 기능은 HTTP 메세지에 암호화된 SSL raw 데이터를 담아 전송하는 것입니다. 아래 그림을 보시겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/tunneling.png&quot; alt=&quot;tunneling.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(a)는 SSL 트래픽이 보안 웹 서버의 443 포트로 바로 들어가는 상황이고 (b)는 SSL 데이터가 HTTP 메세지에 담겨 80 포트로 들어간 다음 SSL 트래픽이 보안 웹 서버로 이어지는 상황입니다.&lt;/p&gt;

&lt;p&gt;이런 터널링은 방화벽을 뚫는데 유용하게 사용되지만, 악의적인 트래픽이 방화벽 안으로 유입되는 통로가 되기도 합니다.&lt;/p&gt;

&lt;h4 id=&quot;854-ssl-터널링-vs-httphttps-게이트웨이&quot;&gt;8.5.4. SSL 터널링 vs HTTP/HTTPS 게이트웨이&lt;/h4&gt;

&lt;p&gt;앞서 웹 서버에 보안이 필요한 경우 HTTP/HTTPS 게이트웨이를 사용하는 방법을 알아보았습니다. 클라이언트는 일반 요청을 보내고 중간의 게이트웨이가 SSL 인증을 담당하는 방법이었죠. 이 방법엔  다음과 같은 단점이 존재합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트-게이트웨이 사이엔 보안이 적용되지 않은 일반 HTTP 커넥션이 맺어져 있습니다.&lt;/li&gt;
  &lt;li&gt;프록시(게이트웨이)가 인증을 담당하고 있기 때문에, 클라이언트는 원격 서버에 직접 SSL 인증을 할 수 없습니다.&lt;/li&gt;
  &lt;li&gt;게이트웨이가 SSL을 완벽하게 지원해야 합니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;방금 알아본 SSL 터널링은 위와 같은 단점을 해결해줍니다. 클라이언트와 서버가 직접 커넥션을 맺기 때문에 중간에 보안이 취약한 지점이 없어집니다. 중간의 프록시는 암호화된 데이터를 그대로 넘길 뿐입니다.&lt;/p&gt;

&lt;h4 id=&quot;855-터널-인증&quot;&gt;8.5.5. 터널 인증&lt;/h4&gt;

&lt;p&gt;하지만 이런 터널을 모든 클라이언트에게 자유롭게 허용한다면 오히려 악의적인 트래픽이 서버로 들어오는 것을 허용하게 됩니다. 게이트웨이에서 클라이언트가 터널을 사용할 수 있는 권한을 갖고 있는지 검사할 수 있습니다.&lt;/p&gt;

&lt;p&gt;클라이언트가 적절한 인증 수단 없이 아래와 같은 요청을 보냈다면&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CONNECT orders.joes-hardware.com:443 HTTP/1.0
User-agent: SuperBrowser 4.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;게이트웨이는 다음과 같은 연결 실패 및 인증 요구 메세지를 보내게 됩니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.0 407 Proxy authentication required
Proxy-authenticate: Basic realm=&quot;wormhole&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;클라이언트가 아래와 같이 Proxy-authorization 헤더에 적절한 인증 수단을 담아 요청한다면&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CONNECT orders.joes-hardware.com:443 HTTP/1.0
User-agent: SuperBrowser 4.2
Proxy-authorization: Basic Tnkmwlq31rWERg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;게이트웨이는 보안 서버와 커넥션을 맺은 뒤 클라이언트에게 터널 연결 성공 메세지를 보내게 됩니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.0 200 Connection established
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;856-터널-보안에-대한-고려사항들&quot;&gt;8.5.6. 터널 보안에 대한 고려사항들&lt;/h4&gt;

&lt;p&gt;터널의 한계 역시 존재합니다. 터널 연결에 성공하면 터널 게이트웨이에선 클라이언트가 이 터널을 올바른 용도로 사용하는지 확인할 방법이 없습니다. 예를들어, 사내 방화벽에 터널을 생성해 게임 트래픽을 사내로 유입할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;이런 터널의 오용을 최소화 하기 위해 게이트웨이는 HTTPS 전용포트인 443과 같은 특정 포트만을 터널링에 허용해야 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;86-릴레이&quot;&gt;8.6. 릴레이&lt;/h3&gt;

&lt;p&gt;릴레이는 HTTP 프록시중 하나입니다. 릴레이는 HTTP명세를 준수하지 않고 만들어져 받은 바이트를 거의 맹목적으로 전달합니다.&lt;/p&gt;

&lt;p&gt;HTTP메세지는 복잡하기 때문에 메서드관련 로직과 헤더를 처리하는 건 간단한 일은 아닙니다. 릴레이는 이런 상황에서 &lt;strong&gt;단순 필터링이나 진단, 콘텐츠 변환 등의 간단한 작업&lt;/strong&gt;만을 수행하고 넘깁니다.&lt;/p&gt;

&lt;p&gt;하지만 이런 단순함은 역시 문제를 만들 수 있습니다. 대표적인 문제중 하나가 Connection 헤더를 처리하지 못해 생기는 문제입니다. 이는 이전 장에서 Connection 헤더를 이해하지 못하는 Dumb Proxy문제와 일치합니다. (릴레이도 프록시이기 때문에 정확히 같은 문제입니다.)&lt;/p&gt;

&lt;p&gt;복습할겸 Dumb Proxy의 문제의 과정을 다시 한번 짚어보겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 Connetion : Keep-Alive 헤더를 포함한 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;릴레이는 Connection 헤더를 이해하지 못하기 때문에 요청을 그대로 서버에 넘깁니다. 하지만, Connection 헤더는 hop by hop 에서만 사용되는 헤더입니다. 다음으로 넘어가기 전에 삭제되어야 하는 헤더입니다. 여기서 문제가 발생합니다.&lt;/li&gt;
  &lt;li&gt;릴레이가 넘긴 Connection : Keep-Alive 헤더는 서버에게 전달됩니다. 서버는 요청을 한 상대방이 지속 커넥션을 원한다고 생각하고 Connection : Keep-Alive 헤더를 담은 응답 메세지를 보내  지속 커넥션을 맺습니다.&lt;/li&gt;
  &lt;li&gt;릴레이는 이 서버의 응답 역시 그대로 클라이언트에게 전달합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트 역시 이 응답을 받고 지속 커넥션이 제대로 이루어졌다고 생각합니다. 그리고 그 커넥션으로 다음 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;하지만 릴레이는 Connection에 대해 모르기 때문에 서버쪽으론 커넥션을 닫겠다는 응답을 기다리고 있습니다. 그리고 클라이언트쪽에선 다시 같은 커넥션으로 요청이 올거라 생각하지 않기 때문에 클라이언트쪽을 listen 하고 있지 않습니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 보낸 요청은 릴레이를 통과하지 못하고 걸려있게 됩니다. 이렇게 시간이 흐르고 커넥션의 유효기간이 끝나면 커넥션이 종료됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이런 위험을 방지하기 위해 조금 더 똑똑한 릴레이를 만들기도 합니다. 하지만 가장 좋은건 HTTP명세를 준수하는 프록시를 사용하는 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;이번 장은 개념 하나하나 마다 그 개념에 대한 포스팅을 해야되나 싶을 정도로 낯선 개념이 많았던 장이었습니다. 앞까지의 내용들은 어깨너머로 배운 지식들로 잘 조합하고 끼워 맞출 수 있었는데 이제 슬슬 밑천이 드러나는 것 같습니다. :sweat_smile:&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 7 - 웹 캐시</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C7/"/>
   <updated>2020-03-17T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드7</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;웹 캐시는 자주 쓰이는 문서들의 사본을 자동으로 보관 및 관리하는 HTTP 장치입니다. 요청이 캐시에 왔을때 원하는 리소스의 사본이 존재하면 원 서버까지 요청이 가지 않고 캐시에서 제공됩니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;불필요한 데이터 전송을 줄일 수있다 -&amp;gt; 네트워크 비용 감소&lt;/li&gt;
  &lt;li&gt;네트워크 병목을 줄여준다 -&amp;gt; 대역폭을 늘리지 않더라도 응답시간 줄일 수 있다.&lt;/li&gt;
  &lt;li&gt;원 서버까지 가는 요청을 줄여준다 -&amp;gt; 원 서버의 부하를 감소시킬 수 있다.&lt;/li&gt;
  &lt;li&gt;지역별로 캐시를 둬 거리로 인한 지연을 줄여준다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 혜택을 얻을 수 있는 캐시의 동작 원리 및 특징을 알아보겠습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;71-불필요한-데이터-전송&quot;&gt;7.1. 불필요한 데이터 전송&lt;/h3&gt;

&lt;p&gt;대부분의 서버는 다수의 클라이언트를 상대합니다. 다수의 클라이언트로부터 같은 요청이 온다면 서버는 같은 데이터를 반복적으로 전송하게 됩니다.&lt;/p&gt;

&lt;p&gt;이런 불필요한 데이터 전송은 네트워크 대역폭을 잡아먹고, 전송을 느리게 만들며 서버에 부하를 줍니다.&lt;/p&gt;

&lt;p&gt;캐시를 사용하면 서버에서 나온 응답이 캐시에 보관됩니다. 요청은 캐시로 들어가 같은 요청에 대한 응답 사본이 있다면 캐시에서 응답의 사본을 돌려줍니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;72-대역폭-병목&quot;&gt;7.2. 대역폭 병목&lt;/h3&gt;

&lt;p&gt;캐시는 네트워크 병목을 줄여줍니다. 대부분의 네트워크가 &lt;a href=&quot;test&quot; title=&quot;툴팁되나&quot;&gt;WAN&lt;/a&gt;보다 LAN에서 훨씬 더 넓은 대역폭을 제공합니다.
 캐시를 LAN망 안에 두게 된다면 좁은 WAN을 통과하지 않아 네트워크 병목을 줄여 지연을 감소시킬 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;73-갑작스런-요청-쇄도flash-crowds&quot;&gt;7.3. 갑작스런 요청 쇄도(Flash Crowds)&lt;/h3&gt;

&lt;p&gt;사회적 사건 혹은 기업의 이벤트 때문에 갑작스럽게 요청이 급증하는 경우가 있습니다. 이렇게 많은 사람들의 요청이 급증할 때에 캐싱을 사용한다면 서버의 부하를 많이 줄여줄 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;74-거리로-인한-지연&quot;&gt;7.4. 거리로 인한 지연&lt;/h3&gt;

&lt;p&gt;우리가 사용하는 인터넷은 물리적인 망을 가지고 있습니다. 복잡한 페이지를 로드하기 위해 지구 반대편의 원 서버로 수십개의 요청을 보낸다면 아무리 요청이 빛의 속도로 이동한다고 해도 유의미한 지연이 발생할 수 밖에 없습니다.&lt;/p&gt;

&lt;p&gt;각 지역별로 캐시를 두는 일은 대역폭을 확보하는 것 뿐 아니라 실제 물리적인 거리에 따른 지연도 줄일 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;75-적중과-부적중&quot;&gt;7.5. 적중과 부적중&lt;/h3&gt;

&lt;p&gt;캐시는 원 서버의 모든 리소스 사본을 저장하진 않습니다. 그리고 저장 한다고 하더라도, 어떤 리소스들은 자주 수정될 수 있습니다.&lt;/p&gt;

&lt;p&gt;캐시에 요청이 도착했을때 요청에 대해 캐시에서 사본을 찾아 응답을 줄 수 있다면 ‘적중(cache hit)’, 캐시에 사본이 없어 원 서버로 요청이 가야 한다면 ‘부적중(cache miss)’이라고 합니다.&lt;/p&gt;

&lt;h4 id=&quot;751-재검사revalidation&quot;&gt;7.5.1. 재검사(Revalidation)&lt;/h4&gt;

&lt;p&gt;원 서버의 리소스는 언제든지 변경될 수 있습니다. 그렇기 때문에 캐시는 때때로 가지고 있는 사본이 최신의 사본인지 검사해야 합니다. 언제 점검할지는 캐시의 정책에 따라 달라집니다. 이런 신선도 검사를 HTTP 재검사라고 부릅니다.&lt;/p&gt;

&lt;p&gt;재검사 결과 리소스가 변경되지 않았다면 캐시는 사본이 아직 신선하다고 표시한뒤 클라이언트에게 사본을 돌려줍니다. 이를 ‘재검사 적중’ 혹은 ‘느린 적중’ 이라고 부릅니다. 이는 당연히 순수 캐시 적중보단 느립니다. 하지만 서버로부터 객체를 받아올 필요가 없기 때문에 캐시 부적중 보단 바릅니다.&lt;/p&gt;

&lt;p&gt;캐시의 정책상 재검사가 필요할 때, 원 서버에 작은 재검사 요청을 보냅니다. 작은 재검사 요청을 보내기 위해 쓰이는 몇 가지 방법이 있는데 가장 널리 쓰이는 방법은 ‘If-Modified-Since’헤더를 보내는 것입니다. 이때 서버의 반응은 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;재검사 적중&lt;/strong&gt;
 서버가 검사를 해본뒤 리소스가 변경되지 않았다면 클라이언트에게 작은 304 Not Modified 응답을 보냅니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;재검사 부적중&lt;/strong&gt;
 만약 요청 받은 리소스가 변경 됐다면 서버는 변경된 리소스 전체와 함께 평범한 HTTP 200 OK응답을 보냅니다. 캐시는 응답을 받아 사본을 갱신하고 클라이언트에게 전송합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;객체 삭제&lt;/strong&gt;
 만약 요청 받은 리소스가 서버에 없다면, 서버는 404 Not Found 응답을 돌려보내고, 이를 받은 캐시는 사본을 삭제한 뒤 클라이언트에게 404 Not Found 응답을 돌려줍니다.&lt;/p&gt;

&lt;h4 id=&quot;752-적중률&quot;&gt;7.5.2. 적중률&lt;/h4&gt;

&lt;p&gt;캐시가 요청을 처리하는 비율을 캐시 적중률 or 캐시 적중비 라고 부릅니다. 대게 여기서 말하는 ‘적중’은 ‘재검사 적중’을 제외한 순수 ‘적중’을 말하지만 때에 따라 재검사 적중을 포함해 적중률을 계산하는 곳도 있으니 염두해 두면 좋을 것 같습니다.&lt;/p&gt;

&lt;p&gt;캐시 적중률은 예측하기 어려운 것으로 악명 높습니다. 캐시 적중률은 높으면 높을수록 좋지만 적중률 40%정도면 웹 캐시로서 괜찮은 편입니다.(책이 처음 쓰여진 때가 2002년임을 감안해 수치를 너무 맹신하지 않는게 좋을 것 같습니다.)&lt;/p&gt;

&lt;p&gt;엄청나게 큰 캐시가 아닌 적당한 크기의 캐시도 자주 쓰이는 문서들을 저장하기엔 충분하고 유의미하게 트래픽을 줄이고 서버 성능을 개선할 수 있는 것으로 알려져 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;753-바이트-적중률&quot;&gt;7.5.3. 바이트 적중률&lt;/h4&gt;

&lt;p&gt;방금 살펴본 캐시 적중률은 요청의 갯수별 적중률 입니다. 하지만 이런 의문을 제기할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;‘작은 콘텐츠와 큰 콘텐츠가 트래픽을 차지하는 비중이 다른데 둘을 같게 봐도 되나?’&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;그래서 필요한 적중률이 바이트 적중률입니다. 바이트 적중률은 캐시에서 나간 바이트중 캐시에서 바로 제공된 바이트의 비율을 뜻합니다. 실제 트래픽 절감을 측정할 수 있으며, 주로 바이트별 요금을 산정해야 되는 곳에서 사용됩니다.&lt;/p&gt;

&lt;p&gt;바이트 적중률 100%는 모든 요청이 서버를 거치지 않고 바로 캐시에서 나갔음을 뜻합니다.&lt;/p&gt;

&lt;h4 id=&quot;754-적중과-부적중의-구별&quot;&gt;7.5.4. 적중과 부적중의 구별&lt;/h4&gt;

&lt;p&gt;이런 상황에서 클라이언트는 자신이 받은 응답이 캐시에서 나온 사본인지, 원 서버에서 온 원본인지 궁금할 수 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 HTTP에선 이를 말해주는 엄격한 방법은 제공해주지 않습니다. 대신 아래와 같은 임시 대안들이 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;어떤 상용 프록시 캐시들은 캐시에서 무슨 일이 일어났는지 설명하기 위해 Via 헤더에 추가정보를 줍니다.&lt;/li&gt;
  &lt;li&gt;응답의 Date헤더를 확인해봤을때, 응답의 생성일이 요청일보다 오래되었다면 이전에 만들어진 사본임을 알 수 있습니다.&lt;/li&gt;
  &lt;li&gt;비슷한 방법으로 응답이 얼마나 오래되었는지를 말해주는 Age 헤더를 살펴볼 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;76-캐시-토폴로지&quot;&gt;7.6. 캐시 토폴로지&lt;/h3&gt;

&lt;p&gt;캐시는 각 사용자마다 할당될 수도 있고 수천 명의 사용자가 공유할 수도 있습니다. 사용자마다 할당된 캐시를 개인 전용 캐시(private cache), 공유된 캐시는 공용 캐시(public cache)라고 합니다.&lt;/p&gt;

&lt;h4 id=&quot;761-개인-전용-캐시&quot;&gt;7.6.1. 개인 전용 캐시&lt;/h4&gt;

&lt;p&gt;가장 대표적인 개인 전용 캐시는 각 웹 브라우저들이 가지고 있는 웹 캐시입니다. 사용자의 PC에 자주 쓰이는 문서를 저장해둡니다. 사용자는 브라우저의 설정을 통해 브라우저의 캐시 크기를 설정할 수 있고 캐시가 저장될 위치도 설정할 수 있습니다. 이런 캐시된 문서들을 ‘임시 파일’이라고도 부릅니다.&lt;/p&gt;

&lt;p&gt;크롬의 경우 기본 캐시 경로는 아래와 같습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;C:\Users\{Username}\AppData\Local\Google\Chrome\User Data\Default\Cache
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;762-공용-프록시-캐시&quot;&gt;7.6.2. 공용 프록시 캐시&lt;/h4&gt;

&lt;p&gt;공용 캐시는 캐시 프록시 서버, 프록시 캐시라고도 불립니다. 여러 사용자가 공통적으로 자주 찾는 문서들을 저장해둡니다.&lt;/p&gt;

&lt;p&gt;이런 프록시 캐시들은 결국 프록시이기 때문에 6장에서 알아본 프록시의 규칙들을 따라야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;763-프록시-캐시-계층들&quot;&gt;7.6.3. 프록시 캐시 계층들&lt;/h4&gt;

&lt;p&gt;프록시를 여러 개 거칠 수 있었듯이 캐시 역시 여러 계층으로 이루어질 수 있습니다.&lt;/p&gt;

&lt;p&gt;당장 우리가 사용하는 웹 브라우저들은 모두 각자의 캐시를 가지고 있습니다. 웹 브라우저를 통해 프록시 캐시를 운영하는 웹 사이트에 접속하려 한다면 이미 [웹 브라우저 캐시 -&amp;gt; 프록시 캐시]와 같이 두 단계의 캐시를 거칠게 됩니다.&lt;/p&gt;

&lt;p&gt;큰 규모의 업체들은 지역별로 작은 프록시 캐시를 두고, 원 서버 근처에 큰 프록시 캐시를 둬서 작은 프록시 캐시에서 처리하지 못한 요청들을 큰 프록시 캐시에서 처리하게 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;캐시 계층이 깊어진다면 요청은 캐시의 긴 연쇄를 따라가게 됩니다. 프록시 연쇄가 길어질 수록 각 중간 프록시에서 성능저하가 발생할 수 있어 오히려 프록시 연쇄를 안 두는 것보다 느려질 수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;764-캐시망-콘텐츠-라우팅-피어링&quot;&gt;7.6.4. 캐시망, 콘텐츠 라우팅, 피어링&lt;/h4&gt;

&lt;p&gt;복잡한 캐시망을 사용하는 곳도 있습니다. 자식 캐시가 처리하지 못한 요청을 어느 부모 캐시에게 전해줄지 동적으로 결정하는 캐시망도 있고 다른 조직의 프록시 캐시끼리 서로 찾아볼 수 있게 하는 캐시망도 있습니다.(피어링)&lt;/p&gt;

&lt;p&gt;캐시망 안에서 콘텐츠 라우팅을 할땐 다음과 같은 방식으로 어느 곳에 라우팅 할지 결정할 수 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;URL에 근거해 부모 캐시와 원 서버 중 하나를 동적으로 선택합니다.&lt;/li&gt;
  &lt;li&gt;URL에 근거해 특정 부모 캐시를 동적으로 선택합니다.&lt;/li&gt;
  &lt;li&gt;부모 캐시에게 가기 전에, 캐시된 사본을 로컬에서 찾습니다.&lt;/li&gt;
  &lt;li&gt;다른 프록시 캐시들이 자신이 가진 컨텐츠를 부분적으로 접근할 수 있게 허용하되, 그들의 캐시를 통한 인터넷 트랜짓(Internet Transit)은 허용하지 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;특히, 서로 다른 조직들이 상호의 이득의 위해 캐시를 연결해 서로 찾아볼 수 있게해주는 피어링을 지원하는 캐시를 ‘형제 캐시’라고 부릅니다. HTTP에선 형제 캐시를 지원하지 않기 때문에 형제 캐시를 사용하는 곳은 인터넷 캐시 프로토콜(ICP, Internet Cache Protocol)이나 하이퍼텍스트 캐시 프로토콜(HTCP, HyperText Cache Protocol)을   이용해 HTTP를 확장 했습니다. 이는 20장에서 더 자세히 살펴볼 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;77-캐시-처리-단계&quot;&gt;7.7. 캐시 처리 단계&lt;/h3&gt;

&lt;p&gt;캐시가 고도화됨에 따라 세부적인 기능은 매우 복잡하지만 기본적으로 아래와 같은 절차를 거칩니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;요청 받기 : 네트워크로부터 도착한 요청 메세지를 읽습니다.&lt;/li&gt;
  &lt;li&gt;파싱 : 메세지를 파싱해 URL, 헤더들을 추출합니다.&lt;/li&gt;
  &lt;li&gt;검색 : 로컬 복사본이 있는지 검사하고, 없다면 원 서버에서 사본을 받아옵니다.(로컬에 저장합니다.)&lt;/li&gt;
  &lt;li&gt;신선도 검사 : 애초에 로컬 복사본이 있었다면, 그 사본이 충분히 신선한지 검사합니다. 신선하지 않다면 서버에게 변경 사항이 있는지 물어보고 변경 사항이 있다면 사본을 받아옵니다.&lt;/li&gt;
  &lt;li&gt;응답 생성 : 새로운 헤더와 캐시된 본문으로 응답 메세지를 만듭니다.&lt;/li&gt;
  &lt;li&gt;발송 : 네트워크를 통해 응답을 클라이언트에게 돌려줍니다.&lt;/li&gt;
  &lt;li&gt;로깅 : 선택적으로, 캐시는 로그파일에 트랜잭션에 대해 서술한 로그 하나를 남깁니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;아래와 같은 차트로 흐른다고 보면 됩니다.&lt;/p&gt;

&lt;p&gt;그림요망&lt;/p&gt;

&lt;h4 id=&quot;771-단계1--요청-받기&quot;&gt;7.7.1. 단계1 : 요청 받기&lt;/h4&gt;

&lt;p&gt;커넥션의 활동을 감지해 들어오는 데이터를 받아들입니다. 고성능 캐시는 여러 개의 커넥션으로 부터 동시에 데이터를 받고 전체 메세지가 도착하기 전에 트랜잭션 처리를 시작합니다.&lt;/p&gt;

&lt;h4 id=&quot;772-단계2--파싱&quot;&gt;7.7.2. 단계2 : 파싱&lt;/h4&gt;

&lt;p&gt;요청 메세지를 파싱해 URL과 헤더를 추출합니다. 이 과정에서 파서는 헤더 부분의 대소문자, 날짜 형식 같이 사소한 차이점이 무시되도록 파싱해야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;773-단계3--검색&quot;&gt;7.7.3. 단계3 : 검색&lt;/h4&gt;

&lt;p&gt;알아낸 URL을 토대로 캐시된 로컬 사본이 있는지 검사합니다. 메모리에 있을 수도 있고 디스크에 있을 수도 있습니다. 혹은 캐시 본인의 디스크가 아닌 근처의 다른 디스크에 있을 수도 있습니다.&lt;/p&gt;

&lt;p&gt;캐시된 사본을 찾을 수 없다면 원 서버 혹은 다음 홉에 있는 부모 프록시 캐시에서 가져오거나 실패를 반환합니다.&lt;/p&gt;

&lt;h4 id=&quot;774-단계4--신선도-검사&quot;&gt;7.7.4. 단계4 : 신선도 검사&lt;/h4&gt;

&lt;p&gt;캐시된 사본을 찾았다고 해서 바로 클라이언트에게 보내선 안됩니다. 가지고 있는 사본이 신선한지 검사해야 합니다. 이 신선도를 검사하는 알고리즘은 매우 복잡합니다. 이 장의 다음 절들은 대부분 신선도 검사와 관계된 내용입니다.&lt;/p&gt;

&lt;p&gt;신선한 것으로 판단되면 그 로컬 사본으로 응답을 준비합니다. 신선하지 않다면 서버에 변경사항이 있는지 확인하는 재검사를 실시하게 됩니다.&lt;/p&gt;

&lt;p&gt;재검사 결과 변경사항이 없으면 로컬 사본으로 응답을 준비하고, 변경사항이 있다면 서버에서 다시 사본을 가져와 캐시에 사본을 갱신합니다.&lt;/p&gt;

&lt;h4 id=&quot;775-단계5--응답-생성&quot;&gt;7.7.5. 단계5 : 응답 생성&lt;/h4&gt;

&lt;p&gt;캐시된 응답을 원 서버에서 온것처럼 보이게 하는 것이 좋습니다. 때문에 캐시된 서버 응답 헤더를 토대로 캐시의 응답 헤더를 구성합니다.&lt;/p&gt;

&lt;p&gt;캐시는 클라이언트에 맞게 헤더를 조정해야 합니다. 클라이언트가 HTTP/1.1을 바라는데 서버에서의 응답이 HTTP/1.0이라면 캐시는 헤더를 적절히 번역해줘야 합니다.&lt;/p&gt;

&lt;p&gt;캐시는 원 서버의 응답 헤더에 없는 헤더들도 추가할 수 있습니다. 캐시 신선도 정보(Cache-Control, Age, Expires.. )를 삽입할 수 있습니다. 또, 요청이 프록시 캐시를 거쳤다는 걸 알려주기 위해 Via헤더를 삽입할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 Date헤더는 조정해선 안됩니다. Date헤더는 원 서버에서 만들어진 일시를 표현하는 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;776-단계6--전송&quot;&gt;7.7.6. 단계6 : 전송&lt;/h4&gt;

&lt;p&gt;응답 헤더가 준비되면 캐시는 응답을 돌려줍니다.&lt;/p&gt;

&lt;p&gt;어떤 고성능 캐시들은 로컬 저장장치와 네트워크 I/O 버퍼 사이에서 문서의 콘텐츠 복사를 피해 데이터를 효과적으로 전송하기 위해 노력합니다.&lt;/p&gt;

&lt;h4 id=&quot;777-단계7--로깅&quot;&gt;7.7.7. 단계7 : 로깅&lt;/h4&gt;

&lt;p&gt;대부분의 캐시는 로그 파일과 캐시 사용에 대한 통계를 유지합니다. 트랜잭션 완료 후 캐시 적중, 부적중률에 대한 통계를 갱신하고 로그파일에 어떤 요청이 왔고 어떻게 응답했는지 등을 기록합니다.&lt;/p&gt;

&lt;p&gt;가장 많이 사용되는 캐시 로그 포맷은 스퀴드 로그 포맷(Squid Log Format), 넷스케이프 확장 공용 로그 포맷(Netscape Extended Common Log Format)이지만 커스텀 로그 포맷을 사용해도 상관 없습니다. 로그 파일 포맷에 대해선 21장에서 자세히 다룹니다.&lt;/p&gt;

&lt;h4 id=&quot;778-캐시-처리-플로-차트&quot;&gt;7.7.8. 캐시 처리 플로 차트&lt;/h4&gt;

&lt;p&gt;앞에 먼저 소개해드렸습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;78-사본을-신선하게-유지하기&quot;&gt;7.8. 사본을 신선하게 유지하기&lt;/h3&gt;

&lt;p&gt;캐시된 데이터와 서버의 데이터가 일치하도록 관리하는 방법을 알아보겠습니다. HTTP에선 ‘문서 만료’와 ‘서버 재검사’라는 단순한 메커니즘으로 캐시된 사본과 서버의 원본이 일치하도록 관리할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;781-문서-만료&quot;&gt;7.8.1. 문서 만료&lt;/h4&gt;

&lt;p&gt;Cache-Control와 Expires라는 헤더들을 이용해 각 문서들에 유효기간을 붙일 수 있습니다. 유효기간이 끝나기 전엔 문서가 ‘신선한’것으로 판단해 서버와의 접촉 없이 사본을 제공할 수 있습니다.&lt;/p&gt;

&lt;p&gt;유효기간이 만료된다면, 반드시 문서에 변경사항이 있는지 다시 검사하고 변경 사항이 있다면 신선한 사본을 얻어와야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;782-유효기간과-나이&quot;&gt;7.8.2. 유효기간과 나이&lt;/h4&gt;

&lt;p&gt;유효기간을 표시하는데엔 Cache-Control과 Expires 헤더가 있습니다. 둘의 차이는 쉽게말해 Cache-Control은 문서가 최초로 생성된 이후로 몇초간 유효한가를 나타내고, Expires헤더는 만료되는 절대적인 날짜를 명시합니다.&lt;/p&gt;

&lt;p&gt;Cache-Control:max-age
 max-age값은 최대 나이를 정의합니다. 최대 나이는 문서가 처음 생성된 이후부터, 제공하기에 더 이상 신선하지 않다고 간주될 때까지 경과한 초단위 시간입니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cahce-Control : max-age=484200&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Expires
 절대 유효기간을 명시합니다. 이 유효기간이 넘어갔다면 그 문서는 더 이상 신선하지 않습니다. 이 Expires헤더가 제대로 작오하기 위해선 컴퓨터의 시계가 올바르게 작동하고 있어야 합니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Expires : Fri, 05 Jul 2002, 05:00:00 GMT&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;현재 시각이 2020년 3월 17일 화요일 20:00:00 GMT 일때, 지금 시각으로부터 딱 5일(==432,000 초)간만 진행되는 이벤트를 위한 안내 페이지를 만들고 싶다면 그 페이지엔 아래의 헤더중 하나를 선택해 사용하면 됩니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cache-Control : max-age=432000
Expires : Sun, 22 Mar 2020, 20:00:00 GMT&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;783-서버-재검사&quot;&gt;7.8.3. 서버 재검사&lt;/h4&gt;

&lt;p&gt;하지만 캐시된 사본의 유효기간이 만료되었다고 해서 그 사본이 서버의 원본과 다르다는 걸 의미하진 않습니다. 이제 다시 검사할 시간이 되었다는 것을 뜻합니다. 이렇게 문서 변경 여부를 다시 검사하는걸 ‘서버 재검사’라고 합니다.&lt;/p&gt;

&lt;p&gt;서버 재검사 결과 문서가 변경되었다면, 변경된 문서의 새로운 사본을 가져와 캐시된 문서를 바꿔 저장한뒤, 클라이언트에게 보내줍니다.
 서버 재검사 결과 문서가 변경되지 않았다면, 캐시는 새 만료일을 포함한 새 헤더들만 가져와 캐시된 문서의 헤더를 갱신합니다.&lt;/p&gt;

&lt;p&gt;HTTP는 캐시가 다음중 하나는 응답하기를 요구합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;충분히 신선한 캐시된 사본&lt;/li&gt;
  &lt;li&gt;재검사 결과 신선하다고 할 수 있는 캐시된 사본&lt;/li&gt;
  &lt;li&gt;에러 메세지(재검사에 실패한 경우)&lt;/li&gt;
  &lt;li&gt;경고 메세지가 부착된 캐시된 사본(부정확하다면)&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;784-조건부-메서드와의-재검사&quot;&gt;7.8.4. 조건부 메서드와의 재검사&lt;/h4&gt;

&lt;p&gt;그렇다면, 재검사 요청을 받는 서버의 입장에선 캐시에서 온 요청이 재검사 요청인지, 일반 리소스 요청인지 어떻게 구분할까요? 이를 위해 HTTP엔 조건부 GET 요청이 존재합니다.&lt;/p&gt;

&lt;p&gt;조건부 GET 요청은 조건부 요청헤더를 추가해 만들어집니다. 조건부 요청 헤더에는 아래 5가지가 있지만 유용하고 주로 사용되는 2개의 헤더에 대해서만 자세히 알아보겠습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;헤더&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Modified-Since&lt;/td&gt;
      &lt;td&gt;주어진 날짜 이후로 수정되었다면 요청 메서드를 처리합니다. Last-Modified 헤더와 함께 사용됩니다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-None-Match&lt;/td&gt;
      &lt;td&gt;문서의 일련번호 및 id 처럼 문서의 버전을 나타내는 태그를 비교해 요청 메서드를 처리합니다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Unmodified-Since&lt;/td&gt;
      &lt;td&gt;문서의 부분의 같이 전송해 문서가 변하지 않았는지를 확인합니다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Range&lt;/td&gt;
      &lt;td&gt;불완전한 문서의 캐싱을 지원하기 위해 사용됩니다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;If-Match&lt;/td&gt;
      &lt;td&gt;웹 서버에 대한 동시성 제어를 할 때 유용합니다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;785-if-modified-since--날짜-재검사&quot;&gt;7.8.5. If-Modified-Since : 날짜 재검사&lt;/h4&gt;

&lt;p&gt;가장 많이 쓰이는 재검사 헤더는 If-Modified-Since 입니다. 이는 흔히 줄여서 IMS 요청이라고도 불립니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If-Modified-Since : Tue, 17 Mar 2020, 20:30:00 GMT&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;서버가 위와 같은 IMS 요청을 받는다면, 현재 서버의 원본이 마지막 변경일을 확인합니다. If-Modified-Since가 참이라면(==변경 되었다면) 변경된 문서의 사본과 함께 평범한 GET 응답이 새로운 만료 날짜와 함께 돌아갑니다.
 If-Modified-Since가 거짓이라면(==변경되지 않았다면), 서버는 작은 304 Not Modified 응답을 돌려줍니다. 이 응답에 본문은 없습니다.&lt;/p&gt;

&lt;p&gt;If-Modified-Since 헤더에 대한 응답엔 Last-Modified 헤더가 따라붙습니다. 캐시가 다음번에 같은 문서를 재검사 요청 보내게 될 땐 저번 재검사 요청의 응답으로 받은 Last-Modified 헤더의 값을 If-Modified-Since값에 넣어 보내게 됩니다.&lt;/p&gt;

&lt;p&gt;주의할 점이 있습니다. 몇몇 웹 서버는 If-Modified-Since의 값을 시간으로 파싱해 비교하지 않습니다. 대신 단순 문자열 비교를 수행해 ‘이 날짜 이후로 변경되었다면’이라는 의미가 아니라 ‘정확히 이 날자에 마지막 변경이 일어난 것이 아니라면’과 같이 비교합니다.  심지어 날짜가 아닌 일련번호, id 같은 것을 If-Modified-Since에 넣어 문자열 비교를 사용하기도 합니다.&lt;/p&gt;

&lt;h4 id=&quot;786-if-none-match--엔터티-태그-재검사&quot;&gt;7.8.6. If-None-Match : 엔터티 태그 재검사&lt;/h4&gt;

&lt;p&gt;날짜를 기준으로한 If-Modified-Since 검사가 가장 많이 쓰이지만 날짜 비교가 적절하지 않은 콘텐츠들도 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;일정 간격으로 다시 쓰여지지만 실제 내용 변화가 없을 경우&lt;/li&gt;
  &lt;li&gt;서버를 바라보는 모든 캐시들이 다시 데이터를 받기엔 변경이 사소한 경우(철자 및 주석 등)&lt;/li&gt;
  &lt;li&gt;페이지에 대한 최근 변경 일시를 정확하게 판별할 수 없는 경우&lt;/li&gt;
  &lt;li&gt;1초보다 작은 간격으로 갱신이 될 수 있는 경우&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 경우엔 If-None-Match 헤더를 사용할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;GET /announce.html HTTP/1.0
If-None-Match : “v2.6”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위 헤더는 해당 문서의 버전이 ‘v2.6’이라는 것입니다. 이렇게 일련번호, 버전, id와 같이 문서가 유의미하게 변경되었다는 것을 보여줄수 있는 태그들을 사용해 재검사를 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;이에 대한 서버의 응답은 Etag(Entity Tag) 헤더와 함께 돌아옵니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;HTTP/1.0 304 Not Modified
Date : Wed, 03 Jul 2020, 19:18:22 GMT
&lt;strong&gt;ETag : “v2.6”&lt;/strong&gt;
Expires : Frie, 05 Jul 2020, 05:00:00 GMT&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위는 변경되지 않았을 때이고, 변경되었다면 200 OK 코드와 갱신된 Etag값, 엔터티 본문과 함께 응답될 것입니다.&lt;/p&gt;

&lt;p&gt;캐시가 객체에 대해 여러개 사본을 가지고 있다면 If-None-Match 태그에 여러개의 엔터티 태그를 같이 보낼 수도 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If-None-Match : “v2.4”, “v2.5”, “v2.6”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;787-약한-검사기와-강한-검사기&quot;&gt;7.8.7. 약한 검사기와 강한 검사기&lt;/h4&gt;

&lt;p&gt;앞서 ‘서버를 바라보는 모든 캐시들이 다시 데이터를 받기엔 변경이 사소한 경우(철자 및 주석 등)’ 를 위해 엔터티 태그를 사용한다고 했습니다. 하지만 이 문제를 해결하기 위한 다른 방법도 있습니다.&lt;/p&gt;

&lt;p&gt;HTTP/1.1 에선 조금 수정된 컨텐츠를 위해 “그 정도면 같은 것이다”라고 서버가 주장할 수 있게 해주는 약한 검사기(weak validator)를 지원합니다. 반대로 약한 검사기가 아닌것은 강한 검사기(strong validator)입니다.&lt;/p&gt;

&lt;p&gt;약한 검사기는 엔터티 태그 앞에 ‘W/’ 접두사를 사용해 구분합니다. ‘W/’접두가사 붙은 엔터티 태그는 약한 검사를 해달라는 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Etag : W/”v2.6”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;강한 엔터티 태그는 그에 대응하는 엔터티 값이 어떻게 바뀌든 매번 같이 바뀌어야 합니다. 하지만 약한 엔터티 태그는 변경중 유의미한 변경이 있을때만 같이 변경됩니다.&lt;/p&gt;

&lt;p&gt;서버는 강한 엔터티, 약한 엔터티 모두 재활용해서는 안됩니다. 캐시에 요청이 잘 안들어온다면 유효기간이 엄청오래된 콘텐츠에 대해 재검사 요청이 올수 있고, 이때 요청온 엔터티 태그가 재활용된 태그라면 큰 혼란을 만들것입니다.&lt;/p&gt;

&lt;h4 id=&quot;788-언제-엔터티-태그를-사용하고-언제-last-modified-일시를-사용하는가&quot;&gt;7.8.8. 언제 엔터티 태그를 사용하고 언제 Last-Modified 일시를 사용하는가&lt;/h4&gt;

&lt;p&gt;앞서 알아본 것과 같이 서버는 문서의 유효기간을 다루기 위해 Etag 헤더 혹은 Last-Modified 헤더를 보낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;캐시의 입장에선, 서버가 Etag 헤더를 사용한다면 If-None-Match를, Last-Modified 헤더를 사용한다면 If-Modified-Since 헤더를 사용해야 합니다. 만약 모두 사용 가능하다면 두 가지 모두 사용하는 것을 추천합니다.(HTTP/1.0, HTTP/1.1 모두를 다룰 수 있기 때문입니다.)&lt;/p&gt;

&lt;p&gt;HTTP/1.1 을 구현하고 있는 서버는 가능하다면 Etag 헤더를 보내야 합니다. Last-Modified 헤더를 같이 보내면 더 좋습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;79-캐시-제어&quot;&gt;7.9. 캐시 제어&lt;/h3&gt;

&lt;h4 id=&quot;791-no-cahce와-no-store-응답-헤더&quot;&gt;7.9.1. no-cahce와 no-store 응답 헤더&lt;/h4&gt;

&lt;h4 id=&quot;792-max-age-응답-헤더&quot;&gt;7.9.2. Max-Age 응답 헤더&lt;/h4&gt;

&lt;h4 id=&quot;793-expires-응답-헤더&quot;&gt;7.9.3. Expires 응답 헤더&lt;/h4&gt;

&lt;h4 id=&quot;794-must-revalidate-응답-헤더&quot;&gt;7.9.4. Must-Revalidate 응답 헤더&lt;/h4&gt;

&lt;h4 id=&quot;795-휴리스틱-만료&quot;&gt;7.9.5. 휴리스틱 만료&lt;/h4&gt;

&lt;h4 id=&quot;796-클라이언트-신선도-제약&quot;&gt;7.9.6. 클라이언트 신선도 제약&lt;/h4&gt;

&lt;h4 id=&quot;797-주의할-점&quot;&gt;7.9.7. 주의할 점&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;710-캐시-제어-설정&quot;&gt;7.10. 캐시 제어 설정&lt;/h3&gt;

&lt;h4 id=&quot;7101-아파치로-http-헤더-제어하기&quot;&gt;7.10.1. 아파치로 HTTP 헤더 제어하기&lt;/h4&gt;

&lt;h4 id=&quot;7102-http-equiv를-통한-html-캐시-제어&quot;&gt;7.10.2. HTTP-EQUIV를 통한 HTML 캐시 제어&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;711-자세한-알고리즘&quot;&gt;7.11. 자세한 알고리즘&lt;/h3&gt;

&lt;h4 id=&quot;7111-나이와-신선도-수명&quot;&gt;7.11.1. 나이와 신선도 수명&lt;/h4&gt;

&lt;h4 id=&quot;7112-나이-계산&quot;&gt;7.11.2. 나이 계산&lt;/h4&gt;

&lt;h4 id=&quot;7113-완전한-나이-계산-알고리즘&quot;&gt;7.11.3. 완전한 나이 계산 알고리즘&lt;/h4&gt;

&lt;h4 id=&quot;7114-신선도-수명-계산&quot;&gt;7.11.4. 신선도 수명 계산&lt;/h4&gt;

&lt;h4 id=&quot;7115-완전한-서버-신선도-알고리즘&quot;&gt;7.11.5. 완전한 서버 신선도 알고리즘&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;712-캐시와-광고&quot;&gt;7.12. 캐시와 광고&lt;/h3&gt;

&lt;h4 id=&quot;7121-광고-회사의-딜레마&quot;&gt;7.12.1. 광고 회사의 딜레마&lt;/h4&gt;

&lt;h4 id=&quot;7122-퍼블리셔의-응답&quot;&gt;7.12.2. 퍼블리셔의 응답&lt;/h4&gt;

&lt;h4 id=&quot;7123-로그-마이그레이션&quot;&gt;7.12.3. 로그 마이그레이션&lt;/h4&gt;

&lt;h4 id=&quot;7124-적중-측정과-사용량-제한&quot;&gt;7.12.4. 적중 측정과 사용량 제한&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 6 - 프록시</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C6/"/>
   <updated>2020-03-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드6</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;61-웹-중개자&quot;&gt;6.1. 웹 중개자&lt;/h3&gt;

&lt;p&gt;쿠팡, 11번가와 같은 인터넷 쇼핑몰은 소비자와 판매자 사이를 중개해줍니다. 소비자 입장에선 똑같이 돈을 주고 물건을 받는것이지만 인터넷 쇼핑몰을 이용하면 쇼핑몰이 제공하는 다양한 기능(상품 비교, 장바구니 등)을 사용할 수 있습니다.&lt;/p&gt;

&lt;p&gt;프록시는 클라이언트와 서버를 중개해줍니다. 클라이언트와 서버 사이에 놓여 여러가지 기능들을 제공해줍니다. 클라이언트와 서버 사이에 있기 때문에 프록시는 클라이언트와 통신할땐 서버처럼, 서버와 통신할 땐 클라이언트 처럼 행동합니다.&lt;/p&gt;

&lt;h4 id=&quot;611-개인-프록시와-공유-프록시&quot;&gt;6.1.1. 개인 프록시와 공유 프록시&lt;/h4&gt;

&lt;p&gt;프록시는 하나의 클라이언트가 하나를 독점적으로 쓸 수도 있고 여러 클라이언트가 공유할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;공용 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;하지만 대부분의 프록시는 사실 공용 프록시입니다. 클라이언트마다 프록시를 할당해 관리하는 것 보다 하나의 큰 프록시를 관리하는게 효율이 더 높기 때문입니다. 그리고 캐시 프록시 서버 같은 프록시는 공통된 요청을 빠르게 처리할 수 있기 때문에 사용자가 많을수록 유리하기도 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;개인 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;개인 프록시는 흔하지 않지만 꾸준히 사용됩니다. 주로 클라이언트의 PC에 설치되어 실행 됩니다. 인터넷 브라우저 자체적으로 개인 프록시를 운영하기도 합니다.&lt;/p&gt;

&lt;h4 id=&quot;612-프록시-대-게이트웨이&quot;&gt;6.1.2. 프록시 대 게이트웨이&lt;/h4&gt;

&lt;p&gt;그런데 클라이언트와 서버 사이를 중개해주는 것이 하나 더 있습니다. 바로 게이트웨이입니다. 앞 장에서 살짝 살펴보았고 이후 8장에서 더 자세히 살펴볼 것입니다.&lt;/p&gt;

&lt;p&gt;일반적으로 프록시와 게이트웨이의 차이점은 같은 프로토콜을 연결하는지, 다른 프로토콜을 연결하는 지입니다. 프록시는 같은 프로토콜을 사용해 클라이언트와 서버를 중개하고, 게이트웨이는 메세지를 받아 다른 프로토콜의 메세지로 전환해줍니다.&lt;/p&gt;

&lt;p&gt;하지만 사실 프록시와 게이트웨이의 경계는 모호합니다. 프록시는 다른 버전의 HTTP 프로토콜끼리도 중개해야 하기 때문에(클라이언트마다 HTTP 버전이 다르므로) 프로토콜을 변환하기도 합니다. 그리고 상용 프록시들은 SSL 보안 프로토콜, SOCKS 방화벽, FTP접근 등 게이트웨이가 하는 역할까지 지원합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;62-왜-프록시를-사용하는가&quot;&gt;6.2. 왜 프록시를 사용하는가?&lt;/h3&gt;

&lt;p&gt;프로시가 사용되는 몇 가지 예를 알아보겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;어린이 필터&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;어린이들이 주로 사용하는 학교의 PC 같은 경우엔 유해한 사이트를 차단하는 프록시를 설정해둘수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;문서 접근 제어자&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;대기업 같이 권한이 계층화 되어있는 곳에선 부서별로, 직급별로 열람 가능한 문서를 제한할 수 있습니다. 모든 클라이언트가 중앙 프록시 서버를 거칠 수 있도록 하고, 중앙 프록시 서버에서 요청마다 접근을 제어하고 audit trail(감사 추적)을 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;보안 방화벽&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;보안용 프록시를 설치해 들어오는 요청에 바이러스가 있는지 검사할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;웹 캐시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버에 걸리는 부담을 줄이고 클라이언트들이 응답을 빠르게 얻을 수 있도록 서버 안에 자주 열람되는 리소스들의 사본을 모아 프록시에 저장해 놓을 수도 있습니다. 이를 웹 캐시라고 부릅니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;대리 프록시(Surrogate)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;대리 프록시는 웹 서버인것 처럼 위장합니다. 요청을 받아 요청받은 리소스의 위치를 찾기 위해 다른 서버들과 통신합니다. 웹 서버의 성능 개선을 목적으로 쓰이기 때문에 흔히 서버 가속기라고 불리기도 합니다. 콘텐츠 라우팅기능과 결합되어 분산 네트워크를 구성하기도 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;콘텐츠 라우터&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;콘텐츠 라우터는 클라이언트나 콘텐츠 종류에 따라 요청을 특정 웹 서버로 유도합니다. 예를들어 높은 성능을 위해 추가로 돈을 지불할 수 있는 웹 서비스에선 추가 지불한 클라이언트들의 요청은 더 빨리 응답해줄 수 있는 웹 캐시로 전달해줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;트랜스코더&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;트랜스코더는 본문의 포맷을 수정하는 프록시입니다. GIF 파일을 JPG 파일로 압축하거나, 일반 텍스트 파일을 더 압축할 수도 있고, 텍스트 파일을 특정 언어로 변환할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;익명화 프록시(Anonymizer)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;HTTP 메세지에서 클라이언트를 식별할 수 있는 특성들을 제거하고 전달해주는 프록시입니다. User-Agent헤더에서 사용자의 컴퓨터와 OS종류를 제거하고, IP주소, From헤더, Referer헤더, Cookie헤더 등을 제거해줍니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;63-프록시는-어디에-있는가&quot;&gt;6.3. 프록시는 어디에 있는가&lt;/h3&gt;

&lt;p&gt;프록시가 어떤 역할을 하는지는 알았으니 이번엔 프록시가 구체적으로 어디에 있고, 언제 네트워크 아키텍처상에 배치되는지 알아보겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;631-프록시-서버-배치&quot;&gt;6.3.1. 프록시 서버 배치&lt;/h4&gt;

&lt;p&gt;프록시는 클라이언트-서버 사이면 어느 곳에든 배치 될 수 있는데 아래와 같은 방법들로 배치할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;LAN과 WAN사이 : 출구(Egress) 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;로컬 네트워크(LAN, Local Area Network)가 WAN(Wide Area Network)에 들어가는 지점에 위치해 회사안의 보안을 강화할 수도 있고 어린이들이 유해 사이트에 노출되지 않게 할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ISP(Internet Service Provider)접근 지점 : 접근(입구) 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ISP란 KT, SK 텔레콤과 같이 인터넷을 제공해주는 업체를 말합니다. 주로 인터넷 속도 개선을 위해 사용하는 캐시 프록시를 예로 들 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;웹 서버 바로 앞 : 대리 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;대리 프록시는 웹 서버 바로 앞에 위치해 요청을 처리하고 서버에서 리소스를 가져와야 할 때만 서버까지 요청을 보냅니다. 주로 캐시 프록시를 예로 들 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;네트워크 교환 프록시&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;네트워크들 사이에 위치해서 트래픽의 혼잡을 완하하고 감시하기도 합니다.&lt;/p&gt;

&lt;h4 id=&quot;632-프록시-계층&quot;&gt;6.3.2. 프록시 계층&lt;/h4&gt;

&lt;p&gt;프록시는 여러개를 거칠 수도 있습니다. 만약&lt;/p&gt;

&lt;p&gt;클라이언트 -&amp;gt; 프록시1 -&amp;gt; 프록시2 -&amp;gt; 프록시3 -&amp;gt; 서버&lt;/p&gt;

&lt;p&gt;관계가 있다면 프록시2는 프록시1의 인바운드 프록시이며 ‘부모’프록시라고 부릅니다. 반대로 프록시2는 프록시3의 아웃바운드 프록시이며 ‘자식’프록시라고 부릅니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;프락시 계층 콘텐츠 라우팅&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;프록시가 계층을 이루고 있을때 프록시A는 항상 프록시B로 요청을 보낼 수도 있고(프록시 계층이 정적이다) 조건에 따라 다른 프록시들로 라우팅 할 수도 있습니다.(프록시 계층이 동적이다.)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;부하 균형
 자식 프록시는 부하를 분산하기 위해 부모 프록시들의 작업량을 파악해 부하가 적게 걸리는 부모쪽으로 라우팅 할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;지리적 인접성에 근거한 라우팅
 원 서버의 각 지역을 담당하는 부모쪽으로 라우팅할 수 있습니다. 2020년 3월 16일 기준으로 구글 클라우드 서비스는 전세계 21개 지역에 서버를 두고 있습니다. 서울도 있습니다.&lt;/li&gt;
  &lt;li&gt;프로토콜/타입 라우팅
 요청 URI에 근거해 라우팅을 할 수 있습니다. FTP프로토콜로 온 요청을 파일 서버로 라우팅 한다던가, 이미지 파일 요청이 왔을때 이미지 서버로 라우팅할 수 있습니다.&lt;/li&gt;
  &lt;li&gt;유료 서비스 가입자를 위한 라우팅
 빠른 성능을 위해 추가금액을 낸 이용자를 위해 가까운 것에 캐시 프록시를 만들어 캐시 프록시에서 바로 리소스를 제공해줄 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;633-어떻게-프록시가-트래픽을-처리하는가&quot;&gt;6.3.3. 어떻게 프록시가 트래픽을 처리하는가&lt;/h4&gt;

&lt;p&gt;그런데 지금까지 학습한 바에 따르면 우리는 분명 원 서버로 URL 요청을 보낼텐데 어떻게 그 요청이 프록시로 가는 걸까요&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;클라이언트 수정&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;웹 브라우저같은 웹 클라이언트들은 수동 혹은 자동 프록시 설정을 지원합니다. 클라이언트 어플리케이션에서 특정 프록시를 거치도록 설정 됐거나, 설정 하게되면 사용자의 요청은 프록시로 먼저 가게 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;네트워크 수정&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;네트워크를 관리하는 업체에선 트래픽을 가로채 프록시로 보낼 수 있습니다. 이 방법을 사용하면 클라이언트 입장에선 자신의 요청이 프록시를 거쳐온건지, 바로 서버로 갔다온건지 알 수 없습니다. 이를 하기 위해 스위칭 장치와 라우팅 장치가 필요합니다. 이런 프록시를 인터셉트 프록시라고 부릅니다.
 (투명 프록시(transparent proxy) 라고도 하지만 HTTP 명세에서 transparent는 ‘행위의 의미를 변경하지 않는다’라는 뜻으로 쓰이기 때문에 본 책에선 투명 프록시 대신 인터셉트 프록시라고 표현했습니다.)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;DNS 이름 공간을 수정&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;사용자가 URL에 호스트명을 입력하면 DNS 서버가 이를 호스트의 IP로 변환해줍니다. 이 과정에서 호스트 명을 호스트의 원 서버 IP가 아닌 프록시의 IP로 변환되게 설정한다면 요청을 프록시로 보낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;웹 서버를 수정 - 리다이렉션&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;웹 서버에서 프록시로 리다이렉션 시킬 수도 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;64-클라이언트-프록시-설정&quot;&gt;6.4. 클라이언트 프록시 설정&lt;/h3&gt;

&lt;p&gt;앞서 웹 브라우저같은 클라이언트 어플리케이션을 수정해 요청을 프록시로 보낼 수 있다고 했습니다. 거의 모든 현대 브라우저에선 프록시를 사용할 수 있도록 여러가지 설정 방법을 제공하고 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;641-클라이언트-프록시-설정-수동&quot;&gt;6.4.1. 클라이언트 프록시 설정: 수동&lt;/h4&gt;

&lt;p&gt;사용자가 브라우저의 설정 탭에서 수동으로 프록시 설정을 할 수 있습니다. (크롬 프록시 설정 : &lt;a href=&quot;https://www.itopening.com/2413/&quot;&gt;https://www.itopening.com/2413/&lt;/a&gt; )&lt;/p&gt;

&lt;h4 id=&quot;642-클라이언트-프록시-설정-pac-파일&quot;&gt;6.4.2. 클라이언트 프록시 설정: PAC 파일&lt;/h4&gt;

&lt;p&gt;수동으로 프록시를 설정하는 방법은 쉽지만 한계가 있습니다. 하나의 프록시만 설정할 수 있고, 지정한 프록시가 장애를 일으킬때의 대안도 없으며, 기업같은 곳에선 프록시를 바꿀때마다 모든 사용자가 각자 프록시 설정을 바꿔야 합니다.&lt;/p&gt;

&lt;p&gt;PAC(Proxy Auto-Configuration)파일은 말 그대로 프록시를 자동으로 Configuration해주는 파일입니다. PAC파일은 FindProxyForUrl(url, host)라는 함수를 구현한 자바스크립트 파일입니다. PAC파일의 URI를 브라우저에 수동으로 설정해두면, 브라우저는 PAC 파일의 로직에 따라 동적으로 프록시를 찾습니다.&lt;/p&gt;

&lt;p&gt;기업같은 곳에서 PAC파일을 한 곳에서 관리하고 모든 사용자가 그 PAC파일의 URI만 안다면 언제든지 PAC 파일을 사용자와 관계 없이 업데이트 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;PAC 파일은 .pac확장자를 갖고 MIME 타입은 ‘application/x-ns-proxy-autoconfig’ 입니다. PAC파일에서 정의해야 하는 FindProxyForUrl 함수는 아래중 하나를 리턴해야 합니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;return 값&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;DIRECT&lt;/td&gt;
      &lt;td&gt;프록시 없이 직접 연결한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;PROXY host:port&lt;/td&gt;
      &lt;td&gt;지정한 프록시를 사용한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SOCKS host:port&lt;/td&gt;
      &lt;td&gt;지정한 SOCKS 서버를 사용한다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;아래는 프로토콜에 따라 프록시를 달리해주는 PAC 파일 사례입니다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;FindProxyURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;PROXY http-proxy.mydomain.com:8080&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;ftp:&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;PROXY ftp-proxy.mydomain.com:8080&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;DIRECT&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;643-클라이언트-프록시-설정-wpad&quot;&gt;6.4.3. 클라이언트 프록시 설정: WPAD&lt;/h4&gt;

&lt;p&gt;하지만 여기서 끝나지 않고 이 PAC파일의 설정 자체도 동적으로 할 수 있습니다. WPAD(Web Proxy Autodiscovery Protocol)는 프로토콜중 하나이며 자동으로 PAC 파일을 찾아줍니다. 대부분의 브라우저에서 지원해줍니다.&lt;/p&gt;

&lt;p&gt;자동으로 PAC 파일을 찾는 방법엔 몇가지 정형화된 기법이 있습니다. 브라우저는 몇 가지 PAC 파일 탐색 기법을 차례대로 성공할때 까지 수행합니다.&lt;/p&gt;

&lt;p&gt;WPAD명세에선 다음의 순서대로 기법들을 정의하고 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;동적 호스트 발견 규약(DHCP, Dynamic Host Configuration Protocol)&lt;/li&gt;
  &lt;li&gt;서비스 위치 규약(SLP, Service Location Protocol)&lt;/li&gt;
  &lt;li&gt;DNS 잘 알려진 호스트명&lt;/li&gt;
  &lt;li&gt;DNS SRV 레코드&lt;/li&gt;
  &lt;li&gt;DNS TXT 레코드 안의 서비스 URI&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;20장에서 더 자세히 알아볼 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;65-프록시-요청의-미묘한-특징들&quot;&gt;6.5. 프록시 요청의 미묘한 특징들&lt;/h3&gt;

&lt;p&gt;프록시에게 하는 요청은 서버에 하는 요청과 약간 다른 특징을 갖습니다.&lt;/p&gt;

&lt;h4 id=&quot;651-프록시-uri는-서버-uri와-다르다&quot;&gt;6.5.1. 프록시 URI는 서버 URI와 다르다&lt;/h4&gt;

&lt;p&gt;클라이언트가 웹 서버로 바로 요청을 보낼땐 아래와 같이 부분 URI를 갖을 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;GET /index.html HTTP/1.0
User-Agent : SuperBrowser v1.3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;하지만 프록시로 요청을 보낼땐 다음과 같이 완전한 URI를 갖습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;GET http://www.marys-antiques.com/index.html HTTP/1.0
User-Agent : SuperBrowser v1.3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;인터넷의 초창기 시절 클라이언트는 서버와 직접 대화했습니다. 가상 호스팅도, 프록시도 없었습니다. 이렇게 직접 대화하는 환경에서 서버는 자신의 호스트명, 포트번호를 알고 있기 때문에 클라이언트쪽에선 불필요한 정보 발송을 피하기 위해 스킴과 호스트를 생략한 부분 URI를 보냈습니다.&lt;/p&gt;

&lt;p&gt;하지만 프록시, 게이트웨이가 등장하며 부분 URI는 문제가 됐습니다. 프록시로 보내기 위해선 프록시 서버의 호스트명을 명시해야 했고, 게이트웨이에선 스킴을 읽어 어떤 프로토콜인지 식별해야 했기 때문입니다.&lt;/p&gt;

&lt;p&gt;이를 해결하기 위해서 HTTP/1.0에선 프록시 요청의 경우 완전한 URI를 보내기로 하였습니다. HTTP/1.1 부턴 프록시, 서버 모두 완전한 URI를 요구하지만 아직 많은 레거시 클라이언트들이 부분 URI를 보냅니다.&lt;/p&gt;

&lt;h4 id=&quot;652-가상-호스팅에서-일어나는-같은-문제&quot;&gt;6.5.2. 가상 호스팅에서 일어나는 같은 문제&lt;/h4&gt;

&lt;p&gt;가상 호스팅은 물리적으론 같은 웹 서버를 공유하지만 여러 도메인을 호스팅하는 방식을 말합니다. 앞서 언급한 부분 URI는 가상 호스팅 환경에서도 문제가 됐습니다.&lt;/p&gt;

&lt;p&gt;프록시에선 완전한 URI를 요구하는 것으로 문제를 해결했지만 가상 호스팅에선 호스트와 포트 정보가 담겨있는 Host 헤더를 요구하는 것으로 해결했습니다.&lt;/p&gt;

&lt;h4 id=&quot;653-인터셉트-프록시는-부분-uri를-받는다&quot;&gt;6.5.3. 인터셉트 프록시는 부분 URI를 받는다.&lt;/h4&gt;

&lt;p&gt;6.5.1. 에서 프록시 요청은 완전한 URI를 요구한다고 했습니다. 하지만 클라이언트가 자신이 프록시와 대화하는지 모르면서 프록시와 대화할 수도 있습니다. 대리프록시, 인터셉트 프록시가 그 예입니다. 이때, 클라이언트는 자신이 원 서버와 대화한다고 생각하고 부분 URI를 보낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;대리 프록시는 앞서 설명했듯이 원 서버의 호스트명과 IP를 사용하기 때문에 문제될 것이 없고, 원 서버의 IP는 대리 프록시가 알고 있습니다.&lt;/p&gt;

&lt;p&gt;인터셉트 프록시는 네트워크 사이에서 서버로 가는 트래픽을 가로채기 때문에 부분 URI를 얻게 됩니다.(그래서 어떻게 되는지…)&lt;/p&gt;

&lt;h4 id=&quot;654-프록시는-프록시-요청과-서버-요청을-모두-다룰-수-있다&quot;&gt;6.5.4. 프록시는 프록시 요청과 서버 요청을 모두 다룰 수 있다.&lt;/h4&gt;

&lt;p&gt;다목적 프록시라면 완전한 URI와 부분 URI 모두를 다룰 수 있어야 합니다. 어떻게 다루는 지는 아래와 같은 프로세스를 따릅니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;완전한 URI가 주어졌다면 그것을 사용합니다.&lt;/li&gt;
  &lt;li&gt;부분 URI가 주어졌고 Host헤더가 있다면, Host 헤더를 이용해 원 서버의 이름과 포트번호를 알아냅니다.&lt;/li&gt;
  &lt;li&gt;부분 URI가 주어졌으나 Host 헤더가 없다면 다음과 같은 경우의 수가 있습니다.
    &lt;ol&gt;
      &lt;li&gt;프록시가 대리 프록시라면, 프록시에 원 서버 주소와 포트번호가 설정되어 있을 것입니다.&lt;/li&gt;
      &lt;li&gt;이전에 인터셉트 프록시가 가로챘던 트래픽을 받았고, 이전에 가로챈 인터셉터 프록시가 해당 트래픽에 원 IP주소와 포트번호를 설정해두었다면 그 IP와 포트번호를 사용합니다.&lt;/li&gt;
      &lt;li&gt;모두 실패했다면 에러 메세지를 반환합니다.(Host헤더를 지원하는 최신 브라우저로 업그레이드 하라는 에러 메세지)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;655-전송-중-uri-변경&quot;&gt;6.5.5. 전송 중 URI 변경&lt;/h4&gt;

&lt;p&gt;영향이 없을 것 같은 사소한 URI 변경도 문제를 일으킬 수 있습니다.&lt;/p&gt;

&lt;p&gt;몇몇 프록시는 URI를 다음 홉으로 보내기 전에 포트번호를 기본 포트인 ‘:80’으로 설정한다던가, 잘못 사용된 예약어를 올바르게 교체하는 것 같은 표준 형식으로의 ‘정규화’를 진행합니다. 이런 변형도 상호운용성 문제를 일으킬 수 있습니다.&lt;/p&gt;

&lt;p&gt;프록시는 최대한 관대하게 메세지를 받아 넘겨야 합니다.&lt;/p&gt;

&lt;p&gt;특히 HTTP명세에서 일반적인 인터셉트 프록시가 URI를 전달할때 절대 경로를 고쳐 쓰는 것을 금지합니다.(빈 경로를 ‘/’로 교체하는 건 허용합니다.)&lt;/p&gt;

&lt;h4 id=&quot;656-uri-클라이언트-자동확장과-호스트명-분석hostname-resolution&quot;&gt;6.5.6. URI 클라이언트 자동확장과 호스트명 분석(Hostname Resolution)&lt;/h4&gt;

&lt;p&gt;브라우저는 프록시의 존재 여부에 따라 요청 URI를 다르게 분석합니다. 프록시가 없다면 사용자가 입력한 URI에서 호스트명을 찾고 그에 대응하는 IP 주소들을 연결에 성공할 때까지 시도합니다.&lt;/p&gt;

&lt;p&gt;호스트가 발견되지 않는다면 브라우저는 사용자가 호스트명을 완전히 입력하지 않은 것으로 간주하고 2장에서 살펴봤던 URL 확장을 시도합니다.&lt;/p&gt;

&lt;h4 id=&quot;657-프록시-없는-uri-분석uri-resolution&quot;&gt;6.5.7. 프록시 없는 URI 분석(URI Resolution)&lt;/h4&gt;

&lt;p&gt;6.5.6.에서 명시적인 프록시가 없을 때의 과정을 사례를 들어 알아보겠습니다. 사용자가 URI에 ‘Oreilly’를 입력한 상황입니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;사용자가 ‘Oreilly’를 입력합니다.&lt;/li&gt;
  &lt;li&gt;브라우저는 DNS로 호스트 ‘Oreilly’를 찾습니다. -&amp;gt; 실패&lt;/li&gt;
  &lt;li&gt;브라우저는 ‘Oreilly’를 확장합니다.
3.1. 앞에 ‘www’, 뒤에 ‘com’을 붙여 ‘www.oreilly.com’로 URI를 확장했습니다.
3.2. DNS로 ‘www.oreilly.com’을 찾습니다. -&amp;gt; 성공, IP주소 받음&lt;/li&gt;
  &lt;li&gt;브라우저는 알아낸 IP주소들에 대해 성공할 때까지 접속을 시도합니다. -&amp;gt; 성공했다면 커넥션을 맺습니다.&lt;/li&gt;
  &lt;li&gt;요청을 보내고 응답을 받습니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;658-명시적인-프록시를-사용할-때의-uri-분석&quot;&gt;6.5.8. 명시적인 프록시를 사용할 때의 URI 분석&lt;/h4&gt;

&lt;p&gt;6.5.6. 에서 명시적인 프록시를 사용한다면 브라우저가 제공하는 URI 확장 없이 요청이 진행됩니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;사용자가 ‘Oreilly’를 입력합니다.&lt;/li&gt;
  &lt;li&gt;브라우저는 사용하기로 설정된 프록시의 호스트 명과 DNS를 이용해 프록시의 IP를 알아냅니다.&lt;/li&gt;
  &lt;li&gt;브라우저와 프록시가 커넥션을 맺습니다.&lt;/li&gt;
  &lt;li&gt;브라우저는 기본 스킴과 경로만 추가해 프록시로 ‘http://oreilly/’라는 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;이후로는 프록시에 따라 달라집니다. URI 확장을 시도하는 프록시도 있지만 대부분 확장하지 않고 에러를 돌려줄 것입니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;659-인터셉트-프록시를-이용한-uri-분석&quot;&gt;6.5.9. 인터셉트 프록시를 이용한 URI 분석&lt;/h4&gt;

&lt;p&gt;앞서 인터셉터 프록시는 클라이언트 입장에서 본인이 프록시와 대화하는지 모른다고 하였습니다. 그렇기 때문에 6.5.6.의 과정에서 인터셉트 프록시가 개입한다면 클라이언트는 URI 확장을 시도합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;사용자가 ‘Oreilly’를 입력합니다.&lt;/li&gt;
  &lt;li&gt;브라우저는 DNS로 호스트 ‘Oreilly’를 찾습니다. -&amp;gt; 실패&lt;/li&gt;
  &lt;li&gt;브라우저는 ‘Oreilly’를 확장합니다.
3.1. 앞에 ‘www’, 뒤에 ‘com’을 붙여 ‘www.oreilly.com’로 URI를 확장했습니다.
3.2. DNS로 ‘www.oreilly.com’을 찾습니다. -&amp;gt; 성공, IP주소 받음&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;하지만 여기서 프록시가 없을 때와 인터셉트 프록시가 개입할때가 다른 과정을 보입니다. 프록시가 없을 땐 받아온 IP들중 연결에 성공할 때까지 접속을 시도합니다. 하지만 인터셉트 프록시가 개입하면 첫 번째 접속 시도로 끝납니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;브라우저가 첫 번째 접속을 시도하고 그 시도를 인터셉트 프록시가 가로챕니다. 브라우저는 첫 번째 접속 시도가 성공했다고 생각합니다.&lt;/li&gt;
  &lt;li&gt;인터셉트 프록시가 원 서버와 대화할 준비가 되었을때 프록시는 원 서버에 장애가 있다는 것을 알게 됩니다.&lt;/li&gt;
  &lt;li&gt;인터셉트 프록시는 Host헤더를 찾아 DNS를 이용해 접속 시도할 수 있는 IP를 다시 받아 오던지, Host헤더가 없다면 요청 받은 IP를 역방향 DNS 룩업을 시행해 호스트명을 알아낸뒤 다시 다른 IP들을 알아옵니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;66-메세지-추적&quot;&gt;6.6. 메세지 추적&lt;/h3&gt;

&lt;p&gt;오늘날에 웹 요청이 서버로 가기 까지 둘 이상의 프록시를 지나는건 매우 흔한 일입니다. 프록시가 흔해지며 프록시를 넘나드는 메세지의 흐름을 추적하고 문제점을 찾아내는 것이 중요해 졌습니다.&lt;/p&gt;

&lt;h4 id=&quot;661-via-헤더&quot;&gt;6.6.1. Via 헤더&lt;/h4&gt;

&lt;p&gt;Via헤더 필드는 메세지가 지나는 중간 노드(프록시 및 게이트웨이)의 정보를 나열해줍니다. 한 노드를 지날 때 마다 해당 노드에 대한 정보가 Via 목록의 끝에 추가되어야 합니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Via : 1.1 proxy-62.irenes-isp.net, 1.0 cache.joes-hardware.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위의 Via헤더 예시는 해당 메세지가 두개의 프록시를 거쳤음을 말해줍니다. 첫번째 프록시는 HTTP/1.1을 구현하는 proxy-62.irenes-isp.net 이라는 프록시이고 두번째는 HTTP/1.0을 구현하는 cache.joes-hardware.com 이라는 프록시입니다.&lt;/p&gt;

&lt;p&gt;프록시는 또한 네트워크의 라우팅 루프(마지막 목적지를 찾지 못하고 계속 looping 하는 현상)를 탐지하기 위해 Via 헤더를 사용할 수 있습니다. 프록시에서 받은 요청을 다른 곳으로 보낼때 자신의 정보를 Via헤더에 추가해야 하는데 추가 하기 전에 Via 헤더를 탐색해 라우팅 루프가 발견되는지 검사할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 문법&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Via 헤더 필드는 쉼표로 구분된 경유지(Waypoint)의 목록입니다.
 각 경유지는 개별 프록시, 게이트웨이를 나타내며 프로토콜과 주소에 대한 정보를 담고 있습니다. 프로토콜 이름을 기입 할 수 있으며 기입 안한경우엔 HTTP로 간주합니다. 프로토콜 버전과 경유지 이름은 필수이며 선택적으로 코멘트를 추가할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 문법 - 프로토콜 이름&lt;/strong&gt;
 각 waypoint가 수신한 프로토콜입니다. HTTP라면 생략 가능하고 버전앞에 ‘/’로 구분되어 붙습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 문법 - 프로토콜 버전&lt;/strong&gt;
 수신한 메세지의 프로토콜 버전입니다. 필수적으로 기입되어야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 문법 - 노드 이름&lt;/strong&gt;
 중개자의 호스트와 포트번호입니다. 포트번호는 생략 가능하며 이 경우 사용하는 프로토콜의 기본 포트로 간주합니다. 가명으로 대체할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 문법 - 노드 코멘트&lt;/strong&gt;
 선택사항이며 자유롭게 기입할 수 있지만 주로 벤더나 버전 정보, 프록시에서 일어난 이벤트에 대한 진단 정보등을 넣습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via 요청과 응답 경로&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;요청, 응답 모두 Via 헤더를 갖습니다. TCP 커넥션의 경우 대부분 응답 메세지는 요청과 같은 경로로 되돌아갑니다. 요청시에 프록시 A, B, C를 지났다면 응답시엔 대부분 프록시 C, B, A를 지납니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via와 게이트웨이&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;현대의 프록시는 게이트웨이의 기능도 같이 제공할 수 있습니다. Via 헤더엔 이런 프로토콜 변환이 기록되기 때문에 클라이언트 쪽에서 해당 프록시에 프로토콜 변환 기능이 있는지 확인할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;GET ftp://http-guide.com/pub/welcom.txt HTTP/1.0&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위와 같은 요청을 프록시로 보냈고 프록시가 FTP서버에 FTP 요청을 보내고 받아온 FTP응답을 HTTP로 변환해 클라이언트에게 돌려줍니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;HTTP/1.0 200 OK
Date : Sun, 11 Nov 2001 21:01:59 GMT
&lt;strong&gt;Via : FTP/1.0 proxy.irenes-isp.net (Traffic-Server/5.0.1-17882 [cMsf])&lt;/strong&gt;
Last-modified : Sun, 11 Nov 2001 21:05:24 GMT
Content-type : text/plain&lt;/p&gt;

  &lt;p&gt;Hi there~ This is FTP Server&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Via헤더에 기록된 수신 프로토콜이 FTP라는 것에 주의합시다. 클라이언트가 처음 FTP요청을 보냈기에 수신한 프로토콜이 기재됐습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Server 헤더와 Via헤더&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Server 헤더는 최종적인 목적지 서버가 사용하는 소프트웨어를 알려줍니다. 클라이언트가 요청한 원 서버를 위한 헤더입니다. 프록시에선 이 Server 헤더를 건드리면 안됩니다. 프록시가 무슨 소프트웨어를 사용하는지는 Via헤더의 코멘트에 기록하면 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Via가 개인정보 보호와 보안에 미치는 영향&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;프록시가 방화벽의 일부인 경우엔 프록시 뒤에 있는 호스트의 이름과 포트를 전달해서는 안됩니다. 이때 프록시는 호스트 명을 적당한 가명으로 교체할 수 있습니다. 아래와 같이 말이죠.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Via: 1.0 foo, 1.1 devirus.company.com, 1.1 access-logger.company.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 Via 헤더를&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Via: 1.0 foo, 1.1 concealed-stuff&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위와 같이 여러개의 경유지를 하나로 합쳐 숨길 수 있습니다. 하지만 이렇게 합쳐 숨기기 위해선 경유지들이 모두 같은 조직의 통제하에 있고 호스트가 이미 가명으로 교체되었어야 합니다. 그리고 수신된 프로토콜이 다를땐 다른 프로토콜들을 합쳐선 안됩니다.&lt;/p&gt;

&lt;h4 id=&quot;662-trace-메서드&quot;&gt;6.6.2. TRACE 메서드&lt;/h4&gt;

&lt;p&gt;앞 장에서 TRACE 메서드의 역할을 알아본적이 있습니다. TRACE 요청이 목적지 서버에 도착했을 때(혹은 바로 알아볼 Max-Forward값이 0인 요청을 받은 서버), 서버는 요청 메세지를 응답 메세지 본문에 넣어 응답 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Max-Forward&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Max-Forward 헤더는 TRACE요청이나 OPTIONS 요청에서 프록시 홉의 갯수를 제한할 수 있습니다. 메세지가 프록시 들을 계속 무한 루프 도는지 테스트 할 때나, 프록시 연쇄 중간의 특정 프록시 서버들의 효과를 체크할 때 사용됩니다.&lt;/p&gt;

&lt;p&gt;Max-Forward헤더는 이 메세지가 앞으로 몇 개의 홉을 더 거칠수 있는지를 말해주는 값을 가지고 있습니다. Max-Forward값이 0이라면 수신 프록시는 자신이 목적지 서버가 아니더라도 인바운드 방향으로 전달하지 말고 클라이언트 쪽으로 응답을 보내야 합니다.&lt;/p&gt;

&lt;p&gt;받은 Max-Forward값이 0이 아니면 다음 홉으로 전달시 Max-Forward 값을 1 줄여 보내야 합니다.&lt;/p&gt;

&lt;p&gt;그리고 이런 Max-Forward가 작동하기 위해선 모든 프록시나 게이트웨이가 이 Max-Forward를 지원해야 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;67-프록시-인증&quot;&gt;6.7. 프록시 인증&lt;/h3&gt;

&lt;p&gt;프록시는 접근 제어 장치로 사용될 수 있습니다. 사용자가 유효한 접근 권한 자격을 프록시에 제출하지 않으면 프록시에서 요청을 차단할 수 있는데 이를 ‘프록시 인증’ 메커니즘 이라고 합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;제한된 콘텐츠에 대한 요청이 프록시에 도착.&lt;/li&gt;
  &lt;li&gt;프록시는 접근 자격을 요구하는 407 Proxy Authorization Required 상태코드와 자격 제출 방식을 설명해주는 Proxy-Authenticate 헤더 필드를 클라이언트에게 보냅니다.&lt;/li&gt;
  &lt;li&gt;407 응답을 받은 클라리언트는 로컬 DB를 찾던지, 사용자에게 물어보던지 여러 방식으로 요구 자격을 수집합니다.&lt;/li&gt;
  &lt;li&gt;자격을 얻었다면 자격을 Proxy-Authenticate 헤더에 담아 다시 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;자격이 유효하다면 프록시는 다음 홉으로 메세지를 전달하고 유효하지 않다면 407응답을 보냅니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;프록시 인증은 인증에 참여하는 프록시가 프록시 연쇄상에 여러개 있을 경우 잘 작동하지 않습니다.(Proxy-Authenticate에 있는 값이 여러 프록시 인증 중 어디에 쓰여야 될지 모르므로.) 이를 해결하기 위해 프록시 연쇄의 특정 경유지와 인증 자격을 짝지어주는 HTTP 기능 확장이 제안 됐지만 많이 구현되진 않았습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;68-프록시-상호운용성&quot;&gt;6.8. 프록시 상호운용성&lt;/h3&gt;

&lt;p&gt;클라이언트, 서버, 프록시들은 각기 다른 프로토콜, 프로토콜 버전, 벤더 등을 가지고 있습니다. 따라서 이런 많은 기기들간의 상호운용성 문제는 항상 중요합니다.&lt;/p&gt;

&lt;h4 id=&quot;681-지원하지-않는-헤더와-메서드-다루기&quot;&gt;6.8.1. 지원하지 않는 헤더와 메서드 다루기&lt;/h4&gt;

&lt;p&gt;기본적으로 프록시가 자신이 이해할 수 없는 메서드와 헤더를 만난다면 관대하게 그대로 보존해 전달해야 합니다. HTTP 명세에선 메서드와 헤더의 확장을 허용하기 때문에 항상 자신이 이해하지 못하는 메서드와 헤더를 염두에 두어야 합니다.&lt;/p&gt;

&lt;p&gt;같은 이름의 헤더필드가 여러개 온다면 이 헤더필드의 상대적인 순서 역시 그대로 보존해야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;682-options-어떤-기능을-지원하는지-알아보기&quot;&gt;6.8.2. OPTIONS: 어떤 기능을 지원하는지 알아보기&lt;/h4&gt;

&lt;p&gt;앞 장에서 OPTIONS는 서버에게 특정 리소스에 대해 어떤 메서드를 지원하는지 묻는 메서드라고 했습니다.&lt;/p&gt;

&lt;p&gt;OPTIONS 요청을 받은 서버는 특정 리소스에 대해 가능한 기능을 서술하는 여러 헤더를 추가할 수 있지만 HTTP/1.1 명세에서 정의한 헤더는 Allow 헤더 뿐입니다.&lt;/p&gt;

&lt;h4 id=&quot;683-allow-헤더&quot;&gt;6.8.3. Allow 헤더&lt;/h4&gt;

&lt;p&gt;기본적으로 Allow 헤더는 OPTIONS 요청에 대해 응답하기 위한 헤더입니다. 식별되는 자원에 대해 OPTIONS 요청을 하면 서버는 그 리소스에 지원되는 메서드나 서버가 지원하는 모든 메서드(요청 URI가 *인 경우)를 열거합니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Allow : GET, HEAD, PUT&lt;/p&gt;

  &lt;p&gt;-&amp;gt; 요청 리소스에 대해 GET, HEAD, PUT 요청이 가능하다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;그런데 Allow 헤더가 요청에도 사용될 수 있습니다. 이때 Allow 헤더는 새 리소스가 지원했으면 하는 메서드를 추천하기 위해 사용되지만 서버가 이를 지원할 의무는 없습니다.&lt;/p&gt;

&lt;p&gt;프록시가 Allow에 있는 메서드를 이해할 수 없다고 해서 Allow 헤더를 수정하면 안됩니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;
</content>
 </entry>
 
 <entry>
   <title>Github Page Emoji</title>
   <link href="http://localhost:4000/posts/googling/etc/Github-Page-Emoji/"/>
   <updated>2020-03-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/Github Page Emoji</id>
   <content type="html">&lt;p&gt;Thanks for ‘https://gist.github.com/rxaviers/7360908’ ​ :fire::fire::fire:&lt;/p&gt;

&lt;p&gt;People&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;:bowtie: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bowtie:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:smile: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smile:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:laughing: &lt;code class=&quot;highlighter-rouge&quot;&gt;:laughing:&lt;/code&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;:blush: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blush:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:smiley: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smiley:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:relaxed: &lt;code class=&quot;highlighter-rouge&quot;&gt;:relaxed:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:smirk: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smirk:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heart_eyes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heart_eyes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:kissing_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kissing_heart:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:kissing_closed_eyes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kissing_closed_eyes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:flushed: &lt;code class=&quot;highlighter-rouge&quot;&gt;:flushed:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:relieved: &lt;code class=&quot;highlighter-rouge&quot;&gt;:relieved:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:satisfied: &lt;code class=&quot;highlighter-rouge&quot;&gt;:satisfied:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:grin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wink: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wink:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:stuck_out_tongue_winking_eye: &lt;code class=&quot;highlighter-rouge&quot;&gt;:stuck_out_tongue_winking_eye:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:stuck_out_tongue_closed_eyes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:stuck_out_tongue_closed_eyes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:grinning: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grinning:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:kissing: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kissing:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:kissing_smiling_eyes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kissing_smiling_eyes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:stuck_out_tongue: &lt;code class=&quot;highlighter-rouge&quot;&gt;:stuck_out_tongue:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sleeping: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sleeping:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:worried: &lt;code class=&quot;highlighter-rouge&quot;&gt;:worried:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:frowning: &lt;code class=&quot;highlighter-rouge&quot;&gt;:frowning:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:anguished: &lt;code class=&quot;highlighter-rouge&quot;&gt;:anguished:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:open_mouth: &lt;code class=&quot;highlighter-rouge&quot;&gt;:open_mouth:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:grimacing: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grimacing:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:confused: &lt;code class=&quot;highlighter-rouge&quot;&gt;:confused:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hushed: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hushed:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:expressionless: &lt;code class=&quot;highlighter-rouge&quot;&gt;:expressionless:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:unamused: &lt;code class=&quot;highlighter-rouge&quot;&gt;:unamused:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sweat_smile: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sweat_smile:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sweat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sweat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:disappointed_relieved: &lt;code class=&quot;highlighter-rouge&quot;&gt;:disappointed_relieved:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:weary: &lt;code class=&quot;highlighter-rouge&quot;&gt;:weary:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pensive: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pensive:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:disappointed: &lt;code class=&quot;highlighter-rouge&quot;&gt;:disappointed:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:confounded: &lt;code class=&quot;highlighter-rouge&quot;&gt;:confounded:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fearful: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fearful:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cold_sweat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cold_sweat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:persevere: &lt;code class=&quot;highlighter-rouge&quot;&gt;:persevere:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cry:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sob: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sob:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:joy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:joy:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:astonished: &lt;code class=&quot;highlighter-rouge&quot;&gt;:astonished:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:scream: &lt;code class=&quot;highlighter-rouge&quot;&gt;:scream:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:neckbeard: &lt;code class=&quot;highlighter-rouge&quot;&gt;:neckbeard:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tired_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tired_face:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:angry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:angry:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rage: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rage:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:triumph: &lt;code class=&quot;highlighter-rouge&quot;&gt;:triumph:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sleepy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sleepy:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:yum: &lt;code class=&quot;highlighter-rouge&quot;&gt;:yum:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mask: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mask:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sunglasses: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sunglasses:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dizzy_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dizzy_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:imp: &lt;code class=&quot;highlighter-rouge&quot;&gt;:imp:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:smiling_imp: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smiling_imp:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:neutral_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:neutral_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_mouth: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_mouth:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:innocent: &lt;code class=&quot;highlighter-rouge&quot;&gt;:innocent:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:alien: &lt;code class=&quot;highlighter-rouge&quot;&gt;:alien:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:yellow_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:yellow_heart:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:blue_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blue_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:purple_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:purple_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heart:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:green_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:green_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:broken_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:broken_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heartbeat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heartbeat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:heartpulse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heartpulse:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:two_hearts: &lt;code class=&quot;highlighter-rouge&quot;&gt;:two_hearts:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:revolving_hearts: &lt;code class=&quot;highlighter-rouge&quot;&gt;:revolving_hearts:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cupid: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cupid:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sparkling_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sparkling_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sparkles: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sparkles:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:star: &lt;code class=&quot;highlighter-rouge&quot;&gt;:star:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:star2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:star2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dizzy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dizzy:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:boom: &lt;code class=&quot;highlighter-rouge&quot;&gt;:boom:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:collision: &lt;code class=&quot;highlighter-rouge&quot;&gt;:collision:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:anger: &lt;code class=&quot;highlighter-rouge&quot;&gt;:anger:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:exclamation: &lt;code class=&quot;highlighter-rouge&quot;&gt;:exclamation:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:question: &lt;code class=&quot;highlighter-rouge&quot;&gt;:question:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:grey_exclamation: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grey_exclamation:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:grey_question: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grey_question:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:zzz: &lt;code class=&quot;highlighter-rouge&quot;&gt;:zzz:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dash: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dash:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sweat_drops: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sweat_drops:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:notes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:notes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:musical_note: &lt;code class=&quot;highlighter-rouge&quot;&gt;:musical_note:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:fire: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fire:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hankey: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hankey:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:poop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:poop:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:shit: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shit:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:+1: &lt;code class=&quot;highlighter-rouge&quot;&gt;:+1:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:thumbsup: &lt;code class=&quot;highlighter-rouge&quot;&gt;:thumbsup:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:-1: &lt;code class=&quot;highlighter-rouge&quot;&gt;:-1:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:thumbsdown: &lt;code class=&quot;highlighter-rouge&quot;&gt;:thumbsdown:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ok_hand: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ok_hand:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:punch: &lt;code class=&quot;highlighter-rouge&quot;&gt;:punch:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:facepunch: &lt;code class=&quot;highlighter-rouge&quot;&gt;:facepunch:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fist: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fist:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:v: &lt;code class=&quot;highlighter-rouge&quot;&gt;:v:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wave: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wave:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hand: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hand:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:raised_hand: &lt;code class=&quot;highlighter-rouge&quot;&gt;:raised_hand:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:open_hands: &lt;code class=&quot;highlighter-rouge&quot;&gt;:open_hands:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:point_up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:point_up:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:point_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:point_down:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:point_left: &lt;code class=&quot;highlighter-rouge&quot;&gt;:point_left:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:point_right: &lt;code class=&quot;highlighter-rouge&quot;&gt;:point_right:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:raised_hands: &lt;code class=&quot;highlighter-rouge&quot;&gt;:raised_hands:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pray: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pray:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:point_up_2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:point_up_2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clap: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clap:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:muscle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:muscle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:metal: &lt;code class=&quot;highlighter-rouge&quot;&gt;:metal:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:fu: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fu:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:walking: &lt;code class=&quot;highlighter-rouge&quot;&gt;:walking:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:runner: &lt;code class=&quot;highlighter-rouge&quot;&gt;:runner:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:running: &lt;code class=&quot;highlighter-rouge&quot;&gt;:running:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:couple: &lt;code class=&quot;highlighter-rouge&quot;&gt;:couple:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:family: &lt;code class=&quot;highlighter-rouge&quot;&gt;:family:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:two_men_holding_hands: &lt;code class=&quot;highlighter-rouge&quot;&gt;:two_men_holding_hands:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:two_women_holding_hands: &lt;code class=&quot;highlighter-rouge&quot;&gt;:two_women_holding_hands:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dancer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dancer:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:dancers: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dancers:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ok_woman: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ok_woman:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_good: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_good:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:information_desk_person: &lt;code class=&quot;highlighter-rouge&quot;&gt;:information_desk_person:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:raising_hand: &lt;code class=&quot;highlighter-rouge&quot;&gt;:raising_hand:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bride_with_veil: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bride_with_veil:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:person_with_pouting_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:person_with_pouting_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:person_frowning: &lt;code class=&quot;highlighter-rouge&quot;&gt;:person_frowning:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bow: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bow:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:couplekiss: &lt;code class=&quot;highlighter-rouge&quot;&gt;:couplekiss:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:couple_with_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:couple_with_heart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:massage: &lt;code class=&quot;highlighter-rouge&quot;&gt;:massage:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:haircut: &lt;code class=&quot;highlighter-rouge&quot;&gt;:haircut:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:nail_care: &lt;code class=&quot;highlighter-rouge&quot;&gt;:nail_care:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:boy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:boy:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:girl: &lt;code class=&quot;highlighter-rouge&quot;&gt;:girl:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:woman: &lt;code class=&quot;highlighter-rouge&quot;&gt;:woman:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:man: &lt;code class=&quot;highlighter-rouge&quot;&gt;:man:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:baby: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baby:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:older_woman: &lt;code class=&quot;highlighter-rouge&quot;&gt;:older_woman:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:older_man: &lt;code class=&quot;highlighter-rouge&quot;&gt;:older_man:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:person_with_blond_hair: &lt;code class=&quot;highlighter-rouge&quot;&gt;:person_with_blond_hair:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:man_with_gua_pi_mao: &lt;code class=&quot;highlighter-rouge&quot;&gt;:man_with_gua_pi_mao:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:man_with_turban: &lt;code class=&quot;highlighter-rouge&quot;&gt;:man_with_turban:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:construction_worker: &lt;code class=&quot;highlighter-rouge&quot;&gt;:construction_worker:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cop:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:angel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:angel:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:princess: &lt;code class=&quot;highlighter-rouge&quot;&gt;:princess:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:smiley_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smiley_cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:smile_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smile_cat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:heart_eyes_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heart_eyes_cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:kissing_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kissing_cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:smirk_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smirk_cat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:scream_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:scream_cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:crying_cat_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:crying_cat_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:joy_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:joy_cat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:pouting_cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pouting_cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:japanese_ogre: &lt;code class=&quot;highlighter-rouge&quot;&gt;:japanese_ogre:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:japanese_goblin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:japanese_goblin:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:see_no_evil: &lt;code class=&quot;highlighter-rouge&quot;&gt;:see_no_evil:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hear_no_evil: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hear_no_evil:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:speak_no_evil: &lt;code class=&quot;highlighter-rouge&quot;&gt;:speak_no_evil:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:guardsman: &lt;code class=&quot;highlighter-rouge&quot;&gt;:guardsman:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:skull: &lt;code class=&quot;highlighter-rouge&quot;&gt;:skull:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:feet: &lt;code class=&quot;highlighter-rouge&quot;&gt;:feet:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:lips: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lips:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:kiss: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kiss:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:droplet: &lt;code class=&quot;highlighter-rouge&quot;&gt;:droplet:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ear: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ear:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:eyes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eyes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:nose: &lt;code class=&quot;highlighter-rouge&quot;&gt;:nose:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tongue: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tongue:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:love_letter: &lt;code class=&quot;highlighter-rouge&quot;&gt;:love_letter:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bust_in_silhouette: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bust_in_silhouette:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:busts_in_silhouette: &lt;code class=&quot;highlighter-rouge&quot;&gt;:busts_in_silhouette:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:speech_balloon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:speech_balloon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:thought_balloon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:thought_balloon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:feelsgood: &lt;code class=&quot;highlighter-rouge&quot;&gt;:feelsgood:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:finnadie: &lt;code class=&quot;highlighter-rouge&quot;&gt;:finnadie:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:goberserk: &lt;code class=&quot;highlighter-rouge&quot;&gt;:goberserk:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:godmode: &lt;code class=&quot;highlighter-rouge&quot;&gt;:godmode:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hurtrealbad: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hurtrealbad:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rage1: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rage1:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rage2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rage2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rage3: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rage3:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rage4: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rage4:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:suspect: &lt;code class=&quot;highlighter-rouge&quot;&gt;:suspect:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:trollface: &lt;code class=&quot;highlighter-rouge&quot;&gt;:trollface:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Nature&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;:sunny: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sunny:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:umbrella: &lt;code class=&quot;highlighter-rouge&quot;&gt;:umbrella:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:cloud: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cloud:&lt;/code&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;:snowflake: &lt;code class=&quot;highlighter-rouge&quot;&gt;:snowflake:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:snowman: &lt;code class=&quot;highlighter-rouge&quot;&gt;:snowman:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:zap: &lt;code class=&quot;highlighter-rouge&quot;&gt;:zap:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cyclone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cyclone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:foggy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:foggy:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ocean: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ocean:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dog: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dog:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mouse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mouse:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:hamster: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hamster:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rabbit: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rabbit:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wolf: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wolf:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:frog: &lt;code class=&quot;highlighter-rouge&quot;&gt;:frog:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tiger: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tiger:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:koala: &lt;code class=&quot;highlighter-rouge&quot;&gt;:koala:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bear: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bear:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pig: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pig:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pig_nose: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pig_nose:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cow: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cow:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:boar: &lt;code class=&quot;highlighter-rouge&quot;&gt;:boar:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:monkey_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:monkey_face:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:monkey: &lt;code class=&quot;highlighter-rouge&quot;&gt;:monkey:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:horse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:horse:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:racehorse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:racehorse:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:camel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:camel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sheep: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sheep:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:elephant: &lt;code class=&quot;highlighter-rouge&quot;&gt;:elephant:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:panda_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:panda_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:snake: &lt;code class=&quot;highlighter-rouge&quot;&gt;:snake:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bird: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bird:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:baby_chick: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baby_chick:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hatched_chick: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hatched_chick:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hatching_chick: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hatching_chick:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:chicken: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chicken:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:penguin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:penguin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:turtle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:turtle:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bug: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bug:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:honeybee: &lt;code class=&quot;highlighter-rouge&quot;&gt;:honeybee:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ant: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ant:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:beetle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:beetle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:snail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:snail:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:octopus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:octopus:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tropical_fish: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tropical_fish:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fish: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fish:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:whale: &lt;code class=&quot;highlighter-rouge&quot;&gt;:whale:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:whale2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:whale2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dolphin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dolphin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cow2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cow2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ram: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ram:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:water_buffalo: &lt;code class=&quot;highlighter-rouge&quot;&gt;:water_buffalo:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tiger2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tiger2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rabbit2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rabbit2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dragon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dragon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:goat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:goat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rooster: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rooster:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dog2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dog2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:pig2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pig2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mouse2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mouse2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ox: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ox:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:dragon_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dragon_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:blowfish: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blowfish:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:crocodile: &lt;code class=&quot;highlighter-rouge&quot;&gt;:crocodile:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:dromedary_camel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dromedary_camel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:leopard: &lt;code class=&quot;highlighter-rouge&quot;&gt;:leopard:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cat2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cat2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:poodle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:poodle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:paw_prints: &lt;code class=&quot;highlighter-rouge&quot;&gt;:paw_prints:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bouquet: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bouquet:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cherry_blossom: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cherry_blossom:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tulip: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tulip:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:four_leaf_clover: &lt;code class=&quot;highlighter-rouge&quot;&gt;:four_leaf_clover:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rose: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rose:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sunflower: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sunflower:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hibiscus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hibiscus:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:maple_leaf: &lt;code class=&quot;highlighter-rouge&quot;&gt;:maple_leaf:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:leaves: &lt;code class=&quot;highlighter-rouge&quot;&gt;:leaves:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fallen_leaf: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fallen_leaf:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:herb: &lt;code class=&quot;highlighter-rouge&quot;&gt;:herb:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mushroom: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mushroom:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cactus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cactus:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:palm_tree: &lt;code class=&quot;highlighter-rouge&quot;&gt;:palm_tree:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:evergreen_tree: &lt;code class=&quot;highlighter-rouge&quot;&gt;:evergreen_tree:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:deciduous_tree: &lt;code class=&quot;highlighter-rouge&quot;&gt;:deciduous_tree:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:chestnut: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chestnut:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:seedling: &lt;code class=&quot;highlighter-rouge&quot;&gt;:seedling:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:blossom: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blossom:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ear_of_rice: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ear_of_rice:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:shell: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shell:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:globe_with_meridians: &lt;code class=&quot;highlighter-rouge&quot;&gt;:globe_with_meridians:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sun_with_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sun_with_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:full_moon_with_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:full_moon_with_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:new_moon_with_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:new_moon_with_face:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:new_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:new_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:waxing_crescent_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:waxing_crescent_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:first_quarter_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:first_quarter_moon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:waxing_gibbous_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:waxing_gibbous_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:full_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:full_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:waning_gibbous_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:waning_gibbous_moon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:last_quarter_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:last_quarter_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:waning_crescent_moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:waning_crescent_moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:last_quarter_moon_with_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:last_quarter_moon_with_face:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:first_quarter_moon_with_face: &lt;code class=&quot;highlighter-rouge&quot;&gt;:first_quarter_moon_with_face:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:moon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:moon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:earth_africa: &lt;code class=&quot;highlighter-rouge&quot;&gt;:earth_africa:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:earth_americas: &lt;code class=&quot;highlighter-rouge&quot;&gt;:earth_americas:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:earth_asia: &lt;code class=&quot;highlighter-rouge&quot;&gt;:earth_asia:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:volcano: &lt;code class=&quot;highlighter-rouge&quot;&gt;:volcano:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:milky_way: &lt;code class=&quot;highlighter-rouge&quot;&gt;:milky_way:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:partly_sunny: &lt;code class=&quot;highlighter-rouge&quot;&gt;:partly_sunny:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:octocat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:octocat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:squirrel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:squirrel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Objects&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;:bamboo: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bamboo:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:gift_heart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gift_heart:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:dolls: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dolls:&lt;/code&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;:school_satchel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:school_satchel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mortar_board: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mortar_board:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:flags: &lt;code class=&quot;highlighter-rouge&quot;&gt;:flags:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:fireworks: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fireworks:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sparkler: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sparkler:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wind_chime: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wind_chime:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rice_scene: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rice_scene:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:jack_o_lantern: &lt;code class=&quot;highlighter-rouge&quot;&gt;:jack_o_lantern:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ghost: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ghost:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:santa: &lt;code class=&quot;highlighter-rouge&quot;&gt;:santa:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:christmas_tree: &lt;code class=&quot;highlighter-rouge&quot;&gt;:christmas_tree:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:gift: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gift:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bell: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bell:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_bell: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_bell:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tanabata_tree: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tanabata_tree:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tada: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tada:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:confetti_ball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:confetti_ball:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:balloon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:balloon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:crystal_ball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:crystal_ball:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cd: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cd:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dvd: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dvd:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:floppy_disk: &lt;code class=&quot;highlighter-rouge&quot;&gt;:floppy_disk:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:camera: &lt;code class=&quot;highlighter-rouge&quot;&gt;:camera:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:video_camera: &lt;code class=&quot;highlighter-rouge&quot;&gt;:video_camera:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:movie_camera: &lt;code class=&quot;highlighter-rouge&quot;&gt;:movie_camera:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:computer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:computer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tv: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tv:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:iphone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:iphone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:phone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:phone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:telephone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:telephone:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:telephone_receiver: &lt;code class=&quot;highlighter-rouge&quot;&gt;:telephone_receiver:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pager: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pager:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fax: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fax:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:minidisc: &lt;code class=&quot;highlighter-rouge&quot;&gt;:minidisc:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:vhs: &lt;code class=&quot;highlighter-rouge&quot;&gt;:vhs:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sound: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sound:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:speaker: &lt;code class=&quot;highlighter-rouge&quot;&gt;:speaker:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mute: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mute:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:loudspeaker: &lt;code class=&quot;highlighter-rouge&quot;&gt;:loudspeaker:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:mega: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mega:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hourglass: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hourglass:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hourglass_flowing_sand: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hourglass_flowing_sand:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:alarm_clock: &lt;code class=&quot;highlighter-rouge&quot;&gt;:alarm_clock:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:watch: &lt;code class=&quot;highlighter-rouge&quot;&gt;:watch:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:radio: &lt;code class=&quot;highlighter-rouge&quot;&gt;:radio:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:satellite: &lt;code class=&quot;highlighter-rouge&quot;&gt;:satellite:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:loop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:loop:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mag: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mag:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:mag_right: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mag_right:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:unlock: &lt;code class=&quot;highlighter-rouge&quot;&gt;:unlock:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:lock: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lock:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:lock_with_ink_pen: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lock_with_ink_pen:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:closed_lock_with_key: &lt;code class=&quot;highlighter-rouge&quot;&gt;:closed_lock_with_key:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:key: &lt;code class=&quot;highlighter-rouge&quot;&gt;:key:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bulb: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bulb:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:flashlight: &lt;code class=&quot;highlighter-rouge&quot;&gt;:flashlight:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:high_brightness: &lt;code class=&quot;highlighter-rouge&quot;&gt;:high_brightness:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:low_brightness: &lt;code class=&quot;highlighter-rouge&quot;&gt;:low_brightness:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:electric_plug: &lt;code class=&quot;highlighter-rouge&quot;&gt;:electric_plug:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:battery: &lt;code class=&quot;highlighter-rouge&quot;&gt;:battery:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:calling: &lt;code class=&quot;highlighter-rouge&quot;&gt;:calling:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:email: &lt;code class=&quot;highlighter-rouge&quot;&gt;:email:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mailbox: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mailbox:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:postbox: &lt;code class=&quot;highlighter-rouge&quot;&gt;:postbox:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bath: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bath:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bathtub: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bathtub:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:shower: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shower:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:toilet: &lt;code class=&quot;highlighter-rouge&quot;&gt;:toilet:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wrench: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wrench:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:nut_and_bolt: &lt;code class=&quot;highlighter-rouge&quot;&gt;:nut_and_bolt:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hammer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hammer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:seat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:seat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:moneybag: &lt;code class=&quot;highlighter-rouge&quot;&gt;:moneybag:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:yen: &lt;code class=&quot;highlighter-rouge&quot;&gt;:yen:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dollar: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dollar:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:pound: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pound:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:euro: &lt;code class=&quot;highlighter-rouge&quot;&gt;:euro:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:credit_card: &lt;code class=&quot;highlighter-rouge&quot;&gt;:credit_card:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:money_with_wings: &lt;code class=&quot;highlighter-rouge&quot;&gt;:money_with_wings:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:e-mail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:e-mail:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:inbox_tray: &lt;code class=&quot;highlighter-rouge&quot;&gt;:inbox_tray:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:outbox_tray: &lt;code class=&quot;highlighter-rouge&quot;&gt;:outbox_tray:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:envelope: &lt;code class=&quot;highlighter-rouge&quot;&gt;:envelope:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:incoming_envelope: &lt;code class=&quot;highlighter-rouge&quot;&gt;:incoming_envelope:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:postal_horn: &lt;code class=&quot;highlighter-rouge&quot;&gt;:postal_horn:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mailbox_closed: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mailbox_closed:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mailbox_with_mail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mailbox_with_mail:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:mailbox_with_no_mail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mailbox_with_no_mail:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:door: &lt;code class=&quot;highlighter-rouge&quot;&gt;:door:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:smoking: &lt;code class=&quot;highlighter-rouge&quot;&gt;:smoking:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bomb: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bomb:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:gun: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gun:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hocho: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hocho:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:pill: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pill:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:syringe: &lt;code class=&quot;highlighter-rouge&quot;&gt;:syringe:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:page_facing_up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:page_facing_up:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:page_with_curl: &lt;code class=&quot;highlighter-rouge&quot;&gt;:page_with_curl:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bookmark_tabs: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bookmark_tabs:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bar_chart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bar_chart:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:chart_with_upwards_trend: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chart_with_upwards_trend:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:chart_with_downwards_trend: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chart_with_downwards_trend:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:scroll: &lt;code class=&quot;highlighter-rouge&quot;&gt;:scroll:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clipboard: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clipboard:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:calendar: &lt;code class=&quot;highlighter-rouge&quot;&gt;:calendar:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:date: &lt;code class=&quot;highlighter-rouge&quot;&gt;:date:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:card_index: &lt;code class=&quot;highlighter-rouge&quot;&gt;:card_index:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:file_folder: &lt;code class=&quot;highlighter-rouge&quot;&gt;:file_folder:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:open_file_folder: &lt;code class=&quot;highlighter-rouge&quot;&gt;:open_file_folder:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:scissors: &lt;code class=&quot;highlighter-rouge&quot;&gt;:scissors:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pushpin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pushpin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:paperclip: &lt;code class=&quot;highlighter-rouge&quot;&gt;:paperclip:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:black_nib: &lt;code class=&quot;highlighter-rouge&quot;&gt;:black_nib:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pencil2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pencil2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:straight_ruler: &lt;code class=&quot;highlighter-rouge&quot;&gt;:straight_ruler:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:triangular_ruler: &lt;code class=&quot;highlighter-rouge&quot;&gt;:triangular_ruler:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:closed_book: &lt;code class=&quot;highlighter-rouge&quot;&gt;:closed_book:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:green_book: &lt;code class=&quot;highlighter-rouge&quot;&gt;:green_book:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:blue_book: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blue_book:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:orange_book: &lt;code class=&quot;highlighter-rouge&quot;&gt;:orange_book:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:notebook: &lt;code class=&quot;highlighter-rouge&quot;&gt;:notebook:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:notebook_with_decorative_cover: &lt;code class=&quot;highlighter-rouge&quot;&gt;:notebook_with_decorative_cover:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ledger: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ledger:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:books: &lt;code class=&quot;highlighter-rouge&quot;&gt;:books:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bookmark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bookmark:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:name_badge: &lt;code class=&quot;highlighter-rouge&quot;&gt;:name_badge:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:microscope: &lt;code class=&quot;highlighter-rouge&quot;&gt;:microscope:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:telescope: &lt;code class=&quot;highlighter-rouge&quot;&gt;:telescope:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:newspaper: &lt;code class=&quot;highlighter-rouge&quot;&gt;:newspaper:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:football: &lt;code class=&quot;highlighter-rouge&quot;&gt;:football:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:basketball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:basketball:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:soccer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:soccer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:baseball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baseball:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tennis: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tennis:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:8ball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:8ball:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rugby_football: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rugby_football:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bowling: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bowling:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:golf: &lt;code class=&quot;highlighter-rouge&quot;&gt;:golf:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mountain_bicyclist: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mountain_bicyclist:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bicyclist: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bicyclist:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:horse_racing: &lt;code class=&quot;highlighter-rouge&quot;&gt;:horse_racing:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:snowboarder: &lt;code class=&quot;highlighter-rouge&quot;&gt;:snowboarder:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:swimmer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:swimmer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:surfer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:surfer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ski: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ski:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:spades: &lt;code class=&quot;highlighter-rouge&quot;&gt;:spades:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hearts: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hearts:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clubs: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clubs:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:diamonds: &lt;code class=&quot;highlighter-rouge&quot;&gt;:diamonds:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:gem: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gem:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ring: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ring:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:trophy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:trophy:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:musical_score: &lt;code class=&quot;highlighter-rouge&quot;&gt;:musical_score:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:musical_keyboard: &lt;code class=&quot;highlighter-rouge&quot;&gt;:musical_keyboard:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:violin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:violin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:space_invader: &lt;code class=&quot;highlighter-rouge&quot;&gt;:space_invader:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:video_game: &lt;code class=&quot;highlighter-rouge&quot;&gt;:video_game:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:black_joker: &lt;code class=&quot;highlighter-rouge&quot;&gt;:black_joker:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:flower_playing_cards: &lt;code class=&quot;highlighter-rouge&quot;&gt;:flower_playing_cards:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:game_die: &lt;code class=&quot;highlighter-rouge&quot;&gt;:game_die:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:dart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mahjong: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mahjong:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clapper: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clapper:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:memo: &lt;code class=&quot;highlighter-rouge&quot;&gt;:memo:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pencil: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pencil:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:book: &lt;code class=&quot;highlighter-rouge&quot;&gt;:book:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:art: &lt;code class=&quot;highlighter-rouge&quot;&gt;:art:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:microphone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:microphone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:headphones: &lt;code class=&quot;highlighter-rouge&quot;&gt;:headphones:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:trumpet: &lt;code class=&quot;highlighter-rouge&quot;&gt;:trumpet:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:saxophone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:saxophone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:guitar: &lt;code class=&quot;highlighter-rouge&quot;&gt;:guitar:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:shoe: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shoe:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sandal: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sandal:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:high_heel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:high_heel:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:lipstick: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lipstick:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:boot: &lt;code class=&quot;highlighter-rouge&quot;&gt;:boot:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:shirt: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shirt:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tshirt: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tshirt:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:necktie: &lt;code class=&quot;highlighter-rouge&quot;&gt;:necktie:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:womans_clothes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:womans_clothes:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:dress: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dress:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:running_shirt_with_sash: &lt;code class=&quot;highlighter-rouge&quot;&gt;:running_shirt_with_sash:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:jeans: &lt;code class=&quot;highlighter-rouge&quot;&gt;:jeans:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:kimono: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kimono:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bikini: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bikini:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ribbon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ribbon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tophat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tophat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:crown: &lt;code class=&quot;highlighter-rouge&quot;&gt;:crown:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:womans_hat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:womans_hat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:mans_shoe: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mans_shoe:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:closed_umbrella: &lt;code class=&quot;highlighter-rouge&quot;&gt;:closed_umbrella:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:briefcase: &lt;code class=&quot;highlighter-rouge&quot;&gt;:briefcase:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:handbag: &lt;code class=&quot;highlighter-rouge&quot;&gt;:handbag:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pouch: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pouch:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:purse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:purse:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:eyeglasses: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eyeglasses:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fishing_pole_and_fish: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fishing_pole_and_fish:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:coffee: &lt;code class=&quot;highlighter-rouge&quot;&gt;:coffee:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tea: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tea:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sake: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sake:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:baby_bottle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baby_bottle:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:beer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:beer:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:beers: &lt;code class=&quot;highlighter-rouge&quot;&gt;:beers:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cocktail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cocktail:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tropical_drink: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tropical_drink:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wine_glass: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wine_glass:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fork_and_knife: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fork_and_knife:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:pizza: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pizza:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hamburger: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hamburger:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fries: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fries:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:poultry_leg: &lt;code class=&quot;highlighter-rouge&quot;&gt;:poultry_leg:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:meat_on_bone: &lt;code class=&quot;highlighter-rouge&quot;&gt;:meat_on_bone:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:spaghetti: &lt;code class=&quot;highlighter-rouge&quot;&gt;:spaghetti:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:curry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:curry:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fried_shrimp: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fried_shrimp:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bento: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bento:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sushi: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sushi:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fish_cake: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fish_cake:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rice_ball: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rice_ball:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rice_cracker: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rice_cracker:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rice: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rice:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ramen: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ramen:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:stew: &lt;code class=&quot;highlighter-rouge&quot;&gt;:stew:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:oden: &lt;code class=&quot;highlighter-rouge&quot;&gt;:oden:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:dango: &lt;code class=&quot;highlighter-rouge&quot;&gt;:dango:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:egg: &lt;code class=&quot;highlighter-rouge&quot;&gt;:egg:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bread: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bread:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:doughnut: &lt;code class=&quot;highlighter-rouge&quot;&gt;:doughnut:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:custard: &lt;code class=&quot;highlighter-rouge&quot;&gt;:custard:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:icecream: &lt;code class=&quot;highlighter-rouge&quot;&gt;:icecream:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ice_cream: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ice_cream:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:shaved_ice: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shaved_ice:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:birthday: &lt;code class=&quot;highlighter-rouge&quot;&gt;:birthday:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cake: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cake:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cookie: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cookie:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:chocolate_bar: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chocolate_bar:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:candy: &lt;code class=&quot;highlighter-rouge&quot;&gt;:candy:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:lollipop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lollipop:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:honey_pot: &lt;code class=&quot;highlighter-rouge&quot;&gt;:honey_pot:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:apple: &lt;code class=&quot;highlighter-rouge&quot;&gt;:apple:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:green_apple: &lt;code class=&quot;highlighter-rouge&quot;&gt;:green_apple:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tangerine: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tangerine:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:lemon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:lemon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cherries: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cherries:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:grapes: &lt;code class=&quot;highlighter-rouge&quot;&gt;:grapes:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:watermelon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:watermelon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:strawberry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:strawberry:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:peach: &lt;code class=&quot;highlighter-rouge&quot;&gt;:peach:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:melon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:melon:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:banana: &lt;code class=&quot;highlighter-rouge&quot;&gt;:banana:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pear: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pear:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pineapple: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pineapple:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sweet_potato: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sweet_potato:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:eggplant: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eggplant:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tomato: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tomato:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:corn: &lt;code class=&quot;highlighter-rouge&quot;&gt;:corn:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Places&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;:house: &lt;code class=&quot;highlighter-rouge&quot;&gt;:house:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:house_with_garden: &lt;code class=&quot;highlighter-rouge&quot;&gt;:house_with_garden:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:school: &lt;code class=&quot;highlighter-rouge&quot;&gt;:school:&lt;/code&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;:office: &lt;code class=&quot;highlighter-rouge&quot;&gt;:office:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:post_office: &lt;code class=&quot;highlighter-rouge&quot;&gt;:post_office:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hospital: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hospital:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bank: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bank:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:convenience_store: &lt;code class=&quot;highlighter-rouge&quot;&gt;:convenience_store:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:love_hotel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:love_hotel:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:hotel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hotel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wedding: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wedding:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:church: &lt;code class=&quot;highlighter-rouge&quot;&gt;:church:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:department_store: &lt;code class=&quot;highlighter-rouge&quot;&gt;:department_store:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:european_post_office: &lt;code class=&quot;highlighter-rouge&quot;&gt;:european_post_office:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:city_sunrise: &lt;code class=&quot;highlighter-rouge&quot;&gt;:city_sunrise:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:city_sunset: &lt;code class=&quot;highlighter-rouge&quot;&gt;:city_sunset:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:japanese_castle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:japanese_castle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:european_castle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:european_castle:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:tent: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tent:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:factory: &lt;code class=&quot;highlighter-rouge&quot;&gt;:factory:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tokyo_tower: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tokyo_tower:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:japan: &lt;code class=&quot;highlighter-rouge&quot;&gt;:japan:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mount_fuji: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mount_fuji:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sunrise_over_mountains: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sunrise_over_mountains:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sunrise: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sunrise:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:stars: &lt;code class=&quot;highlighter-rouge&quot;&gt;:stars:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:statue_of_liberty: &lt;code class=&quot;highlighter-rouge&quot;&gt;:statue_of_liberty:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bridge_at_night: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bridge_at_night:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:carousel_horse: &lt;code class=&quot;highlighter-rouge&quot;&gt;:carousel_horse:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rainbow: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rainbow:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ferris_wheel: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ferris_wheel:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fountain: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fountain:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:roller_coaster: &lt;code class=&quot;highlighter-rouge&quot;&gt;:roller_coaster:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ship: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ship:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:speedboat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:speedboat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:boat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:boat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sailboat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sailboat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rowboat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rowboat:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:anchor: &lt;code class=&quot;highlighter-rouge&quot;&gt;:anchor:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rocket: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rocket:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:airplane: &lt;code class=&quot;highlighter-rouge&quot;&gt;:airplane:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:helicopter: &lt;code class=&quot;highlighter-rouge&quot;&gt;:helicopter:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:steam_locomotive: &lt;code class=&quot;highlighter-rouge&quot;&gt;:steam_locomotive:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tram: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tram:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mountain_railway: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mountain_railway:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bike: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bike:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:aerial_tramway: &lt;code class=&quot;highlighter-rouge&quot;&gt;:aerial_tramway:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:suspension_railway: &lt;code class=&quot;highlighter-rouge&quot;&gt;:suspension_railway:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:mountain_cableway: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mountain_cableway:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tractor: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tractor:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:blue_car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:blue_car:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:oncoming_automobile: &lt;code class=&quot;highlighter-rouge&quot;&gt;:oncoming_automobile:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:car:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:red_car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:red_car:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:taxi: &lt;code class=&quot;highlighter-rouge&quot;&gt;:taxi:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:oncoming_taxi: &lt;code class=&quot;highlighter-rouge&quot;&gt;:oncoming_taxi:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:articulated_lorry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:articulated_lorry:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bus:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:oncoming_bus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:oncoming_bus:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:rotating_light: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rotating_light:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:police_car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:police_car:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:oncoming_police_car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:oncoming_police_car:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fire_engine: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fire_engine:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ambulance: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ambulance:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:minibus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:minibus:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:truck: &lt;code class=&quot;highlighter-rouge&quot;&gt;:truck:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:train: &lt;code class=&quot;highlighter-rouge&quot;&gt;:train:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:station: &lt;code class=&quot;highlighter-rouge&quot;&gt;:station:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:train2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:train2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:bullettrain_front: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bullettrain_front:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bullettrain_side: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bullettrain_side:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:light_rail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:light_rail:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:monorail: &lt;code class=&quot;highlighter-rouge&quot;&gt;:monorail:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:railway_car: &lt;code class=&quot;highlighter-rouge&quot;&gt;:railway_car:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:trolleybus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:trolleybus:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ticket: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ticket:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fuelpump: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fuelpump:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:vertical_traffic_light: &lt;code class=&quot;highlighter-rouge&quot;&gt;:vertical_traffic_light:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:traffic_light: &lt;code class=&quot;highlighter-rouge&quot;&gt;:traffic_light:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:warning: &lt;code class=&quot;highlighter-rouge&quot;&gt;:warning:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:construction: &lt;code class=&quot;highlighter-rouge&quot;&gt;:construction:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:beginner: &lt;code class=&quot;highlighter-rouge&quot;&gt;:beginner:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:atm: &lt;code class=&quot;highlighter-rouge&quot;&gt;:atm:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:slot_machine: &lt;code class=&quot;highlighter-rouge&quot;&gt;:slot_machine:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:busstop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:busstop:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:barber: &lt;code class=&quot;highlighter-rouge&quot;&gt;:barber:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:hotsprings: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hotsprings:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:checkered_flag: &lt;code class=&quot;highlighter-rouge&quot;&gt;:checkered_flag:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:crossed_flags: &lt;code class=&quot;highlighter-rouge&quot;&gt;:crossed_flags:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:izakaya_lantern: &lt;code class=&quot;highlighter-rouge&quot;&gt;:izakaya_lantern:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:moyai: &lt;code class=&quot;highlighter-rouge&quot;&gt;:moyai:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:circus_tent: &lt;code class=&quot;highlighter-rouge&quot;&gt;:circus_tent:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:performing_arts: &lt;code class=&quot;highlighter-rouge&quot;&gt;:performing_arts:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:round_pushpin: &lt;code class=&quot;highlighter-rouge&quot;&gt;:round_pushpin:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:triangular_flag_on_post: &lt;code class=&quot;highlighter-rouge&quot;&gt;:triangular_flag_on_post:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:jp: &lt;code class=&quot;highlighter-rouge&quot;&gt;:jp:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:kr: &lt;code class=&quot;highlighter-rouge&quot;&gt;:kr:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cn: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cn:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:us: &lt;code class=&quot;highlighter-rouge&quot;&gt;:us:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:fr: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fr:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:es: &lt;code class=&quot;highlighter-rouge&quot;&gt;:es:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:it: &lt;code class=&quot;highlighter-rouge&quot;&gt;:it:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ru: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ru:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:gb: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gb:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:uk: &lt;code class=&quot;highlighter-rouge&quot;&gt;:uk:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:de: &lt;code class=&quot;highlighter-rouge&quot;&gt;:de:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Symbols&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;:one: &lt;code class=&quot;highlighter-rouge&quot;&gt;:one:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:two: &lt;code class=&quot;highlighter-rouge&quot;&gt;:two:&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;:three: &lt;code class=&quot;highlighter-rouge&quot;&gt;:three:&lt;/code&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;:four: &lt;code class=&quot;highlighter-rouge&quot;&gt;:four:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:five: &lt;code class=&quot;highlighter-rouge&quot;&gt;:five:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:six: &lt;code class=&quot;highlighter-rouge&quot;&gt;:six:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:seven: &lt;code class=&quot;highlighter-rouge&quot;&gt;:seven:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:eight: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eight:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:nine: &lt;code class=&quot;highlighter-rouge&quot;&gt;:nine:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:keycap_ten: &lt;code class=&quot;highlighter-rouge&quot;&gt;:keycap_ten:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:1234: &lt;code class=&quot;highlighter-rouge&quot;&gt;:1234:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:zero: &lt;code class=&quot;highlighter-rouge&quot;&gt;:zero:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:hash: &lt;code class=&quot;highlighter-rouge&quot;&gt;:hash:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:symbols: &lt;code class=&quot;highlighter-rouge&quot;&gt;:symbols:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_backward: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_backward:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_down:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_forward: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_forward:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_left: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_left:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:capital_abcd: &lt;code class=&quot;highlighter-rouge&quot;&gt;:capital_abcd:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:abcd: &lt;code class=&quot;highlighter-rouge&quot;&gt;:abcd:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:abc: &lt;code class=&quot;highlighter-rouge&quot;&gt;:abc:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_lower_left: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_lower_left:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_lower_right: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_lower_right:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_right: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_right:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_up:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_upper_left: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_upper_left:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_upper_right: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_upper_right:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_double_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_double_down:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_double_up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_double_up:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_down_small: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_down_small:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_heading_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_heading_down:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_heading_up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_heading_up:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:leftwards_arrow_with_hook: &lt;code class=&quot;highlighter-rouge&quot;&gt;:leftwards_arrow_with_hook:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_right_hook: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_right_hook:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:left_right_arrow: &lt;code class=&quot;highlighter-rouge&quot;&gt;:left_right_arrow:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrow_up_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_up_down:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:arrow_up_small: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrow_up_small:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrows_clockwise: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrows_clockwise:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:arrows_counterclockwise: &lt;code class=&quot;highlighter-rouge&quot;&gt;:arrows_counterclockwise:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:rewind: &lt;code class=&quot;highlighter-rouge&quot;&gt;:rewind:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:fast_forward: &lt;code class=&quot;highlighter-rouge&quot;&gt;:fast_forward:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:information_source: &lt;code class=&quot;highlighter-rouge&quot;&gt;:information_source:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ok: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ok:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:twisted_rightwards_arrows: &lt;code class=&quot;highlighter-rouge&quot;&gt;:twisted_rightwards_arrows:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:repeat: &lt;code class=&quot;highlighter-rouge&quot;&gt;:repeat:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:repeat_one: &lt;code class=&quot;highlighter-rouge&quot;&gt;:repeat_one:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:new: &lt;code class=&quot;highlighter-rouge&quot;&gt;:new:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:top: &lt;code class=&quot;highlighter-rouge&quot;&gt;:top:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:up: &lt;code class=&quot;highlighter-rouge&quot;&gt;:up:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cool: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cool:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:free: &lt;code class=&quot;highlighter-rouge&quot;&gt;:free:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ng: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ng:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cinema: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cinema:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:koko: &lt;code class=&quot;highlighter-rouge&quot;&gt;:koko:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:signal_strength: &lt;code class=&quot;highlighter-rouge&quot;&gt;:signal_strength:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u5272: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u5272:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u5408: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u5408:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:u55b6: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u55b6:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u6307: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u6307:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u6708: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u6708:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:u6709: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u6709:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u6e80: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u6e80:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u7121: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u7121:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:u7533: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u7533:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u7a7a: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u7a7a:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:u7981: &lt;code class=&quot;highlighter-rouge&quot;&gt;:u7981:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:sa: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sa:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:restroom: &lt;code class=&quot;highlighter-rouge&quot;&gt;:restroom:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mens: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mens:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:womens: &lt;code class=&quot;highlighter-rouge&quot;&gt;:womens:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:baby_symbol: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baby_symbol:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_smoking: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_smoking:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:parking: &lt;code class=&quot;highlighter-rouge&quot;&gt;:parking:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wheelchair: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wheelchair:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:metro: &lt;code class=&quot;highlighter-rouge&quot;&gt;:metro:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:baggage_claim: &lt;code class=&quot;highlighter-rouge&quot;&gt;:baggage_claim:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:accept: &lt;code class=&quot;highlighter-rouge&quot;&gt;:accept:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wc: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wc:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:potable_water: &lt;code class=&quot;highlighter-rouge&quot;&gt;:potable_water:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:put_litter_in_its_place: &lt;code class=&quot;highlighter-rouge&quot;&gt;:put_litter_in_its_place:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:secret: &lt;code class=&quot;highlighter-rouge&quot;&gt;:secret:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:congratulations: &lt;code class=&quot;highlighter-rouge&quot;&gt;:congratulations:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:m: &lt;code class=&quot;highlighter-rouge&quot;&gt;:m:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:passport_control: &lt;code class=&quot;highlighter-rouge&quot;&gt;:passport_control:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:left_luggage: &lt;code class=&quot;highlighter-rouge&quot;&gt;:left_luggage:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:customs: &lt;code class=&quot;highlighter-rouge&quot;&gt;:customs:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ideograph_advantage: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ideograph_advantage:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:cl: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cl:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sos: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sos:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:id: &lt;code class=&quot;highlighter-rouge&quot;&gt;:id:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:no_entry_sign: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_entry_sign:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:underage: &lt;code class=&quot;highlighter-rouge&quot;&gt;:underage:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_mobile_phones: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_mobile_phones:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:do_not_litter: &lt;code class=&quot;highlighter-rouge&quot;&gt;:do_not_litter:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:non-potable_water: &lt;code class=&quot;highlighter-rouge&quot;&gt;:non-potable_water:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_bicycles: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_bicycles:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:no_pedestrians: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_pedestrians:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:children_crossing: &lt;code class=&quot;highlighter-rouge&quot;&gt;:children_crossing:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:no_entry: &lt;code class=&quot;highlighter-rouge&quot;&gt;:no_entry:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:eight_spoked_asterisk: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eight_spoked_asterisk:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:eight_pointed_black_star: &lt;code class=&quot;highlighter-rouge&quot;&gt;:eight_pointed_black_star:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heart_decoration: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heart_decoration:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:vs: &lt;code class=&quot;highlighter-rouge&quot;&gt;:vs:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:vibration_mode: &lt;code class=&quot;highlighter-rouge&quot;&gt;:vibration_mode:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:mobile_phone_off: &lt;code class=&quot;highlighter-rouge&quot;&gt;:mobile_phone_off:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:chart: &lt;code class=&quot;highlighter-rouge&quot;&gt;:chart:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:currency_exchange: &lt;code class=&quot;highlighter-rouge&quot;&gt;:currency_exchange:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:aries: &lt;code class=&quot;highlighter-rouge&quot;&gt;:aries:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:taurus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:taurus:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:gemini: &lt;code class=&quot;highlighter-rouge&quot;&gt;:gemini:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:cancer: &lt;code class=&quot;highlighter-rouge&quot;&gt;:cancer:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:leo: &lt;code class=&quot;highlighter-rouge&quot;&gt;:leo:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:virgo: &lt;code class=&quot;highlighter-rouge&quot;&gt;:virgo:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:libra: &lt;code class=&quot;highlighter-rouge&quot;&gt;:libra:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:scorpius: &lt;code class=&quot;highlighter-rouge&quot;&gt;:scorpius:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:sagittarius: &lt;code class=&quot;highlighter-rouge&quot;&gt;:sagittarius:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:capricorn: &lt;code class=&quot;highlighter-rouge&quot;&gt;:capricorn:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:aquarius: &lt;code class=&quot;highlighter-rouge&quot;&gt;:aquarius:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:pisces: &lt;code class=&quot;highlighter-rouge&quot;&gt;:pisces:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ophiuchus: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ophiuchus:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:six_pointed_star: &lt;code class=&quot;highlighter-rouge&quot;&gt;:six_pointed_star:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:negative_squared_cross_mark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:negative_squared_cross_mark:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:a: &lt;code class=&quot;highlighter-rouge&quot;&gt;:a:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:b: &lt;code class=&quot;highlighter-rouge&quot;&gt;:b:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:ab: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ab:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:o2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:o2:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:diamond_shape_with_a_dot_inside: &lt;code class=&quot;highlighter-rouge&quot;&gt;:diamond_shape_with_a_dot_inside:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:recycle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:recycle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:end: &lt;code class=&quot;highlighter-rouge&quot;&gt;:end:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:on: &lt;code class=&quot;highlighter-rouge&quot;&gt;:on:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:soon: &lt;code class=&quot;highlighter-rouge&quot;&gt;:soon:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock1: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock1:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock130: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock130:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock10: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock10:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock1030: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock1030:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock11: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock11:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock1130: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock1130:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock12: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock12:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock1230: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock1230:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock2: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock2:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock230: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock230:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock3: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock3:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock330: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock330:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock4: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock4:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock430: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock430:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock5: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock5:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock530: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock530:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock6: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock6:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock630: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock630:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock7: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock7:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock730: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock730:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock8: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock8:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock830: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock830:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:clock9: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock9:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:clock930: &lt;code class=&quot;highlighter-rouge&quot;&gt;:clock930:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_dollar_sign: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_dollar_sign:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:copyright: &lt;code class=&quot;highlighter-rouge&quot;&gt;:copyright:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:registered: &lt;code class=&quot;highlighter-rouge&quot;&gt;:registered:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:tm: &lt;code class=&quot;highlighter-rouge&quot;&gt;:tm:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:x: &lt;code class=&quot;highlighter-rouge&quot;&gt;:x:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_exclamation_mark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_exclamation_mark:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:bangbang: &lt;code class=&quot;highlighter-rouge&quot;&gt;:bangbang:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:interrobang: &lt;code class=&quot;highlighter-rouge&quot;&gt;:interrobang:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:o: &lt;code class=&quot;highlighter-rouge&quot;&gt;:o:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_multiplication_x: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_multiplication_x:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:heavy_plus_sign: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_plus_sign:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_minus_sign: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_minus_sign:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_division_sign: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_division_sign:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:white_flower: &lt;code class=&quot;highlighter-rouge&quot;&gt;:white_flower:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:100: &lt;code class=&quot;highlighter-rouge&quot;&gt;:100:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:heavy_check_mark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:heavy_check_mark:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:ballot_box_with_check: &lt;code class=&quot;highlighter-rouge&quot;&gt;:ballot_box_with_check:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:radio_button: &lt;code class=&quot;highlighter-rouge&quot;&gt;:radio_button:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:link: &lt;code class=&quot;highlighter-rouge&quot;&gt;:link:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:curly_loop: &lt;code class=&quot;highlighter-rouge&quot;&gt;:curly_loop:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:wavy_dash: &lt;code class=&quot;highlighter-rouge&quot;&gt;:wavy_dash:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:part_alternation_mark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:part_alternation_mark:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:trident: &lt;code class=&quot;highlighter-rouge&quot;&gt;:trident:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:black_square: &lt;code class=&quot;highlighter-rouge&quot;&gt;:black_square:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:white_square: &lt;code class=&quot;highlighter-rouge&quot;&gt;:white_square:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:white_check_mark: &lt;code class=&quot;highlighter-rouge&quot;&gt;:white_check_mark:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:black_square_button: &lt;code class=&quot;highlighter-rouge&quot;&gt;:black_square_button:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:white_square_button: &lt;code class=&quot;highlighter-rouge&quot;&gt;:white_square_button:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:black_circle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:black_circle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:white_circle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:white_circle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:red_circle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:red_circle:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:large_blue_circle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:large_blue_circle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:large_blue_diamond: &lt;code class=&quot;highlighter-rouge&quot;&gt;:large_blue_diamond:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:large_orange_diamond: &lt;code class=&quot;highlighter-rouge&quot;&gt;:large_orange_diamond:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:small_blue_diamond: &lt;code class=&quot;highlighter-rouge&quot;&gt;:small_blue_diamond:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:small_orange_diamond: &lt;code class=&quot;highlighter-rouge&quot;&gt;:small_orange_diamond:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:small_red_triangle: &lt;code class=&quot;highlighter-rouge&quot;&gt;:small_red_triangle:&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:small_red_triangle_down: &lt;code class=&quot;highlighter-rouge&quot;&gt;:small_red_triangle_down:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;:shipit: &lt;code class=&quot;highlighter-rouge&quot;&gt;:shipit:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

</content>
 </entry>
 
 <entry>
   <title>프레임워크(Framework) vs 라이브러리(Library)</title>
   <link href="http://localhost:4000/posts/googling/etc/Framework-vs-Library/"/>
   <updated>2020-03-16T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/googling/etc/Framework vs Library</id>
   <content type="html">&lt;h2 id=&quot;프레임워크framework-vs-라이브러리library-firefirefire&quot;&gt;프레임워크(Framework) vs 라이브러리(Library) :fire::fire::fire:&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;예전에 면접 질문들을 정리하다가 Framework와 Library의 차이에 대해 생각해보게 됐습니다. 여기저기 글을 찾아 헤메던 와중 가장 알기 쉽고 간단하게 정리된 문장을 발견했습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;‘라이브러리와 프레임워크의 차이는 제어 흐름에 대한 주도성이 누구에게/어디에 있는가이다.’&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;블로그 이곳 저곳에 흩어져 있던 말이라 어떤 분이 처음 하신 말인지 출처를 찾아 봤는데 &lt;strong&gt;『거꾸로 배우는 소프트웨어 개발 - 이호종』&lt;/strong&gt; 이라는 책이 원 출처인것 같습니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;프레임워크&quot;&gt;프레임워크&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;프레임워크는 프로그램이 흐르는 틀을 제공해줍니다. 개발자의 역할은 프레임워크님이 잘 굴러갈 수 있게 채워줘야 할 부분을 채워주는 것입니다.&lt;/strong&gt; 프로그램 흐름에 대한 제어권은 프레임워크님에게 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;스프링 프레임워크를 사용하는데 왜 ‘Dispatcher Servlet’이 ‘Handler Mapping’을 찾아가고 ‘Handler Adapter’를 찾아가고 ‘View Resolver’를 찾아가는지 이유를 알 필요는 있지만 애써 건드릴 필요는 없습니다. 전체적인 흐름은 프레임워크님에게 맡겨 줍시다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;라이브러리-hammer&quot;&gt;라이브러리 :hammer:&lt;/h2&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;라이브러리는 반면 프로그램을 다루는데 필요한 도구들을 제공해줍니다. 프로그램이 전체적으로 어떻게 돌아갈지 결정하는건 개발자 본인입니다.&lt;/strong&gt; 스프링 프레임워크가 없어도 개발자가 원하는대로 진행되는 웹 서비스를 만들 수 있습니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;파이썬의 웹 크롤러 라이브러리인 BeautifulSoup은 크롤링을 하는데 필요한 다양한 기능을 제공해줍니다. 하지만 어떤 순서로, 어떻게 크롤링 할지는 프로그래머 마음입니다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 5 - 웹 서버</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C5/"/>
   <updated>2020-03-15T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드5</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;51-다채로운-웹-서버&quot;&gt;5.1. 다채로운 웹 서버&lt;/h3&gt;

&lt;p&gt;이번 장에선 웹 서버에 관해 간단하게 알아볼 것입니다.&lt;/p&gt;

&lt;p&gt;웹 서버는 기능, 형태, 크기가 정말 다양합니다. 열 줄 짜리 스크립트가 될 수도 있고 50mb짜리 상용 엔진도 있으며, 전자기기 작은 기판에 설치된 서버도 있습니다. 이런 다양한 웹 서버들이 있지만 공통적으로 클라이언트의 HTTP 요청을 받고 처리해 리소스를 돌려주는 일을 합니다.&lt;/p&gt;

&lt;h4 id=&quot;511-웹-서버-구현&quot;&gt;5.1.1. 웹 서버 구현&lt;/h4&gt;

&lt;p&gt;웹 서버는 HTTP 프로토콜을 구현해 클라이언트와 통신하며, 웹 리소스를 관리하고 서버 스스로를 관리합니다. 운영체제와 함께 TCP 커넥션 관리에 참여하기도 합니다.&lt;/p&gt;

&lt;p&gt;운영체제는 웹 서버가 올라가있는 하드웨어를 관리하고, TCP/IP 네트워크를 지원해주며, 웹 리소스를 관리하기 위한 파일 시스템, 연산활동을 위한 프로세스 관리를 제공합니다.&lt;/p&gt;

&lt;h4 id=&quot;512-다목적-소프트웨어-웹-서버&quot;&gt;5.1.2. 다목적 소프트웨어 웹 서버&lt;/h4&gt;

&lt;p&gt;세상엔 수 만개의 웹 서버들이 존재합니다. 하지만 그중 주로 사용되는건 몇 가지에 꼽힙니다. 아래 netcraft에서 조사한 웹 서버 시장 점유율을 보시죠.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;p&gt;출처 : &lt;a href=&quot;https://news.netcraft.com/archives/2019/09/27/september-2019-web-server-survey.html&quot;&gt;https://news.netcraft.com/archives/2019/09/27/september-2019-web-server-survey.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2019년 8월 까지의 데이터가 담겼는데 아파치 웹 서버의 장기집권이 끝나고 웹 서버의 춘추전국시대가 벌어지는 중인것 같습니다. 하지만 수 만개의 웹 서버중 nginx(32.7%), Apache(29.0%), Microsoft(14.7%)가 전체중 75%가량 차지합니다.&lt;/p&gt;

&lt;h4 id=&quot;513-임베디드-웹-서버&quot;&gt;5.1.3. 임베디드 웹 서버&lt;/h4&gt;

&lt;p&gt;임베디드 웹 서버는 전자기기에 내장될 목적으로 만들어진 작원 웹 서버입니다. 공유기를 구입하고 비밀번호 등을 설정하기 위해 공유기 관리자 페이지에 들어가게 되는데 이때 들어가는 웹 페이지는 공유기의 임베디드 웹 서버에서 운영중인 페이지입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;52-간단한-펄-웹-서버&quot;&gt;5.2. 간단한 펄 웹 서버&lt;/h3&gt;

&lt;p&gt;가장 많이 알려진 아파치 웹 서버의 코어는 50,000줄이 넘는 코드로 이루어져 있습니다. HTTP/1.1의 기능들을 모두 지원하려면 방대한 양의 코드들이 들어갈 수 밖에 없습니다. 하지만 정말 최소한의 기능만 갖는 웹 서버는 30줄로도 가능합니다. 아래 코드가 Perl 언어로 작성한 30줄 짜리 웹 서버 코드입니다.&lt;/p&gt;

&lt;div class=&quot;language-perl highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/perl&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Carp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;FileHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# (1) 명령줄에서 덮어쓰지 않는 이상 8080 포트를 기본으로 사용한다.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$port&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;@ARGV&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 

&lt;span class=&quot;c1&quot;&gt;# (2) 로컬 TCP소켓을 생성하고 커넥션을 기다리도록(listen) 설정한다.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$proto&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;getprotobyname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;('&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;tcp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;');&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PF_INET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$proto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;setsockopt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;SOL_SOCKET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;SO_REUSEADDR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&quot;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sockaddr_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INADDR_ANY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;SOMAXCONN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# (3) 시작 메세지를 출력한다.&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;&amp;lt;&amp;lt;Type-O-Serve Accepting on Port %d&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&quot;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;# (4) 커넥션 C를 기다린다.&lt;/span&gt;
 &lt;span class=&quot;nv&quot;&gt;$cport_caddr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$caddr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sockaddr_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cport_caddr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nv&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;autoflush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;c1&quot;&gt;# (5) 누구로부터의 커넥션인지 출력한다.&lt;/span&gt;
 &lt;span class=&quot;nv&quot;&gt;$cname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;gethostbyaddr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$caddr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;AF_INET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;&amp;lt;&amp;lt;Request From '%s'&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&quot;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

 &lt;span class=&quot;c1&quot;&gt;# (6) 빈 줄이 나올 때까지 요청 메세지를 읽어서 화면에 출력한다.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;screen&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/^\r/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

 &lt;span class=&quot;c1&quot;&gt;# (7) 응답 메세지를 위한 프롬프트를 만들고, 응답줄을 입력 받는다.&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;# &quot;.&quot; 하나만으로 되어 있는 줄이 입력되기 전까지, 입력된 줄을 클라이언트에게 보낸다.&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;&amp;lt;&amp;lt;Type Response Followed by '.'&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&quot;);&lt;/span&gt;

 &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;STDIN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;s/\r//&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;s/\n//&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/^\./&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&quot;;&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 펄 서버는 ‘type-o-serve’라고 이름 붙인 펄 프로그램 입니다. HTTP 요청이 오면 콘솔창에 받은 요청이 출력되고, 콘솔에 타이핑한 텍스트가 HTTP 응답으로 전송되는 간단한 서버입니다. 코드가 간단하고 책에서 단계별로 주석도 잘 적어주셨기 때문에 쉽게 이해할 수 있을 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;53-진짜-웹-서버가-하는-일&quot;&gt;5.3. 진짜 웹 서버가 하는 일&lt;/h3&gt;

&lt;p&gt;상용 웹 서버는 위의 펄 서버와 비교할 수 없을 만큼 다양한 일을 합니다. 하지만 모든 웹 서버가 하는 일은 아래와 같은 과정을 따른다고 할 수 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;커넥션을 맺는다 : 클라이언트의 접속을 받아들이거나, 원치 않는 클라이언트라면 닫는다.&lt;/li&gt;
  &lt;li&gt;요청을 받는다 : HTTP 요청 메세지를 네트워크로부터 읽어 들인다.&lt;/li&gt;
  &lt;li&gt;요청을 처리한다 : 요청 메세지를 해석하고 행동을 취한다.&lt;/li&gt;
  &lt;li&gt;리소스에 접근한다 : 메세지에서 지정한 리소스에 접근한다.&lt;/li&gt;
  &lt;li&gt;응답을 만든다 : 올바른 헤더를 포함한 HTTP 응답 메세지를 생성한다.&lt;/li&gt;
  &lt;li&gt;응답을 보낸다 : 응답을 클라이언트에게 돌려준다.&lt;/li&gt;
  &lt;li&gt;트랜잭션을 로그로 남긴다 : 로그 파일에 트랜잭션 완료에 대한 기록을 남긴다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;뒤로는 각 단계들에 대해 살펴보겠습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;54-단계1--클라이언트-커넥션-수락&quot;&gt;5.4. 단계1 : 클라이언트 커넥션 수락&lt;/h3&gt;

&lt;p&gt;한 클라이언트에 대해 이미 커넥션이 열려있다면 그 커넥션을 계속 사용할 수 있지만, 새로운 클라이언트가 연결을 요청한다면 새 커넥션을 열 필요가 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;541-새-커넥션-다루기&quot;&gt;5.4.1. 새 커넥션 다루기&lt;/h4&gt;

&lt;p&gt;클라이언트가 TCP 커넥션 요청을 보내오면 서버는 커넥션을 수락하고 커넥션에서 IP를 추출해 상대방이 어떤 클라이언트인지 확인합니다.(이런 TCP 커넥션들을 소켓이라고 부릅니다.) 새 커넥션이 생성되고 받아들여지면 서버는 새 커넥션을 커넥션 목록에 추가하고 데이터를 받을 준비를 합니다.&lt;/p&gt;

&lt;p&gt;웹 서버는 어떤 커넥션이든 마음대로 거절하거나 닫을 수 있습니다. 금지할 IP 주소나 호스트명을 미리 정해두면 여기서 오는 모든 커넥션을 거절할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;542-클라이언트-호스트-명-식별&quot;&gt;5.4.2. 클라이언트 호스트 명 식별&lt;/h4&gt;

&lt;p&gt;서버가 특정 호스트명의 접근을 막거나 로그를 남길때 어디서 온 로그인지 보기쉽게 남겨야할 필요가 있습니다. 이때 서버는 reverse DNS 를 이용해 클라이언트의 IP를 호스트명으로 변환할 수 있습니다. 이 작업을 Hostname Lookup 이라고 합니다.&lt;/p&gt;

&lt;p&gt;하지만 이 작업은 시간이 꽤 걸리는 작업이라 트랜잭션을 지연시킬 수 있습니다. 따라서 이 작업은 서버에 따라 꺼두기도 하고 특정 리소스에 대해서만 켜기도 합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Apache&quot;&gt;HostnameLookups off
&amp;lt;File ~ &quot;\.(html|htm|cgi)$&quot;&amp;gt;
	HostnameLookups on
&amp;lt;/File&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위 코드는 아파치에서 html, htm, cgi 리소스들만 Hostname Lookup을 실시하고 나머지는 하지 않는다는 설정 코드입니다.&lt;/p&gt;

&lt;h4 id=&quot;543-ident를-통해-클라이언트-사용자-알아내기&quot;&gt;5.4.3. ident를 통해 클라이언트 사용자 알아내기&lt;/h4&gt;

&lt;p&gt;클라이언트를 식별하는 방법엔 ident 프로토콜을 사용하는 방법도 있습니다. 간단히 설명하자면 클라이언트 식별을 위한 전용 커넥션을 생성하고 요청, 응답해 클라이언트를 식별하는 방법입니다. 과정은 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 HTTP 커넥션을 요청합니다.&lt;/li&gt;
  &lt;li&gt;서버는 클라이언트의 커넥션 요청을 받아들입니다.&lt;/li&gt;
  &lt;li&gt;서버는 클라이언트의 ident 서버 포트(113번으로 정해져있으며 처음 클라이언트가 요청할때 사용한 포트와 다른 포트입니다.)로 커넥션을 요청합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 커넥션을 받아들이면 서버가 사용자를 식별할 요청을 보냅니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;사내 망에선 종종 사용되지만 공공 인터넷에선 다음과 같은 이유로 사용이 되지 않습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 ident 프로토콜을 지원해야 합니다.&lt;/li&gt;
  &lt;li&gt;HTTP 트랜잭션을 지연시킵니다.&lt;/li&gt;
  &lt;li&gt;방화벽에서 서버의 ident 커넥션 요청이 막힐 수도 있습니다.&lt;/li&gt;
  &lt;li&gt;ident 프로토콜은 가상 IP 주소를 잘 지원하지 않습니다.&lt;/li&gt;
  &lt;li&gt;프라이버시 침해의 우려도 있습니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;55-단계2--요청-메세지-수신&quot;&gt;5.5. 단계2 : 요청 메세지 수신&lt;/h3&gt;

&lt;p&gt;커넥션을 맺은 뒤에 서버는 데이터가 오길 기다립니다. 커넥션에 데이터가 들어오면 앞 장에서 살펴본 HTTP 메세지의 구성을 고려해 데이터를 HTTP 메세지로 파싱합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;요청 메서드, URI, 버전번호를 파싱합니다. 각 값은 공백으로 분리되어 있고 요청줄의 끝은 CRLF로 끝납니다.&lt;/li&gt;
  &lt;li&gt;헤더들을 파싱합니다. 각 헤더는 CRLF로 끝납니다.&lt;/li&gt;
  &lt;li&gt;헤더의 끝을 의미하는 CRLF 끝나는 빈줄을 찾아 헤더 파싱을 끝냅니다.&lt;/li&gt;
  &lt;li&gt;이후 엔터티 본문이 있다면 읽어 들입니다.(이때, 헤더에 Content-Length가 있다면 그만큼 읽어냅니다.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;IP패킷들은 순서와 상관없이 불규칙하게 전달됩니다. 따라서 웹 서버는 파싱 가능할때까지 IP패킷의 데이터들을 메모리에 임시 저장해 놓을 수 있어야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;551-메세지의-내부-표현&quot;&gt;5.5.1. 메세지의 내부 표현&lt;/h4&gt;

&lt;p&gt;웹 서버에 따라 요청 메세지를 다루기 쉽게 따로 자료 구조를 만들어 저장합니다.&lt;/p&gt;

&lt;h4 id=&quot;552-커넥션-입력출력-처리-아키텍처&quot;&gt;5.5.2. 커넥션 입력/출력 처리 아키텍처&lt;/h4&gt;

&lt;p&gt;포털 사이트 같이 사용자가 많은 웹 서버들은 그 많은 사용자와 하나 이상의 커넥션을 맺고 있습니다. 어떤 사용자는 10초에 한 번씩 요청을 보내고 어떤 사용자는 1초에 한 번씩 보냅니다. 그리고 어떤 사용자는 웹 크롤러를 사용해 1초에 10번씩 요청을 보냅니다.&lt;/p&gt;

&lt;p&gt;이렇게 많은 사용자들의 커넥션들을 효율적으로 처리하기 위해 커넥션 입/출력 처리 기술도 발전해 왔습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;단일 스레드 웹 서버&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;처음은 단일 스레드 웹 서버였을 것입니다. 한 번에 하나의 커넥션만 처리하는 단일 스레드 웹 서버는 당연히 성능이 형편 없어 테스트 및 교육용이나 임베디드 서버 같은 극히 일부의 서버에서만 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;멀티프로세스와 멀티스레드 웹 서버&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;여러 요청을 동시에 처리하기 위해 멀티프로세스/스레드 서버가 사용됩니다. 프로세스/스레드는 필요할때마다 생성할 수도 있고 미리 만들어 놓고 기다릴 수도 있습니다.&lt;/p&gt;

&lt;p&gt;각각 커넥션 마다 프로세스/스레드를 할당 할 수 있지만 이렇게 된다면 너무 많은 메모리를 낭비하게 될 것입니다. 멀티프로세스/스레드를 사용하는 웹 서버들은 프로세스/스레드 수에 제한을 걸어 놓습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;다중 I/O 서버&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;방금 설명한 멀티프로세스/스레드 서버는 단일 스레드보단 좋지만 한계가 있습니다. 하나의 커넥션이 생성되었지만 실제로 그 커넥션에 들어오는 요청이 없더라도 프로세스/스레드는 그 커넥션을 보면서 데이터가 오길 기다려야하기 때문입니다. 이를 해결하기 위한 방법이 입출력 다중화(multiplexing)입니다.&lt;/p&gt;

&lt;p&gt;하나의 커넥션은 ‘입력 -&amp;gt; 처리 -&amp;gt; 출력’ 으로 동작한다고 볼 수 있습니다. 그런데 처리중엔 입력, 출력에서 쓰이는 함수가 봉쇄(block) 됩니다. #@$#@$@#$ 추가 설명 필요&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;다중 멀티스레드 웹 서버&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;56-단계3--요청-처리&quot;&gt;5.6. 단계3 : 요청 처리&lt;/h3&gt;

&lt;p&gt;요청을 처리하는 과정은 뒷 장들에서 나올 주제중 대부분이기 때문에 이번 장에선 생략하겠습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;57-단계4--리소스의-매핑과-접근&quot;&gt;5.7. 단계4 : 리소스의 매핑과 접근&lt;/h3&gt;

&lt;p&gt;웹 서버는 리소스를 주고 받게 해주는 서버입니다. 이 리소스에는 이미지 파일, html 페이지 같은 고정된 리소스도 있지만 php, jsp, asp와 같이 리소스 생성 어플리케이션을 통해 만들어지는 동적인 리소스도 있습니다.&lt;/p&gt;

&lt;p&gt;웹 서버가 리소스를 알맞게 제공하기 위해선 클라이언트의 요청 URI에서 그에 맞는 리소스나 리소스 생성기를 찾아야 합니다. 이런 과정을 리소스 맵핑이라고 합니다.&lt;/p&gt;

&lt;h4 id=&quot;571-docroot&quot;&gt;5.7.1. Docroot&lt;/h4&gt;

&lt;p&gt;리소스 맵핑의 가장 단순한 형태는 URI로 파일 자체를 가리키는 것입니다. 그런데 그 파일들은 어느 디렉토리에 위치해 있을까요?&lt;/p&gt;

&lt;p&gt;스프링 프레임워크를 사용해 보았다면 클라이언트는 ‘WebContent’ 폴더 안에 있는 것들만 접근 할 수 있다라는 얘기를 많이 들어보셨을 것입니다. 이렇게 일반적으로 웹 서버 파일 시스템의 특별한 폴더를 웹 리소스를 올려두기 위해 예약해둡니다. 이 폴더를 문서 루트, docroot 라고 부릅니다.&lt;/p&gt;

&lt;p&gt;웹 서버는 URI에서 호스트명 뒤의 리소스 경로를 가져와 docroot 뒤에 붙입니다. 아래와 같은 요청이 왔다고 하면&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;요청 URI : http://www.joes-hardware.com/specials/saw-blade.gif
리소스 경로 : /specials/saw-blade.gif&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;웹 서버의 docroot에 따라 docroot/specials/saw-blade.gif 리소스를 찾아 갑니다.&lt;/p&gt;

&lt;p&gt;이 docroot는 사용하는 웹 서버에서 기본적으로 설정해 두기도 하고 따로 설정 파일을 통해 docroot를 지정할 수도 있습니다. 많이 사용하는 아파치 웹 서버의 경우 httpd.conf 파일에 아래와 같은 줄을 추가해 설정할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DocumentRoot /usr/local/httpd/files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;웹 서버는 상대 URL이 docroot를 벗어나 파일 시스템의 다른 부분을 가리킬 수 없게 조심해야 합니다. 예를들어 다음과 같이 docroot의 상위 디렉토리를 찾는 요청이 왔다고 해서 실제 docroot의 상위 디렉토리를 찾아가면 안됩니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;http://www.joes-hardware.com/../&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;가상 호스팅된 docroot&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;가상 호스팅은 하나의 물리적 웹 서버에 여러 도메인을 호스팅 하는 것입니다. 가상 호스팅 환경에선 호스팅된 각각의 서버마다 분리된 docroot를 설정해줍니다. 설정은 매우 간단합니다. 많이 사용되는 아파치의 경우 아래와 같이 설정 됩니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost www.joes-hardware.com&amp;gt;
	ServerName www.joes-hardware.com
	DocumentRoot /docs/joe
	TransferLog /logs/joe.access_log
	ErrorLog /logs/joe.error_log
&amp;lt;/VirtualHost&amp;gt;

&amp;lt;VirtualHost www.marys-antiques.com&amp;gt;
	ServerName www.marys-antiques.com
	DocumentRoot /docs/mary
	TransferLog /logs/mary.access_log
	ErrorLog /logs/mary.error_log
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;가상 호스팅에 대해선 18장에서 더 자세히 이어집니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;사용자 홈 디렉터리 docroots&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;docroots를 활용하면 사용자들이 한 대의 웹 서버에서 각자 자신의 웹 사이트를 만들 수 있습니다. ‘/~’ 뒤에 이름이 오는 것으로 시작하는 URI들이 그 예입니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;요청 메세지A : GET /~bob/index.html HTTP/1.0
-&amp;gt; 가리키는 리소스 : /home/bob/public_html&lt;/p&gt;

  &lt;p&gt;요청 메세지B : GET /~betty/index.html HTTP/1.0
-&amp;gt; 가리키는 리소스 : home/betty/public_html&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;572-디렉터리-목록&quot;&gt;5.7.2. 디렉터리 목록&lt;/h4&gt;

&lt;p&gt;URL은 리소스 파일을 가리키는게 아니라 디렉터리 자체를 가리킬 수도 있습니다. 이를 디렉터리 URL 이라고 합니다. 대부분 웹 서버는 디렉터리 URL 요청을 받았을때 다음과 같은 행동을 취합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;에러를 반환&lt;/li&gt;
  &lt;li&gt;디렉터리 대신 특별한 ‘색인 파일’을 반환&lt;/li&gt;
  &lt;li&gt;디렉터리를 탐색한 뒤 그 내용을 담은 HTML 페이지를 반환&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;대부분의 웹 서버는 디렉터리 URL을 받으면 해당 디렉터리 안의 ‘index.html’  혹은 ‘index.htm’ 파일을 찾습니다. 그리고 그 파일이 존재한다면 반환합니다.&lt;/p&gt;

&lt;p&gt;아파치 웹 서버에선 이렇게 디렉터리 URL이 왔을때 기본적으로 찾을 파일의 이름 집합을 설정할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DirectoryIndex index.html index.htm home.html home.htm index.cgi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같이 설정하면 나열된 순서대로 파일을 찾아보고 나온다면 그 파일을 반환합니다.&lt;/p&gt;

&lt;p&gt;그런데 만약 기본 색인 파일을 찾을 수 없다면 어떻게 할까요? 많은 웹 서버는 요청받은 디렉터리 안의 파일들의 크기, 변경일, 파일에 대한 링크 등을 열거한 HTML 파일을 반환합니다. 하지만 이 방식은 클라이언트에게 숨겨야 할 파일도 노출할 수 있으니 조심해야 합니다.&lt;/p&gt;

&lt;p&gt;아파치 웹 서버에선 다음과 같은 설정으로 디렉터리 색인 파일 자동 생성을 끌 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Options -Indexes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;573-동적-콘텐츠-리소스-매핑&quot;&gt;5.7.3. 동적 콘텐츠 리소스 매핑&lt;/h4&gt;

&lt;p&gt;웹 서버는 URI를 동적 리소스에 맵핑할 수도 있습니다. 웹 서버중 웹 어플리케이션 서버(WAS, Web Application Server)라고 불리는 것들은 웹 서버와 백엔드 어플리케이션을 연결해줍니다.&lt;/p&gt;

&lt;p&gt;국내에서 많이 사용되는 기술 스택인 ‘아파치 - 톰캣 - 자바 서블릿’이 이런 동적 콘텐츠 맵핑의 하나라고 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;아파치에서 URI에 따라 프로그램의 경로를 맵핑 시킬 수 있습니다. 다음 아파치 설정을 보겠습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ScriptAlias /cgi-bin/ /usr/local/etc/httpd/cgi-programs/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 설정은 URI 경로가 ‘/cgi-bin/’ 으로 시작한다면, ‘/usr/local/etc/httpd/cgi-programs/’ 에서 프로그램을 찾아 실행하라는 의미 입니다. 여기에 덧붙여&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddHandler cgi-script .cgi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같은 설정을 추가해 특정 확장자의 파일만 실행 되도록 설정할 수 있습니다. 위 설정은 ‘.cgi’ 로 끝나는 모든 웹 리소스는 실행되어야 함을 명시하는 것입니다.&lt;/p&gt;

&lt;p&gt;CGI는 서버사이드 어플리케이션을 실행하기 위한 간단한 인터페이스인데 웹의 초창기에 많이 사용되었습니다. CGI 자체는 Common Gateway Interface로 웹 서버와 웹 어플리케이션 서버간 데이터를 주고받는데 도움을 주는 인터페이스입니다. 이 CGI를 따라 작성된 프로그램을 CGI 프로그램이라고 합니다.&lt;/p&gt;

&lt;p&gt;오늘날엔 asp, jsp 같은 애플리케이션 서버가 cgi를 대체하고 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;574-서버사이드-인클루드server-side-includes-ssi&quot;&gt;5.7.4. 서버사이드 인클루드(Server-Side Includes, SSI)&lt;/h4&gt;

&lt;p&gt;서버사이드 인클루드는 서버가 생성하거나 가지고 있는 HTML 파일을 클라이언트에게 보내기 직전에 html 안에 있던 변수 값들을 치환하는 것을 말합니다.&lt;/p&gt;

&lt;p&gt;SSI를 가지고 있는 html파일은 대부분 ‘.shtml’ 이라는 확장자가 붙습니다.&lt;/p&gt;

&lt;p&gt;자바 스택을 이용해 웹 페이지를 만들어 보았다면 jsp 페이지에&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;% include file=&quot;/css/bootstrap.css&quot; %&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이런 &amp;lt;% ~~ %&amp;gt; 태그를 본적이 있을 것입니다. 이런 태그들이 클라이언트에게 보내지기 직전에 치환되는 변수들이며 이런 과정을 SSI라고 합니다.&lt;/p&gt;

&lt;p&gt;많은 웹 서버가 이 SSI를 지원합니다. 동적 컨텐츠를 만들 수 있는 쉬운 방법중 하나입니다.&lt;/p&gt;

&lt;h4 id=&quot;575-접근-제어&quot;&gt;5.7.5. 접근 제어&lt;/h4&gt;

&lt;p&gt;웹 서버는 각 리소스에 접근 제어를 설정할 수도 있습니다. 접근이 제어된 리소스에 요청이 올 경우 웹 서버는 클라이언트의 IP에 근거해 접근을 제어하던가, 리소스에 접근하기 위한 비밀번호를 물어보던가 등을 할 수 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;58-단계5--응답-만들기&quot;&gt;5.8. 단계5 : 응답 만들기&lt;/h3&gt;

&lt;p&gt;요청을 받았다면 응답을 해야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;581-응답-엔터티&quot;&gt;5.8.1. 응답 엔터티&lt;/h4&gt;

&lt;p&gt;응답 메세지에 엔터티 본문이 있다면, 응답 메세지엔 다음과 같은 것들이 포함되어야 합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;응답 본문의 MIME 타입을 서술하는 Content-Type 헤더&lt;/li&gt;
  &lt;li&gt;응답 본문의 길이를 서술하는 Content-Length 헤더&lt;/li&gt;
  &lt;li&gt;실제 응답 본문&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;582-mime-타입-결정하기&quot;&gt;5.8.2. MIME 타입 결정하기&lt;/h4&gt;

&lt;p&gt;웹 서버는 응답 본문의 MIME 타입을 결정해야 하는 책임이 있습니다. MIME 타입을 결정하는 방법엔 다음과 같은 것들이 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;mime.types&lt;/strong&gt;
 파일 이름의 확장자를 사용하는 방법입니다. 확장자를 그대로 사용하는 것은 아니고, 웹 서버별로 확장자별 MIME 타입이 담겨 있는 파일을 탐색해 확장자에 맞는 MIME 타입을 맵핑해 줍니다. 가장 흔히 쓰이는 방법입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;매직 타이핑(Magic Typing)&lt;/strong&gt;
 한편, 확장자가 없는 파일이 있을 수도 있습니다. 아파치 웹 서버에선 파일의 내용을 검사해 특정 패턴을 추출할 수 있습니다. 이 패턴을 매직 파일(패턴과 MIME 타입을 맵핑해주는 테이블)에 맵핑해 MIME 타입을 찾아냅니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;유형 명시(Explicit typing)&lt;/strong&gt;
 특정 파일 혹은 특정 디렉토리 안의 파일들을 파일 확장자나 내용에 상관 없이 어떤 MIME 타입을 갖도록 명시할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;유형 협상(Type negotiation)&lt;/strong&gt;
 한 리소스가 여러 MIME 타입에 맵핑 될 수도 있습니다. 이때 웹 서버가 협상 과정을 통해 사용하기 가장 좋은 MIME 타입을 판별해 설정할 수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;583-리다이렉션&quot;&gt;5.8.3. 리다이렉션&lt;/h4&gt;

&lt;p&gt;웹 서버는 성공 대신 리다이렉션을 응답하기도 합니다. 리다이렉션이 사용되는 경우는 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;영구히 리소스가 옮겨진 경우&lt;/strong&gt;
 리소스의 위치가 옮겨지거나 이름이 바뀌었을 수 있습니다. 이때 웹 서버는 클라이언트에게 리소스의 URL이 바뀌었으니 북마크를 새로 갱신하라고 말해줄 수 있습니다. 이때 ‘301 Moved Permanently’ 코드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;임시로 리소스가 옮겨진 경우&lt;/strong&gt;
 리소스가 영구히 옮겨진게 아니라 잠시 옮겨지거나 이름이 변경될 수도 있습니다. 이때, 리다이렉션은 필요하지만 방금 전 처럼 북마크를 갱신할 필요는 없습니다. 이럴땐 ‘303 See Other’ 이나 ‘307 Temporary Redirect’ 코드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;URL 증강&lt;/strong&gt;
 서버는 문맥 정보를 포함시키기 위해 재작성된 URL로 리다이렉션 시키기도 합니다. 그러면 클라이언트는 다시 작성된 fat URL을 따라 다시 요청 합니다. 이때도 ‘303 See Other’이나 ‘307 Temporary Redirect’ 코드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;부하 균형&lt;/strong&gt;
 과부하된 서버가 요청을 받으면 부하가 덜 걸린 서버로 리다이렉션 시킬수도 있습니다. 이때도 ‘303 See Other’이나 ‘307 Temporary Redirect’ 코드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;친밀한 다른 서버가 있을 때&lt;/strong&gt;
 웹 서버들은 사용자에 대한 정보를 가지고 있을 수 있습니다. 한 서버가 요청을 받았을때, 클라이언트의 정보를 가지고 있는 서버로 리다이렉션 시킬 수 있습니다. 이때도 ‘303 See Other’이나 ‘307 Temporary Redirect’ 코드가 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;디렉터리 이름 정규화&lt;/strong&gt;
 클라이언트가 디렉터리 이름에 대해 URI 요청을 하는데 ‘/’를 바뜨렸다면, 대부분의 웹 서버는 클라이언트를 ‘/’를 추가한 새로운 URI로 리다이렉션 시킵니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;59-단계6--응답-보내기&quot;&gt;5.9. 단계6 : 응답 보내기&lt;/h3&gt;

&lt;p&gt;대게 한 서버는 여러 클라이언트를 상대하며 여러 커넥션을 가지고 있습니다. 그중 어떤 커넥션은 놀고 있을 수 있고 어떤 커넥션은 데이터를 보내고 있으며 어떤 커넥션은 데이터를 받고 있을 수도 있습니다.&lt;/p&gt;

&lt;p&gt;요청을 받을때와 마찬가지로 응답을 보낼때도 커넥션 상태들을 추적해 효율적으로 전송해야 합니다. 특히, 비지속 커넥션은 응답을 보낸뒤에 바로 커넥션을 닫으면 되기 때문에 비교적 간단하지만 지속 커넥션의 경우 더 주의해야 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;510-단계7--로깅&quot;&gt;5.10. 단계7 : 로깅&lt;/h3&gt;

&lt;p&gt;트랜잭션이 완료되면 트랜잭션의 수행 결과를 로그 파일에 기록합니다. 대부분의 웹 서버는 기본적으로 제공하는 로깅 방식과 설정들이 있습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;매 장을 읽으면 그동안 머릿속에 자유롭게 돌아다니던 지식의 조각들이 제 자리를 찾아가는 것을 느낍니다. ‘How to use’를 알고 있던 것들이 ‘How it works’와 연결되는 과정이 즐겁습니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 4 - 커넥션 관리</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C4/"/>
   <updated>2020-03-13T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드4</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;41-tcp-커넥션&quot;&gt;4.1. TCP 커넥션&lt;/h3&gt;

&lt;p&gt;이번 장에선 HTTP 통신을 사용하기 위한 기저인 TCP 커넥션에 대해 알아볼 것입니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP는 어떻게 TCP 통신을 사용하는지&lt;/li&gt;
  &lt;li&gt;네트워크 지연의 원인인 TCP 커넥션의 지연, 병목, 막힘이 무엇인지&lt;/li&gt;
  &lt;li&gt;지연을 해결하기 위한 병렬커넥션, keep-alive 커넥션, 커넥션 파이프라인이 무엇인지&lt;/li&gt;
  &lt;li&gt;커넥션 관리를 위해 따라야 할 몇 가지 규칙들&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 것들을 알아볼 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;1장에서도 설명드렸듯이 모든 HTTP 통신은 TCP/IP 통신을 기반으로 이루어집니다. HTTP는 데이터가 손실되지 않는 안전한 통신인데, 이 ‘안전한’을 TCP가 보장해줍니다.&lt;/p&gt;

&lt;p&gt;TCP/IP 커넥션이 맺어지면 HTTP 메세지들은 손실, 손상되지 않고 순서가 바뀌지도 않습니다. 이번 절에선 TCP/IP가 어떻게 데이터를 보장해주는지알아볼 것입니다.&lt;/p&gt;

&lt;p&gt;웹 브라우저 입장에서 TCP 커넥션을 이용한 HTTP 통신은 다음과 같은 과정으로 이루어집니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;브라우저가 URL에서 호스트 명을 추출합니다. 
(ex - http://www.joes-hardware.com:80/power-tools.html -&amp;gt; www.joes-hardware.com)&lt;/li&gt;
  &lt;li&gt;브라우저가 DNS(Domain Name System)을 이용해 호스트명에 대한 IP 주소를 찾습니다. 
(ex - www.joes-hardware.com -&amp;gt; 202.43.78.3)&lt;/li&gt;
  &lt;li&gt;브라우저가 URL에서 포트번호를 얻습니다. 
(ex - http://www.joes-hardware.com:80/power-tools.html -&amp;gt; 80)&lt;/li&gt;
  &lt;li&gt;브라우저가 호스트명의 포트 번호로 TCP 커넥션을 생성합니다.&lt;/li&gt;
  &lt;li&gt;브라우저가 서버로 요청 HTTP메세지를 보냅니다.&lt;/li&gt;
  &lt;li&gt;브라우저가 서버에서 온 응답 HTTP 메세지를 읽습니다.&lt;/li&gt;
  &lt;li&gt;브라우저가 커넥션을 끊습니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;411-신뢰할-수-있는-데이터-전송-통로인-tcp&quot;&gt;4.1.1. 신뢰할 수 있는 데이터 전송 통로인 TCP&lt;/h4&gt;

&lt;p&gt;TCP에 대해 깊게 이해하기 위해선 따로 책 한권이 필요할 정도입니다.(저자추천 도서: 『TCP/IP Illustrated』 - W.Richard Stevens)&lt;/p&gt;

&lt;p&gt;4.1. 절에선 어떻게 TCP가 작동하고 데이터를 보장하는지 간략히 알아볼 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;412-tcp-스트림은-세그먼트로-나뉘어-ip-패킷을-통해-전송된다&quot;&gt;4.1.2. TCP 스트림은 세그먼트로 나뉘어 IP 패킷을 통해 전송된다&lt;/h4&gt;

&lt;p&gt;TCP는 HTTP 메세지를 통째로 전송하지 않습니다. IP 패킷(== IP 데이터그램)이라는 작은 조각으로 나눠 데이터를 전송합니다.&lt;/p&gt;

&lt;p&gt;패킷이라는 작은 조각으로 나누는 이유는 서킷 통신과 패킷 통신에 대해 알아야 합니다. https://brunch.co.kr/@wangho/6에 정말 잘 정리되어 있습니다. 간단히 말해 기존의 서킷 통신은 전화처럼 연결이 된 상대하고만 통신이 가능하고 그 외의 사람은 연결이 끝날때 까지 기다려야 하는데, 패킷 통신은 각자가 보낸 조각 패킷들을 받아서 조합하기 때문에 한 사람이 어떤 사람과 통신 중에 다른 사람이 끼어들어도 패킷들 사이에 다른 사람의 패킷이 들어올 수 있어 여러명과 통신이 가능하다는 것입니다.&lt;/p&gt;

&lt;p&gt;TCP는 HTTP 메세지를 세그먼트라는 단위로 나눠 IP 패킷에 담아 전달합니다. 이 과정은 osi 7계층에서 네트워크 계층, 전송 계층에서 일어나기 때문에 애플리케이션 계층을 다루는 개발자에겐 보이지 않습니다.&lt;/p&gt;

&lt;p&gt;IP 패킷은 아래와 같은 그림처럼 이루어져 있습니다.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;p&gt;크게 IP 패킷 헤더(보통 20 Byte), TCP 세그먼트 헤더(보통 20 Byte), TCP 데이터 조각으로 이루어져 있는데 각자의 역할이 있습니다.&lt;/p&gt;

&lt;p&gt;IP 패킷 헤더는 발신지에서 목적지로 IP 패킷이 이동하는데 필요한 정보를 가지고 있습니다. 하나의 HTTP 메세지는 여러 IP 패킷으로 잘려 IP 패킷 헤더를 이용해 목적지에 도착합니다. 이때, 도착한 순서나 각 패킷들이 손상 없이 잘 도착했는지는 보장할 수 없습니다.&lt;/p&gt;

&lt;p&gt;이걸 보장해주기 위해 필요한게 TCP 세그먼트 헤더입니다. TCP 세그먼트 헤더의 속성들로 조각난 IP 패킷의 순서를 맞추고, 손실된 데이터가 발견되면 해당 데이터를 다시 요청합니다.&lt;/p&gt;

&lt;h4 id=&quot;413-tcp-커넥션-유지하기&quot;&gt;4.1.3. TCP 커넥션 유지하기&lt;/h4&gt;

&lt;p&gt;하나의 컴퓨터는 여러개의 TCP 커넥션을 가지고 있습니다. 포트 번호마다 여러개의 커넥션이 생성될 수 있습니다. 이런 여러개의 TCP 커넥션은&lt;/p&gt;

&lt;p&gt;&amp;lt;발신지 IP 주소, 발신지 포트, 수신지 IP 주소, 수신지 포트&amp;gt;&lt;/p&gt;

&lt;p&gt;위 네가지 값으로 식별됩니다. 네 가지 값이 같다면 같은 커넥션이라고 볼 수 있습니다. 한 포트에 여러 커넥션이 생성될 수 있지만 네 가지 값이 모두 같아야만 같은 커넥션이라고 합니다.&lt;/p&gt;

&lt;h4 id=&quot;414-tcp-소켓-프로그래밍&quot;&gt;4.1.4. TCP 소켓 프로그래밍&lt;/h4&gt;

&lt;p&gt;이런 TCP를 개발자가 직접 조작할 수도 있습니다. 이를 도와주는게 각 운영체제에서 지원하는 TCP 관련 API 입니다. 이를 흔히 소켓 API라고 부릅니다. 소켓 API는 유닉스에서 처음 개발됐지만 현재는 대부분의 운영체제에서 지원합니다.&lt;/p&gt;

&lt;p&gt;아래는 소켓 API의 주요 인터페이스입니다. 물론 API도 필요 없이 더 저수준의 언어로 TCP를 조작할 수도 있겠지만… 그건 나중에.. 각 운영체제에서 제공하는 소켓 API는 개발자들에게 TCP/IP에 관한 세부사항(핸드셰이킹, IP 패킷의 분할 및 재조립 등 .. )을 숨기지만 TCP/IP를 조작 할 수 있게 도와줍니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;소켓 API&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;s = socket(&lt;parameters&gt;)&lt;/parameters&gt;&lt;/td&gt;
      &lt;td&gt;연결되지 않은 익명의 새로운 소켓 생성&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;bind(s, &lt;local IP:port=&quot;&quot;&gt;)&lt;/local&gt;&lt;/td&gt;
      &lt;td&gt;소켓에 로컬 IP, 포트 번호와 인터페이스 할당&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;connect(s, &lt;remote IP:port=&quot;&quot;&gt;)&lt;/remote&gt;&lt;/td&gt;
      &lt;td&gt;로컬의 소켓과 원격 호스트, 포트 사이에 TCP 커넥션 생성&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;listen(s, …)&lt;/td&gt;
      &lt;td&gt;커넥션을 받아들이기 위해 로컬 소켓에 허용함을 표시&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;s2 = accpet(s)&lt;/td&gt;
      &lt;td&gt;누군가 로컬 포트에 커넥션을 맺기 기다림&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;n = read(s, buffer, n)&lt;/td&gt;
      &lt;td&gt;소켓으로부터 버퍼에 n바이트 읽기 시도&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;n = write(s, buffer, n)&lt;/td&gt;
      &lt;td&gt;소켓으로부터 버퍼에 n바이트 쓰기 시도&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;close(s)&lt;/td&gt;
      &lt;td&gt;TCP 커넥션을 완전히 끊음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;shutdown(s, &lt;side&gt;)&lt;/side&gt;&lt;/td&gt;
      &lt;td&gt;TCP 커넥션의 입출력만 닫음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;getsockopt(s, …)&lt;/td&gt;
      &lt;td&gt;내부 소켓 설정 옵션값을 읽음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;setsockopt(s, …)&lt;/td&gt;
      &lt;td&gt;내부 소켓 설정 옵션값을 변경&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;위의 소켓 api를 기반으로 클라이언트와 서버의 TCP 통신을 대략적으로 그려보면 다음과 같습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;클라이언트&lt;/th&gt;
      &lt;th&gt;서버&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;1. 새로운 소켓을 만든다(socket)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;2. 80포트로 소켓을 묶는다(bind)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;3. 소켓 커넥션을 허가한다(listen)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;4. 커넥션을 기다린다(accept)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1. 요청 URL에서 IP 주소와 포트를 얻는다&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2. 새로운 소켓을 생성한다(socket)&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3. 서버의 IP:포트로 연결한다(connect)&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;5. 커넥션 인식 및 연결 확인 메세지를 보낸다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4. 연결 성공&lt;/td&gt;
      &lt;td&gt;6. 요청을 읽기 시작한다(read)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5. HTTP 요청을 보낸다(write)&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;6. HTTP 응답을 기다린다(read)&lt;/td&gt;
      &lt;td&gt;7. 요청 메세지를 처리한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:&lt;/td&gt;
      &lt;td&gt;:&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:&lt;/td&gt;
      &lt;td&gt;8. 응답을 보낸다.(write)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;7. 응답을 처리한다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8. 커넥션을 닫는다(close)&lt;/td&gt;
      &lt;td&gt;9. 커넥션을 닫는다(close)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;42-tcp의-성능에-대한-고려&quot;&gt;4.2. TCP의 성능에 대한 고려&lt;/h3&gt;

&lt;p&gt;HTTP는 osi 7계층에서 TCP 바로 위의 계층이기 때문에 HTTP의 성능은 TCP 성능에 직접적으로 영향을 받습니다.&lt;/p&gt;

&lt;p&gt;이번 절에선 TCP 성능 (주로 성능 저하의 원인)에 대해 알아볼 것입니다. TCP 프로토콜 내부를 자세히 알아야 하는 절이고 많은 개발자들은 이걸 직접 다룰 일은 드물 것입니다. 하지만 본 스터디는 근본 지식을 위한 스터디이므로 저는 한번 훑어보도록 하겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;421-http-트랜잭션-지연&quot;&gt;4.2.1. HTTP 트랜잭션 지연&lt;/h4&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;p&gt;위의 그림과 같이 HTTP 요청을 처리하는 시간은 요청을 전송하고 응답을 전송하는 시간에 비해 짧습니다. 대부분의 HTTP 지연은 TCP 네트워크의 지연 때문에 발생합니다.&lt;/p&gt;

&lt;p&gt;HTTP 지연에는 다음과 같은 원인들이 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;처음 방문하는 호스트의 경우 DNS을 이용해 호스트명을 IP로 변환하는 과정. 과거에는 수십초가 걸림(현재는 인터넷 인프라의 발전으로 대부분 밀리초 단위로 DNS 이름 분석이 끝난다 - 옮긴이)&lt;/li&gt;
  &lt;li&gt;새로운 커넥션을 만들고 설정하는 시간. 과거엔 1~2초가 걸림 (역시 인터넷 인프라의 발전으로 대부분 1초 미만으로 끝난다.)&lt;/li&gt;
  &lt;li&gt;요청 메세지 전송&lt;/li&gt;
  &lt;li&gt;요청 처리 및 응답 메세지 전송&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;422-성능-관련-중요-요소&quot;&gt;4.2.2. 성능 관련 중요 요소&lt;/h4&gt;

&lt;p&gt;지금부턴 다음과 같은 일반적인 TCP 관련 지연에 대해 살펴봅니다. 고성능의 HTTP 소프트웨어를 개발해야 한다면 각 항목을 모두 이해해야 합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;TCP 커넥션의 핸드셰이크 설정&lt;/li&gt;
  &lt;li&gt;TCP의 slow start : 본래는 인터넷의 혼잡을 제어하기 위해 사용되지만 지연의 원인이 되기도 합니다.&lt;/li&gt;
  &lt;li&gt;Nagle 알고리즘 : 작은 데이터를 모아 한번에 전송하기 위해 만들어진 알고리즘이지만 지연의 원인이 되기도 합니다.&lt;/li&gt;
  &lt;li&gt;TCP의 편승(piggyback) 확인응답(acknowledgment)을 위한 확인응답 지연 : 이 역시 확인응답이라는 메세지를 다른 데이터에 편승 시킬 목적이었으나 지연의 원인이 되기도 합니다.&lt;/li&gt;
  &lt;li&gt;TIME_WAIT 지연과 포트고갈&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;423-tcp-커넥션-핸드셰이크-지연&quot;&gt;4.2.3. TCP 커넥션 핸드셰이크 지연&lt;/h4&gt;

&lt;p&gt;핸드셰이크는 악수죠. TCP 커넥션 핸드셰이크는 정말 직관적으로 잘 이해되는 단어 같습니다. 새로운 TCP 커넥션을 맺을 때 두 TCP 소프트웨어는 커넥션을 맺기 위해 IP 패킷을 교환합니다.&lt;/p&gt;

&lt;p&gt;다음 그림과 설명은 TCP 커넥션이 핸드셰이크를 하는 순서입니다.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트는 ‘SYN’이라는 플래그를 가진 작은 TCP 패킷을 보낸다.(40~60 Byte) SYN 플래그는 커넥션 생성 요청을 뜻한다.&lt;/li&gt;
  &lt;li&gt;서버가 그 커넥션을 받으면 몇 가지 커넥션 매개변수를 산출해 ‘SYN’과 ‘ACK’ 플래그가 담긴 TCP 패킷을 클라이언트에게 보낸다. SYN+ACK 플래그는 커넥션 생성 요청이 승낙 됐다는 것을 뜻한다.&lt;/li&gt;
  &lt;li&gt;SYN+ACK 플래그를 가진 TCP 패킷을 받은 클라이언트는 승낙을 확인했다는 뜻의 ACK 플래그를 가진 확인 응답 신호를 보낸다. 오늘날 TCP는 이 확인 응답 신호를 실질적으로 보내야할 데이터와 같이 보낸다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;주고받아야할 데이터의 크기가 작은 HTTP 트랜잭션들은 통신시간의 50%이상을 실제 데이터 전송이 아니라 TCP 커넥션을 구성하는데 사용합니다. (하나의 IP 패킷은 인터넷상에서 수백 바이트, 로컬에선 1500바이트 정도 됩니다.)&lt;/p&gt;

&lt;p&gt;이미 존재하는 커넥션을 재활용 하는 방식으로 이런 지연을 최소화 하는데 이는 뒤에서 살펴볼 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;424-확인응답-지연&quot;&gt;4.2.4. 확인응답 지연&lt;/h4&gt;

&lt;p&gt;앞서 하나의 HTTP 메세지는 여러 세그먼트단위로 나뉘고 IP 패킷에 담겨 전송되고, TCP는 각 세그먼트의 순서와 손상 여부를 검사한다고 했습니다. 이렇게 HTTP 메세지를 잘 받은걸 확인한 후에 확인응답 패킷을 송신자에게 반환합니다.&lt;/p&gt;

&lt;p&gt;그리고 송신자는 특정 시간 안에 확인응답을 받지 못하면 패킷 전송에 오류가 있다는 것으로 간주해 데이터를 다시 전송하게 됩니다.&lt;/p&gt;

&lt;p&gt;위 과정에서 보내는 확인응답은 크기가 작습니다. 그래서 보통 TCP는 확인응답이 가야할 방향으로 송출되는 데이터 패킷에 확인응답을 같이 태워보냅니다. 이를 편승(piggyback)시킨다고 부릅니다.&lt;/p&gt;

&lt;p&gt;편승하기 위해서 구현된 많은 ‘확인응답 지연’ 알고리즘은 다음과 같이 동작합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;보낼 확인응답을 특정시간(0.1~0.2초) 동안 버퍼에 저장한다.&lt;/li&gt;
  &lt;li&gt;편승할 송출 데이터 패킷을 찾는다.&lt;/li&gt;
  &lt;li&gt;일정 시간 안에 송출 데이터 패킷을 찾지 못하면 확인응답만 별도의 패킷으로 전송한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;서로 데이터 전송이 활발한 커넥션의 경우에 문제가 없겠지만 주고받는게 적은 통신에선 오히려 편승할 데이터 패킷을 찾는 과정에 시간을 버리는 일이 빈번합니다.&lt;/p&gt;

&lt;p&gt;운영체제에 따라 이 확인응답 지연 관련 기능을 수정할수도 있지만 조심히 건드려야 할것입니다.&lt;/p&gt;

&lt;h4 id=&quot;425-tcp-느린-시작slow-start&quot;&gt;4.2.5. TCP 느린 시작(slow start)&lt;/h4&gt;

&lt;p&gt;TCP의 slow start는 생성 초기엔 커넥션의 최대 속도를 제한하고 데이터가 성공적으로 전송됨에 따라 속도 제한을 높이는 것입니다. 이는 인터넷의 급작스러운 부하나 혼잡을 방지하기 위해 도입되었습니다.&lt;/p&gt;

&lt;p&gt;속도 제한은 한번에 전송 가능한 패킷의 수로 제어 합니다. 패킷이 성공적으로 전달되면 추가로 2개의 패킷을 더 전송할 수 있는 권한을 얻게 됩니다.&lt;/p&gt;

&lt;p&gt;2개를 보냈다가 성공적으로 전달되면 다음엔 4개를 보낼 수 있게되는 방식입니다. 이렇게 점진적으로 전달 패킷 양을 늘리는걸 ‘Opening the congestion window’라고 부르고 어느 정도 데이터를 주고 받은 커넥션을 ‘튜닝된’ 커넥션이라고 부릅니다.&lt;/p&gt;

&lt;p&gt;새로운 커넥션은 튜닝된 커넥션보다 느리기 때문에(한 번에 보낼 수 있는 최대 패킷수가 제한되기 때문에) 커넥션을 재사용하지 않는다면 TCP의 slow start 때문에 네트워크 지연이 발생할수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;426-네이글nagle-알고리즘과-tcp_nodelay&quot;&gt;4.2.6. 네이글(Nagle) 알고리즘과 TCP_NODELAY&lt;/h4&gt;

&lt;p&gt;앞서 보았듯이 실제로 전송해야할 데이터가 얼마가 되든 IP 패킷으로 전송하기위해선 IP 패킷 헤더, TCP 세그먼트 헤더, 플래그등을 포함합니다. 따라서 전송해야할 데이터가 작다면 실제 보낼 데이터보다 헤더값들이 더 큰 상황이 발생할 수 있습니다.&lt;/p&gt;

&lt;p&gt;네이글 알고리즘은 이런 작은 패킷들을 하나로 합쳐 전송하는 역할을 합니다. 네이글 알고리즘은 다음과 같은 순서로 이루어집니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;전에 전송한 패킷에 아직 확인응답을 못받은 경우 전송할 데이터들을 버퍼에 쌓아둔다.&lt;/li&gt;
  &lt;li&gt;쌓아둔 데이터가 세그먼트의 최대크기 만큼 쌓이면 하나의 패킷으로 전송한다.&lt;/li&gt;
  &lt;li&gt;전에 전송한 패킷들이 모두 확인응답을 받아 확인응답을 기다리는 패킷들이 없다면, 버퍼에 쌓는 데이터가 세그머느의 최대 크기가 되지 않더라도 하나의 패킷으로 전송한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;네이글 알고리즘 역시 네트워크의 지연을 줄이고자 하는 목적으로 도입됐지만 오히려 네트워크 지연을 발생시키기도 합니다. 앞으로 생길지 말지 모르는 데이터를 하염없이 기다리며 지연됩니다.&lt;/p&gt;

&lt;p&gt;그리고 이 네이글 알고리즘은 앞서 본 확인응답 지연과 같이 쓰이면 성능이 매우 떨어지기도 합니다. 확인응답 지연은 패킷을 자주 주고받아 확인응답을 다른 패킷에 편승시켜야 하는데, 네이글 알고리즘은 작은 패킷들은 안보내고 모으고 있으니 서로 역효과를 발생시키게 됩니다.&lt;/p&gt;

&lt;p&gt;HTTP 어플리케이션 수준에서 HTTP 스택에 TCP_NODELAY 파라미터 값을 설정하면 네이글 알고리즘을 비활성화 할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;427-time_wait의-누적과-포트-고갈&quot;&gt;4.2.7. TIME_WAIT의 누적과 포트 고갈&lt;/h4&gt;

&lt;p&gt;TIME_WAIT의 누적과 포트 고갈은 실제 상황에서 발생할 가능성은 낮지만 발생시엔 심각한 성능 저하를 일으킵니다. 그렇다면 포트고갈은 왜 일어나는 것 인지 알아보겠습니다.&lt;/p&gt;

&lt;p&gt;TCP 커넥션의 종단(end-point)에서 TCP 커넥션을 끊으면 커넥션의 IP 주소와 포트번호를 메모리의 제어영역(control block)에 기록해두고 해당 주소와 포트번호는 일정 시간 동안 사용하지 않게합니다. 이를 TIME_WAIT라고 하고 보통 세그먼트의 최대 생명주기의 두배(2MSL) 정도 유지하며 2MSL은 과거엔 2분, 현재는 1분 이내입니다.&lt;/p&gt;

&lt;p&gt;TIME_WAIT를 하는 이유는 이전 커넥션과 관련된 패킷이 이전 커넥션과 같은 IP, 포트를 갖는 새로운 커넥션에 들어오는 것을 방지하는 것입니다. 그래서 세그먼트의 생명주기의 두배정도를 기다리는 것입니다.&lt;/p&gt;

&lt;p&gt;하지만 요즘엔 라우터들이 향상되어 커넥션이 닫힌 후에 중복 패킷이 생기는 경우는 거의 없습니다.&lt;/p&gt;

&lt;p&gt;처음에 이 포트 고갈은 실제 상황에서 발생할 가능성이 낮다고 했습니다. 실제 상황보다 성능 테스트 시에 발생할 가능성이 높습니다. 커넥션에 관해 설명할때&lt;/p&gt;

&lt;p&gt;&amp;lt;발신지 IP주소, 발신지 포트, 목적지 IP주소, 목적지 포트&amp;gt;&lt;/p&gt;

&lt;p&gt;4가지가 모두 같아야 같은 커넥션이라고 했습니다. 실제 상황에선 한 발신지에서 많은 트랜잭션을 단시간에 보내는 경우는 드물기 때문에 실제론 잘 발생하지 않습니다. 오히려 발신지의 IP와 포트가 제한된 채로 많은 트랜잭션을 발생시켜 테스트하는 성능 테스트 단계에서 발생하기 쉽습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;43-http-커넥션-관리&quot;&gt;4.3. HTTP 커넥션 관리&lt;/h3&gt;

&lt;p&gt;이번 절에선 커넥션을 생성하고 최적화하는데 필요한 HTTP 기술을 알아볼 것입니다. HTTP의 Connection 헤더에 대해 알아보고 이를 최적화 하는 방법을 알아 볼 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;431-흔히-잘못-이해하는-connection-헤더&quot;&gt;4.3.1. 흔히 잘못 이해하는 Connection 헤더&lt;/h4&gt;

&lt;p&gt;클라이언트의 요청은 바로 목적지 서버로 들어가지 않고 여러 프록시를 거칠 수 있습니다. 이때를&lt;/p&gt;

  	클라이언트 - 프록시1 - 프록시2 - 서버

&lt;p&gt;순서로 통신이 이루어진다고 가정하면, 클라이언트와 프록시1 둘 간에만 적용될 옵션을 지정할 수 있습니다. 이를 hop-by-hop 헤더라고 합니다.&lt;/p&gt;

&lt;p&gt;HTTP메세지의 Connection헤더는 세가지 종류의 토큰이 올 수 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;HTTP 헤더 필드 명 : 해당 커넥션에서만 사용되는 HTTP 헤더를 나열합니다. 다음 커넥션에선 해당 HTTP 헤더를 삭제하고 보냅니다.&lt;/li&gt;
  &lt;li&gt;임시적인 토큰 : 커넥션에 대한 비표준 옵션입니다.&lt;/li&gt;
  &lt;li&gt;close : 커넥션 작업이 완료되면 종료되어야 한다는 뜻입니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;예시를 보겠습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;HTTP/1.1 200 OK
Cache-control : max-age=3600
Connection : meter, close, bill-my-credit-card
Meter : max-uses=3, max-refuses=6, dont-report&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위는 서버에서 프록시쪽으로 갈 수 있는 응답 메세지 입니다. 이 중 Connection 헤더를 보면 meter 토큰이 있고 아래에 Meter라는 HTTP 헤더가 있습니다. 여기서 meter 헤더는 해당 커넥션에서만 사용되고 다음 커넥션으로 갈땐 Meter 헤더가 삭제 되어야 한다는 뜻입니다.&lt;/p&gt;

&lt;p&gt;bill-my-credit-card는 커넥션에서 사용하기 위해 만든 비표준 옵션이라고 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;추가적으로 Connection 헤더에 기술되지 않더라도 기본적으로 hop-by-hop 헤더인 HTTP 헤더들도 있습니다. Proxy-Authenticate, Proxy-Connection, Transfer-Encoding, Upgrade 같은 헤더들이 그것입니다.&lt;/p&gt;

&lt;h4 id=&quot;432-순차적인-트랜잭션-처리에-의한-지연&quot;&gt;4.3.2. 순차적인 트랜잭션 처리에 의한 지연&lt;/h4&gt;

&lt;p&gt;3개의 이미지가 있는 웹페이지를 연다고 가정해보겠습니다. 이 웹페이지를 열기 위해선 4번의 HTTP 트랜잭션이 필요합니다. (HTML을 가져오는 트랜잭션 1개 + 3개의 이미지를 가져오는 각각의 트랜잭션)&lt;/p&gt;

&lt;p&gt;각 트랜잭션들이 새로운 커넥션이 필요하다면(HTML과 각 이미지를 호스팅하는 서버가 다르거나 포트가 다를 경우) 핸드셰이킹 지연과 TCP slow start 지연이 추가로 발생합니다.&lt;/p&gt;

&lt;p&gt;이렇게 순차적으로 4개의 트랜잭션을 처리할 경우 물리적으로 지연이 발생할 뿐 아니라 사용자 입장에서 이미지가 로드될때까지 빈 화면을 바라봐야 하는 심리적인 지연도 있습니다. (뒤에서 살펴볼 병렬적으로 이미지를 받아오는 방식이 더 느릴때도 있지만 사용자는 그래도 동시에 로드되는걸 좋아한다고 합니다!)&lt;/p&gt;

&lt;p&gt;또한 특정 브라우저들의 경우엔 이미지의 크기를 알기 전엔 HTML의 뼈대조차 안그려주는 브라우저도 있습니다. (html 태그 상에서 width와 height를 지정해주면 해결되긴 합니다.)&lt;/p&gt;

&lt;p&gt;이렇게 발생하는 지연을 해결하기 위해 아래와 같은 방법들을 사용하고 앞으로 하나씩 알아보겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;병렬 커넥션 : 여러개의 TCP 커넥션을 통한 동시 HTTP 요청&lt;/li&gt;
  &lt;li&gt;지속 커넥션 : 커넥션을 맺고 끊는 데서 발생하는 지연을 제거하기 위한 TCP 커넥션의 재활용&lt;/li&gt;
  &lt;li&gt;파이프라인 커넥션 : 공유 TCP 커넥션을 통한 병렬 HTTP 요청&lt;/li&gt;
  &lt;li&gt;다중 커넥션 : 요청과 응답들에 대한 중재(아직 실험적인 기술)&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;44-병렬-커넥션&quot;&gt;4.4. 병렬 커넥션&lt;/h3&gt;

&lt;p&gt;병렬 커넥션은 말 그대로 여러개의 커넥션을 맺어 여러개의 HTTP 트랜잭션을 병렬로 처리하는 것입니다. 병렬 ‘커넥션’이기 때문에 가져와야할 리소스가 다른 호스트나 포트에 있어야 합니다.&lt;/p&gt;

&lt;h4 id=&quot;441-병렬-커넥션은-페이지를-더-빠르게-내려-받는다&quot;&gt;4.4.1. 병렬 커넥션은 페이지를 더 빠르게 내려 받는다&lt;/h4&gt;

&lt;p&gt;하나의 커넥션은 HTTP 요청을 보내고 응답을 기다립니다. 그 기다리는 시간동안 다른 커넥션을 만들고 다른 요청을 보냅니다. 이렇게 하기 위해선 충분한 인터넷 대역폭이 확보되어야 합니다.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;p&gt;이렇게 인터넷 대역폭이 충분하고 한 커넥션이 지연되는 시간이 있을때, 하나가 지연될때 다른 커넥션을 작동시켜 지연시간을 겹치게 만들 수 있습니다. 이렇게 하면 일반적으론 더 빠르게 웹 페이지를 받아올 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;442-병렬-커넥션이-항상-더-빠르지는-않다&quot;&gt;4.4.2. 병렬 커넥션이 항상 더 빠르지는 않다&lt;/h4&gt;

&lt;p&gt;하지만 병렬 커넥션이 항상 빠르지는 않습니다. 앞서 말했듯이 충분한 인터넷 대역폭이 확보되어야 하는데 인터넷 대역폭이 극히 작아 하나의 커넥션만으로 버겁다면 병렬적으로 커넥션을 사용할 수 없습니다. (오히려 여러 커넥션을 만들어야 되니 그로 인한 지연이 더 발생할 수 있습니다.)&lt;/p&gt;

&lt;p&gt;그리고 커넥션을 여러개 생성하는건 메모리의 문제로 이어질 수도 있습니다.&lt;/p&gt;

&lt;p&gt;또한, 복잡한 웹페이지의 경우엔 수십~수백개의 객체를 포함하는데 이를 수백개의 병렬 커넥션으로 연결할 순 없습니다. 서버쪽에서 거부하기 때문에 과도한 수의 커넥션이 맺어지면 서버쪽에서 임의로 끊을 수도 있습니다.&lt;/p&gt;

&lt;p&gt;사실 서버쪽에서 거부하기 전에 사용자가 사용하는 브라우저 자체에서 병렬 커넥션의 수를 제한합니다.(최신 브라우저들은 대부분 6~8개의 병렬 커넥션을 지원합니다. - 옮긴이)&lt;/p&gt;

&lt;h4 id=&quot;443-병렬-커넥션은-더-빠르게-느껴질-수-있다&quot;&gt;4.4.3. 병렬 커넥션은 더 빠르게 ‘느껴질 수’ 있다&lt;/h4&gt;

&lt;p&gt;이렇게 실제로 병렬 커넥션이 더 느릴 수도 있습니다. 하지만 사용자는 병렬 커넥션을 더 선호합니다. 앞서 말했듯이 빈 화면을 보고있는 것보단 동시에 로드되는 과정을 지켜볼때 사용자는 더 빠르다고 생각합니다.&lt;/p&gt;

&lt;p&gt;이렇게 사용자의 심리적인 부분을 고려하는 것도 중요합니다. 옮긴이에 따르면, 이미지 같은 것을 로드할때 처음엔 저화질 이미지를 로드해 보여주고 후에 고화질을 받아 보여주는 방식도 사용자의 심리적인 면을 고려하는 것중 하나라고 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;45-지속-커넥션&quot;&gt;4.5. 지속 커넥션&lt;/h3&gt;

&lt;p&gt;대부분의 웹 사이트를 이용할 때 웹 클라이언트는 같은 사이트에 여러 개의 커넥션을 맺습니다. 하나의 웹 페이지를 띄우기 위해 가져와야할 많은 리소스들이 같은 서버에 있는 경우 그 서버에 또 요청을 하게 됩니다. 이를 ‘site locality’ 라고 부릅니다.&lt;/p&gt;

&lt;p&gt;이를 위해 HTTP/1.1에선 처리가 완료된 후에도 TCP 커넥션을 유지합니다. 이를 ‘지속 커넥션’이라고 부르고 지속 커넥션을 이용하면 여러 번 커넥션을 맺을 때 발생할 수 있는 헨드셰이킹 지연, TCP slow start 지연을 방지해 더 빠르게 리소스를 가져올 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;451-지속-커넥션-vs-병렬-커넥션&quot;&gt;4.5.1. 지속 커넥션 vs 병렬 커넥션&lt;/h4&gt;

&lt;p&gt;병렬 커넥션의 장, 단점은 앞에서 살펴보았고 지속 커넥션의 장점은 방금 살펴보았습니다. 하지만 지속 커넥션이 장점만 갖는건 아닙니다. 지속 커넥션 관리가 제대로 되지 않을 경우, 연결된 상태의 커넥션이 계속 쌓여 클라이언트, 서버 양쪽에 리소스를 낭비할 것입니다.&lt;/p&gt;

&lt;p&gt;사실 가장 좋은 방법은 병렬 커넥션과 지속 커넥션을 같이 사용하는 것입니다. 요즘의 많은 웹 어플리케이션은 적은 수의 병렬 커넥션을 사용하며 각 커넥션을 지속 커넥션으로 사용합니다.&lt;/p&gt;

&lt;p&gt;쉽게 볼 수 있는 지속 커넥션엔 두 가지가 있습니다. HTTP/1.0+ 에서 사용되는 ‘keep alive’ 커넥션이 있고 HTTP/1.1 에서 사용되는 ‘지속’ 커넥션이 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;452-http10의-keep-alive-커넥션&quot;&gt;4.5.2. HTTP/1.0+의 Keep-Alive 커넥션&lt;/h4&gt;

&lt;p&gt;HTTP/1.0에서는 지속 커넥션이 없었습니다. 당시에 실험적인 수준이었던 keep-alive 커넥션을 지원하기 위해 HTTP/1.0+로 확장 됩니다.&lt;/p&gt;

&lt;p&gt;keep-alive 커넥션은 처음 등장한 지속 커넥션이어서 그런지 설계상 문제가 있었습니다. 하지만 아직도 많은 클라이언트와 서버들은 keep-alive 커넥션을 사용합니다. (&lt;strong&gt;책이 집필 된 지 오래돼서 아직도 이 문장이 유효한지 잘 모르겠습니다.&lt;/strong&gt;)&lt;/p&gt;

&lt;p&gt;keep-alive의 설계상 문제는 HTTP/1.1 에서 수정되어 새로운 지속 커넥션으로 바뀌었습니다. 그리고 keep-alive 자체는 HTTP/1.1 명세에 빠졌습니다. 머지않아 레거시로만 남게 될 것 같습니다.&lt;/p&gt;

&lt;h4 id=&quot;453-keep-alive-동작&quot;&gt;4.5.3. Keep-Alive 동작&lt;/h4&gt;

&lt;p&gt;keep-alive가 HTTP/1.1 명세에서 공식적으로 빠졌더라도 아직 많은 웹 클라이언트와 서버가 keep-alive를 사용중이고 레거시와의 호환성은 개발자에겐 피할 수 없는 숙명이므로 keep-alive가 어떻게 동작하는지 알아보겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 요청시 ‘Connection:Keep-Alive’ 헤더를 포함시킵니다.&lt;/li&gt;
  &lt;li&gt;‘Connection:Keep-Alive’헤더를 받은 서버가 이 지속 커넥션을 수락하고자 한다면 응답 메세지에도 ‘Connection:Keep-Alive’헤더 를 포함시킵니다.&lt;/li&gt;
  &lt;li&gt;응답 메세지에서 ‘Connection:Keep-Alive’헤더를 확인한 클라이언트는 지속 커넥션을 유지합니다. 만약 응답 메세지에서 ‘Connection:Keep-Alive’를 찾지 못했다면 서버가 커넥션을 끊을 것이라 추정하게 됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;여기서 ‘Connection:Keep-Alive’ 헤더는 커넥션을 유지하기 바라는 요청일 뿐이고 해당 헤더를 포함시켰다고 해서 keep-alive 커넥션이 만들어질거라는 보장은 없습니다. 또한, 언제든지 keep-alive 커넥션은 끊어질 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;454-keep-alive-옵션&quot;&gt;4.5.4. Keep-Alive 옵션&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;Connection : Keep-Alive
Keep-Alive : max=5, timeout=120&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위에서 처럼 Keep-Alive 헤더를 추가해 keep-alive에 대한 옵션 사항을 줄 수도 있습니다. 위의 예시에서 max 파라미터는 몇 개의 HTTP 트랜잭션을 처리할 때 까지 커넥션을 유지할 것인지를 나타냅니다. timeout 파라미터는 이 커넥션이 얼마간 유지될 것인지를 나타냅니다. 이 외에도 다양한 파라미터를 사용할 수 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 ‘Connection:Keep-Alive’헤더가 keep-alive 커넥션을 보장하지 못하는 것 처럼 Keep-Alive 헤더에 옵션을 적었다고 해서 그렇게 동작할 것이라는 보장은 없습니다.&lt;/p&gt;

&lt;p&gt;끝으로 Keep-Alive 헤더는 ‘Connection:Keep-Alive’ 헤더가 있을때만 유효합니다.&lt;/p&gt;

&lt;h4 id=&quot;455-keep-alive-커넥션-제한과-규칙&quot;&gt;4.5.5. Keep-Alive 커넥션 제한과 규칙&lt;/h4&gt;

&lt;p&gt;앞에서 살펴본 것들과 뒤에서 살펴볼 keep-alive의 제한이나 규칙등을 정리해보겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;keep-alive는 기본적으로 적용되는 것이 아닙니다.  Connection:Keep-Alive 요청 헤더를 보내야 합니다.&lt;/li&gt;
  &lt;li&gt;keep-alive를 유지하려면 계속 요청과 응답에서 Connection:Keep-Alive 헤더를 유지해야 합니다. 클라이언트가 Connection:Keep-Alive를 보내지 않으면 서버는 keep-alive 커넥션을 끊을 것입니다.&lt;/li&gt;
  &lt;li&gt;서버가 Connection:Keep-Alive를 보내지 않으면 클라이언트는 서버가 keep-alive 커넥션을 끊을 것이라 생각합니다.&lt;/li&gt;
  &lt;li&gt;keep-alive 커넥션에서 Content-Length의 값을 알려주는 것은 매우 중요합니다. Content-Length를 알아야만 메세지의 끝과 시작점을 알 수 있기 때문입니다.&lt;/li&gt;
  &lt;li&gt;정석대로라면 keep-alive 커넥션은 Connection 헤더를 인식하지 못하는 프록시와는 연결되면 안됩니다. 뒤에서 설명할 dumb 프록시로 인한 문제가 발생할 수 있기 때문입니다. 하지만 현실적으론 쉽지 않습니다.&lt;/li&gt;
  &lt;li&gt;기술적으론 HTTP/1.0 을 따르는 곳에서 오는 모든 Connection 헤더 필드는 무시해야 합니다.&lt;/li&gt;
  &lt;li&gt;클라이언트는 응답을 전부 받기 전에 커넥션이 끊어진다면 다시 요청을 보낼 준비를 하고 있어야 합니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;456-keep-alive와-멍청한dumb-프록시&quot;&gt;4.5.6. Keep-Alive와 멍청한(dumb) 프록시&lt;/h4&gt;

&lt;p&gt;dumb 프록시에 관한 문제는 Connection 헤더를 이해못하는 구형 프록시 때문에 발생합니다. 발생 과정을 살펴보겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트 - dumb proxy - 서버 간의 통신 상황입니다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 Connection : Keep-Alive 헤더를 포함한 요청을 보냅니다.&lt;/li&gt;
  &lt;li&gt;dumb 프록시는 Connection : Keep-Alive 헤더를 단순히 확장 헤더로 취급하고 서버에 그대로 전달 합니다.
앞서 살펴봤듯이 Connection 헤더는 hop-by-hop 헤더로써, 다음 서버로 전송되면 안됩니다.&lt;/li&gt;
  &lt;li&gt;서버는 Connection : Keep-Alive 헤더가 담긴 메세지를 받고 문제가 없는 경우에 keep-alive 커넥션에 동의하고 Connection : Keep-Alive 헤더를 포함한 응답 메세지를 보냅니다.&lt;/li&gt;
  &lt;li&gt;dumb 프록시는 이번에도 Connection : Keep-Alive 헤더를 확장 헤더로 취급해 그대로 클라이언트에게 전달합니다.&lt;/li&gt;
  &lt;li&gt;그리고 dumb 프록시는 keep-alive를 이해하지 못하기 때문에 서버가 커넥션을 끊기를 기다립니다. 하지만 서버는 keep-alive 커넥션에 동의했기 때문에 커넥션을 끊지 않습니다.&lt;/li&gt;
  &lt;li&gt;Connection : Keep-Alive 헤더가 담긴 응답을 받은 클라이언트는 keep-alive가 맺어졌다고 생각하고 다음 요청을 프록시에 보냅니다.
하지만 프록시는 같은 커넥션에서 다른 요청이 또 올거라 예상하지 못하기 때문에 클라이언트의 다음 요청은 무시됩니다. 클라이언트는 계속 기다리게 됩니다.&lt;/li&gt;
  &lt;li&gt;dumb 프록시가 중간을 어지럽혔기 때문에 클라이언트나 서버는 타임아웃이 나서 커넥션이 끊길때 까지 기다리게 됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;위의 모든 상황은 dumb 프록시가 다음으로 넘기지 말아야 할 Connection 헤더를 넘겨 일어난 일입니다.&lt;/p&gt;

&lt;h4 id=&quot;457-proxy-connection-살펴보기&quot;&gt;4.5.7. Proxy-Connection 살펴보기&lt;/h4&gt;

&lt;h4 id=&quot;458-http11의-지속-커넥션&quot;&gt;4.5.8. HTTP/1.1의 지속 커넥션&lt;/h4&gt;

&lt;p&gt;앞에서 많은 시간을 들여 keep-alive 커넥션에 대해 알아봤지만 사실 keep-alive는 deprecated된 기술입니다. HTTP/1.1에선 keep-alive보다 향상된 지속 커넥션을 사용합니다.&lt;/p&gt;

&lt;p&gt;HTTP/1.1의 지속 커넥션은 기본적으로 활성화되어 있습니다. keep-alive가 기본적으로 비활성이던 것과는 정반대입니다. HTTP/1.1의 지속 커넥션은 모든 커넥션을 지속 커넥션으로 취급하고, 이를 끊으러면 Connection : close 헤더를 보내야 합니다.&lt;/p&gt;

&lt;p&gt;Connection : close 헤더가 없다면 HTTP/1.1을 따르는 웹 어플리케이션들은 지속 커넥션이 유지된다고 생각합니다. 물론, Connection : close를 보내지 않았다고 해서 커넥션이 영원히 유지되는 것은 아닙니다.&lt;/p&gt;

&lt;h4 id=&quot;459-지속-커넥션의-제한과-규칙&quot;&gt;4.5.9. 지속 커넥션의 제한과 규칙&lt;/h4&gt;

&lt;p&gt;HTTP/1.1 지속 커넥션의 특징들을 정리하겠습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;클라이언트가 Connection : close헤더를 포함한 요청을 보냈다면 그 커넥션으로 추가 요청을 보낼 순 없다.&lt;/li&gt;
  &lt;li&gt;클라이언트가 추가적으로 요청을 보내지 않을 것이라면 Connection : close헤더를 포함해 마지막 요청을 보내야 한다.&lt;/li&gt;
  &lt;li&gt;메세지에 길이 정보가 있어야 지속 커넥션을 유지 시킬 수 있다. 즉, Content-Length를 가지고나 chunked transfer encoding 되어 있어야 한다.&lt;/li&gt;
  &lt;li&gt;HTTP/1.1 프록시는 클라이언트, 서버와 각각 별도의 지속 커넥션을 맺고 관리해야 한다.&lt;/li&gt;
  &lt;li&gt;HTTP/1.1 프록시는 클라이언트의 HTTP지원 범위를 모른다면 지속 커녁션을 맺으면 안된다.(하지만 이게 잘 지켜지진 않는다.)&lt;/li&gt;
  &lt;li&gt;HTTP/1.1 기기는 Connection : close 헤더와 관계 없이 언제든 커넥션을 끊을 수 있다.&lt;/li&gt;
  &lt;li&gt;HTTP/1.1 어플리케이션은 중간에 끊어진 커넥션을 복구할 수 있어야 한다. 다시 보내도 되는 요청이면 다시 보내야 한다.&lt;/li&gt;
  &lt;li&gt;클라이언트는 커넥션이 비정상적으로 끊어질 것을 대비해 다시 요청을 보낼 준비가 되어있어야 한다.&lt;/li&gt;
  &lt;li&gt;하나의 클라이언트는 서버의 과부하 방지를 위해 두개 정도의 지속 커넥션을 유지해야 한다. n명의 사용자를 상대하기 위해서 프록시나 서버는 2n개의 커넥션을 유지할 수 있어야 한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;46-파이프라인-커넥션&quot;&gt;4.6. 파이프라인 커넥션&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;파이프라인 : 컴퓨터 과학에서 파이프라인은 한 데이터 처리 단계의 출력이 다음 단계의 입력으로 이어지는 형태로 연결된 구조를 가리킨다. 이렇게 연결된 데이터처리 단계는 한 단계가 서로 동시에, 또는 병렬적으로 수행될 수 있어 효율성의 향상을 꾀할 수 있다. 각 단계 사이의 입출력을 중계하기 위해 버퍼가 사용될 수 있다.  - [위키백과][https://ko.wikipedia.org/wiki/%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8_(%EC%BB%B4%ED%93%A8%ED%8C%85)]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;HTTP/1.1은 지속 커넥션을 위해 요청을 파이프라이닝 할 수 있습니다. 하나의 요청을 보내고 응답을 기다리는 동안 보낸 요청은 큐에 쌓아두고 새로운 요청을 보내고 또 큐에 쌓는 방식입니다. 대기시간이 긴 네트워크 상황에서 큰 효과를 얻을 수 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 파이프라이닝엔 다음과 같은 제약 사항들이 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;HTTP 클라이어느는 커넥션이 지속 커넥션인지 확인하기 전 까진 파이프라인을 이어서는 안됩니다.&lt;/li&gt;
  &lt;li&gt;HTTP 응답은 요청 순서와 같게 와야 합니다. HTTP 메세지는 순번이 매개져 있지 않기 때문에 응답이 무작위로 오면 순서에 맞게 정렬시킬 방법이 없습니다.&lt;/li&gt;
  &lt;li&gt;HTTP 클라이언트는 커넥션이 언제 끊어지더라도 실패한 요청을 다시 보낼 수 있어야 합니다.&lt;/li&gt;
  &lt;li&gt;POST 요청과 같이 반복해서 보낼때 문제가 생길 수 있는 요청은 파이프라인을 통해 보내면 안됩니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;47-커넥션-끊기에-대한-미스터리&quot;&gt;4.7. 커넥션 끊기에 대한 미스터리&lt;/h3&gt;

&lt;p&gt;커넥션을 관리(특히 언제, 어떻게 커넥션을 끊는지)에는 명확한 기준도 없고 관련한 기술문서도 많지 않습니다.&lt;/p&gt;

&lt;h4 id=&quot;471-마음대로-커넥션-끊기&quot;&gt;4.7.1. ‘마음대로’ 커넥션 끊기&lt;/h4&gt;

&lt;p&gt;모든 HTTP 클라이언트, 프록시, 서버는 사실 언제든지 TCP 전송 커넥션을 독자적으로 끊을 수 있습니다. 보통은 메세지를 다 보낸 다음 끊게 되지만 이렇게 마음대로 커넥션을 끊어 버리면 HTTP메세지의 중간이 끊기는것 처럼 다양한 문제가 발생할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;472-content-length와-truncation&quot;&gt;4.7.2. Content-Length와 Truncation&lt;/h4&gt;

&lt;p&gt;오래된 HTTP 서버는 ‘커넥션을 끊는다’ == ‘데이터 전송이 끝났다’ 라는 가정하에 개발되어 Content-Length를 가지지 않는 경우가 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 모든 HTTP 응답은 엔터티 본문의 크기를 값는 Content-Length헤더를 가지고 있어야 합니다.&lt;/p&gt;

&lt;p&gt;만약 클라이언트가 실제 엔터티 본문의 크기와 Content-Length의 값이 다른 응답을 받거나, Content-Length 자체를 받지 못했다면 정확한 길이를 다시 물어봐야 합니다. 이때, 발신자가 캐시 프록시였다면 응답을 캐시하면 안됩니다.&lt;/p&gt;

&lt;h4 id=&quot;473-커넥션-끊기의-허용-재시도-멱등성&quot;&gt;4.7.3. 커넥션 끊기의 허용, 재시도, 멱등성&lt;/h4&gt;

&lt;p&gt;앞서 몇번 언급했듯이 커넥션은 에러가 없더라도 언제든지 끊길 수 있습니다. HTTP 어플리케이션들은 이에 대한 대비가 되어있어야 합니다.&lt;/p&gt;

&lt;p&gt;클라이언트의 경우 커넥션이 끊겨 실패한 요청을 다시 보낼 수 있어야 합니다. 이 상황은 파이프라인 커넥션에선 좀 더 복잡해집니다. 응답 대기중인 요청은 큐에 쌓여있지만 모든 응답이 오기전에 커넥션이 끊기면 어느 요청들이 처리됐는지 알수 없습니다.&lt;/p&gt;

&lt;p&gt;이런 상황에서 요청이 어떤 종류의 요청이었는지는 중요합니다. 몇번을 보내도 서버에 영향을 미치지 않는 요청들(앞서 Safe Method라 배운 GET, HEAD)이나 한 번 실행됐는지, 여러번 실행됐는지에 상관없이 같은 결과를 반환하는 요청들(PUT, DELETE 와 같은)은 여러번 보내도 상관없습니다. 이런 부류의 요청을 ‘멱등(idempotent)한’ 요청이라고 합니다.&lt;/p&gt;

&lt;p&gt;POST와 같은 멱등하지 않은 요청을 파이프라인을 통해 요청하다 커넥션이 예상치 못하게 끊어진다면, POST 요청을 다시 보내도 될지 말지 결정할 수 없습니다. 이런 멱등하지않은 요청은 파이프라인 커넥션을 통해 요청하면 안됩니다.&lt;/p&gt;

&lt;h4 id=&quot;474-우아한-커넥션-끊기&quot;&gt;4.7.4. 우아한 커넥션 끊기&lt;/h4&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;커넥션은 어깨너머 들은 지식을 정리하기 보단 새로운 지식으로 받아들이는 시간이었던 것 같습니다. 하지만 이 책의 학습 목표는 이런 웹 서비스가 동작하는데에 대한 깊고 근본적인 지식을 탐구하는 것이기 때문에 매우 재밌습니다! :smiley:&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 3 - HTTP 메시지</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C3/"/>
   <updated>2020-03-12T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드3</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;앞서 HTTP는 ‘배달원’이라고 했습니다. 이번장에서 알아볼 HTTP 메시지는 배달원이 보내는 소포와 같은 역할을 합니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;31-메시지의-흐름&quot;&gt;3.1. 메시지의 흐름&lt;/h3&gt;

&lt;p&gt;HTTP 메세지는 메세지에 대한 메타 정보와 데이터로 이루어진 데이터의 블록입니다. HTTP 메세지는 클라이언트, 서버, 프록시 사이를 흐릅니다.&lt;/p&gt;

&lt;h4 id=&quot;311-메시지는-원-서버-방향을-인바운드로-하여-송신된다&quot;&gt;3.1.1. 메시지는 원 서버 방향을 인바운드로 하여 송신된다&lt;/h4&gt;

&lt;p&gt;인바운드, 아웃바운드는 DB서버를 열어주기 위해 방화벽을 설정해봤다면 한번쯤 마주쳐봤을 용어입니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;인바운드 :  HTTP의 요청 방향으로 가는 것 (클라이언트 -&amp;gt; 서버)&lt;/li&gt;
  &lt;li&gt;아웃바운드 : HTTP 요청이 온 방향(응답방향)으로 가는 것 (서버 -&amp;gt; 클라이언트)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;312-다운스트림으로-흐르는-메시지&quot;&gt;3.1.2. 다운스트림으로 흐르는 메시지&lt;/h4&gt;

&lt;p&gt;다운스트림, 업스트림은 인바운드, 아웃바운드와는 별개로 메세지가 흐르는 방향을 말합니다. 모든 메세지는 다운스트림으로 흐릅니다.&lt;/p&gt;

&lt;p&gt;예를들어, 아래 그림처럼 클라이언트의 요청이 프록시1, 프록시2, 프록시3을 거쳐 서버로 간다면, 인바운드에서 프록시2는 프록시1의 다운스트림이자 프록시3의 업스트림입니다.
 반대로 서버에서 클라이언트로 응답이가는 아웃바운드에선 프록시2는 프록시3의 다운스트림이자 프록시1의 업스트림이 됩니다.&lt;/p&gt;

&lt;p&gt;그림요망&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;32-메시지의-각-부분&quot;&gt;3.2. 메시지의 각 부분&lt;/h3&gt;

&lt;p&gt;메세지는 기본적으로 [ 시작줄 - 헤더 블록 - 본문 ] 으로 이루어져 있습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;시작줄 : 메세지가 어떤 메세지인지를 알려줍니다. (요청인지 응답인지, 요청 및 응답의 상태는 어떤지, HTTP 버전이 무엇인지 등)&lt;/li&gt;
  &lt;li&gt;헤더 블록 : HTTP메세지에 대한 속성들을 가지고 있습니다. (본문의 길이, 인코딩 등..)&lt;/li&gt;
  &lt;li&gt;본문 : 실제 전송할 데이터가 담기는 부분이며, 없을 수도 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;시작줄과 헤더블록은 CRLF(Carriage Return + Line Feed)로 나뉘어집니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;CR (Carriage Return) : 커서를 행의 맨 좌측으로 이동 (ASCII 13번이며, \r 라고도 표현함)&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;LF (Line Feed) : 커서를 아래 행으로 내림 (ASCII 10번이며, \n 라고도 표현함)&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;HTTP명세에 등록된 시작줄과 헤더블록을 나누는 문자는 CRLF(\r\n)이지만 견고한 어플리케이션을 만들기 위해선 \n만으로도 시작줄과 헤더블록을 나누도록 해야 합니다. 오래되거나 잘못 만들어진 HTTP 어플리케이션들은 \r\n가 아닌 \n로 시작줄과 헤더블록을 구분하기 때문입니다.&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;321-메시지-문법&quot;&gt;3.2.1. 메시지 문법&lt;/h4&gt;

&lt;p&gt;요청 메세지의 형식은 다음과 같습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;메서드&gt; &lt;요청URL&gt; &lt;버전&gt;     GET /test/hi-there.txt HTTP/1.1
&lt;헤더&gt;                                          Accept: text/*
                                                     Host: www.joes-hardware.com

&lt;엔터티 본문=&quot;&quot;&gt;                             생략  
&lt;/엔터티&gt;&lt;/헤더&gt;&lt;/버전&gt;&lt;/요청URL&gt;&lt;/메서드&gt;
&lt;/blockquote&gt;

&lt;p&gt;응답 메세지의 형식은 다음과 같습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;버전&gt; &lt;상태코드&gt; &lt;사유 구절=&quot;&quot;&gt;  HTTP/1.0 200 OK
&lt;헤더&gt;                                             Content-type: text/plain
                                                         Content-length: 19

&lt;엔터티 본문=&quot;&quot;&gt;                                Hi, I'm message!
&lt;/엔터티&gt;&lt;/헤더&gt;&lt;/사유&gt;&lt;/상태코드&gt;&lt;/버전&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;메서드 : 클라이언트 입장에서 서버가 수행하길 바라는 동작 (GET, POST, PUT, DELETE …)&lt;/li&gt;
  &lt;li&gt;요청 URL : 요청 리소스의 URL 경로&lt;/li&gt;
  &lt;li&gt;버전 : 메세지에서 사용중인 HTTP 버전&lt;/li&gt;
  &lt;li&gt;상태코드 : 요청의 결과에 대한 상태를 설명하는 세자리 숫자.&lt;/li&gt;
  &lt;li&gt;사유 구절(reason - phrase) : 상태 코드를 설명하는 문구. 정해진 규칙은 없지만 정해진 상태코드의 의미와 맞아야 한다.&lt;/li&gt;
  &lt;li&gt;헤더 : 메세지의 속성들을 설명해주는 ‘이름:값’의 쌍들. 헤더들의 마지막은 빈줄(CRLF)로 끝내 엔터티 본문과 구분지어 준다.&lt;/li&gt;
  &lt;li&gt;엔터티 본문 : 메세지가 전달해야 할 데이터 블록. 생략 가능하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;엔터티 본문이 생략되더라고 헤더의 마지막은 빈줄(CRLF)로 끝나야 합니다. &lt;strong&gt;하지만 많은 HTTP 어플리케이션들이 엔터티 본문이 없으면 헤더의 마지막에 CRLF를 빠뜨립니다. 이런 어플리케이션들과도 호환될 수 있게 HTTP 어플리케이션을 설계해야 합니다.&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;322-시작줄&quot;&gt;3.2.2. 시작줄&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;요청에서 시작줄&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;메서드, 요청 URL, 버전으로 이루어져 있으며 서버에게 어떤 동작을 수행해줄 것인가를 알려줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;응답에서 시작줄&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;버전, 상태코드, 사유구절로 이루어져 있으며 수행에 대한 결과를 알려줍니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;메서드&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;HTTP 명세에선 아래와 같은 9개의 요청 메서드를 정의하고 있습니다.(https://developer.mozilla.org/ko/docs/Web/HTTP/Methods 추가 참고) 하지만 &lt;strong&gt;모든 HTTP 어플리케이션이 아래의 모든 메서드를 구현한 것은 아니며, 어떤 HTTP 어플리케이션은 HTTP명세에 없는 새로운 메서드를 추가했을 수도 있습니다.(확장 메서드)&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;메서드&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;GET&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;서버에서 어떤 문서를 가져온다. 데이터를 받기만 하는 요청.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;HEAD&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;GET메서드 요청과 동일한 응답을 요구하지만 응답의 엔터티 본문을 포함하지 않는다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;POST&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청 리소스에 필요한 데이터를 보낼때 쓰인다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;PUT&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청 메세지의 엔터티 본문을 서버에 저장한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;DELETE&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;특정 리소스를 삭제한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;CONNECT&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청 리소스를 갖는 서버와 터널을 맺음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;OPTIONS&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;서버가 어떤 메서드를 수행할 수 있는지 체크한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;TRACE&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;메세지가 여러 프록시를 거쳐 서버에 도달하는 과정을 추적한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;PATCH&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;오청 리소스의 부분만 수정하는데 쓰인다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;상태코드&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;요청의 처리결과를 3자리 숫자로 표현하며, 숫자의 가장 앞자리를 기준으로 처리결과의 분류가 나뉩니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;전체 범위&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;정의된 범위&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;분류&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;100~199&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;100~101&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;정보&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;200~299&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;200~206&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;성공&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;300~399&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;300~305&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;리다이렉션&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;400~499&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;400~415&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;클라이언트 에러&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;500~599&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;500~505&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;서버 에러&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;사용가능한 범위에 비해 실제로 HTTP명세에 공식적으로 정의된 범위는 적습니다. 메서드와 마찬가지로 각각의 HTTP 어플리케이션에서 HTTP명세에 없는 새로운 코드를 정의할 수 있지만 코드의 분류에 맞게 정의하는 것이 바람직 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;사유 구절&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;상태 코드는 프로그램들이 읽기위한 데이터였다면 사유 구절은 사람들이 읽기위한 상태 코드를 설명하는 문구입니다. 따로 정의된 규칙은 없지만 상태코드를 설명할 수 있어야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;버전 번호&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;HTTP 메세지를 보낸 어플리케이션이 어떤 버전의 HTTP를 따르는지를 알려줍니다. 두 가지를 유의해야 합니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;버전 번호는 어플리케이션이 지원하는 가장 높은 버전의 HTTP를 알려주는 것이지 해당 HTTP메세지를 그 버전의 HTTP로 해석해 달라는 것이 아닙니다. 
예를들어, 응답이 HTTP/1.1로 온 것은 응답을 보낸 어플리케이션이 HTTP/1.1 까지 이해할 수 있다는 것이지 이 메세지를 HTTP/1.1로 해석해 달라는 것이 아닙니다.&lt;/li&gt;
  &lt;li&gt;버전 번호는 소수점이 아니라 [정수.정수] 입니다. HTTP/2.22 는 HTTP/2.3 보다 상위 버전입니다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;323-헤더&quot;&gt;3.2.3. 헤더&lt;/h4&gt;

&lt;p&gt;HTTP 명세에서 정의하는 헤더들이 있고 메서드, 상태코드와 마찬가지로 각 어플리케이션에서 새로운 헤더를 정의할 수 있습니다.
 헤더의 종류에 따라 아래와 같이 나뉠 수 있습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;분류&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;일반 헤더&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청, 응답 모두에서 쓰일 수 있는 헤더(ex - Date:Tue, 3 Oct 1997 …)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청 헤더&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;요청에 대한 부가정보를 제공하는 헤더(ex - Accept:text/html)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;응답 헤더&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;응답에 대한 부가정보를 제공하는 헤더(ex - Server: Tiki-Hut/1.0)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Entity 헤더&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;엔터티 본문에 대한 부가정보를 제공하는 헤더(ex - Content-Type: text/html)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;확장 헤더&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;각 어플리케이션이 정의한 HTTP 명세에 없는 헤더&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;헤더의 가독성을 위해 하나의 헤더를 개행할 수 있는데, 이때 아래 줄엔 하나의 스페이스 혹은 탭이 와야 합니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Content-Length: 8572
Server: Test Server
	Version 1.0&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;324-엔터티-본문&quot;&gt;3.2.4. 엔터티 본문&lt;/h4&gt;

&lt;p&gt;HTTP메시지가 전송할 데이터이며 이미지, 비디오, HTML, 신용카드 트랜잭션, email 등 다양한 데이터를 포함할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;325-버전-09-메시지&quot;&gt;3.2.5. 버전 0.9 메시지&lt;/h4&gt;

&lt;p&gt;사실 지금까진 모드 HTTP/1.0 이상에 대해서만 알아봤습니다. 그 이전 버전인 HTTP/0.9의 메세지는 아래 그림과 같이 요청은 오직 요청 메서드와 URL만, 응답은 엔터티 본문만 존재합니다. HTTP/0.9는 나중에 맞닥드리게 되면 그때 추가로 살펴보는 것이 좋을 것 같습니다.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;33-메서드&quot;&gt;3.3. 메서드&lt;/h3&gt;

&lt;p&gt;널리 사용되는 기본적인 메서드들에 대해 알아볼 것입니다. 다시 한 번 말씀드리지만 모든 어플리케이션이 모든 메서드들을 지원하는 것은 아닙니다. 웹 프레임워크를 사용할때 해당 웹 프레임워크는 어떤 메서드들을 지원하는지 아는게 중요할 것 같습니다.&lt;/p&gt;

&lt;h4 id=&quot;331-안전한-메서드safe-method&quot;&gt;3.3.1. 안전한 메서드(Safe Method)&lt;/h4&gt;

&lt;p&gt;Safe Method는 결과적으로 &lt;strong&gt;서버에 어떤 리소스의 변화도 줄 수 없는 메서드&lt;/strong&gt;들을 말합니다. 일반적으론 GET과 HEAD메서드가 Safe Method에 속합니다.&lt;/p&gt;

&lt;p&gt;하지만 Safe Method 자체가 Safe를 보장하진 않습니다. 그건 모두 우리 개발자에게 달렸습니다. HTTP에 대한 이해가 부족해 GET요청에도 리소스를 수정 및 삭제 하게 만든 어플리케이션이 있다면 조금 문제가 있는 어플리케이션일것 같습니다.&lt;/p&gt;

&lt;h4 id=&quot;332-get&quot;&gt;3.3.2. GET&lt;/h4&gt;

&lt;p&gt;서버에서 리소스를 가져오기 위해 사용됩니다. HTTP/1.1을 준수하기 위해 필요한 메서드중 하나입니다.&lt;/p&gt;

&lt;h4 id=&quot;333-head&quot;&gt;3.3.3. HEAD&lt;/h4&gt;

&lt;p&gt;GET과 동일하게 행동하지만 엔터티 본문을 포함하지 않습니다. 시작줄과 헤더만 가져와 아래와 같은 사항들을 알아 낼 수 있습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;리소스 전체를 가져오지 않고 리소스에 대한 정보를 알아냄(타입, 크기 등..)&lt;/li&gt;
  &lt;li&gt;리소스의 존재 여부를 알 수 있음&lt;/li&gt;
  &lt;li&gt;리소스의 변경 여부를 알 수 있음&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;요청할 리소스의 크기가 큰 경우에 유용하게 사용할 수 있을 것 같습니다.&lt;/p&gt;

&lt;p&gt;HTTP/1.1 준수를 위해 필요한 메서드 중 하나이며, &lt;strong&gt;개발자들은 HEAD의 헤더가 GET의 헤더와 정확히 일치하도록 유의해하며 개발해야 합니다.&lt;/strong&gt;(웹 프레임워크에 다시 한 번 감사함을 느낍니다.)&lt;/p&gt;

&lt;h4 id=&quot;334-put&quot;&gt;3.3.4. PUT&lt;/h4&gt;

&lt;p&gt;PUT 메서드는 요청의 본문을 요청 URL 대로 서버에 저장하는 역할을 합니다. 이미 존재하는 URL이라면 수정을 합니다. 아래 그림과 같이 말이죠.&lt;/p&gt;

&lt;p&gt;그림 요망&lt;/p&gt;

&lt;h4 id=&quot;335-post&quot;&gt;3.3.5. POST&lt;/h4&gt;

&lt;p&gt;POST메서드는 서버에 입력 데이터를 전송하기 위해 설계 됐습니다. HTML을 다뤄봤다면 &amp;lt;form&amp;gt;태그에서 모두 본 적이 있을 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;336-trace&quot;&gt;3.3.6. TRACE&lt;/h4&gt;

&lt;p&gt;우리의 요청은 서버로 가기전에 여러개의 프록시들을 거칠 수 있습니다. 클라이언트의 입장에서 내가 보낸 요청이 서버에게 어떻게 받아들였는지를 알고 싶을때(프록시에서 요청이 수정될 수 있으므로) 사용하는 것이 TRACE 메서드입니다.&lt;/p&gt;

&lt;p&gt;TRACE 메서드는 요청의 목적지인 서버까진 일반적인 요청과 같이 진행됩니다. 서버에서 클라이언트로 응답을 돌려주는 과정에서 부터 loopback 진단이 시작됩니다. 아래 그림과 같이 응답이 오며 어떤 요청에 대한 응답인지를 기록해 클라이언트에서 서버로 가면서 요청들이 어떻게 수정됐는지 진단 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;그림요망&lt;/p&gt;

&lt;p&gt;요청들의 기록은 응답의 엔터티 본문에 담겨 최종적으로 클라이언트에게 전달됩니다.&lt;/p&gt;

&lt;p&gt;TRACE메서드는 한 가지 취약점을 가지고 있습니다. 몇몇 프록시들은 자신이 받은 요청 메서드에 따라 다르게 처리하기도 합니다. 예를들어 어떤 프록시는 POST요청은 바로 서버로 전달하지만 GET 요청은 웹 캐시 프록시로 먼저 보냅니다. 하지만 TRACE메서드를 사용하면 이와 같은 처리를 하지 못합니다.&lt;/p&gt;

&lt;p&gt;TRACE 메서드 자체로는 해당 요청이 POST처럼 처리될지, GET처럼 처리될 지 알려주는 메커니즘을 제공하지 않습니다. 이를 어떻게 다룰 지는 각 프록시들이 결정하게 됩니다.&lt;/p&gt;

&lt;h4 id=&quot;337-options&quot;&gt;3.3.7. OPTIONS&lt;/h4&gt;

&lt;p&gt;OPTIONS 메소드는 간단합니다. 웹 서버에게 어떤 종류의 메서드를 지원하는 지 물어보는 역할을 합니다. 아래 그림과 같이 말이죠.&lt;/p&gt;

&lt;h4 id=&quot;338-delete&quot;&gt;3.3.8. DELETE&lt;/h4&gt;

&lt;p&gt;DELETE 메서드는 말 그대로 리소스의 삭제를 요청합니다. 하지만 DELETE 메서드를 보냈다고 해서 리소스의 삭제가 보장되는건 아닙니다.&lt;/p&gt;

&lt;h4 id=&quot;339-확장-메서드&quot;&gt;3.3.9. 확장 메서드&lt;/h4&gt;

&lt;p&gt;확장 메서드는 HTTP 명세에 정의되지 않은 메서드입니다. 아래는 확장 메서드의 사례로, WebDAV HTTP 확장입니다.(19장에서 더 자세히 알아볼 것입니다.)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;메서드&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;LOCK&lt;/td&gt;
      &lt;td&gt;사용자가 리소스를 잠글 수 있게 해준다. 예를 들어, 문서를 편집하는 동안 다른 사람이 동시에 같은 문서를 편집하지 못하도록 문서를 잠글 수 있다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MKCOL&lt;/td&gt;
      &lt;td&gt;사용자가 문서를 생성할 수 있게 해준다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;COPY&lt;/td&gt;
      &lt;td&gt;서버에 있는 리소스를 복사한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MOVE&lt;/td&gt;
      &lt;td&gt;서버에 있는 리소스를 옮긴다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;34-상태-코드&quot;&gt;3.4. 상태 코드&lt;/h3&gt;

&lt;h4 id=&quot;341-100199-정보성-상태-코드&quot;&gt;3.4.1. 100~199: 정보성 상태 코드&lt;/h4&gt;

&lt;p&gt;HTTP/1.1 부터 도입되어서 실제로 정의된 코드는 100, 101 밖에 없습니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;상태코드&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;사유 구절&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;의미&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;100&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Continue&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;요청의 시작 부분 일부가 받아들여졌으며, &lt;br /&gt;클라이언트는 나머지를 계속 이어서 보내야 함을 의미한다. &lt;br /&gt;이것을 보낸 후, 서버는 반드시 요청을 받아 응답해야 한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;101&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Switching Protocols&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;클라이언트가 Upgrade 헤더에 나열한 것중 하나로, &lt;br /&gt;서버가 프로토콜을 바꾸었음을 의미한다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;101 코드는 간단하다. 하지만 100 코드는 더 자세히 알아볼 필요가 있습니다.&lt;/p&gt;

&lt;p&gt;100 코드는 클라이언트에서 서버로 엔터티 본문을 전송하기 전에, 서버가 그 엔터티 본문을 받아들일 것인지 확인하는 작업을 최적화 하기 위해 도입됐습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;클라이언트 - 100 Continue&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;상태코드는 응답 메세지에서 볼 수 있는 것입니다. 클라이언트 측에서 100 Continue 응답을 받고 싶다면 “Expect : 100-continue” 헤더를 보내면 됩니다. “Expect : 100-continue” 헤더를 받은 서버는 클라이언트쪽에서 엔터티를 보낼 것이라 생각하게 됩니다.&lt;/p&gt;

&lt;p&gt;서버가 100 Continue를 보냈다면 클라이언트는 엔터티 전송을 시작할 것입니다. 하지만 100코드는 HTTP/1.1 부터 도입된 코드이기 때문에 &lt;strong&gt;아직 서버 쪽에서 100 Continue를 보내지 못할 수도 있습니다.&lt;/strong&gt; 이때 클라이언트는 계속 기다리는게 아니라 &lt;strong&gt;약간의 타임아웃 이후 100 Continue가 없다면 그냥 엔터티를 전송해야 합니다.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;서버 - 100 Continue&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버가 “Expect : 100-continue” 헤더를 받는다면, 100 Continue 혹은 에러 코드로 응답을 해야 합니다.&lt;/p&gt;

&lt;p&gt;서버가 100 Continue를 보내기 전에 클라이언트쪽에서 엔터티의 일부나 전체를 받았다면 100 Continue를 보낼 필요 없이 요청에 대한 최종 응답을 보내야 합니다.&lt;/p&gt;

&lt;p&gt;서버가 Expect 요청을 받았지만 엔터티 본문을 읽기 전에 요청을 끝내기로 결정했다면 서버는 그냥 응답을 보내고 연결을 닫아서는 안됩니다. 그렇게 하면 클라이언트가 응답을 받을 수 없습니다.(이 부분은 4장을 읽고 다시 부연 설명하겠습니다.)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;프록시 - 100 Continue&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;클라이언트와 서버 사이엔 프록시가 있을 수 있습니다. 그럼 “Expect : 100-continue” 헤더 요청을 프록시가 받는다면 어떻게 될까요?&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;next-hop 서버가 HTTP/1.1 을 따르거나 어떤 버전을 따르는지 모를 때 : “Expect : 100-continue” 헤더 요청을 포함해 다음으로 전달.&lt;/li&gt;
  &lt;li&gt;next-hop 서버가 HTTP/1.1 이전 버전의 HTTP를 따를 때 : 417 Expectation Failed 에러를 뱉어야 함&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;그런데, 클라이언트는 Expect 요청을 보내지 않았지만 프록시가 클라이언트를 대신해 서버로 “Expect : 100-continue” 헤더를 포함시켜 요청을 보낼 수도 있습니다. 이때 프록시가 100 Continue 응답을 받았더라도 100 Continue응답을 클라이언트에 전하면 안됩니다. 클라이언트는 100 Continue응답을 어떻게 다룰 지 모를수 있기 때문이죠.&lt;/p&gt;

&lt;h4 id=&quot;342-200299-성공-상태-코드&quot;&gt;3.4.2. 200~299: 성공 상태 코드&lt;/h4&gt;

&lt;p&gt;200번대 상태코드는 요청이 성공했음을 나타내고, 요청의 종류에 따라 성공 코드가 달라집니다.&lt;/p&gt;

&lt;p&gt;7가지의 성공 상태 코드가 정의되어 있고 양이 많은 관계로 [여기][]에 따로 기록해두겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;343-300399-리다이렉션-상태-코드&quot;&gt;3.4.3. 300~399: 리다이렉션 상태 코드&lt;/h4&gt;

&lt;p&gt;300번대 상태코드는 리다이렉션을 뜻하면 다음과 같은 경우에 사용됩니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;클라이언트가 요청한 리소스가 옮겨지거나 변경됐을 때 요청한 리소스를 대신할 다른 대안 응답을 제시
    &lt;ul&gt;
      &lt;li&gt;Location 헤더에 새로운 위치를 담아 응답하며, 대부분의 브라우저는 Location헤더를 읽어 옮겨진 위치로 다시 요청한다. (ex - www.java.sun.com 으로 요청을 보내면 301 코드와 함께 Location: http://www.oracle.com/technetwork/java/index.html 헤더가 담겨오며, 브라우저는 Location으로 리다이렉트 한다.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;리소스에 대한 클라이언트의 로컬 복사본이 원래 서버와 비교했을 때 유효한지 확인 할 때
    &lt;ul&gt;
      &lt;li&gt;요청할 때 If-Modified-Since: ~~ 같은 헤더와 같이 사용해 해당 시간 이후에 수정된 리소스면 가져올 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;7가지의 라다이렉션 상태 코드가 정의되어 있고 [여기][]에 따로 기록해두겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;344-400499-클라이언트-에러-상태-코드&quot;&gt;3.4.4. 400~499: 클라이언트 에러 상태 코드&lt;/h4&gt;

&lt;p&gt;클라이언트측의 잘못으로 리소스를 가져오지 못할때를 알려주는 상태코드 입니다. 가장 흔한 400번대 에러는 존재하지 않는 URL을 요청하는 것으로 404 Not Found는 개발을 한다면 누구나 마주쳤을법한 에러코드 입니다.&lt;/p&gt;

&lt;p&gt;로그인등의 권한문제로 인해 발생하는 401 Unauthorized 역시 종종 볼 수 잇는 에러코드 입니다.&lt;/p&gt;

&lt;p&gt;18개의 에러코드가 정의되어 있으며 [여기][]에 기록해두겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;345-500599-서버-에러-상태-코드&quot;&gt;3.4.5. 500~599: 서버 에러 상태 코드&lt;/h4&gt;

&lt;p&gt;500번대 에러는 반대로 서버측의 잘못으로 요청을 처리하지 못하는 경우입니다. 서버 자체의 문제일 때도 있고 프록시, 게이트웨이 같은 서버의 보조 구성요소에서 발생한 에러일 수도 있습니다.&lt;/p&gt;

&lt;p&gt;6가지의 에러코드가 정의되어 있고 [여기][]에 기록해두었습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;35-헤더&quot;&gt;3.5. 헤더&lt;/h3&gt;

&lt;p&gt;앞서 말했듯이 헤더는 메세지의 속성을 설명해주며 아래와 같이 크게 5가지로 분류 됩니다.
|    분류     |                             설명                             |
| :———: | :———————————————————-: |
|  일반 헤더  | 요청, 응답 모두에서 쓰일 수 있는 헤더(ex - Date:Tue, 3 Oct 1997 …) |
|  요청 헤더  | 요청에 대한 부가정보를 제공하는 헤더(ex - Accept:text/html)  |
|  응답 헤더  | 응답에 대한 부가정보를 제공하는 헤더(ex - Server: Tiki-Hut/1.0) |
| Entity 헤더 | 엔터티 본문에 대한 부가정보를 제공하는 헤더(ex - Content-Type: text/html) |
|  확장 헤더  |        각 어플리케이션이 정의한 HTTP 명세에 없는 헤더        |&lt;/p&gt;

&lt;h4 id=&quot;351-일반-헤더&quot;&gt;3.5.1. 일반 헤더&lt;/h4&gt;

&lt;p&gt;일반 헤더는 요청, 응답 모두에서 유용한 기본적인 속성들을 가리킵니다.&lt;/p&gt;

&lt;p&gt;일반 캐시 헤더 : HTTP/1.0에서 도입된 헤더로, 요청시 마다 매번 서버로 가지 않게 로컬 복사본으로 캐시할 수 있게 해주는 헤더입니다. 최신 HTTP버전엔 매우 많은 캐시 헤더를 가지고 있습니다.&lt;/p&gt;

&lt;p&gt;대표적인 헤더들은 [여기][]에 모아뒀습니다.&lt;/p&gt;

&lt;h4 id=&quot;352-요청-헤더&quot;&gt;3.5.2. 요청 헤더&lt;/h4&gt;

&lt;p&gt;요청헤더는 요청시에만 사용되고 서버가 클라이언트에게 더 나은 응답을 주기 위해 사용됩니다.&lt;/p&gt;

&lt;p&gt;Accept 관련 헤더 : Accept, Accept-Charset, Accept-Language 등의 헤더를 통해 서버에게 클라이언트 자신의 선호와 능력을 알려줄 수 있습니다.&lt;/p&gt;

&lt;p&gt;조건부 요청 헤더 : 앞서 100 Continue 코드에서 언급된 Expect 헤더나 300 코드에서 언급된 If-Modified-Since 헤더 같이 클라이언트는 조건을 붙여 서버에게 요청을 할 수 있습니다. 이때 사용 되는 헤더가 조건부 헤더 입니다.&lt;/p&gt;

&lt;p&gt;요청 보안 헤더 : HTTP는 자체적으로 간단한 인증 요구/응답 체계를 가지고 있습니다. 이는 HTTP 트랜잭션을 더 안전하게 만들어 줍니다. 14장에서 자세히 알아볼 것입니다. Authorization, Cookie와 같은 헤더가 이때 사용되는 헤더 입니다.&lt;/p&gt;

&lt;p&gt;프록시 요청 헤더 : 프록시가 많아지며 프록시와 관련한 헤더 역시 등장했습니다. 6장에서 자세히 알아봅니다. Max-Forwards, Proxy-Connection 등의 헤더가 있습니다.&lt;/p&gt;

&lt;p&gt;대표적인 헤더들은 [여기][]에 모아뒀습니다.&lt;/p&gt;

&lt;h4 id=&quot;353-응답-헤더&quot;&gt;3.5.3. 응답 헤더&lt;/h4&gt;

&lt;p&gt;응답 헤더는 응답시에 사용되어 클라이언트가 응답을 다루기 쉽게 도와줍니다.&lt;/p&gt;

&lt;p&gt;협상 헤더 : 서버에 프랑스어, 독일어로 번역된 같은 HTML문서가 있는 것과 같이 한 요청에 대해 여러 선택지가 있을 경우 HTTP/1.1은 그것들 중 어떤 표현을 택할 것인지 협상하도록 지원해준다. 17장에서 자세히 살펴보며,  Accept-Ranges, Vary와 같은 헤더가 사용됩니다.&lt;/p&gt;

&lt;p&gt;응답 보안 헤더 : 요청헤더에서 요청 보안 헤더가 있었듯이 응답에서도 응답 보안헤더가 있습니다. 14장에서 자세히 살펴보며 Proxy-Authenticate, Set-Cookie와 같은 헤더가 있습니다.&lt;/p&gt;

&lt;p&gt;대표적인 헤더들은 [여기][]에 모아뒀습니다.&lt;/p&gt;

&lt;h4 id=&quot;354-엔터티-헤더&quot;&gt;3.5.4. 엔터티 헤더&lt;/h4&gt;

&lt;p&gt;엔터티 헤더는 요청, 응답 모두 등장할 수 있으며 엔터티에 대한 광범위한 부가정보를 제공합니다.&lt;/p&gt;

&lt;p&gt;콘텐츠 관련 헤더 : Content-Base, Content-Language, Content-Location 과 같이 콘텐츠 헤더는 콘텐츠에 대한 구체적인 정보를 제공해줍니다.&lt;/p&gt;

&lt;p&gt;엔터티 캐싱 헤더 : 일반 헤더에서 언급된 일반 캐싱 헤더는 언제, 어떻게 캐시가 되어야 하는지 알려줬다면, 엔터티 캐싱 헤더는 리소스의 사본이 유효한지, 캐시된 리소스가 더 이상 유효하지 않게 되는 시점은 언제인지 등 엔터티 캐싱에 대한 정보를 제공합니다. 7장에서 자세히 살펴볼 것입니다.&lt;/p&gt;

&lt;p&gt;대표적인 헤더들은 [여기][]에 모아뒀습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;ajax 보낼때 말곤 헤더는 관찰만 했지 직접 조작해보진 않았습니다. 이렇게 헤더의 종류가 많고 다양하다니! 그리고 3장째 보고 있는데 가장 무서운 점은 모두 뒷장에서 더 자세히 설명해준다는 것입니다. (얼마나 자세히 설명해주시려고… :cry:)&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>HTTP 2 - URL과 리소스</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C2/"/>
   <updated>2020-03-09T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드2</id>
   <content type="html">
&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;p&gt;앞 장에서 리소스, URI, URL, URN에 대해 간략히 살펴봤었습니다. 이번 장에선 URL과 리소스에 대해 자세히 알아볼 것입니다.&lt;/p&gt;

&lt;p&gt;특정한 하나를 식별해야 하는 것에는 모두 식별하는 체계가 있습니다. 특정한 집을 식별하기 위해 사용되는 주소, 책을 식별하기 위한 ISBN번호, 사람을 식별하기 위한 주민등록번호 등…&lt;/p&gt;

&lt;p&gt;URI는 인터넷 상에서 리소스를 식별하기 위한 체계입니다. 그리고 같은 주소를 식별하는데 지번주소, 도로명주소가 있듯이 리소스를 식별하는데에도 URL과 URN이 있습니다.&lt;/p&gt;

&lt;p&gt;URN은 아직 개발중이고 대중적으로 사용되지 않기 때문에 URL에 대해서 집중적으로 알아볼 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;21-인터넷의-리소스-탐색하기&quot;&gt;2.1. 인터넷의 리소스 탐색하기&lt;/h3&gt;
&lt;p&gt;몇 가지 URL의 사례를 살펴보겠습니다.
 1) http://www.joes-hardware.com/seasonal/index-fall.html
 여기서 http는 ‘스킴’이라고 합니다. 리소스에 접근하는 방법을 말해줍니다.
 www.joes-hardware.com 은 서버의 위치 입니다. 리소스가 어느 서버에 호스팅 되었는지 알려줍니다.
 /seasonal/index-fall.html은 서버 내의 리소스 경로 입니다.&lt;/p&gt;

&lt;p&gt;2) mailto:president@whitehouse.gov
 위 URL의 mailto는 이메일 전송 프로토콜 입니다. 다른 URL들과는 형식이 조금 다릅니다.&lt;/p&gt;

&lt;p&gt;3) ftp://ftp.lots-o-books.com/pub/complete-price-list.xls
 ftp(File Transfer Protocol)는 파일 전송 프로토콜이고 ftp.lots-o-books.com는 서버 주소를, /pub/complete-price-list.xls는 서버 내 리소스 위치 입니다.&lt;/p&gt;

&lt;p&gt;4) rtsp://www.joes-hardware.com:554/interview/cto_video
 rtsp(Real Time Streaming Protocol)는 스트리밍 전송 프로토콜입니다.&lt;/p&gt;

&lt;p&gt;대부분의 URL은 ‘스킴://서버위치/리소스경로’로 이루어져 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;211-url이-있기-전-암흑의-시대&quot;&gt;2.1.1. URL이 있기 전 암흑의 시대&lt;/h4&gt;
&lt;p&gt;‘스킴://서버위치/리소스경로’의 어느정도 통일된 URL을 사용하게 된건 그리 오래되지 않았습니다. URL이 있기 이전엔 애플리케이션마다 리소스를 찾는 방법이 매우 다양했습니다.&lt;/p&gt;

&lt;p&gt;책에 나온 사례를 보겠습니다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;URL이 있기 전에 친구와 complete-catalog.xls이라는 파일을 공유하려고 했다면 이렇게 말해야 했을 것이다. “ftp.joes-hardware.com에 FTP로 접속해. 익명 사용자로 로그인한 다음 비밀번호로 네 이름을 입력해. pub 디렉토리로 이동한 다음, 바이너리 형식으로 전환해. 이제 complete-catalog.xls란 이름의 파일을 너의 로컬 파일 시스템에 내려 받은 다음 보면 될 거야.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;URL이 없던 시절엔 이렇게 직접 서버에 커넥션을 맺고, 디렉터리를 찾아서 리소스를 받아왔다고 합니다. URL과 웹 브라우저가 발달된 지금은 아래와 같이 진행됩니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;위의 복잡한 설명 대신에, 친구에게 브라우저에서 “ftp://frp.lots-o-books.com/pub/complete-catalog.xmls 를 열어봐” 라고 말하면 된다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;다시 한 번 선배 개발자님들이 존경스러워 지는 순간입니다.&lt;/p&gt;

&lt;p&gt;그리고 사실 요즘 웹 브라우저를 사용한다면 ftp를 사용할 필요도 없습니다. 저도 개발을 시작하기 전엔 URL에 http, https 말곤 다른 프로토콜이 들어가는걸 본적이 없으니까요. http 프로토콜로 파일 다운을 요청해도 1장에서 설명했고 뒤에서 설명할 게이트웨이, 프록시 등이  ftp 통신을 대신 해줍니다.&lt;/p&gt;

&lt;h3 id=&quot;22-url-문법&quot;&gt;2.2. URL 문법&lt;/h3&gt;
&lt;p&gt;URL의 문법은 스킴(앞서 본 http, ftp, mailto 등..)에 따라 달라집니다. 하지만 대부분 스킴의 URL문법은 일반적인 URL 문법을 따릅니다. 몇몇 스킴을 제외한다면 말이죠.&lt;/p&gt;

&lt;p&gt;일반적인 URL 문법은 아래와 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;스킴&gt;://&lt;사용자이름&gt;:&lt;비밀번호&gt;@&lt;호스트&gt;:&lt;포트&gt;/&lt;경로&gt;;&lt;파라미터&gt;?&lt;질의&gt;#&lt;프래그먼트&gt;
&lt;/프래그먼트&gt;&lt;/질의&gt;&lt;/파라미터&gt;&lt;/경로&gt;&lt;/포트&gt;&lt;/호스트&gt;&lt;/비밀번호&gt;&lt;/사용자이름&gt;&lt;/스킴&gt;
&lt;/blockquote&gt;

&lt;p&gt;각 &amp;lt; &amp;gt; 를 컴포넌트라고 부릅니다. 위 모든 컴포넌트를 모두 갖는 URL 스킴은 거의 없습니다.&lt;/p&gt;

&lt;p&gt;각 컴포넌트에 대해 자세히 알아봅시다.&lt;/p&gt;

&lt;h4 id=&quot;221-스킴-사용할-프로토콜&quot;&gt;2.2.1. 스킴: 사용할 프로토콜&lt;/h4&gt;
&lt;p&gt;스킴은 리소스에 접근하는 방법을 알려주는 아주 중요한 컴포넌트입니다. 스킴은 대소문자를 가리지 않고 나머지 부분들과 ‘ : ‘로 구분합니다.&lt;/p&gt;

&lt;h4 id=&quot;222-호스트와-포트&quot;&gt;2.2.2. 호스트와 포트&lt;/h4&gt;
&lt;p&gt;리소스를 찾기 위해선 리소스를 갖고 있는 컴퓨터와 그 컴퓨터 내에 서버가 어딘인지 알아야 합니다.
 호스트 컴포넌트가 리소스를 가지고 있는 컴퓨터(장비)를 가리키고, 포트 컴포넌트가 컴퓨터 내에 어느 서버인지를 가리킵니다. 
 TCP 프로토콜을 사용하는 HTTP의 기본 포트는 80입니다.&lt;/p&gt;

&lt;h4 id=&quot;223-사용자-이름과-비밀번호&quot;&gt;2.2.3. 사용자 이름과 비밀번호&lt;/h4&gt;
&lt;p&gt;일반인이나 저와 같이 이제 막 개발에 입문한 개발자라면 URL에 id와 pw가 들어가는 걸 본적이 없을겁니다. 
 어느 스킴에서 사용자 이름이나 비밀번호를 요구하지만 입력하지 않은 경우 사용자 이름엔 기본 사용자이름인 ‘anonymous’ 가 들어가고, 비밀번호는 브라우저마다 가지고 있는 기본 비밀번호가 입력됩니다.(크롬 - chrome@example.com, IE - IEUser) 
 따라서 아래와 같은 URL들이 가능합니다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;ftp://ftp.prep.ai.mit.edu/pub/gnu
ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu
ftp://anonymous:my_password@ftp.prep.ai.mit.edu/pub/gnu
http://joe:joespasswd@www.joes-hardware.com/sales_info.txt&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;사용자이름 컴포넌트와 비밀번호 컴포넌트는 ‘ : ‘로 구분하고 비밀번호 컴포넌트와 호스트 명 컴포넌트는 ‘@’로 구분합니다. 위의 URL들을 보면 우리가 잘 알고있는 메일 주소와 비슷하게 생겼습니다.&lt;/p&gt;

&lt;p&gt;우리가 알고있는 메일 주소도 사실은 URL 스킴입니다. ntz4kiseung@gmail.com 제 메일주소입니다. 여기서 ntz4kiseung이 사용자명, 비밀번호 컴포넌트는 생략되고 ‘@’로 비밀번호와 호스트를 구분해줍니다. 그리고 제 메일과 관련한 리소스들을 가지고 있는 서버는 gmail.com이 되는 겁니다.&lt;/p&gt;

&lt;h4 id=&quot;224-경로&quot;&gt;2.2.4. 경로&lt;/h4&gt;
&lt;p&gt;URL 경로는 리소스가 서버 내 어디에 위치해 있는지를 지정합니다. 폴더 디렉터리를 생각하면 쉬울 것 같습니다. 각 경로내 디렉토리는 ‘ / ‘로 각각의 경로 조각으로 나뉩니다. 각 경로조각은 각각 파라미터를 가질 수 있습니다.&lt;/p&gt;

&lt;p&gt;윈도우에서 사용하는 백슬래쉬 ‘ \ ‘가 아니라 그냥 슬래쉬 ‘ / ‘임을 한 번더 각인합시다. 
 여담으로 첫 프로젝트에 나갔을때 윈도우 환경인 로컬 서버에서 파일 저장 경로를 ‘ \ ‘로 지정해 ‘folder1 &amp;gt; folder2 &amp;gt; folder3 &amp;gt; file1.txt’ 와 같은 디렉토리에 파일이 저장되게 해뒀었습니다. 그 후에 팀원들이 공동으로 사용하는 리눅스 기반의 개발서버에 올려놓으니까 원래 구성해놓은 디렉토리 구조를 따라가는게 아니라  ‘folder1\folder2\folder3'라는 이름의 폴더가 생기고 그 안에 file1.txt가 만들어 졌었습니다.&lt;/p&gt;

&lt;h4 id=&quot;225-파라미터&quot;&gt;2.2.5. 파라미터&lt;/h4&gt;
&lt;p&gt;웹 서비스가 방대해지면 단순히 호스트명, 포트, 리소스 경로만 가지고는 리소스들을 특정하기 힘들어 집니다. 이때 서버는 경로 안에서 더 상세하게 리소스를 특정하기 위해 파라미터들을 요구할 수 있습니다. 
 파라미터는 경로와 ‘ ; ‘ 로 구분되며 {name}={value}의 형태로 전달됩니다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;ftp://prep.ai.mit.edu/pub/gnu;type=d&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위의 사례에서 type이 name, d가 value인 type=d 파라미터가 사용됐습니다.&lt;/p&gt;

&lt;p&gt;2.2.4.에서 말했듯이 경로조각 마다 파라미터가 사용될 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;hammers경로 조각에 ‘sale=false’ 파라미터가 사용됐고 index.html 경로조각에 ‘graphics=true’ 파라미터가 사용됐습니다.&lt;/p&gt;

&lt;h4 id=&quot;226-질의-문자열query-string&quot;&gt;2.2.6. 질의 문자열(Query String)&lt;/h4&gt;
&lt;p&gt;사실 이전에 웹을 배울때 URL에서 리소스 다음 ? 뒤에 오는 부분을 ‘파라미터’라고 부르곤 했습니다. 책을 보면서 다시 용어를 제대로 확립해야 할것 같습니다. parameter는 2.2.5. 에서 본 ‘ ; ‘ 로 구분되는게 파라미터고 파라미터라고 편하게 부르면서 사용하던 ‘ ? ‘ 뒤 name=value쌍이 Query String이었습니다.&lt;/p&gt;

&lt;p&gt;Query String은 말그대로 Query를 사용하는 데이터베이스 기반의 서비스에서 많이 사용됩니다. 요청받을 리소스 형식의 범위를 좁히기 위해 사용됩니다. 게시판에서 글 하나를 선택시 하나의 글을 지정할때, 게시판 조회시 필터 항목들을 걸어줄때 사용하곤 합니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;http://www.joes-hardware.com/inventory-check.cgi?item=12731
http://www.joes-hardware.com/inventory-check.cgi?item=12731&amp;amp;color=blue&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Query String끼리 ‘ &amp;amp; ‘로 연결해 여러개의 Query String을 보낼 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;227-프래그먼트&quot;&gt;2.2.7. 프래그먼트&lt;/h4&gt;

&lt;p&gt;HTML같은 형식의 리소스는 더 작은 단위로 나뉠 수 있습니다. 전체 리소스 중 특정 부분을 가리키기 위해 사용하는 것이 프래그먼트 컴포넌트입니다.  ‘#’으로 연결되어 사용됩니다. 아래와 같이&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;http://www.joes-hardware.com/tools.html/#drills&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;모든 tool들을 보여주는 tools.html 리소스에서 드릴 부분만 #drill로 특정했습니다.&lt;/p&gt;

&lt;p&gt;프래그먼트에서 주의할 점은 클라이언트쪽에서 프래그먼트를 서버로 보내지 않는다는 것입니다. 온전한 HTTP 객체를 요청 및 응답받은 이후에 웹 클라이언트 어플리케이션쪽에서 프래그먼트에 맞는 리소스의 일부분만 사용자에게 보여줍니다. 브라우저는 정말 많은 일을 하는 것 같습니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;23-단축-url&quot;&gt;2.3. 단축 URL&lt;/h3&gt;

&lt;p&gt;단축 URL은 사용하는 웹 클라이언트 프로그램에 따라 지원할 수도 있고 안할 수도 있습니다. 단축 URL은 사용자가 URL을 다루기 쉽게 하기 위해 사용됩니다.&lt;/p&gt;

&lt;h4 id=&quot;231-상대-url&quot;&gt;2.3.1. 상대 URL&lt;/h4&gt;

&lt;p&gt;상대 URL은 웹 페이지를 제작해본 경험이 있다면 자연스럽게 써봤을 것이다. http://www.servername.com/ 등 앞부분을 생략하고 리소스 부분만 기술한 URL입니다.&lt;/p&gt;

&lt;p&gt;상대 URL을 사용하면 유지보수에 용이해진다. html 문서 안에서 이미지를 삽입할 때&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;img path=&quot;http://www.servername.com/images/img1.png&quot; /&gt;
&lt;img path=&quot;http://www.servername.com/images/img2.png&quot; /&gt;
&lt;img path=&quot;http://www.servername.com/images/img3.png&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이런 식으로 지정해 둔다면 후에 이미지 리소스들을 /images에서 /public/images로 옮겨야 할 때 혹은 도메인 네임을 servername.com에서 server.com으로 옮길때 위 코드를 모두 수정해줘야 할 것입니다. 하지만&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;img path=&quot;/images/img1.png&quot; /&gt;
&lt;img path=&quot;/images/img2.png&quot; /&gt;
&lt;img path=&quot;/images/img3.png&quot; /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위와 같이 상대 URL을 사용한다면 Base URL만 바꿔주면 다시 제대로 리소스를 찾아올 수 있습니다.&lt;/p&gt;

&lt;p&gt;상대 URL을 사용하기 위해선 Base URL을 알아내야 한다. Base URL은&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;리소스에서 명시적으로 지시 : &amp;lt; BASE &amp;gt; HTML 태그를 통해&lt;/li&gt;
  &lt;li&gt;리소스를 포함하고 있는 Base URL : 상대 URL이 사용된 리소스를 포함하는 상위 리소스의 Base URL(위의 예시에선 &amp;lt; img &amp;gt; 태그가 사용된 html 문서의 Base URL)&lt;/li&gt;
  &lt;li&gt;Base URL이 없는 경우 : 절대 URL만으로 이루어진 경우 혹은 불완전하거나 깨진 URL&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;위와 같은 방법으로 구해집니다.&lt;/p&gt;

&lt;p&gt;Base URL과 상대 URL을 알았다면 둘을 조합해 실제 요청할 절대 URL 경로를 알아내야 합니다. 단순히 붙이면 될 거라 생각하지만(실제로 거진 잘 될 것 같지만) 상대 URL을 절대 URL로 변환하는 알고리즘이 공식적으로 존재합니다. 그 알고리즘은 RFC1808에서 최초 제안되고 RFC2396에서 포함되었습니다. 하단의 사진과 같은 알고리즘인데 필요하면 추후에 확인해도 좋을 것 같습니다.&lt;/p&gt;

&lt;p&gt;사진 넣기&lt;/p&gt;

&lt;h4 id=&quot;232-url-확장&quot;&gt;2.3.2. URL 확장&lt;/h4&gt;

&lt;p&gt;URL 확장은 웹 브라우저마다 제공해주는 범위와 방식이 다릅니다. 크게 호스트명 확장, 히스토리 확장으로 나뉠 수 있습니다.&lt;/p&gt;

&lt;p&gt;호스트명 확장 : 호스트명 yahoo를 입력하면 웹 브라우저에서 www.과 .com을 붙여 완성된 www.yahoo.com을 만들어주는 방식입니다. 요즘 브라우저들에선 url입력창이 각 브라우저의 검색창 역할을 하므로 호스트명 확장은 요즘엔 꽤 보기 힘들어진 것 같습니다.&lt;/p&gt;

&lt;p&gt;히스토리 확장 : 과거에 사용자가 방문했던 기록을 토대로 URL을 완성해줍니다. 제가 쓰는 크롬 브라우저에선 URL 창에 y만 쳐도 www.youtube.com이 완성되고 n만 눌러도 www.netflix.com이 완성됩니다. 개인적으로 네이버에 접속하고 싶은데 넥플릭스에 접속되서 가끔 불편함을 느낍니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;24-안전하지-않은-문자shady-characters&quot;&gt;2.4. 안전하지 않은 문자(Shady Characters)&lt;/h3&gt;

&lt;p&gt;컴퓨터 시스템은 영어 중심으로 발달해왔기 때문에 기본 문자 집합역시 US - ASCII가 대부분이었습니다. 알파벳과 일부 특수문자만을 가지고 있는 작은 문자 집합 입니다.&lt;/p&gt;

&lt;p&gt;하지만 US - ASCII 문자열이라고 해서 모두가 URL에 사용될 수 있는 것은 아니었습니다. 왜냐하면 URL의 설계자들은 다음과 같은 사항들을 고민했는데&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;어떤 인터넷 프로토콜과도 호환이 되어야 한다.&lt;/li&gt;
  &lt;li&gt;정보가 유실될 위험 없이 URL을 전송해야 한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;위와 같은 제약사항들을 만족시키려다 보니 URL에 사용될 수 없는 안전하지 않은 문자들이 생겼습니다. 특정 프로토콜에서 전송시 제거하는 문자, URL 컴포넌트를 구분하는 등 URL에서 이미 특정 기호로 쓰이기 위해 예약된 문자들이 그것들입니다. 아래의 표가 URL에 그대로 사용되지 못하는 문자열들입니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;문자&lt;/th&gt;
      &lt;th&gt;선전 및 제한&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;%&lt;/td&gt;
      &lt;td&gt;인코딩된 문자에 사용할 이스케이프 토큰으로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/&lt;/td&gt;
      &lt;td&gt;경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;.&lt;/td&gt;
      &lt;td&gt;경로 컴포넌트에서 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;..&lt;/td&gt;
      &lt;td&gt;경로 컴포넌트에서 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;#&lt;/td&gt;
      &lt;td&gt;프래그먼트의 구획 문자로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;?&lt;/td&gt;
      &lt;td&gt;질의 문자열의 구획 문자로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;;&lt;/td&gt;
      &lt;td&gt;파라미터의 구획 문자로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;:&lt;/td&gt;
      &lt;td&gt;스킴, 사용자이름/비밀번호, 호스트/포트의 구획 문자로 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$, +&lt;/td&gt;
      &lt;td&gt;선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;@ &amp;amp; =&lt;/td&gt;
      &lt;td&gt;특정 스킴에서 특별한 의미가 있기 때문에 선점&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;{ } | \ · [ ] `&lt;/td&gt;
      &lt;td&gt;게이트웨이와 같은 여러 전송 에이전트에서 불안전하게 다루기 때문에 제한됨&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;lt; &amp;gt; “&lt;/td&gt;
      &lt;td&gt;안전하지 않음. 웹 문서에서 URL을 구분지어 표시하듯이,&lt;br /&gt; URL 범위 밖에서 역할이 있는 문자이기 때문에 반드시 인코딩 해야 한다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;241-url-문자-집합&quot;&gt;2.4.1. URL 문자 집합&lt;/h4&gt;

&lt;p&gt;하지만 위와 같은 문자열을 URL에 포함해야 하는 경우도 생겼고, URL이 특정 이진 데이터를 포함해야 하는 경우도 생겼으며, 컴퓨터가 확산됨에 따라 유럽언어, 비서구권 언어들을 표현해야 했습니다.&lt;/p&gt;

&lt;p&gt;이를 해결하기 위해 URL 설계자들은 흔히 Percent Encoding이라고 부르는 인코딩 체계를 도입했습니다.&lt;/p&gt;

&lt;h4 id=&quot;242-인코딩-체계&quot;&gt;2.4.2. 인코딩 체계&lt;/h4&gt;

&lt;p&gt;Percent Encoding은 기본적으로 ‘%+16진수 2개’ 로 이루어집니다.&lt;/p&gt;

&lt;p&gt;’ ~ ‘ 같은 경우 ASCII 코드가 126이기 때문에 %7E 로 표현됩니다.&lt;/p&gt;

&lt;p&gt;1바이트 문자인 기존의 US - ASCII 내의 Shady Character들은 %__ 로 표현이 가능합니다. 하지만 언어권에 따라 2Byte 문자, 3Byte문자가 있습니다. 한글의 경우엔 3Byte 문자입니다.&lt;/p&gt;

&lt;p&gt;‘가’ 의 경우 Unicode는 44032 (= 0xAC00) 인데 이를 UTF-8로 인코딩 하면 234, 176, 128 이며 각각 %EA %B0 %80로 인코딩 됩니다. 결국 ‘가’ -&amp;gt; ‘%EA%B0%80’ 가 되는 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;243-문자-제한&quot;&gt;2.4.3. 문자 제한&lt;/h4&gt;

&lt;p&gt;위 표가 제한되는 문자들입니다.&lt;/p&gt;

&lt;h4 id=&quot;244-좀-더-알아보기&quot;&gt;2.4.4. 좀 더 알아보기&lt;/h4&gt;

&lt;p&gt;Shady Character를 사용했다고 해서 모든 요청이 실패하는 것은 아닙니다. 상황에 따라 성공할 수도, 실패할 수도 있습니다. 하지만 어플리케이션은 약속대로 구현이 되어야 합니다.&lt;/p&gt;

&lt;h3 id=&quot;25-스킴의-바다&quot;&gt;2.5. 스킴의 바다&lt;/h3&gt;

&lt;p&gt;이 절에선 다양한 스킴을 요약해 두었습니다. 단순 정보 나열이지만 본 포스팅에 포함시키면 너무 방대해 질것 같아 [여기][https://www.naver.com]에 따로 빼두겠습니다.&lt;/p&gt;

&lt;h3 id=&quot;26-미래&quot;&gt;2.6. 미래&lt;/h3&gt;

&lt;p&gt;URL은 인터넷에 존재하는 모든 리소스를 특정할 수 있습니다. 확장성도 좋아 새로운 포맷을 추가할 수도 있습니다.&lt;/p&gt;

&lt;p&gt;하지만 현재 URL이 가지고 있는 약점이 있습니다. URL은 리소스의 위치를 특정하는 것이기 때문에 리소스가 옮겨진다면 기존의 URL은 쓸모 없어지게 됩니다.&lt;/p&gt;

&lt;p&gt;이를 해결하기 위해 IEFT(Internet Engineering Task Force) 에선 URN(Uniform Resource Names)라는 새로운 URI 표준 작업에 들어갔습니다. URN은 Name으로 리소스를 특정하기 때문에 리소스의 위치가 옮겨지더라도 리소스를 찾을 수 있습니다.&lt;/p&gt;

&lt;p&gt;URL과 URN을 호환할 수 있게하는 기술도 연구중입니다. PURL(Persistent Uniform Resource Locators)입니다. URL과 URN을 중개해주는 역할을 합니다.&lt;/p&gt;

&lt;h4 id=&quot;261-지금이-아니면-언제&quot;&gt;2.6.1. 지금이 아니면, 언제?&lt;/h4&gt;

&lt;p&gt;사실 URN은 이미 사용가능합니다. 하지만 아직 연구단계이기도 하고, 기존의 URL환경이 워낙 방대하기 때문에 교체되는데도 시간이 걸릴것입니다.&lt;/p&gt;

&lt;p&gt;그리고 무엇보다 URL을 URN으로 대체하는 것은 웹 개발 커뮤니티에서 긴급한 사안으로 생각되지 않습니다.&lt;/p&gt;

&lt;p&gt;하지만 URN도 계속 발전해나갈 것이며 언젠가 한계를 가진 URL을 대체할 것입니다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;마치며&quot;&gt;마치며&lt;/h3&gt;

&lt;p&gt;두 번째 포스팅인데 확실히 첫 번째 포스팅보단 빨라진 것 같습니다. 다만 아직 포스팅의 전체적인 구조를 어떻게 구성해 나가야 할지는 고민중입니다. 정말 책을 요약하는 데에서 끝내는게 정확한 정보전달 차원에서 맞는건지, 개인적인 이해와 사견, 비유등을 덧붙여도 좋을지 고민이 됩니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>잡플래닛 면접 후기 스크래퍼</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/Job-Planet-Scraper/"/>
   <updated>2020-03-08T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/Job-Planet-Scraper</id>
   <content type="html">
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;면접 준비하던 중 개인적인 용도로 사용하려 제작 했으나 혹시 쓰실 분들은 참고하셔도 좋을 것 같아 올립니다. 따로 깃헙에 올릴정도는 아니고 그냥 간단한 스크립트 수준입니다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;우선 필요한 모듈을 불러오고 면접 후기들을 담을 Review 클래스를 만듭니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;BeautifulSoup은 파이썬 웹 크롤링에 많이 사용되는 라이브러리라고 합니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bs4&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt;
  
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Review&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;department&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;way&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;department&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;department&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;way&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;way&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_date&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 로그인 페이지와 Id, Pw, 크롤링할 페이지, 시작~끝 페이지를 설정합니다.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;여기서 중요한건, Id는 잡플래닛 &lt;strong&gt;면접 후기 열람이 가능한 Id여야 합니다!!&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;BASE_URL은 크롤링 시작할 면접 후기 페이지의 1페이지 URL 입니다. (직급, 직종 등 필터링 걸어도 상관 없습니다.)&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;img src=&quot;/public/image/Daily Thoughts/crawler_url.png&quot; alt=&quot;crawler_url.png&quot; /&gt;&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;LOGIN_PAGE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://www.jobplanet.co.kr/users/sign_in&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 고정
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'userId'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# id
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;PW&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'userPw'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# pw
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;BASE_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://www.jobplanet.co.kr/companies/87444/interviews_by_filter?by_occupation=11600&amp;amp;by_job_rank=&amp;amp;by_success=&quot;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# 각자 원하는 회사의 면접후기 url
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;BASE_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'&amp;amp;page='&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 고정
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 시작 페이지
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;end_page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;104&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 끝 페이지
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;다음으로 한 페이지를 크롤링 하는 함수를 만들어 줍니다. 작성일 기준의 잡플래닛의 html에 맞게 짜여졌으므로 나중엔 작동 안할 가능성이 큽니다. 입력받은 url을 get 하고 get의 결과를 파싱하는 과정입니다.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_one_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;gt;&amp;gt; &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# request
&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# parer
&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;bs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'html.parser'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# sections
&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;sections&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'section'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attrs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'class'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'content_ty4'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;reviews_per_page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sections&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;c1&quot;&gt;# 부서/직급/게시일
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;department_postdate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'div'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attrs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'class'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'content_top_ty2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;department_postdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'span'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attrs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'class'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'txt2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'  '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;department&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;department_postdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\xa0&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'    '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'|'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

          &lt;span class=&quot;c1&quot;&gt;# 면접일
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'dd.txt1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'0000/00'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 없을 수도 있어서
&lt;/span&gt;
          &lt;span class=&quot;c1&quot;&gt;# 면접 결과
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.now_list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'dd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'  '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

          &lt;span class=&quot;c1&quot;&gt;# 제목
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.us_label'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'No Title'&lt;/span&gt;

          &lt;span class=&quot;c1&quot;&gt;# 본문
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;section_body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.content_body_ty1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;df_tit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section_body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.df_tit'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;df1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;section_body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.df1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;면접질문&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'No Question'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'면접답변 혹은 면접느낌'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'No answer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'채용방식'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'No 채용방식'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'발표시기'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'No 발표시기'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_tit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'  '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

          &lt;span class=&quot;c1&quot;&gt;# 배열에 한 게시글 담음
&lt;/span&gt;          &lt;span class=&quot;n&quot;&gt;reviews_per_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Review&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;department&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;면접질문&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;면접답변 혹은 면접느낌&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;채용방식&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body_dic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;발표시기&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

      &lt;span class=&quot;c1&quot;&gt;# 한 페이지에서 가져온 게시글 배열을 리턴
&lt;/span&gt;      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reviews_per_page&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;이제 준비는 끝났습니다. request Session을 만들어 로그인 한 다음, 로그인한 세션 안에서 지정한 페이지들을 크롤링 해줍니다.
    &lt;ul&gt;
      &lt;li&gt;페이지 수 만큼의 request 및 파싱을 동기식으로 처리하기 때문에 조금 느립니다.&lt;/li&gt;
      &lt;li&gt;비동기적으로 request를 보내 빠르게 크롤링할까 했으나, 파이썬 비동기는 다뤄본 적이 없어 투자대비 효율이 떨어질 것 같아 당시엔 하지 않았습니다.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# 로그인
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LOGIN_PAGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LOGIN_INFO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;'user[email]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;'user[password]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PW&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;login_req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LOGIN_PAGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LOGIN_INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      
    &lt;span class=&quot;c1&quot;&gt;# 크롤링
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_one_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;파일을 저장해줍니다. 저장 형식은 각자 편한대로 수정하면 될 것 같습니다.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'_'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'wt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;====================================================================&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;====================================================================&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;department&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; // 게시일 : &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;postdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; // 면접일 : &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; // 결과 : &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt; Title &amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt; 면접질문 &amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt; 면접답변 혹은 면접느낌 &amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt; 채용방식 &amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;way&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt; 발표시기 &amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;-------------------------------------------------------&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>C사 지원, 코딩테스트, 면접</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/C-Company/"/>
   <updated>2020-03-08T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/C-Company</id>
   <content type="html">&lt;p&gt; 2월 초에 회사에 다니며 C사에 지원했다가 결과나 나온 지 꽤 됐지만, 기록을 남길 겸 해서 끄적여 봅니다!&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;지원&quot;&gt;지원&lt;/h3&gt;

&lt;p&gt; 퇴사를 결심하고 이직을 준비 하던 중 C사의 신입 개발자 공고를 봤다. C사는 신입보다 경력자를 많이 뽑는다고 알고 있어서 기대하고 있지 않았는데 발견하고 부랴부랴 지원했다. C사에서 제공한 이력서에 있는 거 없는 거 모아서 꾸역꾸역 채워넣었다.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;코딩테스트&quot;&gt;코딩테스트&lt;/h3&gt;

&lt;p&gt; 당시 재직중이기도 하고, 이제 막 이직 준비를 시작했던 터라 사실 코딩테스트에 자신이 좀 없었다. 3문제가 나왔는데 정확히 상, 중, 하 난이도로 나왔다. 중, 하는 대부분의 지원자가 풀 수 있을거라 생각했고, 상 문제는 다들 시도는 하지만 완성까지는 힘들지 않을까 생각했다. 물론, 나도 중, 하는 모두 풀고 상 문제를 건드리다가 끝났다.&lt;/p&gt;

&lt;p&gt; 코딩테스트가 7시여서 퇴근하고 집에 가면 좀 늦을 것 같았다. 당시 프로젝트 PM님안테 30분만 일찍 보내달라고 할지.. 끝나고 카페에서 볼 지 고민하다가 당시 파견중이던 회사의 프로젝트 룸에서 보게됐다. 😂  다행히 우리 회사는 야근을 안해서 눈치 안보고 코딩테스트 볼 수 있었다.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;면접&quot;&gt;면접&lt;/h3&gt;

&lt;p&gt; 면접도 회사를 다니면서 준비했다. 간단한 파이썬 크롤러..?까진 아니고 &lt;a href=&quot;/posts/daily%20thoughts/Job-Planet-Scraper/&quot;&gt;스크래퍼&lt;/a&gt; 정도를 만들어서 C사의 모든 면접 후기를 뽑아냈다. CS 지식을 많이 물어본다길래 열심히 준비해갔다!&lt;/p&gt;

&lt;p&gt; 면접을 보러 갔는데, 올해부터 면접의 유형이 바뀌었다고 면접 3시간 내내 CS 지식관련 질문은 단 1개만 받았다. 그 외의 시간은 면접관님과의 1:1 라이브코딩… 숨막히는 줄 알았다…&lt;/p&gt;

&lt;p&gt; 면접에서 라이브코딩을 하는건 난생 처음이라 너무 어버버버 했다. 3시간 내내 어버버버 했지만 2차 면접 같은 거 없이 한 번에 결정난 다는건 좋았다. 하지만 결과는.. 탈락 😥😥&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;여담&quot;&gt;여담&lt;/h3&gt;

&lt;p&gt; 비록 떨어졌지만 애초에 지원할 때 목표가 ‘C사같은 좋은 회사에 면접이라도 한 번 보자!’ 였으니 소기의 목적은 달성했다.&lt;/p&gt;

&lt;p&gt; 그런데 약 2주 뒤 C사에서 탈락 메일이 또 왔다! 팀별 재고려 대상이라 한 번 더 심사했다가 떨어졌다고 한다. 팀별 재고려 대상까지 갔다는 거에 기뻐해야 할 지, 같은 탈락 메일 두 번 받은 거에 마음 아파 해야할지..&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>HTTP 1 -  HTTP 개관</title>
   <link href="http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C1/"/>
   <updated>2020-03-03T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/study/http%20the%20definitive%20guide/Http완벽가이드1</id>
   <content type="html">
&lt;p&gt;&lt;strong&gt;본 포스팅의 첫번째 목적은 제가 학습한 것을 스스로 정리해보며 정리하는 것&lt;/strong&gt;입니다. 따라서 책의 내용을 오해하고 정리했을 소지가 있으니 &lt;strong&gt;제 포스팅에 너무 의존하진 말아주세요.&lt;/strong&gt;(훗날 자신있게 제 포스팅에 의존해 달라고 할 수 있는 날이 왔으면 좋겠습니다!) 내용에 대한 지적은 언제나 환영입니다.&lt;/p&gt;

&lt;h3 id=&quot;들어가며&quot;&gt;들어가며&lt;/h3&gt;

&lt;hr /&gt;
&lt;p&gt;본 장에선 아래와 같은  HTTP와 연관된 대략적인 개념들을 살펴봅니다. &lt;strong&gt;각 개념들은 이후 장들에서 더 자세히 알아볼 것입니다.&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;HTTP: 인터넷의 멀티미디어 배달부&lt;/li&gt;
  &lt;li&gt;웹 클라이언트와 서버&lt;/li&gt;
  &lt;li&gt;리소스&lt;/li&gt;
  &lt;li&gt;트랜잭션&lt;/li&gt;
  &lt;li&gt;메시지&lt;/li&gt;
  &lt;li&gt;TCP 커넥션&lt;/li&gt;
  &lt;li&gt;프로토콜 버전&lt;/li&gt;
  &lt;li&gt;웹의 구성요소&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;11-http--인터넷의-멀티미디어-배달부&quot;&gt;1.1. HTTP : 인터넷의 멀티미디어 배달부&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;본 책은 HTTP에 대한 여정을 시작하는 첫 장, 첫 절에서 HTTP를 &lt;strong&gt;인터넷의 멀티미디어 배달부&lt;/strong&gt;‘라고 표현하고 있습니다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;인터넷 : 기기와 운영체제를 가리지 않는다.&lt;/li&gt;
  &lt;li&gt;멀티미디어 : 텍스트, 이미지, 영상 등 다양한 형식의 데이터를 다룬다.&lt;/li&gt;
  &lt;li&gt;배달부 : 클라이언트에서 서버로, 서버에서 서버로, 서버에서 클라이언트로 데이터를 전송해준다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 의미로 HTTP를 압축적으로 표현한 것 같습니다.&lt;/p&gt;

&lt;p&gt;HTTP는 신뢰성 있는 데이터 전송 프로토콜(뒤에서 살펴볼 TCP/IP)을 사용하기 때문에 전송중에 데이터가 꼬이거나 손상될 걱정이 없습니다. 개발자의 입장에선 네트워크에 관한 문제는 제쳐두고 어플리케이션 개발에 집중할 수 있습니다.&lt;/p&gt;

&lt;h3 id=&quot;12-웹-클라이언트와-서버&quot;&gt;1.2. 웹 클라이언트와 서버&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;웹 서버 : 데이터를 저장하며, HTTP 클라이언트가 요청한 데이터를 제공한다. HTTP서버 라고도 부른다.&lt;/p&gt;

&lt;p&gt;웹 클라이언트 : 사용자를 대신해 HTTP 요청을 보내줌준다. 매일 사용하는 웹 브라우저들이 웹 클라이언트 중 하나라고 부를 수 있다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;웹 브라우저에서 https://www.naver.com/index.html 를 입력하면 브라우저는 HTTP 요청 객체를 www.naver.com 로 보낸다. 요청을 받은 서버는 서버에서 /index.html에 해당하는 &lt;strong&gt;컨텐츠&lt;/strong&gt;를 찾고 성공했다면 웹 브라우저로 응답 HTTP 객체를 보낸다. 응답을 받은 웹 브라우저는 응답 컨텐츠를 웹 브라우저에 띄워준다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;요망&lt;/p&gt;

&lt;h3 id=&quot;13-리소스&quot;&gt;1.3. 리소스&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;본 책에서 데이터, 리소스, 컨텐츠와 같이 유사한 개념이 나옵니다. 책에서 따로 각각을 비교하며 명확히 정의하진 않았지만 데이터와 리소스의 관계는 ‘데이터⊂리소스’ 인것 같고 컨텐츠는 리소스를 가공해 얻어지고 사용자가 접하게 되는 것이라고 이해하고 있습니다.(‘웹 리소스는 웹 콘텐츠의 원천이다.’)&lt;/p&gt;

&lt;p&gt;웹에서의 가장 간단한 리소스는 정적 파일입니다. 웹 서버에 저장된 텍스트파일, 사진, 동영상, html 파일등이 될 수 있습니다.&lt;/p&gt;

&lt;p&gt;리소스는 항상 정적인 것은 아닙니다. 리소스는 동적으로 컨텐츠를 만드는 프로그램을 뜻할 수도 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;131-미디어-타입&quot;&gt;1.3.1. 미디어 타입&lt;/h4&gt;
&lt;p&gt;본 포스팅의 제일 처음에서 HTTP는 ‘인터넷의 &lt;strong&gt;멀티미디어&lt;/strong&gt; 배달부’라고 했습니다. 인터넷은 multi 미디어라는 말 처럼 수천 가지 데이터 타입을 다룹니다.&lt;/p&gt;

&lt;p&gt;그리고 HTTP 프로토콜에선 이 수천 가지 데이터 타입을 다루기 위해 &lt;strong&gt;HTTP가 전송하는 데이터에 MIME(Multipurpose Internet Mail Extension) 타입이라는 데이터 포맷 라벨을 붙입니다.&lt;/strong&gt;  지금 HTTP객체가 전송중인 데이터가 ‘어떤 타입의 데이터다’ 라는 것을 말해주는 것이죠.&lt;/p&gt;

&lt;p&gt;(MIME 타입은 전자메일 시스템에서 처음 사용한 데이터 타입 분류인데 메일에서 잘 작동하여 HTTP에서도 채택해 사용 중입니다.)&lt;/p&gt;

&lt;p&gt;MIME 타입은 ‘주타입/부타입’ 으로 이루어진 문자열 라벨입니다. html의 &amp;lt;form&amp;gt;태그에서 봤을법한 text/html, text/plain, image/jpeg, image/gif 같은 것들입니다.&lt;/p&gt;

&lt;p&gt;수천 가지의 데이터 타입을 다루는 만큼 MIME 타입을 상세히 열거하면 엄청나게 많습니다. 아래 링크에서 MIME 타입의 모든 목록을 볼 수 있습니다.
https://www.iana.org/assignments/media-types/media-types.xhtml&lt;/p&gt;

&lt;h4 id=&quot;132-uriuniform-resource-identifier&quot;&gt;1.3.2. URI(Uniform Resource Identifier)&lt;/h4&gt;
&lt;h4 id=&quot;133-urluniform-resource-locator&quot;&gt;1.3.3. URL(Uniform Resource Locator)&lt;/h4&gt;
&lt;h4 id=&quot;134-urnuniform-resource-name&quot;&gt;1.3.4. URN(Uniform Resource Name)&lt;/h4&gt;
&lt;p&gt;위 세개의 절은 한 번에 설명을 해야할 것 같습니다. 우선 세 개념의 관계는 아래 과 같습니다.&lt;/p&gt;

&lt;p&gt;요망&lt;/p&gt;

&lt;p&gt;앞 절에서 웹 서버는 데이터(리소스)를 저장하고 있다고 했습니다. 리소스들엔 각자의 이름(파일명)이 있겠죠. URI는 말 그대로 Resource를 Identify하는 역할을 합니다. http://www.naver.com/index.html 에서 본다면 www.naver.com 서버에서 index.html을 식별하도록 지정하는 것이죠.&lt;/p&gt;

&lt;p&gt;이 지정하는 방식이 URL과 URN으로 나뉩니다.&lt;/p&gt;

&lt;p&gt;URL은 우리가 쉽게 접한 형태입니다. 방금전 예시의  http://www.naver.com/index.html 도 쉽게 접할 수 있는 URL 형태의 URI였습니다.&lt;/p&gt;

&lt;p&gt;URL은 ‘스킴+ 서버 주소+ 리소스’ 로 나타내며 리소스의 위치를 지정해 리소스를 식별합니다.&lt;/p&gt;

&lt;p&gt;스킴 : 리소스에 접근하기 위해 사용되는 프로토콜(ex) http://, ftp://, mailto://)
서버주소 : 서버의 주소. IP+port(127.0.0.1:4000) 혹은 Domain ( www.naver.com )
리소스 : /index.html, /image/error.png ..&lt;/p&gt;

&lt;p&gt;URN은 리소스의 위치가 아닌 이름으로 리소스를 지정합니다. 아래는 인터넷 표준문서 ‘RFC 2141’을 지정하는 URN입니다.&lt;/p&gt;

&lt;p&gt;urn:ietf:rfc:2141&lt;/p&gt;

&lt;p&gt;URN은 URL의 단점을 보완하기 위해 나왔으나 아직 실험 단계에 있습니다.&lt;/p&gt;

&lt;h3 id=&quot;14-트랜잭션&quot;&gt;1.4. 트랜잭션&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;트랜잭션이란?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Transaction processing : information processing that is divided into individual, indivisible operations
Database transaction : a unit of work performed within a database management system
Atomic transaction : a series of database operations such that either all occur, or nothing occurs
Financial transaction : an agreement, communication, or movement carried out between a buyer and a seller to exchange an asset for payment 
https://en.wikipedia.org/wiki/Transaction&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위키에서 찾아본 다양한 트랜잭션에 대한 정의입니다. 공통적으로 보면 ‘분리할 수 없는 하나의 업무 단위’ 라고 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;HTTP에서 트랜잭션은 ‘요청명령+응답결과’ 입니다. 요청이 있으면 요청에 맞는 데이터를 돌려주든, 에러를 뱉든 응답결과가 있어야 HTTP 통신이 이루어졌다고 할 수 있습니다.&lt;/p&gt;

&lt;h4 id=&quot;141-메서드&quot;&gt;1.4.1. 메서드&lt;/h4&gt;
&lt;p&gt;모든 HTTP 요청은 하나의 메서드를 갖습니다. 메서드는 클라이언트가 서버에게 ‘어떤 동작이 취해져야 하는지’ 말해줍니다. 아래는 웹에서 많이 사용되는 5개의 메서드입니다.
| HTTP메서드 | 설명 |
|:—:|:—:|
|GET|서버에서 클라이언트로 지정한 리소스를 보내라.|
|PUT|클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라|
|DELETE|지정한 리소스를 서버에서 삭제하라.|
|POST|클라이언트 데이터를 서버 게이트웨이 어플리케이션으로 보내라.|
|HEAD|지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.|&lt;/p&gt;

&lt;h4 id=&quot;142-상태-코드&quot;&gt;1.4.2. 상태 코드&lt;/h4&gt;
&lt;p&gt;모든 HTTP 응답은 하나의 상태코드를 갖습니다. 상태코드는 요청의 성공/실패 여부 등을 알려주는 코드입니다. 아래는 웹에서 많이 볼 수 있는 몇 가지 상태코드 입니다.
|HTTP 상태코드|설명|
|:—:|:—:|
|200|응답 성공. 문서가 올바르게 반환됨.|
|302|다시 보내라. 다른 곳에서 리소스를 가져가라.|
|404|리소스를 찾을 수 없다.|&lt;/p&gt;

&lt;h4 id=&quot;143-웹페이지는-여러-객체로-이루어질-수-있다&quot;&gt;1.4.3. 웹페이지는 여러 객체로 이루어질 수 있다.&lt;/h4&gt;
&lt;p&gt;http://www.naver.com/index.html 를 웹 브라우저 주소창에 쳐보자. 하나의 화면이 나타난다. 그렇다면 한 웹 페이지는 하나의 HTTP 요청, 객체로 이루어지는 것일까? 아니다.&lt;/p&gt;

&lt;p&gt;하나의 웹페이지를 만들기 위해선 여러 HTTP 객체가 이용될 수 있다. 우리가 웹 브라우저를 통해 하나의 URL을 요청하면 웹 브라우저는 기본적으로 html 뼈대를 받아온다. 브라우저가 받아온 html을 읽으면서 html을 보여주기 위한 이미지, 자바 애플릿 등을 다시 요청해 가져온다.&lt;/p&gt;

&lt;p&gt;이 요청들은 처음 요청한 URL과 다른 서버에서 가져올 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;15-메시지&quot;&gt;1.5. 메시지&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;HTTP 메시지는 HTTP 요청과 응답을 표현해주는 단순한 문자열이다. 요청메세지와 응답메세지 모두 3부분(start line, header, body)로 구분됩니다. header는 빈 문자열로 끝납니다.&lt;/p&gt;

&lt;p&gt;아래는 요청 메세지의 예시입니다.&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;GET / test/hi-there.txt HTTP/1.0&lt;/p&gt;

  &lt;p&gt;Accept: text/*&lt;br /&gt;
Accept-Language: en, fr&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;아래는 응답 메세지의 예시입니다.&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;HTTP/1.0 200 OK&lt;/p&gt;

  &lt;p&gt;Content-type: text/plain&lt;br /&gt;
Content-length: 19
　&lt;/p&gt;

  &lt;p&gt;Hi! I’m a message!&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;자세한 사항은 2장에서 이어집니다.&lt;/p&gt;

&lt;h3 id=&quot;16-tcp-커넥션&quot;&gt;1.6. TCP 커넥션&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;앞선 1.1. 에서 HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용한다고 했습니다. TCP(Transmission Control Protocol) 커넥션이 바로 그 프로토콜입니다. TCP 커넥션에 관해선 4장에서 더 자세히 배울 예정입니다.&lt;/p&gt;

&lt;h4 id=&quot;161-tcpip&quot;&gt;1.6.1. TCP/IP&lt;/h4&gt;
&lt;p&gt;이제 개발을 막 시작했을 무렵 정보처리기사 자격증을 공부했습니다. 그때 OSI 7계층이란 걸 배웠습니다. 아래와 같은 것이죠. 아래 사진 출처 포스트에 OSI 7계층에 대해 알기 쉽게 나와 있으니 참고하셔도 좋을 것 같습니다. (참고 - https://brunch.co.kr/@wangho/6  서킷통신 vs 패킷통신)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/image/Http The Definitive Guide/iso7layer.png&quot; alt=&quot;iso7layer.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;출처 : https://medium.com/harrythegreat/osi%EA%B3%84%EC%B8%B5-tcp-ip-%EB%AA%A8%EB%8D%B8-%EC%89%BD%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-f308b1115359&lt;/p&gt;

&lt;p&gt;출처의 포스트에서&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;각 계층은 다른 계층에 대해 알 필요가 없이 자신의 계층에서 캡슐화와 은닉(숨기기)가 가능&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;라고 표현했습니다. 책에서 “HTTP는 신뢰성있는 데이터 전송 프로토콜을 사용하기 때문에 데이터가 전송중에 꼬이거나 손상될 걱정 할 필요 없다.”라고 한 것과 일치합니다. 데이터의 신뢰성문제는 TCP 프로토콜이 보장한다는 것이죠.&lt;/p&gt;

&lt;p&gt;HTTP는 OSI 7계층에서 어플리케이션 계층에 속합니다. 어플리케이션 안에서 일어나는 일에만 관여하고 어플리케이션에서 어플리케이션으로(클라이언트 &amp;lt;-&amp;gt; 서버) 데이터가 전달되는 과정엔 HTTP는 손을 떼고 TCP/IP 프로토콜이 담당하는 것이죠.&lt;/p&gt;

&lt;p&gt;TCP/IP에 대한 세부 사항은 4장에서 자세히 다룰 예정입니다. 1장에서의 TCP/IP는 HTTP통신을 도와 데이터를 전송해주는 프로토콜이라고 생각하면 좋을것 같습니다.&lt;/p&gt;

&lt;h4 id=&quot;162-접속-ip주소-포트번호&quot;&gt;1.6.2. 접속, IP주소, 포트번호&lt;/h4&gt;
&lt;p&gt;클라이언트와 서버가 데이터를 주고 받기 위해선 TCP/IP 커넥션을 맺어야 합니다. 대화를 전달하기 위해 전화를 거는 것과 비슷한 개념이라고 생각할 수 있습니다.&lt;/p&gt;

&lt;p&gt;전화를 걸기 위해선 전화번호를 알아야 합니다. 마찬가지로  TCP/IP 커넥션을 맺기 위해 알아야 할 것들이 있는데 그게 바로 IP 주소와 포트번호입니다. IP주소가 컴퓨터를 찾는다면 포트번호는 그 컴퓨터 내에 어떤 프로그램인지를 찾아간다고 보면 좋습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;http://207.200.83.29:80/index.html
http://www.netscape.com:80/index.html
http://www.netscape.com/index.html&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;세 가지 URL이 나와있는데 이중 첫 번째 URL에서 ‘207.200.83.29’가 IP, ‘80’이 포트번호 입니다.
 두 번째 URL에선 숫자로 된 IP가 없고 ‘www.netsacpe.com’이라는 우리에게 친숙한 알파벳의 주소가 있습니다. 이를 도메인 네임, 호스트 명 이라고 부릅니다. 숫자로 이루어진 IP를 직관적으로 기억하기 위해 사용되는 별명과 같은 것인데 DNS(Domain Name Service)라는 장치를 통해 IP로 변환됩니다.
 세 번째 URL은 포트번호가 없습니다. 포트번호가 없다면 기본 포트번호인 80이 사용되었다고 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;다음은 클라이언트와 서버가 데이터를 주고받는 간단한 개요입니다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;사용자가 입력한 URL에서 웹 브라우저가 호스트 명을 추출한다.&lt;/li&gt;
    &lt;li&gt;웹 브라우저가 네임서버(앞서말한 DNS를 제공하는 서버)를 통해 호스트명을 IP로 변환한다.&lt;/li&gt;
    &lt;li&gt;웹 브라우저가 URL에 포트번호가 있다면 추출한다.&lt;/li&gt;
    &lt;li&gt;웹 브라우저와 웹 서버가 TCP 커넥션을 맺는다.&lt;/li&gt;
    &lt;li&gt;웹 브라우저가 웹 서버에게 HTTP 요청을 보낸다.&lt;/li&gt;
    &lt;li&gt;웹 서버가 웹 브라우저에게 HTTP 응답을 보낸다.&lt;/li&gt;
    &lt;li&gt;TCP 커넥션이 닫히면 웹 브라우저는 받은 데이터를 파싱해 사용자에게 보여준다.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;우리가 편하게 사용하는 브라우저가 엄청난 일을 해주고 있음을 다시 한 번 느낍니다.&lt;/p&gt;

&lt;h3 id=&quot;17-프로토콜-버전&quot;&gt;1.7. 프로토콜 버전&lt;/h3&gt;

&lt;hr /&gt;

&lt;blockquote&gt;
  &lt;p&gt;HTTP 0.9 : 1991년 개발. 초기 버전이며 굉장히 한정적인 기능을 갖고 있음.
HTTP 1.0 : 1996년 개발. 인터넷이 급성장 하던 시기에 만들어 졌기 때문에 급하게 여러 기능들을 붙여 깔끔하게 정의되지 않음.
HTTP 1.0 + : 1996년 개발. 1.0 버전에 좀 더 기능들을 추가, 확장 한 것.
HTTP 1.1 : 1997년 개발. 기능적인 확장보단 그동안 급하게 발전한 온 HTTP의 설계 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 집중함. **현재 대중적으로 쓰이는 HTTP 버전 **
HTTP 2.0 : 1.1 버전의 성능을 개선하기 위해 구글의 SPDY 프로토콜을 기반으로 설계가 진행중.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;쉽게 만날수 있는 버전은 1.1 버전이고 개발을 진행하다가 기존의 HTTP 지식으로 이해가 안되는 현상을 만날때 HTTP 버전을 한 번 확인해보면 좋을 것 같습니다.&lt;/p&gt;

&lt;p&gt;상세한 사항은 https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP 를 참고하시면 좋을 것 같습니다.&lt;/p&gt;

&lt;h3 id=&quot;18-웹의-구성요소&quot;&gt;1.8. 웹의 구성요소&lt;/h3&gt;

&lt;hr /&gt;

&lt;p&gt;웹이 작동하는데엔 많은 애플리케이션들이 관여합니다. 이번 절에선 프록시, 캐시, 게이트웨이, 터널, 에이전트에 대해 간략히 알아볼 것입니다. 물론 각 어플리케이션들은 각각의 장에서 자세히 알아볼 것입니다.&lt;/p&gt;

&lt;h4 id=&quot;181-프록시&quot;&gt;1.8.1. 프록시&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;프록시 : 클라이언트와 서버 사이에 위치한 HTTP 중개사&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;개인적으로 ‘프록시’라는 개념은 매번 들어도 친숙해지지 않았습니다. CS에서 사용되는 여러 개념들은 인터넷을 하다보면 어깨너머로 듣기 때문에 대략적인 개념을 유추할 수 있었는데 말이죠.&lt;/p&gt;

&lt;p&gt;프록시의 어원은 라틴어 procuratia라고 합니다.(https://www.hankookilbo.com/News/Read/201610111434651573)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;procuratia = 대신, 앞에서(pro) + 관여하다, 조심하다, 배려하다(curare)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;분쟁이 있을때 당사자가 직접 싸우는게 아니라 제 삼자를 내세워 싸우는걸 proxy war 라고  합니다.  비만도를 체질량 지수로 대신하고, 삶의 질을 GDP로 대신하는 것 같이 한 지수를 다른 지수로 표현하는 걸 통계학에서 proxy variable 이라고 합니다.&lt;/p&gt;

&lt;p&gt;이와 같은 맥락으로 CS에서 프록시는 클라이언트와 서버 사이에서 요청과 응답을 대신해서 주고 받는 역할을 합니다.&lt;/p&gt;

&lt;p&gt;주로 보안을 위해 많이 사용됩니다. 다운로드시 바이러스 검사를 한다던가, 성인 콘텐츠를 차단한다던가 하는 식입니다.&lt;/p&gt;

&lt;h4 id=&quot;182-캐시&quot;&gt;1.8.2. 캐시&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;캐시 : 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;cache는 원래 ‘은닉처’라는 뜻을 가지고 있습니다. 책에서도 HTTP ‘창고’라고 표현을 해두었네요.&lt;/p&gt;

&lt;p&gt;웹 캐시는 위에서 말한 프록시 서버중 하나입니다. 요청 사항을 보고 이미 일전에 여러번 수행했던 요청이라면 굳이 멀리 있는 요청 서버를 통해 결과를 가져오는게 아니라 가까이 있는 웹 캐시에서 결과를 받아 옵니다.&lt;/p&gt;

&lt;h4 id=&quot;183-게이트웨이&quot;&gt;1.8.3. 게이트웨이&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;게이트웨이 : 다른 애플리케이션과 연결된 특별한 웹 서버&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;게이트웨이는 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용됩니다. 게이트웨이는 자신이 리소스를 가지고 있는 진짜 서버처럼 행동하기 때문에 클라이언트의 입장에선 본인이 게이트웨이와 통신하는지, 게이트웨이를 통한 서버와 통신하는지 모릅니다.&lt;/p&gt;

&lt;p&gt;예를들어 파일전송만 담당하는 FTP(File Transfer Protocol) 서버가 있다면 HTTP 클라이언트와 직접 통신할 수 없습니다. 그래서 이를 중개하고 변환해 주는게 HTTP/FTP 게이트웨이 입니다.&lt;/p&gt;

&lt;h4 id=&quot;184-터널&quot;&gt;1.8.4. 터널&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;터널 : 단순히 HTTP 통신을 전달하기만 하는 특별한 프록시&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;터널은 두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해주는 프록시라고 합니다.&lt;/p&gt;

&lt;p&gt;대표적인 예로 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송해 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것을 예로 들 수 있다는데… 사실 이 책을 보며 이해가 안되는 첫 부분입니다. 나중에 보강 하도록 하겠습니다.&lt;/p&gt;

&lt;h4 id=&quot;185-에이전트&quot;&gt;1.8.5. 에이전트&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;에이전트 : 자동화된 HTTP 요청을 만드는 준지능적(semi-inteligent) 웹 클라이언트&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;앞서 HTTP의 구성요소들에 대해 간략히 알아봤습니다. start-line, header, body, 호스트명, IP주소, 포트번호 등… 하지만 우리가 실 생활에서 HTTP 통신을 할 땐 정말 간단하다. 웹 브라우저를 열고 www.naver.com 만 입력하면 됩니다.&lt;/p&gt;

&lt;p&gt;이렇게 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램을 통틀어 HTTP 에이전트라고 한다.&lt;/p&gt;

&lt;p&gt;웹 브라우저가 가장 대표적인 HTTP 에이전트이고, 개발할때 테스트 용으로 자주쓰는 postman 이라는 프로그램 역시 HTTP 에이전트라고 볼 수 있습니다.
 이렇게 사용자가 직접 URL을 입력하는 에이전트도 있고 웹 크롤러와 같이 완전 자동화 되어 지정된 HTTP 요청을 수행하는 것 역시 HTTP 에이전트입니다.&lt;/p&gt;

&lt;p&gt;### 마치며&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;이 포스팅이 첫 포스팅인데 만만하게만 봤던 포스팅이 생각보다 많이 어렵다는걸 느꼈습니다. 알고있다고 생각한 개념들을 다른 사람이 모두 볼 수 있는 곳에 올려놓기 위해 정리하다보니 내가 제대로 알고 있던게 아니구나라는걸 느끼게 됐습니다.&lt;/p&gt;

&lt;p&gt;시간도 생각보다 굉장히 많이 걸렸습니다.&lt;/p&gt;

&lt;p&gt;하지만 첫 포스팅이니 그럴 거라고 생각합니다. 앞으로 하나씩 새로 배우는 개념들, 알고 있었지만 다시 정리하는 개념들을 다른 사람에게 보여줄 수 있을 정도로 다듬으면 포스팅도 술술 되는 날이 오겠죠?&lt;/p&gt;

&lt;p&gt;이만 마칩니다.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>2020년 목표 및 방향</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/2020%EB%85%84-%EB%AA%A9%ED%91%9C-%EB%B0%8F-%EB%B0%A9%ED%96%A5/"/>
   <updated>2020-03-01T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/2020년 목표 및 방향</id>
   <content type="html">&lt;h2 id=&quot;2020년에는&quot;&gt;2020년에는…&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 새해가 시작한지 2달이 지났는데 이제서야 2020년의 목표를 다잡는 이유는… 퇴사를 했기 때문입니다! 전 직장이 생각했던것과 다른 점이 많아 일찍 나오게 됐고, 조용히 공부에 집중할 수 있는 시간이 주어졌습니다.&lt;/p&gt;

&lt;p&gt; 작년은 무지와 호기심의 조합으로 잡다하게 많은 기술을 사용 했습니다. html, css, js같은 웹의 기본 언어부터  학원에서 공부한 java, oracle, jsp, spring, 혼자 프로젝트하면서 써본 python, node js, mongodb, express, react+redux, 회사에서 처음배워본 C#+winform, 전자정부프레임워크까지 뭔가 넓고 얕게 ‘How to use’ 위주로 공부를 한 것 같습니다.(그나마 다행인건 ‘How to use’는 무난하게 하는 것 같습니다.)&lt;/p&gt;

&lt;p&gt; 하지만 몇몇 에러를 접할때 마다 더 깊은 지식이 필요함을 느꼈습니다. 그래서 올해는, 위의 기술스택 밖으로 나가지 않고 더 깊게 내려가볼 생각입니다.(다음 직장에서 ) ‘How it works’를 이해해야 더 실력있는 개발자가 되지 않을까합니다.&lt;/p&gt;

&lt;p&gt; 잠깐 생각해본 공부할 것들은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; 지금까지 썼던 기술들의 동작 방식과 장단점 파악하기&lt;/li&gt;
  &lt;li&gt; Http 통신의 이론적인 기초를 알아보기&lt;/li&gt;
  &lt;li&gt; C, C++ 언매니지드언어를 배워, 하드웨어 수준에서 어떤 코드 및 프로그램이 더 좋은 프로그램인지 알아보기&lt;/li&gt;
  &lt;li&gt; 코딩테스트도 준비할 겸 알고리즘 연습하기&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>github 블로그를 시작하며</title>
   <link href="http://localhost:4000/posts/daily%20thoughts/%EB%B8%94%EB%A1%9C%EA%B7%B8%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%A9%B0/"/>
   <updated>2020-02-28T00:00:00+09:00</updated>
   <id>http://localhost:4000/posts/daily%20thoughts/블로그를 시작하며</id>
   <content type="html">&lt;h2 id=&quot;정말-너무-좋은-개발자-생태계&quot;&gt;정말 너무 좋은 개발자 생태계&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt; 개발을 시작하고 난 뒤 느낀 충격적이었던 것 중 하나는 개발자들의 공유 문화였습니다. 다른 분야에선 보통 자기 지식은 자기만 고이 간직하려는 경향이 강한데, 개발자들은 서로 못알려줘서 안달난것 같은 그런 느낌이었습니다. Stackoverflow는 말할 것도 없고, 한글로 된 블로그들에도 정보들이 정말 많았습니다.&lt;/p&gt;

&lt;p&gt; 개발하면서 정말 많은 블로그들을 참고했습니다. 빠르게 코드만 보고 나온 블로그부터 북마크 해놓고 몇번이고 다시 본 블로그까지 아마 블로그, 포스팅이 없었으면 지금 수준에 1/4이나 되었을까 싶습니다. (블로그들이 많지 않던 시절에 개발하신 선배님들 존경… :flushed:)&lt;/p&gt;

&lt;p&gt; 저도 이런 생태계에 보탬이 되고 싶었습니다. 물론 아직 제가 생산할 포스팅들이 깊은 수준은 아니겠지만 그래도 제가 다른 블로그에서 코드나 설명 한줄 슥 보고 나온것 처럼 다른 사람들도 제 블로그에서 짧막한 지식이라도 슥 얻어 갈 수 있으면 좋겠습니다.&lt;/p&gt;

</content>
 </entry>
 

</feed>
